define("metaserver/static/js/flows/automations/auto_audio",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/i18n","metaserver/static/js/flows/constants","typescript/component_libraries/flows/src/components/automation-preview/index","typescript/component_libraries/flows/src/components/file-type-controls/index"],(function(e,t,a,n,s,o,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoAudioUiConfig=void 0,n=a.__importDefault(n);t.AutoAudioUiConfig=e=>({action:{description:i.intl.formatMessage({id:"tgJ2Cm",defaultMessage:"Save as"}),rightRailDescription:i.intl.formatMessage({id:"ci35Iy",defaultMessage:"Save as audio"}),icon:n.default.createElement(s.UIIcon,{src:o.AudioLine}),tooltip:i.intl.formatMessage({id:"Zlgoz2",defaultMessage:"Are saved as audio"}),defaultActionData:{format:"mp3",input_filetypes:[]},renderAdditionalControls:({data:e,onDataChange:t,onDataError:a})=>n.default.createElement(c.OutputTypeControls,{allOutputTypes:r.SUPPORTED_AUDIO_OUTPUT_CONTAINERS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:(n,s)=>{t(Object.assign(Object.assign({},e),{format:n})),s&&a(s)}}),renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:a})=>n.default.createElement(c.InputTypeControls,{allInputTypes:r.SUPPORTED_AUDIO_INPUT_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:(n,s)=>{t(Object.assign(Object.assign({},e),{input_filetypes:n})),s&&a(s)}}),allowApplyToExistingFiles:e=>"add"===e},shortLabel:i.intl.formatMessage({id:"HYJJOF",defaultMessage:"audio"}),title:i.intl.formatMessage({id:"1+92Ih",defaultMessage:"Choose a file format to convert audio files to"}),trigger:"folder",type:"audio_conversion",notifications:{inProgress:(e,t)=>i.intl.formatMessage({id:"O3EMMe",defaultMessage:"{numTotal, plural, one {Automatically saving your file as audio...} other {Automatically saving your files as audio...}}"},{numTotal:t}),success:e=>i.intl.formatMessage({id:"z22mBM",defaultMessage:"{numSucceeded, plural, one {# file automatically saved as an audio file} other {# files automatically saved as audio files}}."},{numSucceeded:e}),fail:e=>i.intl.formatMessage({id:"HmFt9a",defaultMessage:"{numFailed, plural, one {# file couldn't be automatically saved as an audio file} other {# files couldn't be automatically saved as audio files}}."},{numFailed:e}),allowUndo:!0},renderTemplatePreview:()=>n.default.createElement(d,null)});const d=()=>{const{attention:e,alert:t}=(0,l.useConversionActionI18nStyling)(),a=(e,t)=>i.intl.formatMessage({id:"MO5GEu",defaultMessage:"MyAudio.<highlight>{ext}</highlight>"},{ext:t,highlight:e});return n.default.createElement(l.ConversionActionPreviewTemplate,{icon:o.AudioLine,inputExt:"wav",inputLabel:n.default.createElement(l.LabelChip,{label:a(e,"wav"),iconLeft:n.default.createElement(s.UIIcon,{src:o.AudioLine})}),outputExt:"mp3",outputLabel:n.default.createElement(l.LabelChip,{label:a(t,"mp3"),iconLeft:n.default.createElement(s.UIIcon,{src:o.AudioLine})}),description:i.intl.formatMessage({id:"fH2CH1",defaultMessage:"For example, save copies of wav files as mp3s."})})};d.displayName="AutoAudioPreview"})),define("metaserver/static/js/flows/automations/auto_image",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/i18n","metaserver/static/js/flows/constants","typescript/component_libraries/flows/src/components/automation-preview/index","typescript/component_libraries/flows/src/components/file-type-controls/index"],(function(e,t,a,n,s,o,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoImageUiConfig=void 0,n=a.__importDefault(n);t.AutoImageUiConfig=e=>({action:{description:i.intl.formatMessage({id:"Fhu2DC",defaultMessage:"Save as"}),rightRailDescription:i.intl.formatMessage({id:"FtUJcR",defaultMessage:"Save as images"}),icon:n.default.createElement(s.UIIcon,{src:o.ImageLine}),tooltip:i.intl.formatMessage({id:"8r69yc",defaultMessage:"Are saved as images"}),defaultActionData:{format:"png",input_filetypes:[]},renderAdditionalControls:({data:e,onDataChange:t,onDataError:a})=>n.default.createElement(c.OutputTypeControls,{allOutputTypes:r.SUPPORTED_IMAGE_OUTPUT_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:(n,s)=>{t(Object.assign(Object.assign({},e),{format:n})),s&&a(s)}}),renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:a})=>n.default.createElement(c.InputTypeControls,{allInputTypes:r.SUPPORTED_DOC_INPUT_EXTENSIONS.concat(r.SUPPORTED_IMAGE_INPUT_EXTENSIONS),selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:(n,s)=>{t(Object.assign(Object.assign({},e),{input_filetypes:n})),s&&a(s)}}),allowApplyToExistingFiles:e=>"add"===e},shortLabel:i.intl.formatMessage({id:"CpxBZu",defaultMessage:"image"}),title:i.intl.formatMessage({id:"GBDUOC",defaultMessage:"Choose an image format to convert files to"}),trigger:"folder",type:"image_conversion",notifications:{inProgress:(e,t)=>i.intl.formatMessage({id:"iGA+sp",defaultMessage:"{numTotal, plural, one {Automatically saving your file as an image...} other {Automatically saving your files as images...}}"},{numTotal:t}),success:e=>i.intl.formatMessage({id:"Umhvnj",defaultMessage:"{numSucceeded, plural, one {# file automatically saved as an image} other {# files automatically saved as images}}."},{numSucceeded:e}),fail:e=>i.intl.formatMessage({id:"opwGp2",defaultMessage:"{numFailed, plural, one {# file couldn't automatically be saved as an image} other {# files couldn't automatically be saved as images}}."},{numFailed:e}),allowUndo:!0},renderTemplatePreview:()=>n.default.createElement(d,null)});const d=()=>{const{attention:e,alert:t}=(0,l.useConversionActionI18nStyling)(),a=(e,t)=>i.intl.formatMessage({id:"ctmHNe",defaultMessage:"MyImage.<highlight>{ext}</highlight>"},{ext:t,highlight:e});return n.default.createElement(l.ConversionActionPreviewTemplate,{icon:o.ImageLine,inputExt:"png",inputLabel:n.default.createElement(l.LabelChip,{label:a(e,"png"),iconLeft:n.default.createElement(s.UIIcon,{src:o.ImageLine})}),outputExt:"jpg",outputLabel:n.default.createElement(l.LabelChip,{label:a(t,"jpg"),iconLeft:n.default.createElement(s.UIIcon,{src:o.ImageLine})}),description:i.intl.formatMessage({id:"fSTowW",defaultMessage:"For example, save copies of png files as jpgs."})})};d.displayName="AutoImagePreview"})),define("metaserver/static/js/flows/automations/auto_naming_conventions",["require","exports","tslib","react","@dropbox/dig-content-icons","dig-components/icons","dig-components/icons/src","metaserver/static/js/clean/ui/hoc","metaserver/static/js/core/i18n","metaserver/static/js/naming_conventions/components/naming_conventions_view","metaserver/static/js/naming_conventions/components/nc_consistent_separator_selection_button","metaserver/static/js/naming_conventions/components/nc_date_selection_button","metaserver/static/js/naming_conventions/components/nc_generic_live_preview","metaserver/static/js/naming_conventions/components/nc_ml_toggle","metaserver/static/js/naming_conventions/components/nc_parent_folder_name_selection_button","metaserver/static/js/naming_conventions/components/nc_title_casing_selection_button","metaserver/static/js/naming_conventions/generic_live_preview","metaserver/static/js/naming_conventions/types","metaserver/static/js/naming_conventions/utils","typescript/component_libraries/flows/src/components/automation-preview/index"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u,g,f,p,_,v,y,M){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoNamingConventionsControls2=t.AutoNamingConventionsControls=t.AutoNamingConventionsUiConfig=void 0,n=a.__importStar(n);function S(e){return e.includes("nc_ml_filename_enabled")}function E(e){return e.includes("nc_metadata_enabled")}function T(e){return e.includes("naming_conventions_renaming_bar_existing_nc")}t.AutoNamingConventionsUiConfig=e=>({action:{description:l.intl.formatMessage({id:"rT2iTB",defaultMessage:"Rename to match the rules below"}),rightRailDescription:l.intl.formatMessage({id:"It11QI",defaultMessage:"Rename"}),icon:n.default.createElement(o.UIIcon,{src:i.CursorLine}),tooltip:l.intl.formatMessage({id:"3pMd5a",defaultMessage:"Are renamed"}),defaultActionData:{args_json:JSON.stringify(y.NamingConventionConversions.NamingConventionToApiV2(Object.assign(Object.assign({},v.defaultNamingConventionParameters),{mlFilenameParsing:!0})))},renderAdditionalControls:e=>e.actionExperiments.includes("nc_positioning_enabled")?n.default.createElement(t.AutoNamingConventionsControls2,Object.assign({},e)):n.default.createElement(t.AutoNamingConventionsControls,Object.assign({},e)),allowApplyToExistingFiles:e=>"add"===e||"edit"===e},shortLabel:l.intl.formatMessage({id:"355s7s",defaultMessage:"rename"}),title:l.intl.formatMessage({id:"vOITgb",defaultMessage:"Set a rule that renames files"}),trigger:"folder",type:"naming_conventions",notifications:{inProgress:()=>l.intl.formatMessage({id:"GcgPQq",defaultMessage:"Automatically renaming your files..."}),success:e=>l.intl.formatMessage({id:"xsD6gG",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically renamed."},{numSucceeded:e}),fail:e=>l.intl.formatMessage({id:"8mMlk3",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically renamed."},{numFailed:e}),allowUndo:!0},renderTemplatePreview:()=>n.default.createElement(C,null)});const h=({data:e,onDataChange:t,onDataError:a,actionExperiments:s})=>{const[o,i]=n.default.useState(v.defaultNamingConventionParameters),[r,l]=n.default.useState(""),[c,M]=n.default.useState(!1);(0,n.useEffect)(()=>{var t;let n={};if(null==e?void 0:e.args_json)try{n=JSON.parse(e.args_json)}catch(e){}const s=y.NamingConventionConversions.NamingConventionFromApiV2(n);0===(null===(t=null==s?void 0:s.selectedRules)||void 0===t?void 0:t.length)&&a(),i(e=>Object.assign(Object.assign({},e),s)),M(!0)},[e,a]),(0,n.useEffect)(()=>{l((0,_.getGenericLivePreviewText)(o))},[o]),(0,n.useEffect)(()=>{S(s)||E(Object.assign(Object.assign({},o),{mlFilenameParsing:!1}))},[c]);const E=e=>{const a=y.NamingConventionConversions.NamingConventionToApiV2(e);t({args_json:JSON.stringify(a)})},T=e=>Array.from(new Set([...o.selectedRules,e])),h=e=>{const t=e.target.value,a=[...o.selectedRules],n=a.indexOf(t);n>=0?a.splice(n,1):a.push(t);let s=o.mlFilenameParsing;t===v.NamingConventionType.upload_date&&(s=!b(v.NamingConventionType.upload_date)),E(Object.assign(Object.assign({},o),{selectedRules:a,mlFilenameParsing:s}))},b=e=>o.selectedRules.includes(e);return n.default.createElement("div",null,n.default.createElement("div",null,n.default.createElement(m.NamingConventionsDateSelectionButton,{isSelected:b(v.NamingConventionType.upload_date),onSelect:h,dateFormatSelection:o.dateFormatSelection,setDateFormatSelection:e=>{E(Object.assign(Object.assign({},o),{selectedRules:T(v.NamingConventionType.upload_date),dateFormatSelection:e,mlFilenameParsing:S(s)&&(!b(v.NamingConventionType.upload_date)||o.mlFilenameParsing)}))}}),n.default.createElement(p.NamingConventionsTitleCasingSelectionButton,{isSelected:b(v.NamingConventionType.capitalize_all_initials),onSelect:h}),n.default.createElement(d.NamingConventionsConsistentSeparatorSelectionButton,{isSelected:b(v.NamingConventionType.consistent_separators),onSelect:h,separatorSelection:o.consistentSeparatorSelection,setSeparatorSelection:e=>{E(Object.assign(Object.assign({},o),{selectedRules:T(v.NamingConventionType.consistent_separators),consistentSeparatorSelection:e}))},useSelectComponent:!1}),n.default.createElement(f.NamingConventionsParentFolderNameSelectionButton,{isSelected:b(v.NamingConventionType.parent_folder_name),onSelect:h})),n.default.createElement(u.NamingConventionsGenericLivePreview,{previewText:r}),S(s)?n.default.createElement(g.NamingConventionsMLToggle,{isToggled:o.mlFilenameParsing,onSelect:e=>{const t=e.target.checked;E(Object.assign(Object.assign({},o),{mlFilenameParsing:t}))},value:v.NamingConventionML,disabled:!b(v.NamingConventionType.upload_date)}):null)};h.displayName="UnstyledAutoNamingConventionsControls";const b=({data:e,dataError:t,onDataChange:a,onDataError:s,actionExperiments:o})=>{const[i,r]=n.default.useState(v.ConsistentSeparatorSelection.spaces),[l,d]=n.default.useState(-1),m=n.default.useCallback(()=>{let t={component_list:[]};if(null==e?void 0:e.args_json)try{t=JSON.parse(e.args_json)}catch(e){}if(t.component_list&&t.component_list.length>0){const e=y.NamingConventionConversions.NamingConventionsParametersFromRuleStruct(t,v.NamingConventionOrigin.from_automation);return e.data=Object.assign(Object.assign({},e.data),{consistentSeparatorSelection:i}),e.componentList.includes(v.NamingConventionType.original_snippet)||(e.componentList.unshift(v.NamingConventionType.original_snippet),e.data.dateInfo.unshift({mlFilenameParsing:!1,dateFormatSelection:v.DateFormatSelection.yyyy_mm_dd}),e.data.keywords.unshift("")),-1!==l&&(e.componentList.splice(l,0,v.NamingConventionType.none),e.data.dateInfo.splice(l,0,{mlFilenameParsing:!1,dateFormatSelection:v.DateFormatSelection.yyyy_mm_dd}),e.data.keywords.splice(l,0,"")),e}return{componentList:[v.NamingConventionType.none,v.NamingConventionType.original_snippet],capitalizeAllInitials:!1,changeAllSeparators:!1,renamingBarEnabled:!0,data:{dateInfo:[{mlFilenameParsing:!1,dateFormatSelection:v.DateFormatSelection.yyyy_mm_dd},{mlFilenameParsing:!1,dateFormatSelection:v.DateFormatSelection.yyyy_mm_dd}],consistentSeparatorSelection:v.ConsistentSeparatorSelection.spaces,keywords:["",""]},subfolderOption:v.FolderScopeOptions.THIS_FOLDER_ONLY}},[e,l,i]),[u,g]=n.default.useState(m());(0,n.useEffect)(()=>{const e=m();g(t=>Object.assign(Object.assign({},t),e))},[e,s]);return n.default.createElement("div",null,n.default.createElement(c.NamingConventionsView,{namingConventionsParameters:u,onNamingConventionsParametersChange:e=>{(e=>{const t=y.NamingConventionConversions.NamingConventionsParametersToRuleStruct(e);r(e.data.consistentSeparatorSelection),d(e.componentList.indexOf(v.NamingConventionType.none)),a({args_json:JSON.stringify(t)})})(e)},experiments:{expNamingConventionsMLFilename:S(o),expNamingConventionsMetadata:E(o),expNamingConventionsRenamingBarExistingNC:T(o)},onErrorVisible:e=>{const t=e.some(e=>(null==e?void 0:e.whenToShow)===v.WhenToShowError.IMMEDIATELY);for(const a of e)if(a)return void s(a.message,{disableSubmit:t,showErrors:t})},showMissingDataErrors:!!(null==t?void 0:t.showErrors),onInvalidData:e=>{s(void 0,{disableSubmit:e,showErrors:e})}}))};b.displayName="UnstyledAutoNamingConventionsControls2";const C=()=>n.default.createElement(M.PreviewTemplate,{triggerIcon:n.default.createElement(M.FolderWithFile,{extension:"docx"}),triggerLabel:n.default.createElement(M.LabelChip,{label:l.intl.formatMessage({id:"RCWy9b",defaultMessage:"MyDocument.docx"}),iconLeft:n.default.createElement(o.UIIcon,{src:i.CursorLine})}),actionIcon:n.default.createElement(s.FileIcon,{extension:"docx",size:"large"}),actionLabel:n.default.createElement(M.LabelChip,{label:l.intl.formatMessage({id:"86xmz+",defaultMessage:"MyDocument<span>_final</span>.docx"},{span:e=>n.default.createElement("span",{style:{backgroundColor:"var(--color__attention__background)"}},e)}),iconLeft:n.default.createElement(o.UIIcon,{src:i.CursorLine})}),description:l.intl.formatMessage({id:"Hgrenn",defaultMessage:'For example, add the word "final" to the name of files added to this folder'})});C.displayName="NamingConventionPreview",t.AutoNamingConventionsControls=(0,r.withCSS)(["/static/metaserver/static/css/naming_conventions/naming_conventions-vflXLszoE.css"])(h),t.AutoNamingConventionsControls2=(0,r.withCSS)(["/static/metaserver/static/css/naming_conventions/naming_conventions-vflXLszoE.css"])(b)})),define("metaserver/static/js/flows/automations/auto_pdf",["require","exports","tslib","react","@dropbox/dig-content-icons","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/i18n","metaserver/static/js/flows/constants","typescript/component_libraries/flows/src/components/automation-preview/index","typescript/component_libraries/flows/src/components/automation-preview/index.module.css","typescript/component_libraries/flows/src/components/file-type-controls/index"],(function(e,t,a,n,s,o,i,r,l,c,d,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoPdfUiConfig=void 0,n=a.__importDefault(n),d=a.__importDefault(d);t.AutoPdfUiConfig=e=>({action:{description:r.intl.formatMessage({id:"lUL/WC",defaultMessage:"Save as PDFs"},{b:e=>n.default.createElement("b",null,e)}),icon:n.default.createElement(o.UIIcon,{src:i.PdfLine}),tooltip:r.intl.formatMessage({id:"2c4ZCd",defaultMessage:"Are saved as PDFs"}),defaultActionData:{input_filetypes:[]},renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:a})=>n.default.createElement(m.InputTypeControls,{allInputTypes:l.SUPPORTED_PDF_EXTENSIONS,selectedInputTypes:e.input_filetypes,onSelect:(n,s)=>{t(Object.assign(Object.assign({},e),{input_filetypes:n})),s&&a(s)}}),allowApplyToExistingFiles:e=>"add"===e},shortLabel:r.intl.formatMessage({id:"PJ39gK",defaultMessage:"PDF"}),title:r.intl.formatMessage({id:"IXfLjH",defaultMessage:"Convert files to PDFs"}),trigger:"folder",type:"pdf_conversion",notifications:{inProgress:(e,t)=>r.intl.formatMessage({id:"y6hwuD",defaultMessage:"{numTotal, plural, one {Automatically saving your file as a PDF...} other {Automatically saving your files as PDFs...}}"},{numTotal:t}),success:e=>r.intl.formatMessage({id:"VeOt0m",defaultMessage:"{numSucceeded, plural, one {# file automatically saved as a PDF} other {# files automatically saved as PDFs}}."},{numSucceeded:e}),fail:e=>r.intl.formatMessage({id:"HjIGnc",defaultMessage:"{numFailed, plural, one {# file couldn't be automatically saved as a PDF} other {# files couldn't be automatically saved as PDFs}}."},{numFailed:e}),allowUndo:!0},renderTemplatePreview:()=>n.default.createElement(u,null)});const u=()=>n.default.createElement(c.PreviewTemplate,{triggerIcon:n.default.createElement(c.FolderWithFile,{extension:"docx"}),actionIcon:n.default.createElement(s.FileIcon,{extension:"docx",size:"large"}),secondaryActionIcon:n.default.createElement(s.FileIcon,{extension:"pdf",size:"large",className:d.default.flowsAutomationPreviewIconsNegMargin}),description:r.intl.formatMessage({id:"MJeqQ8",defaultMessage:"Save copies of files added to this folder as PDFs"})})})),define("metaserver/static/js/flows/automations/auto_move",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/typography","metaserver/static/js/clean/ui/tree_view","metaserver/static/js/clean/viewer","metaserver/static/js/core/i18n","typescript/component_libraries/flows/src/components/automated-folder-modal/index.module.css"],(function(e,t,a,n,s,o,i,r,l,c,d,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderTreeScreen=t.AutoMoveConfig=void 0,n=a.__importDefault(n);t.AutoMoveConfig=(e,a)=>({action:{description:d.intl.formatMessage({id:"zQUMA8",defaultMessage:"Move to"}),rightRailDescription:d.intl.formatMessage({id:"ZB8s+Q",defaultMessage:"Move to another folder"}),icon:n.default.createElement(o.UIIcon,{src:i.MoveLine}),tooltip:d.intl.formatMessage({id:"8y+epY",defaultMessage:"Are moved to destination folder"}),defaultActionData:{dest_fq_path:""},renderAdditionalControls:({data:a,onDataChange:s,onDataError:o})=>{var i;return n.default.createElement(t.FolderTreeScreen,{destFqPath:null!==(i=a.dest_fq_path)&&void 0!==i?i:"",onFolderSelect:e=>s(Object.assign(Object.assign({},a),{dest_fq_path:e})),onError:o,user:e})},allowApplyToExistingFiles:e=>"add"===e},shortLabel:d.intl.formatMessage({id:"vk5Hmq",defaultMessage:"move to destination"}),title:d.intl.formatMessage({id:"arSUp7",defaultMessage:"Choose a folder to move files to"}),trigger:"folder",type:"move_file",notifications:{inProgress:()=>d.intl.formatMessage({id:"/BDk6/",defaultMessage:"Automatically moving your files..."}),success:e=>d.intl.formatMessage({id:"xVQVKE",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically moved to the specified destination."},{numSucceeded:e}),fail:e=>d.intl.formatMessage({id:"/LyVWj",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be moved to the specified destination"},{numFailed:e}),allowUndo:!0},renderTemplatePreview:()=>n.default.createElement(u,null)});t.FolderTreeScreen=({destFqPath:e,onFolderSelect:t,onError:a,user:r})=>{const[u,g]=n.default.useState(!1);n.default.useEffect(()=>{0===e.length&&a()},[a]);const f=c.Viewer.get_role_title(r)||"Dropbox";return n.default.createElement("div",null,u?n.default.createElement(l.UserFolderTreeView,{user:r,onFolderSelected:e=>{t(e),g(!1)},is_paired:c.Viewer.get_viewer().is_paired,treeRootName:f}):n.default.createElement(s.Button,{className:m.flowsModalButtonWide,fullWidth:!0,onClick:()=>g(!0),size:"large",variant:"outline",withIconLeft:n.default.createElement(o.UIIcon,{src:i.FolderLine})},e||d.intl.formatMessage({id:"VCCpx6",defaultMessage:"Destination Folder"})))},t.FolderTreeScreen.displayName="FolderTreeScreen";const u=()=>n.default.createElement("div",{className:"flows-automation-preview__text"},n.default.createElement(r.Text,{inverse:!0},d.intl.formatMessage({id:"Rqpt8F",defaultMessage:"For example, move file to destination folder"})));u.displayName="AutoMovePreview"})),define("metaserver/static/js/flows/automations/auto_smart_subfolders",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/typography","dig-components/controls","dig-components/icons","dig-components/icons/src"],(function(e,t,a,n,s,o,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoSmartSubfoldersUiConfig=void 0,n=a.__importDefault(n);const c=({data:e,onDataChange:t,onDataError:a})=>{var s;const[r,l]=n.default.useState((null===(s=null==e?void 0:e.variant)||void 0===s?void 0:s[".tag"])||"use_existing_folders");return n.default.useEffect(()=>{t({variant:{".tag":"use_existing_folders"===r?"use_existing_folders":"use_premade_categories"}})},[r]),n.default.useEffect(()=>{var t;l((null===(t=null==e?void 0:e.variant)||void 0===t?void 0:t[".tag"])||"use_existing_folders")},[e]),n.default.createElement("div",null,n.default.createElement(o.Text,null,"Select a rule to classify and sort by"),n.default.createElement("div",{className:"classification-radio"},n.default.createElement("div",null,n.default.createElement(i.RadioButton,{"aria-label":"Pre-defined Document Classes",id:"pre-defined",checked:"use_premade_categories"===r,onChange:()=>{l("use_premade_categories")}}),n.default.createElement(o.Text,{tagName:"label",htmlFor:"pre-defined"},"Pre-defined Document Classes")),n.default.createElement("div",null,n.default.createElement(i.RadioButton,{"aria-label":"Your Existing Sub-folders",id:"existing",checked:"use_existing_folders"===r,onChange:()=>{l("use_existing_folders")}}),n.default.createElement(o.Text,{tagName:"label",htmlFor:"existing"},"Your Existing Sub-folders"))))};c.displayName="AutoSmartSubfolderOptions",t.AutoSmartSubfoldersUiConfig={action:{description:s.intl.formatMessage({id:"iqinwH",defaultMessage:"Automatically sort files into organized subfolders"}),icon:n.default.createElement(r.UIIcon,{src:l.MultipleFoldersLine}),tooltip:s.intl.formatMessage({id:"/hC6lR",defaultMessage:"Are sorted into organized subfolders"}),renderAdditionalControls:e=>n.default.createElement(c,Object.assign({},e))},genericDescription:s.intl.formatMessage({id:"a9iSb9",defaultMessage:"Sort files added to this folder into organized subfolders"}),shortLabel:s.intl.formatMessage({id:"y7ZDUa",defaultMessage:"sort files"}),title:s.intl.formatMessage({id:"QY8XR8",defaultMessage:"Files added to a folder are organized by content type"}),trigger:"folder",type:"smart_subfolders"}})),define("metaserver/static/js/flows/automations/auto_tagging",["require","exports","tslib","react","@dropbox/dig-content-icons","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/i18n","metaserver/static/js/tagging/ui/components/auto_tagging_typeahead","typescript/component_libraries/flows/src/components/automation-preview/index","typescript/component_libraries/flows/src/components/automation-preview/index.module.css"],(function(e,t,a,n,s,o,i,r,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTaggingUiConfig=void 0,n=a.__importDefault(n),d=a.__importDefault(d);t.AutoTaggingUiConfig=(e,t)=>({action:{description:r.intl.formatMessage({id:"iWVH9L",defaultMessage:"Tag as"}),rightRailDescription:r.intl.formatMessage({id:"LRr2Ss",defaultMessage:"Tag"}),icon:n.default.createElement(o.UIIcon,{src:i.TagLine}),tooltip:r.intl.formatMessage({id:"clWHiV",defaultMessage:"Are tagged"}),renderAdditionalControls:t=>n.default.createElement(l.AutoTaggingTypeahead,Object.assign({},t,{user:e})),allowApplyToExistingFiles:e=>"add"===e||"edit"===e},shortLabel:r.intl.formatMessage({id:"stkmXg",defaultMessage:"tag"}),title:r.intl.formatMessage({id:"LBflBZ",defaultMessage:"Choose a tag to organize and find files"}),trigger:"folder",type:"tag",notifications:{inProgress:()=>r.intl.formatMessage({id:"cjg/6X",defaultMessage:"Automatically tagging your files..."}),success:e=>r.intl.formatMessage({id:"nQKCo3",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically tagged."},{numSucceeded:e}),fail:e=>r.intl.formatMessage({id:"kj8GOO",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically tagged."},{numFailed:e})},renderTemplatePreview:()=>n.default.createElement(m,null)});const m=()=>n.default.createElement(c.PreviewTemplate,{triggerIcon:n.default.createElement(c.FolderWithFile,{extension:"ppt"}),actionIcon:n.default.createElement(n.default.Fragment,null,n.default.createElement(s.FileIcon,{extension:"ppt",size:"large"}),n.default.createElement("div",{className:d.default.flowsAutomationPreviewTagWrapper},n.default.createElement(c.LabelChip,{label:r.intl.formatMessage({id:"BMise9",defaultMessage:"logo"}),iconLeft:n.default.createElement(o.UIIcon,{src:i.TagLine}),inverted:!0,truncateWidth:140}),n.default.createElement(c.LabelChip,{label:r.intl.formatMessage({id:"AP8cRJ",defaultMessage:"final"}),iconLeft:n.default.createElement(o.UIIcon,{src:i.TagLine}),inverted:!0,truncateWidth:140}))),description:r.intl.formatMessage({id:"aOWRi7",defaultMessage:'For example, add the tags "logo" and "final" to files added to this folder'})});m.displayName="AutoTagPreview"})),define("metaserver/static/js/flows/automations/auto_tidy_up",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/i18n","metaserver/static/js/flows/components/auto_tidy_up/constants","metaserver/static/js/flows/components/auto_tidy_up/controls","metaserver/static/js/flows/components/auto_tidy_up/preview"],(function(e,t,a,n,s,o,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTidyUpUiConfig=void 0,n=a.__importDefault(n);t.AutoTidyUpUiConfig=(e,t)=>({action:{description:i.intl.formatMessage({id:"K781BL",defaultMessage:"Organize into folders grouped by"}),rightRailDescription:i.intl.formatMessage({id:"hwC5wH",defaultMessage:"Organize by category"}),icon:n.default.createElement(s.UIIcon,{src:o.MultipleFoldersLine}),tooltip:i.intl.formatMessage({id:"u07O3h",defaultMessage:"Are organized by category"}),defaultActionData:r.defaultTidyUpActionData,renderAdditionalControls:({data:t,onDataChange:a,source:s,actionExperiments:o})=>n.default.createElement(l.AutoTidyUpControls,{actionData:t,updateActionData:a,operation:s,isPaidUser:e,actionExperiments:o}),allowApplyToExistingFiles:e=>"add"===e},shortLabel:i.intl.formatMessage({id:"h5nATP",defaultMessage:"organize by category"}),title:i.intl.formatMessage({id:"JTnqVL",defaultMessage:"Choose a category to sort files by"}),trigger:"folder",type:"tidy_up",notifications:{inProgress:()=>i.intl.formatMessage({id:"kOOwLi",defaultMessage:"Automatically organizing your files..."}),success:e=>i.intl.formatMessage({id:"OGrBCr",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically organized into subfolders."},{numSucceeded:e}),fail:e=>i.intl.formatMessage({id:"z51P9Z",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically organized"},{numFailed:e}),allowUndo:!0},renderTemplatePreview:()=>n.default.createElement(c.AutoTidyUpGenericPreview,null)})})),define("metaserver/static/js/flows/automations/auto_unzip",["require","exports","tslib","react","@dropbox/dig-content-icons","dig-components/icons","dig-components/icons/src","dig-components/typography","metaserver/static/js/core/i18n","metaserver/static/js/flows/constants","typescript/component_libraries/flows/src/components/automation-preview/index","typescript/component_libraries/flows/src/components/automation-preview/index.module.css","typescript/component_libraries/flows/src/components/file-type-controls/index"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoUnzipUiConfig=void 0,n=a.__importDefault(n),m=a.__importDefault(m);t.AutoUnzipUiConfig=e=>({action:{description:l.intl.formatMessage({id:"8bjgn0",defaultMessage:"Unzip"}),icon:n.default.createElement(o.UIIcon,{src:i.ZipLine}),tooltip:l.intl.formatMessage({id:"W2z+/h",defaultMessage:"Are unzipped"}),defaultActionData:{input_filetypes:[]},renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:a})=>n.default.createElement(u.InputTypeControls,{allInputTypes:c.SUPPORTED_UNZIP_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,onSelect:(n,s)=>{t(Object.assign(Object.assign({},e),{input_filetypes:n})),s&&a(s)}}),allowApplyToExistingFiles:e=>"add"===e},shortLabel:l.intl.formatMessage({id:"+y6Wz9",defaultMessage:"unzip"}),title:l.intl.formatMessage({id:"RYympZ",defaultMessage:"Unzip files"}),trigger:"folder",type:"unzip",notifications:{inProgress:(e,t)=>l.intl.formatMessage({id:"7glSPu",defaultMessage:"{numTotal, plural, one {Automatically unzipping your file...} other {Automatically unzipping your files...}}"},{numTotal:t}),success:e=>l.intl.formatMessage({id:"9elMjf",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically unzipped."},{numSucceeded:e}),fail:e=>l.intl.formatMessage({id:"zV9Yhw",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically unzipped."},{numFailed:e}),allowUndo:!0},renderTemplatePreview:()=>n.default.createElement(g,null)});const g=()=>n.default.createElement(d.PreviewTemplate,{triggerIcon:n.default.createElement(n.default.Fragment,null,n.default.createElement(r.Text,{inverse:!0,color:"faint"},l.intl.formatMessage({id:"QhuZZP",defaultMessage:"filename.zip"})),n.default.createElement(d.FolderWithFile,{extension:"zip"})),actionIcon:n.default.createElement("div",{className:m.default.flowsAutomationPreviewUnzipFileContainer},n.default.createElement(s.FileIcon,{size:"large",extension:"jpg",className:m.default.flowsAutomationPreviewUnzipFileIcons}),n.default.createElement(s.FileIcon,{size:"large",extension:"jpg",className:m.default.flowsAutomationPreviewUnzipFileIcons}),n.default.createElement(s.FileIcon,{size:"large",extension:"jpg",className:m.default.flowsAutomationPreviewUnzipFileIcons}),n.default.createElement(s.FileIcon,{size:"large",extension:"jpg",className:m.default.flowsAutomationPreviewUnzipFileIcons})),description:l.intl.formatMessage({id:"uePi4a",defaultMessage:"Unzip and save files added to this folder."})});g.displayName="AutoUnzipPreview"})),define("metaserver/static/js/flows/automations/auto_video",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/i18n","metaserver/static/js/flows/constants","typescript/component_libraries/flows/src/components/automation-preview/index","typescript/component_libraries/flows/src/components/file-type-controls/index"],(function(e,t,a,n,s,o,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoVideoUiConfig=void 0,n=a.__importDefault(n);t.AutoVideoUiConfig=e=>({action:{description:i.intl.formatMessage({id:"RSERPS",defaultMessage:"Save as"}),rightRailDescription:i.intl.formatMessage({id:"4z/68P",defaultMessage:"Save as videos"}),icon:n.default.createElement(s.UIIcon,{src:o.VideoFileLine}),tooltip:i.intl.formatMessage({id:"+dY8qg",defaultMessage:"Are saved as videos"}),defaultActionData:{format:"mov",input_filetypes:[]},renderAdditionalControls:({data:e,onDataChange:t,onDataError:a})=>n.default.createElement(c.OutputTypeControls,{allOutputTypes:r.SUPPORTED_VIDEO_OUTPUT_CONTAINERS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:(n,s)=>{t(Object.assign(Object.assign({},e),{format:n})),s&&a(s)}}),renderPseudoTriggerControls:({data:e,onDataChange:t,onDataError:a})=>n.default.createElement(c.InputTypeControls,{allInputTypes:r.SUPPORTED_VIDEO_INPUT_EXTENSIONS,selectedInputTypes:null==e?void 0:e.input_filetypes,selectedOutputType:null==e?void 0:e.format,onSelect:(n,s)=>{t(Object.assign(Object.assign({},e),{input_filetypes:n})),s&&a(s)}}),allowApplyToExistingFiles:e=>"add"===e},shortLabel:i.intl.formatMessage({id:"cYek3I",defaultMessage:"video"}),title:i.intl.formatMessage({id:"w0L+S2",defaultMessage:"Choose a file format to convert videos to"}),trigger:"folder",type:"video_conversion",notifications:{inProgress:(e,t)=>i.intl.formatMessage({id:"T86MQM",defaultMessage:"{numTotal, plural, one {Automatically saving your file as a video...} other {Automatically saving your files as videos...}}"},{numTotal:t}),success:e=>i.intl.formatMessage({id:"KBpE7R",defaultMessage:"{numSucceeded, plural, one {# file automatically saved as a video} other {# files automatically saved as videos}}."},{numSucceeded:e}),fail:e=>i.intl.formatMessage({id:"q8gfGn",defaultMessage:"{numFailed, plural, one {# file couldn't be automatically saved as a video} other {# files couldn't be automatically saved as videos}}."},{numFailed:e}),allowUndo:!0},renderTemplatePreview:()=>n.default.createElement(d,null)});const d=()=>{const{attention:e,alert:t}=(0,l.useConversionActionI18nStyling)(),a=(e,t)=>i.intl.formatMessage({id:"2WT0ew",defaultMessage:"MyVideo.<highlight>{ext}</highlight>"},{ext:t,highlight:e});return n.default.createElement(l.ConversionActionPreviewTemplate,{icon:o.VideoFileLine,inputExt:"mov",inputLabel:n.default.createElement(l.LabelChip,{label:a(e,"mov"),iconLeft:n.default.createElement(s.UIIcon,{src:o.VideoFileLine})}),outputExt:"mp4",outputLabel:n.default.createElement(l.LabelChip,{label:a(t,"mp4"),iconLeft:n.default.createElement(s.UIIcon,{src:o.VideoFileLine})}),description:i.intl.formatMessage({id:"dO0cYf",defaultMessage:"For example, save copies of mov files as mp4s."})})}})),define("metaserver/static/js/flows/automations/snackbar",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/browser"],(function(e,t,a,n,s,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showErrorSnackbar=t.showSuccessSnackbar=t.showPendingSnackbar=t.updateSnackbar=t.AUTOMATIONS_SNACKBAR_ID=void 0,n=a.__importDefault(n),i=a.__importStar(i),t.AUTOMATIONS_SNACKBAR_ID="flows-automations-snackbar";function r(){return{createInProgress:e=>s.intl.formatMessage({id:"ixnxFP",defaultMessage:"Creating {folderName} automated folder..."},{folderName:e}),addInProgress:e=>s.intl.formatMessage({id:"XWVzJa",defaultMessage:"Adding automation to {folderName}..."},{folderName:e}),feedbackSuccess:s.intl.formatMessage({id:"lXPwmi",defaultMessage:"Thank you for your feedback!"}),createSuccess:e=>s.intl.formatMessage({id:"eqvXsV",defaultMessage:"{folderName} automated folder created."},{folderName:e}),addSuccess:e=>s.intl.formatMessage({id:"yb+Ei+",defaultMessage:"Automation added to {folderName}."},{folderName:e}),removalSuccess:e=>s.intl.formatMessage({id:"gEPRxb",defaultMessage:"Removed automation from {folderName}."},{folderName:e}),pauseSuccess:e=>s.intl.formatMessage({id:"BJcdth",defaultMessage:"Paused automation for {folderName}."},{folderName:e}),editSuccess:e=>s.intl.formatMessage({id:"PjF0k5",defaultMessage:"Edited automation for {folderName}."},{folderName:e}),reactivateSuccess:e=>s.intl.formatMessage({id:"9CrZQ4",defaultMessage:"Activated automation for {folderName}."},{folderName:e}),defaultError:s.intl.formatMessage({id:"V2wwgQ",defaultMessage:"Something went wrong. Please try again."}),folderRuleGenericCreateError:e=>s.intl.formatMessage({id:"b2vbCw",defaultMessage:"Couldn't create {folderName} automated folder."},{folderName:e}),folderRuleGenericAddError:e=>s.intl.formatMessage({id:"/+u3gq",defaultMessage:"Couldn't add automation to {folderName}."},{folderName:e}),folderRuleNoAccessError:s.intl.formatMessage({id:"7Ke97p",defaultMessage:"You do not have permission to edit this folder."}),conflictPathError:s.intl.formatMessage({id:"X00Q2k",defaultMessage:"A folder with that name already exists."}),closeSnackbarBtn:s.intl.formatMessage({id:"uzUPSw",defaultMessage:"Close"}),tryAgainSnackbarBtn:s.intl.formatMessage({id:"oj8Ras",defaultMessage:"Try again"}),showAutomationDashboardBtn:s.intl.formatMessage({id:"wHJiLw",defaultMessage:"Show all automations"})}}t.updateSnackbar=e=>{if("sync"===e.variant)o.Snackbar.update(n.default.createElement(o.Snackbar,Object.assign({id:t.AUTOMATIONS_SNACKBAR_ID},e)));else{const{closeSnackbarBtn:a}=r();o.Snackbar.update(n.default.createElement(o.Snackbar,Object.assign({id:t.AUTOMATIONS_SNACKBAR_ID,closeButtonText:a},e)))}},t.showPendingSnackbar=function(e){const{createInProgress:a,addInProgress:n}=r(),s={create:a(e.folderName),add:n(e.folderName)}[e.type];o.Snackbar.sync(s,!0,t.AUTOMATIONS_SNACKBAR_ID)},t.showSuccessSnackbar=function(e){const{addSuccess:a,createSuccess:s,feedbackSuccess:l,pauseSuccess:c,removalSuccess:d,editSuccess:m,reactivateSuccess:u,showAutomationDashboardBtn:g,closeSnackbarBtn:f}=r(),p={add:a(e.folderName),create:s(e.folderName),feedback:l,pause:c(e.folderName),remove:d(e.folderName),edit:m(e.folderName),reactivate:u(e.folderName)}[e.type];if(e.shouldShowDashboardCta){const a={closeButtonText:f,actionButtonText:g,forceDig:!0,id:t.AUTOMATIONS_SNACKBAR_ID,onActionClick:()=>i.redirect(`/automations?_tk=${e.type}_snackbar`),title:p,timeoutDelayMs:5e3,variant:"complete"};o.Snackbar.show(n.default.createElement(o.Snackbar,Object.assign({},a)))}else o.Snackbar.complete(p,t.AUTOMATIONS_SNACKBAR_ID)},t.showErrorSnackbar=function({folderName:e,onClose:a,onRetry:s,type:i}){const{conflictPathError:l,defaultError:c,folderRuleGenericCreateError:d,folderRuleGenericAddError:m,folderRuleNoAccessError:u,closeSnackbarBtn:g,tryAgainSnackbarBtn:f}=r(),p="default"===i?c:{conflict:l,"generic-create":d(e),"generic-add":m(e),"no-access":u}[i];let _={closeButtonText:g,forceDig:!0,id:t.AUTOMATIONS_SNACKBAR_ID,onCloseClick:a,title:p,timeoutDelayMs:5e3,variant:"fail"};if(s){const e=()=>{o.Snackbar.close(t.AUTOMATIONS_SNACKBAR_ID),s()};_=Object.assign(Object.assign({},_),{actionButtonText:f,onActionClick:e})}o.Snackbar.show(n.default.createElement(o.Snackbar,Object.assign({},_)))}})),define("metaserver/static/js/flows/automations/ui_config",["require","exports","metaserver/static/js/flows/automations/auto_pdf","metaserver/static/js/flows/automations/auto_tagging","metaserver/static/js/flows/automations/auto_unzip","metaserver/static/js/flows/automations/auto_smart_subfolders","metaserver/static/js/flows/automations/auto_image","metaserver/static/js/flows/automations/auto_video","metaserver/static/js/flows/automations/auto_tidy_up","metaserver/static/js/flows/automations/auto_naming_conventions","metaserver/static/js/flows/automations/auto_audio","metaserver/static/js/flows/automations/watermarking","metaserver/static/js/flows/automations/auto_move"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u){"use strict";function g(e,{user:t,experiments:g}){switch(e){case"pdf_conversion":return(0,a.AutoPdfUiConfig)(g);case"unzip":return(0,s.AutoUnzipUiConfig)(g);case"tag":return(0,n.AutoTaggingUiConfig)(t,g);case"smart_subfolders":return o.AutoSmartSubfoldersUiConfig;case"image_conversion":return(0,i.AutoImageUiConfig)(g);case"video_conversion":return(0,r.AutoVideoUiConfig)(g);case"tidy_up":return(0,l.AutoTidyUpUiConfig)(!!t.paid||!!t.is_team,g);case"naming_conventions":return(0,c.AutoNamingConventionsUiConfig)(g);case"audio_conversion":return(0,d.AutoAudioUiConfig)(g);case"watermarking":return(0,m.WatermarkingConfig)(t,g);case"move_file":return(0,u.AutoMoveConfig)(t,g);default:throw new Error(`Cannot load automation UI for invalid action ${e}`)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUiConfig=t.loadFolderAutomationUi=void 0,t.loadFolderAutomationUi=g;const f={tidy_up:0,naming_conventions:1,tag:2,pdf_conversion:3,image_conversion:4,video_conversion:5,unzip:6,smart_subfolders:7,audio_conversion:8,watermarking:9,email_ingest:10,move_file:11},p=(e,t)=>f[e.type]-f[t.type];function _(e){return null!=e}t.getUiConfig=function(e,t,a){const n=e.map(e=>g(e,t)).filter(_);return n.sort(null!=a?a:p),n}})),define("metaserver/static/js/flows/automations/watermarking",["require","exports","tslib","react","@dropbox/dig-content-icons","dig-components/icons","dig-components/icons/src","metaserver/static/js/core/i18n","metaserver/static/js/flows/components/auto_watermarking/async_controls","typescript/component_libraries/flows/src/components/automation-preview/index","typescript/component_libraries/flows/src/components/automation-preview/index.module.css"],(function(e,t,a,n,s,o,i,r,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WatermarkingConfig=void 0,n=a.__importDefault(n),d=a.__importDefault(d);t.WatermarkingConfig=(e,t)=>({action:{description:r.intl.formatMessage({id:"FjZDKY",defaultMessage:"Add a watermark"}),hasCustomBeforeSaveLogic:!0,icon:n.default.createElement(o.UIIcon,{src:i.StampLine}),tooltip:r.intl.formatMessage({id:"9XOJtt",defaultMessage:"Are saved with a watermark"}),renderAdditionalControls:t=>n.default.createElement(l.AsyncAutoWatermarkingControls,Object.assign({},t,{userId:e.id}))},notifications:{inProgress:()=>r.intl.formatMessage({id:"lB5Tn8",defaultMessage:"Automatically watermarking your files..."}),success:e=>r.intl.formatMessage({id:"Yr9iw4",defaultMessage:"{numSucceeded, plural, one {# file} other {# files}} automatically watermarked."},{numSucceeded:e}),fail:e=>r.intl.formatMessage({id:"oy7j2D",defaultMessage:"{numFailed, plural, one {# file} other {# files}} couldn't be automatically watermarked."},{numFailed:e})},shortLabel:r.intl.formatMessage({id:"bbQT+Y",defaultMessage:"Watermark"}),title:r.intl.formatMessage({id:"H/Nm7h",defaultMessage:"Watermark files"}),trigger:"folder",type:"watermarking",supportsPreview:!0,renderTemplatePreview:()=>n.default.createElement(m,null)});const m=()=>n.default.createElement(c.PreviewTemplate,{triggerIcon:n.default.createElement(c.FolderWithFile,{extension:"generic"}),actionIcon:n.default.createElement(s.FileGenericLarge,null),secondaryActionIcon:n.default.createElement(c.WatermarkedFileIcon,{className:d.default.flowsAutomationPreviewIconsNegMargin}),description:r.intl.formatMessage({id:"9PXlnG",defaultMessage:"Save copies of files added to this folder with a custom watermark"})})})),define("metaserver/static/js/flows/components/auto_watermarking/async_controls",["require","exports","tslib","react"],(function(e,t,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAutoWatermarkingControls=void 0;const s=(n=a.__importDefault(n)).default.lazy(()=>a.__awaiter(void 0,void 0,void 0,(function*(){const{AutoWatermarkingControls:t}=yield new Promise((t,a)=>{e(["metaserver/static/js/flows/components/auto_watermarking/controls"],t,a)}).then(a.__importStar);return{default:t}})));t.AsyncAutoWatermarkingControls=e=>n.default.createElement(n.default.Suspense,{fallback:n.default.createElement("div",null)},n.default.createElement(s,Object.assign({},e))),t.AsyncAutoWatermarkingControls.displayName="AsyncAutoWatermarkingControls"})),define("metaserver/static/js/flows/components/auto_naming_conventions/async_controls",["require","exports","tslib","react","dig-components/progress_indicators"],(function(e,t,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncAutoNamingConventionsControls=void 0;const o=(n=a.__importStar(n)).default.lazy(()=>a.__awaiter(void 0,void 0,void 0,(function*(){const{AutoNamingConventionsControls:t}=yield new Promise((t,a)=>{e(["metaserver/static/js/flows/components/auto_naming_conventions/controls"],t,a)}).then(a.__importStar);return{default:t}})));t.AsyncAutoNamingConventionsControls=e=>n.default.createElement(n.Suspense,{fallback:n.default.createElement("div",{style:{textAlign:"center"}},n.default.createElement(s.Spinner,null))},n.default.createElement(o,Object.assign({},e))),t.AsyncAutoNamingConventionsControls.displayName="AsyncAutoNamingConventionsControls"})),define("metaserver/static/js/flows/components/auto_tidy_up/constants",["require","exports","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/tidy_up/utils"],(function(e,t,a,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTidyUpActionData=t.defaultTidyParametersForAutoFolder=void 0,t.defaultTidyParametersForAutoFolder={type:a.TidyUpType.by_month,activityParams:{inactiveSelection:a.InactiveSelection.thirty_days},byMonthParams:{excludeCurrentMonth:!1,dateFormatSelection:a.DateFormatSelection.YYYY_MM},byYearParams:{excludeCurrentYear:!1},byKeyphraseParams:{keyphrase:void 0,keyphraseDestination:void 0},customFilterParams:{filters:[]},byTimeFrameParams:{folderStructure:a.TidyTimeFrameFolderStructure.month,formatNaming:{monthFormat:a.TidyTimeFrameFolderNamingMonth.yyyy_mm,yearFormat:a.TidyTimeFrameFolderNamingYear.yyyy,dayFormat:a.TidyTimeFrameFolderNamingDay.dd},date_rule:a.TidyTimeFrameDateRule.date_uploaded},previewData:void 0},t.defaultTidyUpActionData={args_json:JSON.stringify(n.TidyConversions.tidyTypeToApiV2(t.defaultTidyParametersForAutoFolder))}})),define("metaserver/static/js/flows/components/auto_tidy_up/controls",["require","exports","tslib","react","dig-components/form_row","metaserver/static/js/clean/ui/hoc","metaserver/static/js/flows/components/auto_tidy_up/utils","metaserver/static/js/tidy_up/modal/options_view/tidy_radio_selection","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/tidy_up/utils","metaserver/static/js/tidy_up/modal/keyphrase_view/tidy_keyphrase","metaserver/static/js/browse/data/store","metaserver/static/js/browse/data/selectors"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestOnlyAutoTidyUpControls=t.AutoTidyUpControls=void 0,n=a.__importStar(n),u=a.__importStar(u);function g(e){return e.includes("tidy_up_automation_integration")}const f=({actionData:e,operation:t,updateActionData:a,isPaidUser:o,actionExperiments:f})=>{const p=(0,m.getStoreForBrowse)().getState(),_=u.unsortedFiles(p).filter(e=>e.is_dir).toArray().map(e=>e.fq_path),v=(0,i.useAutoTidyUpStrings)(),[y,M]=n.default.useState((0,i.getTidyParamsFromActionData)(e)),S="edit"===t,E="add"===t;(0,n.useEffect)(()=>{const t=(0,i.getTidyParamsFromActionData)(e);M(e=>Object.assign(Object.assign({},e),t))},[e]);const T=(0,n.useCallback)(e=>{const t=c.TidyConversions.tidyTypeToApiV2(e);a({args_json:JSON.stringify(t)})},[a]),h=n.default.useCallback(e=>{T(Object.assign(Object.assign({},y),{type:e.target.value,byKeyphraseParams:{keyphrase:void 0,keyphraseDestination:void 0}}))},[y,T]),b=o,C=S&&y.type===l.TidyUpType.time_frame_filter,N=!o&&(S||E);return n.default.createElement(s.FormControlGroup,null,n.default.createElement(r.TidyUpSelection,{isSelected:y.type===l.TidyUpType.by_month,onSelect:h,value:l.TidyUpType.by_month,label:v.monthLabel,subtext:v.monthSubtext,name:"auto-tidy-options"}),n.default.createElement(r.TidyUpSelection,{isSelected:y.type===l.TidyUpType.by_year,onSelect:h,value:l.TidyUpType.by_year,label:v.yearLabel,subtext:v.yearSubtext,name:"auto-tidy-options"}),b&&g(f)?n.default.createElement(r.TidyUpSelection,{isSelected:y.type===l.TidyUpType.custom_filters,onSelect:h,value:l.TidyUpType.custom_filters,label:v.customFiltersLabel,subtext:v.customFiltersSubtext,name:"auto-tidy-options"}):null,C?n.default.createElement(r.TidyUpSelection,{isSelected:y.type===l.TidyUpType.time_frame_filter,onSelect:h,value:l.TidyUpType.time_frame_filter,label:v.timeFrameFilterLabel,subtext:v.timeFrameFilterSubtext,name:"auto-tidy-options"}):null,N&&g(f)?n.default.createElement(n.default.Fragment,null,n.default.createElement(r.TidyUpSelection,{isSelected:y.type===l.TidyUpType.keyphrase,onSelect:h,value:l.TidyUpType.keyphrase,label:v.keyphraseLabel,subtext:v.keyphraseSubtext,name:"auto-tidy-options"}),y.type===l.TidyUpType.keyphrase?n.default.createElement(n.default.Fragment,null,n.default.createElement(d.TidyUpKeyphraseView,{keyphraseParameters:(0,i.getTidyParamsFromActionData)(e).byKeyphraseParams,setKeyphraseParameters:e=>{T(Object.assign(Object.assign({},y),{byKeyphraseParams:Object.assign(Object.assign({},y.byKeyphraseParams),e)}))},onPreview:()=>null,onCancel:()=>null,onBack:()=>null,subfolderPaths:_,isUsedInAutomationModal:!0})):null):null)};f.displayName="UnstyledAutoTidyUpControls",t.AutoTidyUpControls=(0,o.withCSS)(["/static/metaserver/static/css/tidy_up/tidy_up-vfliHRmLM.css"])(f),t.TestOnlyAutoTidyUpControls=f})),define("metaserver/static/js/flows/components/auto_tidy_up/preview",["require","exports","tslib","react","dig-components/typography","metaserver/static/js/flows/automations/util","metaserver/static/js/flows/components/auto_tidy_up/utils","typescript/component_libraries/flows/src/components/automation-preview/index.module.css"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTidyUpLivePreview=t.AutoTidyUpGenericPreview=void 0,n=a.__importDefault(n),r=a.__importDefault(r);t.AutoTidyUpGenericPreview=()=>{const e=(0,o.getAutoFolderVideoSrc)(),{previewDesc:t}=(0,i.useAutoTidyUpStrings)();return n.default.createElement(n.default.Fragment,null,n.default.createElement("video",{height:"350",loop:!0,autoPlay:!0,playsInline:!0,muted:!0,tabIndex:0,src:e.video,poster:e.poster}),n.default.createElement("div",{className:r.default.flowsAutomationPreviewText},n.default.createElement(s.Text,{inverse:!0},t)))},t.AutoTidyUpGenericPreview.displayName="AutoTidyUpGenericPreview";t.AutoTidyUpLivePreview=({actionData:e})=>{const t=(0,i.getTidyParamsFromActionData)(e).type,a=(0,o.getAutoFolderVideoSrcLive)(t);return n.default.createElement(n.default.Fragment,null,n.default.createElement("video",{height:"350",loop:!0,autoPlay:!0,playsInline:!0,muted:!0,tabIndex:0,src:a.video,poster:a.poster}))},t.AutoTidyUpLivePreview.displayName="AutoTidyUpLivePreview"})),define("metaserver/static/js/flows/components/auto_tidy_up/utils",["require","exports","react-intl","metaserver/static/js/flows/components/auto_tidy_up/constants","metaserver/static/js/tidy_up/modal/options_view/tidy_custom_filters_selection","metaserver/static/js/tidy_up/modal/options_view/tidy_month_selection","metaserver/static/js/tidy_up/modal/options_view/tidy_year_selection","metaserver/static/js/tidy_up/modal/options_view/tidy_time_frame_filter_selection","metaserver/static/js/tidy_up/modal/options_view/tidy_keyphrase_selection","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/tidy_up/utils"],(function(e,t,a,n,s,o,i,r,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useAutoTidyUpStrings=t.getTidyParamsFromActionData=void 0,t.getTidyParamsFromActionData=function(e){if(!(null==e?void 0:e.args_json))return n.defaultTidyParametersForAutoFolder;let t={".tag":"other"};try{t=JSON.parse(e.args_json)}catch(e){}return d.TidyConversions.tidyTypeFromApiV2(t)},t.useAutoTidyUpStrings=function(){const e=(0,a.useIntl)(),t={monthLabel:e.formatMessage(o.TIDY_UP_MONTH_SELECTION),monthSubtext:e.formatMessage(o.TIDY_UP_MONTH_DESCRIPTION),yearLabel:e.formatMessage(i.TIDY_UP_YEAR_SELECTION),yearSubtext:e.formatMessage(i.TIDY_UP_YEAR_DESCRIPTION),customFiltersLabel:e.formatMessage(s.TIDY_UP_CUSTOM_FILTERS_SELECTION),customFiltersSubtext:e.formatMessage(s.TIDY_UP_CUSTOM_FILTERS_SUBTEXT),timeFrameFilterLabel:e.formatMessage(r.TIDY_UP_TIME_FRAME_FILTER_SELECTION),timeFrameFilterSubtext:e.formatMessage(r.TIDY_UP_TIME_FRAME_FILTER_SUBTEXT),keyphraseLabel:e.formatMessage(l.TIDY_UP_KEYPHRASE_SELECTION),keyphraseSubtext:e.formatMessage(l.TIDY_UP_KEYPHRASE_SUBTEXT),previewDesc:e.formatMessage({id:"1fuLdq",defaultMessage:"For example, sort files by date created, keyword, or other categories"})};return Object.assign(Object.assign({},t),{getLabelForTidyUpType:e=>{switch(e){case c.TidyUpType.by_month:return t.monthLabel;case c.TidyUpType.by_year:return t.yearLabel;case c.TidyUpType.custom_filters:return t.customFiltersLabel;case c.TidyUpType.time_frame_filter:return t.timeFrameFilterLabel;case c.TidyUpType.keyphrase:return t.keyphraseLabel;default:return}}})}})),define("metaserver/static/js/naming_conventions/api_v2",["require","exports","tslib","metaserver/static/js/api_v2/user_client","metaserver/static/js/clean/ui/polling_util"],(function(e,t,a,n,s){"use strict";function o(e,t,n,o,i,r,l){return a.__awaiter(this,void 0,void 0,(function*(){const a=yield e.ns("naming_conventions").rpc("apply",{source_path:n,filename_suggestions:o,rules_struct:i,automation_toggled:r,origin:l},{subjectUserId:t});return"complete"===a[".tag"]?{status:s.PollingStatus.COMPLETE,result:a}:"other"===a[".tag"]?{status:s.PollingStatus.ERROR,result:a}:{status:s.PollingStatus.IN_PROGRESS,result:a.async_job_id}}))}function i(e,t,n){return a.__awaiter(this,void 0,void 0,(function*(){const a=yield e.ns("naming_conventions").rpc("apply/check",{async_job_id:n},{subjectUserId:t});if("in_progress"===a[".tag"])return{status:s.PollingStatus.IN_PROGRESS,result:n};if("complete"===a[".tag"])return{status:s.PollingStatus.COMPLETE,result:a};if("failed"===a[".tag"])return{status:s.PollingStatus.ERROR,result:a.failed};throw new s.PollingUtilError("Unexpected Result")}))}function r(e,t,n,o,i,r){return a.__awaiter(this,void 0,void 0,(function*(){const a=yield e.ns("naming_conventions").rpc("set",{source_path:n,rules_struct:o,automation_toggled:i,origin:r},{subjectUserId:t});return"complete"===a[".tag"]?{status:s.PollingStatus.COMPLETE,result:a}:"other"===a[".tag"]?{status:s.PollingStatus.ERROR,result:a}:{status:s.PollingStatus.IN_PROGRESS,result:a.async_job_id}}))}function l(e,t,n){return a.__awaiter(this,void 0,void 0,(function*(){const a=yield e.ns("naming_conventions").rpc("set/check",{async_job_id:n},{subjectUserId:t});if("in_progress"===a[".tag"])return{status:s.PollingStatus.IN_PROGRESS,result:n};if("complete"===a[".tag"])return{status:s.PollingStatus.COMPLETE,result:a};if("failed"===a[".tag"])return{status:s.PollingStatus.ERROR,result:a.failed};throw new s.PollingUtilError("Unexpected Result")}))}Object.defineProperty(t,"__esModule",{value:!0}),t.undo=t.snackbarDismissed=t.shouldShowSnackbar=t.previewWithRetries=t.getRules=t.preview=t._setTimeout=t.setNamingConventions=t.pollForNamingConventionsSetResponse=t.initialNamingConventionsSetRequest=t.applyNamingConventions=t.pollForNamingConventionsApplyResponse=t.initialNamingConventionsApplyRequest=void 0,t.initialNamingConventionsApplyRequest=o,t.pollForNamingConventionsApplyResponse=i,t.applyNamingConventions=function(e,t,r,l,c,m){return a.__awaiter(this,void 0,void 0,(function*(){t=d(t);const u=new n.UserApiV2Client;return yield(0,s.makePollingRequest)(()=>a.__awaiter(this,void 0,void 0,(function*(){return o(u,e,t,r,l,c,m)})),t=>a.__awaiter(this,void 0,void 0,(function*(){return i(u,e,t)})))}))},t.initialNamingConventionsSetRequest=r,t.pollForNamingConventionsSetResponse=l,t.setNamingConventions=function(e,t,o,i,c){return a.__awaiter(this,void 0,void 0,(function*(){t=d(t);const m=new n.UserApiV2Client;return yield(0,s.makePollingRequest)(()=>a.__awaiter(this,void 0,void 0,(function*(){return r(m,e,t,o,i,c)})),t=>a.__awaiter(this,void 0,void 0,(function*(){return l(m,e,t)})))}))};t._setTimeout=window.setTimeout.bind(window);t.preview=(e,t,s)=>a.__awaiter(void 0,void 0,void 0,(function*(){return t=d(t),(new n.UserApiV2Client).ns("naming_conventions").rpc("preview",{rules_struct:s,source_path:t},{subjectUserId:e})}));t.getRules=(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){return t=d(t),(new n.UserApiV2Client).ns("naming_conventions").rpc("get_rules",{source_path:t},{subjectUserId:e})}));t.previewWithRetries=(e,n,s)=>a.__awaiter(void 0,void 0,void 0,(function*(){return c(()=>(0,t.preview)(e,n,s)).catch(e=>e)}));const c=(e,n=2,s)=>a.__awaiter(void 0,void 0,void 0,(function*(){return 0===n?Promise.reject(s):e().catch(a=>{return(s=1e3,new Promise(e=>(0,t._setTimeout)(e,s))).then(()=>c(e,n-1,a));var s})}));t.shouldShowSnackbar=(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){return(new n.UserApiV2Client).ns("naming_conventions").rpc("feature_discovery/should_show_snackbar",{snackbar_type:t},{subjectUserId:e})}));t.snackbarDismissed=e=>a.__awaiter(void 0,void 0,void 0,(function*(){return(new n.UserApiV2Client).ns("naming_conventions").rpc("feature_discovery/snackbar_dismissed",{reset_criteria:!1},{subjectUserId:e})}));t.undo=(e,t,s,o,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){return t=d(t),(new n.UserApiV2Client).ns("naming_conventions").rpc("undo",{source_path:t,entries:s,rules_struct:o,rules_struct_v2:i},{subjectUserId:e})}));const d=e=>"/"===e?"":e})),define("metaserver/static/js/naming_conventions/components/naming_conventions_view",["require","exports","tslib","react","metaserver/static/js/naming_conventions/components/nc_generic_live_preview","metaserver/static/js/naming_conventions/components/nc_title_casing_selection_button","metaserver/static/js/naming_conventions/components/nc_consistent_separator_selection_button","metaserver/static/js/naming_conventions/types","metaserver/static/js/naming_conventions/generic_live_preview_2","dig-components/icons/src","dig-components/icons","dig-components/typography","react-intl","metaserver/static/js/core/i18n","metaserver/static/js/naming_conventions/components/nc_draggable_rule_list","react-beautiful-dnd","dig-components/buttons","metaserver/static/js/naming_conventions/components/nc_renaming_bar_selection_button"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u,g,f,p,_,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsView=void 0,n=a.__importStar(n);const y=(0,u.defineMessage)({id:"qKiRrI",defaultMessage:"Not all rules or metadata may be applicable or available to each file or file type."}),M=(0,u.defineMessage)({id:"rLh5z9",defaultMessage:"Add rule"}),S=(0,u.defineMessage)({id:"r18HiD",defaultMessage:"Please use only letters (a-z), numbers (0-9), and underscores (_)"}),E=(0,u.defineMessage)({id:"NPApVr",defaultMessage:"Please limit the keyword to 15 characters"}),T=(0,u.defineMessage)({id:"zU0Cdo",defaultMessage:"Please enter a keyword"}),h=(0,u.defineMessage)({id:"LFx6oQ",defaultMessage:"Please select a rule or delete the row"});t.NamingConventionsView=({namingConventionsParameters:e,onNamingConventionsParametersChange:t,experiments:a,onErrorVisible:u,showMissingDataErrors:b,onInvalidData:C})=>{const N=n.default.useRef(null),[w,P]=n.default.useState(e),[I,D]=n.default.useState(""),[O,j]=n.default.useState(!1),{componentList:A,capitalizeAllInitials:F,changeAllSeparators:x,renamingBarEnabled:U,data:L}=e,[R,k]=n.default.useState(Array(w.componentList.length).fill(null)),Y=(function(e){const t=n.default.useRef();return(0,n.useEffect)(()=>{t.current=e},[e]),t.current})(A);(0,n.useEffect)(()=>{t(w)},[w]),(0,n.useEffect)(()=>{u(R)},[R]),(0,n.useEffect)(()=>{const e=N.current;if(e&&Y&&(null==A?void 0:A.length)>(null==Y?void 0:Y.length)){const t=e.querySelectorAll('[role="combobox"]'),a=t[t.length-1];null==a||a.focus()}},[A,Y,N]),(0,n.useEffect)(()=>{const e=Array.from(R);e.find(e=>(null==e?void 0:e.type)===r.ErrorType.RULE_ERROR)&&!A.includes(r.NamingConventionType.none)&&(e[e.findIndex(e=>(null==e?void 0:e.type)===r.ErrorType.RULE_ERROR)]=null),A.forEach((t,a)=>{if(t===r.NamingConventionType.keyword){if(0===L.keywords[a].length){const t={message:g.intl.formatMessage(T),type:r.ErrorType.TEXT_ERROR,whenToShow:r.WhenToShowError.WHEN_BUTTON_CLICKED};e[a]=t}}else if(t===r.NamingConventionType.none){const t={message:g.intl.formatMessage(h),type:r.ErrorType.RULE_ERROR,whenToShow:r.WhenToShowError.WHEN_BUTTON_CLICKED};e[a]=t}else e[a]=null}),k(e)},[A,L]),(0,n.useEffect)(()=>{D((0,l.getGenericLivePreviewText)(e))},[e]);const B=(0,n.useCallback)(t=>{const a=t.target.value;a===r.NamingConventionType.capitalize_all_initials?P(()=>Object.assign(Object.assign({},e),{capitalizeAllInitials:!e.capitalizeAllInitials})):a===r.NamingConventionType.consistent_separators?P(()=>Object.assign(Object.assign({},e),{changeAllSeparators:!e.changeAllSeparators})):a===r.NamingConventionType.renaming_bar_enabled&&P(()=>Object.assign(Object.assign({},e),{renamingBarEnabled:!e.renamingBarEnabled}))},[e]),z=(0,n.useCallback)(t=>{var a;e.changeAllSeparators&&e.data.consistentSeparatorSelection===t||((a=r.NamingConventionType.consistent_separators)===r.NamingConventionType.capitalize_all_initials?P(()=>Object.assign(Object.assign({},e),{capitalizeAllInitials:!0})):a===r.NamingConventionType.consistent_separators&&P(()=>Object.assign(Object.assign({},e),{changeAllSeparators:!0})),P(()=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},L),{consistentSeparatorSelection:t})})))},[e]),H=(0,n.useCallback)((t,a)=>{const n=[...e.data.dateInfo];n[t]={dateFormatSelection:a,mlFilenameParsing:!1},P(()=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{dateInfo:n})}))},[e]),q=(0,n.useCallback)((t,a)=>{const n=[...e.data.keywords];n[t]=a,P(()=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{keywords:n})}));const s=new RegExp(/^[a-zA-Z0-9_]{0,15}$/);let o=null;o=a.length>15?{message:g.intl.formatMessage(E),type:r.ErrorType.TEXT_ERROR,whenToShow:r.WhenToShowError.IMMEDIATELY}:s.test(a)?null:{message:g.intl.formatMessage(S),type:r.ErrorType.TEXT_ERROR,whenToShow:r.WhenToShowError.IMMEDIATELY};const i=Array.from(R);i[t]=o,k(i),C(!!o)},[e,R]),W=(0,n.useCallback)((t,a)=>{const n=Array.from(R);n[t]=null,k(n),C(!1);const s=Array.from(e.componentList),o=Array.from(e.data.dateInfo);s.includes(r.NamingConventionType.upload_date)||s.includes(r.NamingConventionType.capture_date)||a!==r.NamingConventionType.upload_date&&a!==r.NamingConventionType.capture_date||(o[t].mlFilenameParsing=!0),s[t]=a,P(()=>Object.assign(Object.assign({},e),{componentList:s,data:Object.assign(Object.assign({},e.data),{dateInfo:o})}))},[e,R]),K=(0,n.useCallback)(t=>{t.destination&&(((t,a)=>{const n=Array.from(e.componentList),[s]=n.splice(t,1);n.splice(a,0,s);const o=Array.from(e.data.dateInfo),[i]=o.splice(t,1);o.splice(a,0,i);const r=Array.from(e.data.keywords),[l]=r.splice(t,1);r.splice(a,0,l),P(()=>Object.assign(Object.assign({},e),{componentList:n,data:Object.assign(Object.assign({},e.data),{dateInfo:o,keywords:r})}));const c=Array.from(R),[d]=c.splice(t,1);c.splice(a,0,d),k(()=>[...c])})(t.source.index,t.destination.index),j(!0))},[e,R]),V=(0,n.useCallback)(t=>{const a=Array.from(e.componentList);a.splice(t,1);const n=Array.from(e.data.dateInfo);n.splice(t,1);const s=Array.from(e.data.keywords);s.splice(t,1),P(()=>Object.assign(Object.assign({},e),{componentList:a,data:Object.assign(Object.assign({},e.data),{dateInfo:n,keywords:s})}));const o=Array.from(R);o.splice(t,1),k(o),C(!1)},[e,R]),G=(0,n.useCallback)(()=>{j(!1)},[j]),X=(0,n.useCallback)(()=>{if(-1!==A.indexOf(r.NamingConventionType.none))return void C(!0);k([...R,null]);const t=Array.from(e.componentList);t.push(r.NamingConventionType.none);const a=Array.from(e.data.dateInfo);a.push({mlFilenameParsing:!1,dateFormatSelection:r.DateFormatSelection.yyyy_mm_dd});const n=Array.from(e.data.keywords);n.push(""),P(()=>Object.assign(Object.assign({},e),{componentList:t,data:Object.assign(Object.assign({},e.data),{dateInfo:a,keywords:n})}))},[e,R]),J=(0,n.useCallback)((t,a)=>{const n=Array.from(e.data.dateInfo);a&&n.forEach(e=>e.mlFilenameParsing=!1),n[t].mlFilenameParsing=a,P(()=>Object.assign(Object.assign({},e),{data:Object.assign(Object.assign({},e.data),{dateInfo:n})}))},[e]);return n.default.createElement(n.default.Fragment,null,n.default.createElement(s.NamingConventionsGenericLivePreview,{previewText:I,forModal2:!0}),n.default.createElement("div",{className:"naming-conventions__info-message-container"},n.default.createElement(d.UIIcon,{className:"naming-conventions__info-message-icon",src:c.InfoSmallLine}),n.default.createElement(m.Text,{size:"small",color:"faint"},g.intl.formatMessage(y))),n.default.createElement("hr",{className:"naming-conventions__horizontal-line-rule-section"}),n.default.createElement("div",{className:"naming-conventions__drag-and-drop-area-container",ref:N},n.default.createElement(p.DragDropContext,{onDragEnd:K},n.default.createElement(f.NamingConventionsDraggableRuleList,{rules:A,onRuleChange:W,dateFormats:e.data.dateInfo,onMLSelection:J,onDateFormatSelection:H,keywords:e.data.keywords,onKeywordChange:q,onRuleRemove:V,experiments:a,errorState:R,showMissingDataErrors:b}))),n.default.createElement("hr",{className:"naming-conventions__horizontal-line-rule-section"}),n.default.createElement("div",{className:"naming-conventions__add-rule-button-container"},n.default.createElement(_.Button,{variant:"transparent",hasNoUnderline:!0,withIconLeft:n.default.createElement(d.UIIcon,{src:c.AddCircleLine,role:"presentation",className:"naming-conventions__add-rule-button"}),onClick:X,disabled:b&&R.some(e=>!!e&&e.type===r.ErrorType.RULE_ERROR)},n.default.createElement(m.Text,{color:"faint"},g.intl.formatMessage(M)))),n.default.createElement(o.NamingConventionsTitleCasingSelectionButton,{isSelected:F,onSelect:B,shouldFocus:O,onShouldFocusToggle:G}),n.default.createElement(i.NamingConventionsConsistentSeparatorSelectionButton,{isSelected:x,onSelect:B,separatorSelection:e.data.consistentSeparatorSelection,setSeparatorSelection:z,useSelectComponent:!0}),a.expNamingConventionsRenamingBarExistingNC?n.default.createElement(v.NamingConventionsRenamingBarSelectionButton,{isSelected:U,onSelect:B}):null)},t.NamingConventionsView.displayName="NamingConventionsView"})),define("metaserver/static/js/naming_conventions/components/nc_consistent_separator_selection_button",["require","exports","tslib","react","react-intl","metaserver/static/js/naming_conventions/types","metaserver/static/js/naming_conventions/components/nc_selection_button_with_selection","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsConsistentSeparatorSelectionButton=void 0,n=a.__importStar(n);const l=(0,s.defineMessage)({id:"U595M8",defaultMessage:"Change separators to"}),c=(0,s.defineMessage)({id:"jyN4iF",defaultMessage:"Separate words with"}),d=(0,s.defineMessage)({id:"fNMZat",defaultMessage:"Spaces"}),m=(0,s.defineMessage)({id:"WlQ6fB",defaultMessage:"Underscores"}),u=(0,s.defineMessage)({id:"dxmlqa",defaultMessage:"Dashes"});t.NamingConventionsConsistentSeparatorSelectionButton=n.default.memo(({isSelected:e,onSelect:t,separatorSelection:a,setSeparatorSelection:s,useSelectComponent:g})=>{const f=(0,n.useMemo)(()=>new Map([[o.ConsistentSeparatorSelection.spaces,r.intl.formatMessage(d)],[o.ConsistentSeparatorSelection.underscores,r.intl.formatMessage(m)],[o.ConsistentSeparatorSelection.dashes,r.intl.formatMessage(u)]]),[]);return n.default.createElement(i.NamingConventionsSelectionButtonWithSelection,{isSelected:e,onSelect:t,value:o.NamingConventionType.consistent_separators,label:g?r.intl.formatMessage(c):r.intl.formatMessage(l),optionsMapping:f,optionSelection:a,setOptionSelection:s,useSelectComponent:g})}),t.NamingConventionsConsistentSeparatorSelectionButton.displayName="NamingConventionsConsistentSeparatorSelectionButton"})),define("metaserver/static/js/naming_conventions/components/nc_date_selection_button",["require","exports","tslib","react","react-intl","metaserver/static/js/naming_conventions/types","metaserver/static/js/naming_conventions/components/nc_selection_button_with_selection","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsDateSelectionButton=void 0,n=a.__importStar(n);const l=(0,s.defineMessage)({id:"Op7+fy",defaultMessage:"Start filenames with date"}),c=(0,s.defineMessage)({id:"kuIfCl",defaultMessage:"YYYY-MM"}),d=(0,s.defineMessage)({id:"Wo8t/x",defaultMessage:"YYYY-MM-DD"}),m=(0,s.defineMessage)({id:"dq2xhP",defaultMessage:"YYYYMMDD"}),u=(0,s.defineMessage)({id:"ASIht1",defaultMessage:"YYYY-Mon-DD"});t.NamingConventionsDateSelectionButton=({isSelected:e,onSelect:t,dateFormatSelection:a,setDateFormatSelection:s})=>{const g=(0,n.useMemo)(()=>new Map([[o.DateFormatSelection.yyyy_mm,r.intl.formatMessage(c)],[o.DateFormatSelection.yyyy_mm_dd,r.intl.formatMessage(d)],[o.DateFormatSelection.yyyy_abbr_dd,r.intl.formatMessage(u)],[o.DateFormatSelection.yyyymmdd,r.intl.formatMessage(m)]]),[]);return n.default.createElement(i.NamingConventionsSelectionButtonWithSelection,{isSelected:e,onSelect:t,value:o.NamingConventionType.upload_date,label:r.intl.formatMessage(l),optionsMapping:g,optionSelection:a,setOptionSelection:s,useSelectComponent:!1})},t.NamingConventionsDateSelectionButton.displayName="NamingConventionsDateSelectionButton"})),define("metaserver/static/js/naming_conventions/components/nc_draggable_rule_list",["require","exports","tslib","react","react-beautiful-dnd","metaserver/static/js/naming_conventions/components/nc_rule_row"],(function(e,t,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsDraggableRuleList=void 0,n=a.__importDefault(n);t.NamingConventionsDraggableRuleList=n.default.memo(({rules:e,dateFormats:t,keywords:a,onRuleChange:i,onDateFormatSelection:r,onKeywordChange:l,onRuleRemove:c,onMLSelection:d,experiments:m,errorState:u,showMissingDataErrors:g})=>{const f=((e,t,a,s,i,r,l,c,d,m,u)=>(g,f,p)=>n.default.createElement(o.NamingConventionsRuleRow,{position:p.source.index,rule:e[p.source.index],onRuleChange:s,dateInfo:t[p.source.index],onDateFormatChange:i,keyword:a[p.source.index],onKeywordChange:r,provided:g,snapshot:f,onRuleRemove:l,onMLSelection:c,experiments:d,error:m[p.source.index],showMissingDataErrors:u}))(e,t,a,i,r,l,c,d,m,u,g);return n.default.createElement(s.Droppable,{droppableId:"rule_list",renderClone:f},t=>n.default.createElement("div",Object.assign({ref:t.innerRef},t.droppableProps,{style:{zIndex:2e4}}),e.map((e,t)=>n.default.createElement(s.Draggable,{key:`${e}-${t}`,draggableId:`${e}-${t}`,index:t},f)),t.placeholder))}),t.NamingConventionsDraggableRuleList.displayName="NamingConventionsDraggableRuleList"})),define("metaserver/static/js/naming_conventions/components/nc_generic_live_preview",["require","exports","tslib","react","dig-components/typography","react-intl","dig-components/icons/src","dig-components/icons","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsGenericLivePreview=void 0,n=a.__importDefault(n);const c=(0,o.defineMessage)({id:"/f9BQ2",defaultMessage:"This is how your filenames will look"});t.NamingConventionsGenericLivePreview=n.default.memo(({previewText:e,forModal2:t})=>t?n.default.createElement("div",{id:e,className:"naming-conventions__live-preview-container-2","data-testid":"generic-live-preview"},n.default.createElement("div",{className:"naming-conventions__live-preview-icon"},n.default.createElement(r.UIIcon,{src:i.FileLine})),n.default.createElement("div",{className:"naming-conventions__live-preview-text",tabIndex:0},n.default.createElement(s.Text,{monospace:!0},e))):n.default.createElement("div",{className:"naming-conventions__live-preview-section"},n.default.createElement(s.Text,{tagName:"label",htmlFor:e},l.intl.formatMessage(c)),n.default.createElement("div",{id:e,className:"naming-conventions__live-preview-container"},n.default.createElement(r.UIIcon,{className:"naming-conventions__live-preview-icon",src:i.FileLine}),n.default.createElement(s.Text,{monospace:!0},e)))),t.NamingConventionsGenericLivePreview.displayName="NamingConventionsGenericLivePreview"})),define("metaserver/static/js/naming_conventions/components/nc_ml_toggle",["require","exports","tslib","react","react-intl","metaserver/static/js/core/i18n","metaserver/static/js/naming_conventions/components/nc_toggle_button","dig-components/controls","dig-components/typography","dig-components/tooltips","dig-components/icons","dig-components/icons/src","dig-components/buttons","metaserver/static/js/clean/referrer_cleansing_redirect"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsMLCheckbox=t.NamingConventionsMLToggle=void 0,n=a.__importDefault(n);const f=(0,s.defineMessage)({id:"yqIarH",defaultMessage:"Intelligent file renaming"});t.NamingConventionsMLToggle=({isToggled:e,onSelect:t,value:a,disabled:s})=>n.default.createElement(i.NamingConventionsToggleButton,{isToggled:e,onSelect:t,value:a,disabled:s,label:o.intl.formatMessage(f)}),t.NamingConventionsMLToggle.displayName="NamingConventionsMLToggle";const p=(0,s.defineMessage)({id:"Ya3WDl",defaultMessage:"Replace with existing dates detected in filenames"}),_=(0,s.defineMessage)({id:"xD1Q24",defaultMessage:"Can only be active on one rule at a time"}),v=(0,s.defineMessage)({id:"bK/FO8",defaultMessage:"This option cannot be enabled when a date format with time is selected"});t.NamingConventionsMLCheckbox=n.default.memo(({isSelected:e,onSelect:t,position:a,value:s,disabled:i})=>n.default.createElement("div",{className:"naming-conventions__ml-checkbox-row",key:s},n.default.createElement(r.Checkbox,{id:s+a,checked:e,onChange:e=>{const n=e.target.checked;t(a,n)},className:"naming-conventions__ml-checkbox",disabled:i}),n.default.createElement(c.Tooltip,{title:i?o.intl.formatMessage(v):o.intl.formatMessage(_)},n.default.createElement("span",{className:"naming-conventions__ml-checkbox-label"},n.default.createElement(l.Text,{tagName:"label",htmlFor:s+a,size:"small",color:i?"disabled":"standard"},o.intl.formatMessage(p)))),n.default.createElement(u.IconButton,{variant:"transparent",color:i?"disabled":"standard"},n.default.createElement(d.UIIcon,{src:m.HelpLine,onClick:()=>{(0,g.safe_open_tab_and_redirect)("https://help.dropbox.com/en-us/files-folders/sort-preview/naming-conventions")}})))),t.NamingConventionsMLCheckbox.displayName="NamingConventionsMLCheckbox"})),define("metaserver/static/js/naming_conventions/components/nc_parent_folder_name_selection_button",["require","exports","tslib","react","react-intl","metaserver/static/js/naming_conventions/types","metaserver/static/js/naming_conventions/components/nc_selection_button","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsParentFolderNameSelectionButton=void 0,n=a.__importDefault(n);const l=(0,s.defineMessage)({id:"JNB+YZ",defaultMessage:"Add parent folder name"});t.NamingConventionsParentFolderNameSelectionButton=({isSelected:e,onSelect:t})=>n.default.createElement(i.NamingConventionsSelectionButton,{isSelected:e,onSelect:t,value:o.NamingConventionType.parent_folder_name,label:r.intl.formatMessage(l)}),t.NamingConventionsParentFolderNameSelectionButton.displayName="NamingConventionsParentFolderNameSelectionButton"})),define("metaserver/static/js/naming_conventions/components/nc_renaming_bar_selection_button",["require","exports","tslib","react","react-intl","metaserver/static/js/naming_conventions/types","metaserver/static/js/naming_conventions/components/nc_selection_button","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsRenamingBarSelectionButton=void 0,n=a.__importDefault(n);const l=(0,s.defineMessage)({id:"vtlxR/",defaultMessage:"Display naming conventions overlay when renaming files in this folder"});t.NamingConventionsRenamingBarSelectionButton=n.default.memo(({isSelected:e,onSelect:t})=>n.default.createElement(i.NamingConventionsSelectionButton,{isSelected:e,onSelect:t,value:o.NamingConventionType.renaming_bar_enabled,label:r.intl.formatMessage(l)})),t.NamingConventionsRenamingBarSelectionButton.displayName="NamingConventionsRenamingBarSelectionButton"})),define("metaserver/static/js/naming_conventions/components/nc_rule_row",["require","exports","tslib","react","dig-components/text_fields","metaserver/static/js/naming_conventions/types","metaserver/static/js/core/i18n","react-intl","dig-components/icons","dig-components/icons/src","dig-components/text_fields","dig-components/buttons","metaserver/static/js/naming_conventions/components/nc_ml_toggle","dig-components/typography"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsRuleRow=void 0,n=a.__importDefault(n);const f=(0,r.defineMessage)({id:"LnSULt",defaultMessage:"Include date"}),p=(0,r.defineMessage)({id:"+X+HOK",defaultMessage:"Date uploaded"}),_=(0,r.defineMessage)({id:"aIMXCV",defaultMessage:"Date captured"}),v=(0,r.defineMessage)({id:"tQhGF4",defaultMessage:"Add keyword"}),y=(0,r.defineMessage)({id:"hvMtJg",defaultMessage:"Keyword"}),M=(0,r.defineMessage)({id:"Kjqg7T",defaultMessage:"Include parent folder"}),S=(0,r.defineMessage)({id:"N0rNFR",defaultMessage:"Parent folder"}),E=(0,r.defineMessage)({id:"Ev/BMV",defaultMessage:"Add media metadata"}),T=(0,r.defineMessage)({id:"gSjlZj",defaultMessage:"Camera make"}),h=(0,r.defineMessage)({id:"9yy5+6",defaultMessage:"Camera model"}),b=(0,r.defineMessage)({id:"OmDsJV",defaultMessage:"Lens model"}),C=(0,r.defineMessage)({id:"x8hiOw",defaultMessage:"Dimensions"}),N=(0,r.defineMessage)({id:"rB8RaG",defaultMessage:"Dots per inch (DPI)"}),w=(0,r.defineMessage)({id:"PXnFLy",defaultMessage:"Dots per centimeter (DPCM)"}),P=(0,r.defineMessage)({id:"1BKAPH",defaultMessage:"YYYY-MM"}),I=(0,r.defineMessage)({id:"aU2hMp",defaultMessage:"YYYY-MM-DD"}),D=(0,r.defineMessage)({id:"Lcdy8q",defaultMessage:"YYYYMMDD"}),O=(0,r.defineMessage)({id:"twjMx7",defaultMessage:"YYYY-Mon-DD"}),j=(0,r.defineMessage)({id:"efegPo",defaultMessage:"YYYY-MM-HH.MM"}),A=(0,r.defineMessage)({id:"W+m1VY",defaultMessage:"YYYY-MM-DD-HH.MM"}),F=(0,r.defineMessage)({id:"EzAZL/",defaultMessage:"YYYYMMDD-HH.MM"}),x=(0,r.defineMessage)({id:"wn5WOD",defaultMessage:"YYYY-Mon-DD-HH.MM"}),U=(0,r.defineMessage)({id:"+pAgX+",defaultMessage:"Select rule"}),L=(0,r.defineMessage)({id:"RCnu3K",defaultMessage:"Filename"}),R=(0,r.defineMessage)({id:"Nzzj63",defaultMessage:"Sender's name"}),k=(0,r.defineMessage)({id:"GPKgbS",defaultMessage:"Enter keyword"});t.NamingConventionsRuleRow=n.default.memo(({position:e,rule:t,onRuleChange:a,dateInfo:r,onDateFormatChange:d,keyword:P,onKeywordChange:I,provided:D,snapshot:O,onRuleRemove:j,onMLSelection:A,experiments:F,error:x,showMissingDataErrors:k})=>{let H=n.default.createElement(n.default.Fragment,null);t===o.NamingConventionType.upload_date||t===o.NamingConventionType.capture_date?H=n.default.createElement(Y,{position:e,dateFormat:r.dateFormatSelection,onDateFormatChange:d}):t===o.NamingConventionType.keyword&&(H=n.default.createElement(B,{position:e,keyword:P,onKeywordChange:I,error:x,showMissingInfoErrors:k}));let q=!1,W=n.default.createElement(n.default.Fragment,null);t===o.NamingConventionType.original_snippet?(q=!0,W=n.default.createElement(z,{position:e,value:i.intl.formatMessage(L)})):t===o.NamingConventionType.sender_name&&(q=!0,W=n.default.createElement(z,{position:e,value:i.intl.formatMessage(R)}));let K=null;if(F.expNamingConventionsMLFilename&&(t===o.NamingConventionType.upload_date||t===o.NamingConventionType.capture_date)){let t=!1;r.dateFormatSelection!==o.DateFormatSelection.yyyy_mm_hh_mm&&r.dateFormatSelection!==o.DateFormatSelection.yyyy_mm_dd_hh_mm&&r.dateFormatSelection!==o.DateFormatSelection.yyyy_abbr_dd_hh_mm&&r.dateFormatSelection!==o.DateFormatSelection.yyyymmdd_hh_mm||(t=!0),K=n.default.createElement(u.NamingConventionsMLCheckbox,{isSelected:!0===r.mlFilenameParsing,onSelect:A,position:e,value:o.NamingConventionML,disabled:t})}return n.default.createElement("div",Object.assign({ref:D.innerRef},D.draggableProps,D.dragHandleProps,{style:Object.assign(Object.assign({},D.draggableProps.style),{zIndex:2e4,backgroundColor:O.isDragging?"#d6e8fa":"inherit",borderLeft:O.isDragging?"4px solid var(--color__core__accent)":""}),className:"naming-conventions__rule-row-container"}),n.default.createElement("div",{className:"naming-conventions__rule-row",key:e},n.default.createElement("div",{className:"naming-conventions__select-container"},q?W:n.default.createElement("div",{className:"naming-conventions__rule-row-bg-style"},n.default.createElement(s.Select,{id:"rule-selection"+e,placeholder:i.intl.formatMessage(U),value:t,onChange:t=>{const n=o.ruleStrToEnum.get(t);n&&a(e,n)},isInvalid:!!x&&x.type===o.ErrorType.RULE_ERROR&&k},n.default.createElement(s.Select.OptGroup,{withLabel:i.intl.formatMessage(f)},n.default.createElement(s.Select.Option,{value:o.NamingConventionType.upload_date},i.intl.formatMessage(p))),n.default.createElement(s.Select.OptGroup,{withLabel:i.intl.formatMessage(v)},n.default.createElement(s.Select.Option,{value:o.NamingConventionType.keyword},i.intl.formatMessage(y))),n.default.createElement(s.Select.OptGroup,{withLabel:i.intl.formatMessage(M)},n.default.createElement(s.Select.Option,{value:o.NamingConventionType.parent_folder_name},i.intl.formatMessage(S))),F.expNamingConventionsMetadata?n.default.createElement(s.Select.OptGroup,{withLabel:i.intl.formatMessage(E)},n.default.createElement(s.Select.Option,{value:o.NamingConventionType.capture_date},i.intl.formatMessage(_)),n.default.createElement(s.Select.Option,{value:o.NamingConventionType.camera_make},i.intl.formatMessage(T)),n.default.createElement(s.Select.Option,{value:o.NamingConventionType.camera_model},i.intl.formatMessage(h)),n.default.createElement(s.Select.Option,{value:o.NamingConventionType.lens_model},i.intl.formatMessage(b)),n.default.createElement(s.Select.Option,{value:o.NamingConventionType.dimensions},i.intl.formatMessage(C)),n.default.createElement(s.Select.Option,{value:o.NamingConventionType.dots_per_inch},i.intl.formatMessage(N)),n.default.createElement(s.Select.Option,{value:o.NamingConventionType.dots_per_cm},i.intl.formatMessage(w))):null))),n.default.createElement("div",{className:"naming-conventions__select-container"},H),q?n.default.createElement("div",{className:"naming-conventions__empty-icon"}):n.default.createElement(m.IconButton,{variant:"transparent"},n.default.createElement(l.UIIcon,{src:c.DeleteLine,onClick:()=>{j(e)},"data-testid":"delete-button"})),n.default.createElement("div",{className:"naming-conventions__move-icon"},n.default.createElement(l.UIIcon,{src:c.MoveLine}))),n.default.createElement("div",null,K),x&&x.type===o.ErrorType.RULE_ERROR&&k&&n.default.createElement("div",{className:"naming-conventions__rule-row-error-message"},n.default.createElement(g.Text,{size:"small",color:"error"},x.message)),n.default.createElement("hr",{className:"naming-conventions__horizontal-line-rule-row"}))}),t.NamingConventionsRuleRow.displayName="NamingConventionsRuleRow";const Y=n.default.memo(({position:e,dateFormat:t,onDateFormatChange:a})=>n.default.createElement("div",{className:"naming-conventions__rule-row-bg-style"},n.default.createElement(s.Select,{id:"date-selection"+e,value:t,onChange:t=>{const n=o.dateFormatStrToEnum.get(t);n&&a(e,n)}},n.default.createElement(s.Select.Option,{value:o.DateFormatSelection.yyyy_mm},i.intl.formatMessage(P)),n.default.createElement(s.Select.Option,{value:o.DateFormatSelection.yyyy_mm_dd},i.intl.formatMessage(I)),n.default.createElement(s.Select.Option,{value:o.DateFormatSelection.yyyymmdd},i.intl.formatMessage(D)),n.default.createElement(s.Select.Option,{value:o.DateFormatSelection.yyyy_abbr_dd},i.intl.formatMessage(O)),n.default.createElement(s.Select.Option,{value:o.DateFormatSelection.yyyy_mm_hh_mm},i.intl.formatMessage(j)),n.default.createElement(s.Select.Option,{value:o.DateFormatSelection.yyyy_mm_dd_hh_mm},i.intl.formatMessage(A)),n.default.createElement(s.Select.Option,{value:o.DateFormatSelection.yyyymmdd_hh_mm},i.intl.formatMessage(F)),n.default.createElement(s.Select.Option,{value:o.DateFormatSelection.yyyy_abbr_dd_hh_mm},i.intl.formatMessage(x)))));Y.displayName="NamingConventionsDateSelectComponent";const B=n.default.memo(({position:e,keyword:t,onKeywordChange:a,error:s,showMissingInfoErrors:r})=>{const[l,c]=n.default.useState(!1);return n.default.useEffect(()=>{const e=(null==s?void 0:s.type)===o.ErrorType.TEXT_ERROR&&((null==s?void 0:s.whenToShow)===o.WhenToShowError.IMMEDIATELY||r&&(null==s?void 0:s.whenToShow)===o.WhenToShowError.WHEN_BUTTON_CLICKED);c(e)},[s,r]),n.default.createElement("div",{id:"keyword-field"+e,className:"naming-conventions__rule-row-bg-style"},n.default.createElement(d.TextInput,{id:"keyword-field"+e,placeholder:i.intl.formatMessage(k),value:t,onChange:t=>{a(e,t.target.value)},isInvalid:l}),l&&n.default.createElement(g.Text,{size:"small",color:"error"},null==s?void 0:s.message))});B.displayName="NamingConventionsKeywordTextInputComponent";const z=n.default.memo(({position:e,value:t})=>(void 0===t&&(t=""),n.default.createElement("div",{className:"naming-conventions__rule-row-bg-style"},n.default.createElement(d.TextInput,{id:"locked-field"+e,value:t,disabled:!0,"aria-label":t}))));z.displayName="NamingConventionsLockedTextFieldComponent"})),define("metaserver/static/js/naming_conventions/components/nc_selection_button_with_selection",["require","exports","tslib","react","dig-components/controls","dig-components/typography","dig-components/chips","dig-components/menu","dig-components/text_fields","metaserver/static/js/naming_conventions/types"],(function(e,t,a,n,s,o,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsSelectionButtonWithSelection=void 0,n=a.__importDefault(n);t.NamingConventionsSelectionButtonWithSelection=({isSelected:e,onSelect:t,value:a,label:d,optionsMapping:m,optionSelection:u,setOptionSelection:g,useSelectComponent:f})=>{const p=[];return m.forEach((e,t)=>{f?p.push(n.default.createElement(l.Select.Option,{value:t},e)):p.push(n.default.createElement(r.Menu.SelectItem,{key:t,value:t,selected:t===u},e))}),n.default.createElement("div",{className:"naming-conventions__checkbox-row",key:a},n.default.createElement(s.Checkbox,{id:a,value:a,checked:e,onChange:t,className:"naming-conventions__checkbox"}),n.default.createElement("span",{className:"naming-conventions__checkbox-label"},n.default.createElement(o.Text,{tagName:"label",htmlFor:a},d)),f?n.default.createElement("div",{className:"naming-conventions__separators-select-container"},n.default.createElement(l.Select,{id:a+"-select",value:u,onChange:e=>{g("underscores"===e?c.ConsistentSeparatorSelection.underscores:"dashes"===e?c.ConsistentSeparatorSelection.dashes:c.ConsistentSeparatorSelection.spaces)}},p)):n.default.createElement(r.Menu.Wrapper,{onSelection:e=>{g(e)},className:"naming-conventions__drop-down-container"},({getTriggerProps:e,getContentProps:t})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(i.FilterChip,Object.assign({withDropdownIcon:!0},e()),m.get(u)),n.default.createElement(r.Menu.Content,Object.assign({},t()),n.default.createElement(r.Menu.Segment,null,p)))))},t.NamingConventionsSelectionButtonWithSelection.displayName="NamingConventionsSelectionButtonWithSelection"})),define("metaserver/static/js/naming_conventions/components/nc_selection_button",["require","exports","tslib","react","dig-components/controls","dig-components/typography"],(function(e,t,a,n,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsSelectionButton=void 0,n=a.__importDefault(n);t.NamingConventionsSelectionButton=({isSelected:e,onSelect:t,value:a,label:i,shouldFocus:r,disabled:l,onShouldFocusToggle:c})=>{const d=n.default.useRef(null);return n.default.useEffect(()=>{d.current&&r&&c&&(d.current.focus(),c())}),n.default.createElement("div",{className:"naming-conventions__checkbox-row",key:a},n.default.createElement(s.Checkbox,{id:a,value:a,checked:e,disabled:l,onChange:t,className:"naming-conventions__checkbox",ref:d}),n.default.createElement("span",{className:"naming-conventions__checkbox-label"},n.default.createElement(o.Text,{tagName:"label",htmlFor:a},i)))},t.NamingConventionsSelectionButton.displayName="NamingConventionsSelectionButton"})),define("metaserver/static/js/naming_conventions/components/nc_title_casing_selection_button",["require","exports","tslib","react","react-intl","metaserver/static/js/naming_conventions/types","metaserver/static/js/naming_conventions/components/nc_selection_button","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsTitleCasingSelectionButton=void 0,n=a.__importDefault(n);const l=(0,s.defineMessage)({id:"vkhtzi",defaultMessage:"Capitalize initials"});t.NamingConventionsTitleCasingSelectionButton=n.default.memo(({isSelected:e,onSelect:t,shouldFocus:a,onShouldFocusToggle:s})=>n.default.createElement(i.NamingConventionsSelectionButton,{isSelected:e,onSelect:t,value:o.NamingConventionType.capitalize_all_initials,label:r.intl.formatMessage(l),shouldFocus:a,onShouldFocusToggle:s})),t.NamingConventionsTitleCasingSelectionButton.displayName="NamingConventionsTitleCasingSelectionButton"})),define("metaserver/static/js/naming_conventions/components/nc_toggle_button",["require","exports","tslib","react","dig-components/controls","dig-components/typography","react-intl","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamingConventionsToggleButton=void 0,n=a.__importDefault(n);const l=(0,i.defineMessage)({id:"ncTZKN",defaultMessage:"Learn More"});t.NamingConventionsToggleButton=({isToggled:e,onSelect:t,value:a,disabled:i,label:c,learnMoreLink:d})=>n.default.createElement("div",{className:"naming-conventions__toggle-row",key:a},n.default.createElement(s.Toggle,{id:a,isToggled:e,onChange:t,className:"naming-conventions__toggle-button",disabled:i}),n.default.createElement("span",{className:"naming-conventions__toggle-label"},n.default.createElement(o.Text,{tagName:"label",htmlFor:a},c),d?n.default.createElement(o.Link,{className:"naming-conventions__toggle-learn-more",href:d,target:"_blank",variant:"monochromatic",rel:"noreferrer"},r.intl.formatMessage(l)):null)),t.NamingConventionsToggleButton.displayName="NamingConventionsToggleButton"})),define("metaserver/static/js/naming_conventions/generic_live_preview",["require","exports","metaserver/static/js/naming_conventions/types","react-intl","metaserver/static/js/core/i18n"],(function(e,t,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGenericLivePreviewText=void 0;const o=(0,n.defineMessage)({id:"pXtmWv",defaultMessage:"Example Folder"}),i=(0,n.defineMessage)({id:"VsyQFb",defaultMessage:"Example Filename.pdf"}),r=(0,n.defineMessage)({id:"2Dzzt5",defaultMessage:"example filename.pdf"}),l=(0,n.defineMessage)({id:"Twdm0+",defaultMessage:"keyword"}),c=new Map([[a.DateFormatSelection.yyyy_mm,"2021-11"],[a.DateFormatSelection.yyyy_mm_dd,"2021-11-02"],[a.DateFormatSelection.yyyy_abbr_dd,"2021-Nov-02"],[a.DateFormatSelection.yyyymmdd,"20211102"]]),d=new Map([[a.ConsistentSeparatorSelection.spaces," "],[a.ConsistentSeparatorSelection.underscores,"_"],[a.ConsistentSeparatorSelection.dashes,"-"]]);t.getGenericLivePreviewText=e=>{const{selectedRules:t,dateFormatSelection:n}=e;let i=m(e);return t.includes(a.NamingConventionType.parent_folder_name)&&(i=s.intl.formatMessage(o)+" - "+i),t.includes(a.NamingConventionType.upload_date)&&(i=c.get(n)+" - "+i),i};const m=e=>{const{selectedRules:t,consistentSeparatorSelection:n}=e;let o;if(o=t.includes(a.NamingConventionType.capitalize_all_initials)?s.intl.formatMessage(i):s.intl.formatMessage(r),t.includes(a.NamingConventionType.keyword)){const e=o.split(".");o=e[0]+" "+s.intl.formatMessage(l)+"."+e[1]}if(t.includes(a.NamingConventionType.consistent_separators)){const e=d.get(n);o=o.replace(/\s/g,e)}return o}})),define("metaserver/static/js/naming_conventions/generic_live_preview_2",["require","exports","metaserver/static/js/naming_conventions/types","react-intl","metaserver/static/js/core/i18n"],(function(e,t,a,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGenericLivePreviewText=void 0;const o=(0,n.defineMessage)({id:"OuFH1I",defaultMessage:"example parent folder"}),i=(0,n.defineMessage)({id:"wv++Sh",defaultMessage:"Sender's name"}),r=(0,n.defineMessage)({id:"3CWP/N",defaultMessage:"Example Filename"}),l=(0,n.defineMessage)({id:"F6REWU",defaultMessage:"example filename"}),c=(0,n.defineMessage)({id:"UoQzii",defaultMessage:"keyword"}),d=(0,n.defineMessage)({id:"m4Kz4W",defaultMessage:"camera make"}),m=(0,n.defineMessage)({id:"y1H4sc",defaultMessage:"camera model"}),u=(0,n.defineMessage)({id:"I6nYxI",defaultMessage:"lens model"}),g=(0,n.defineMessage)({id:"nAsbFH",defaultMessage:"W x H"}),f=(0,n.defineMessage)({id:"GDIqj4",defaultMessage:"100 x 100"}),p=(0,n.defineMessage)({id:"GBWDKJ",defaultMessage:"254 x 254"}),_=new Map([[a.DateFormatSelection.yyyy_mm,"2021-11"],[a.DateFormatSelection.yyyy_mm_dd,"2021-11-02"],[a.DateFormatSelection.yyyy_abbr_dd,"2021-Nov-02"],[a.DateFormatSelection.yyyymmdd,"20211102"],[a.DateFormatSelection.yyyy_mm_hh_mm,"2021-11-14.35"],[a.DateFormatSelection.yyyy_mm_dd_hh_mm,"2021-11-02-14.35"],[a.DateFormatSelection.yyyy_abbr_dd_hh_mm,"2021-Nov-02-14.35"],[a.DateFormatSelection.yyyymmdd_hh_mm,"20211102-14.35"]]),v=new Map([[a.DateFormatSelection.yyyy_mm,"2021-10"],[a.DateFormatSelection.yyyy_mm_dd,"2021-10-13"],[a.DateFormatSelection.yyyy_abbr_dd,"2021-Oct-13"],[a.DateFormatSelection.yyyymmdd,"20211013"],[a.DateFormatSelection.yyyy_mm_hh_mm,"2021-10-14.35"],[a.DateFormatSelection.yyyy_mm_dd_hh_mm,"2021-10-13-14.35"],[a.DateFormatSelection.yyyy_abbr_dd_hh_mm,"2021-Oct-13-14.35"],[a.DateFormatSelection.yyyymmdd_hh_mm,"20211013-14.35"]]),y=new Map([[a.ConsistentSeparatorSelection.spaces," "],[a.ConsistentSeparatorSelection.underscores,"_"],[a.ConsistentSeparatorSelection.dashes,"-"]]),M=new Map([[a.NamingConventionType.sender_name,i],[a.NamingConventionType.parent_folder_name,o],[a.NamingConventionType.keyword,c],[a.NamingConventionType.camera_make,d],[a.NamingConventionType.camera_model,m],[a.NamingConventionType.lens_model,u],[a.NamingConventionType.dimensions,g],[a.NamingConventionType.dots_per_inch,f],[a.NamingConventionType.dots_per_cm,p]]);t.getGenericLivePreviewText=e=>{const{componentList:t,capitalizeAllInitials:n,changeAllSeparators:o,data:i}=e,r=y.get(i.consistentSeparatorSelection);let l="";const c=S(n,o,r);return t.forEach((e,n)=>{let d;e!==a.NamingConventionType.none&&(d=e===a.NamingConventionType.upload_date?_.get(i.dateInfo[n].dateFormatSelection):e===a.NamingConventionType.capture_date?v.get(i.dateInfo[n].dateFormatSelection):e===a.NamingConventionType.original_snippet?c:s.intl.formatMessage(M.get(e)),0===n?l=d:1!==n||t[0]!==a.NamingConventionType.upload_date&&t[0]!==a.NamingConventionType.capture_date?l+=o?r+d:" "+d:l+=" - "+d)}),l+".pdf"};const S=(e,t,a)=>{let n=e?s.intl.formatMessage(r):s.intl.formatMessage(l);return t&&(n=n.replace(/\s/g,a)),n}})),define("metaserver/static/js/tagging/components/tags_search",["require","exports","tslib","react","ts-key-enum","dig-components/icons","dig-components/icons/src","dig-components/text_fields","dig-components/form_row","dig-components/tooltips","dig-components/typeahead","dig-components/typography","metaserver/static/js/components/ui/css","metaserver/static/js/tagging/utils","metaserver/static/js/tagging/utils"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u,g,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TagsSearch=t.TagsSearchWithoutCss=void 0,n=a.__importStar(n),g=a.__importStar(g);const p=({placeholderText:e})=>n.createElement("div",{className:"tg-empty-state"},n.createElement(m.Text,{variant:"label",size:"small",color:"faint",tagName:"p"},e));p.displayName="EmptyState";const _=e=>{var{disabled:t,children:s}=e,o=a.__rest(e,["disabled","children"]);return t?n.createElement(n.Fragment,null,s):n.createElement(c.Tooltip,Object.assign({},o),s)};_.displayName="Tooltip";const v=({hasFocus:e})=>n.createElement(m.Text,{size:"small",color:e?"standard":"faint",className:"tg-input-hashtag-accessory"},"#");v.displayName="LeftAccessory";t.TagsSearchWithoutCss=({user:e,maxTagsReached:t,readOnly:a=!1,excludeResults:c,onSelection:u,onInputFocus:y,onStartTyping:M,onInputBlur:S,getStrings:E,allTagsSuggestions:T,fetchAllTagsSuggestions:h})=>{const[b,C]=n.useState(""),[N,w]=n.useState([]),[P,I]=n.useState(!1),{addTypeaheadEmptyState:D,createTagPrefix:O,addTag:j,invalidCharsError:A,maxTagsReachedError:F,tooLongError:x,alreadyExistsError:U,readOnlyError:L}=E();n.useEffect(()=>{h({user:e})},[]),n.useEffect(()=>{const e=b.toLowerCase();if(Y(e)||void 0===T)return void w([]);const t=g.trimHashtags(e),a=g.getTagsSuggestions(t,T).filter(f.isUserGeneratedTag).map(e=>e.tag_text).filter(e=>!c.includes(e));w(a)},[b,T,c]);const R=e=>n.createElement(d.Typeahead.Row,{key:`@${e}`,id:`@${e}`,value:e,withTitle:n.createElement(m.Text,{size:"small"},g.formatTag(e))}),k=e=>n.createElement(d.Typeahead.Row,{key:e,value:e,withTitle:O?n.createElement(m.Text,{size:"small"},O+" ",n.createElement(m.Text,{size:"small",isBold:!0},g.formatTag(e))):n.createElement(m.Text,{size:"small"},g.formatTag(e)),id:e}),Y=e=>!(/^\#*[_a-zA-Z0-9]+$/i.test(e)&&e.length<=32||/^\#*$/i.test(e)),B=({currentTarget:{value:e}})=>{0===b.length&&1===e.length&&(null==M||M()),C(e)},z=t?F:a?L:void 0,H=b.toLowerCase(),q=g.trimHashtags(H),W=""!==q&&0===N.length&&c.includes(q),K=Y(H)||W,V=K||c.includes(q)||N.includes(q)||""===q?[]:[H],G=a||t;return n.createElement(d.Typeahead.Wrapper,{onSelection:e=>{C(""),u(e)},onFocus:()=>{null==y||y(),I(!0)},onBlur:()=>{null==S||S(b),I(!1)},className:"tg-search"},({getTriggerProps:e,getContentProps:t,closeMenu:a})=>n.createElement(n.Fragment,null,n.createElement(_,{disabled:!G,id:"more-button-tooltip",title:z},n.createElement(r.TextInput,Object.assign({id:"trigger"},e({onChange:B}),{value:b,"aria-label":j,placeholder:j,disabled:G,withLeftAccessory:n.createElement(v,{hasFocus:P||b.length>0}),autoComplete:"off",isInvalid:K,className:"tg-input tg-input-small-font-override",onKeyDown:e=>((e,t)=>{if(e.key===s.Key.Enter&&""!==b){if(Y(b)||c.includes(q))return;const e=g.trimHashtags(b).toLowerCase();u(e),C(""),t({})}})(e,a)}))),K&&n.createElement(l.FormHelperText,{isInvalid:!0,id:"bad-parms-input-helper"},n.createElement(o.UIIcon,{src:i.FailLine,size:"small"}),b.length>=32?x:W?U:A),n.createElement(d.Typeahead.Container,Object.assign({},t(),{auto:!1,isEmptyQuery:0===b.length,placement:"bottom-start",emptyPrompt:n.createElement(p,{placeholderText:D})}),n.createElement(d.Typeahead.Results,{results:N.slice(0,3),renderRow:R}),n.createElement(d.Typeahead.Results,{results:V,renderRow:k}))))},t.TagsSearchWithoutCss.displayName="TagsSearchWithoutCss",t.TagsSearch=(0,u.requireCssWithComponent)(t.TagsSearchWithoutCss,["/static/metaserver/static/css/tagging/manual_tagging-vflO195yx.css"])})),define("metaserver/static/js/tagging/ui/components/auto_tagging_typeahead",["require","exports","tslib","react","metaserver/static/js/core/i18n","metaserver/static/js/tagging/components/tags_container","metaserver/static/js/tagging/components/tags_search","metaserver/static/js/components/ui/css","metaserver/static/js/tagging/utils","react-redux","metaserver/static/js/tagging/data/selectors/index","metaserver/static/js/tagging/data/action_creators"],(function(e,t,a,n,s,o,i,r,l,c,d,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTaggingTypeahead=void 0,n=a.__importStar(n);const u=({user:e,data:t,onDataChange:a,onDataError:s})=>{const[r,u]=n.useState((null==t?void 0:t.tags)||[]),f=(0,c.useDispatch)(),p=(0,c.useSelector)(d.selectAllTagsSuggestions),{addAtLeastOneTagError:_}=g();n.useEffect(()=>{a({tags:r}),0===r.length&&s(_)},[r]),n.useEffect(()=>{(null==t?void 0:t.tags)&&u(t.tags)},[t]);return n.createElement(n.Fragment,null,n.createElement(i.TagsSearch,{user:e,maxTagsReached:r.length>=5,getStrings:g,excludeResults:r,onSelection:e=>{r.includes(e)||u([e,...r])},allTagsSuggestions:p,fetchAllTagsSuggestions:({user:e})=>{f((0,m.fetchAllTagsSuggestions)({user:e}))}}),n.createElement(o.TagsContainer,{tags:(0,l.textTagsToUserGeneratedTags)(r),onTagDelete:e=>{u(r.filter(t=>t!==e.tag_text))},containerClassName:"tags-container",chipClassName:"tag-chip-spaced",showMoreClassName:"tag-chip"}))};function g(){return{addTypeaheadEmptyState:s.intl.formatMessage({id:"tOzwXq",defaultMessage:"Use words that will help you or teammates find the files in this folder"}),maxTagsReachedError:s.intl.formatMessage({id:"umQAUu",defaultMessage:"5 tags is the maximum per automation. Remove existing tags to add new tags."}),addTag:s.intl.formatMessage({id:"m6+B0R",defaultMessage:"Add a tag"}),tagsInfo:s.intl.formatMessage({id:"coaiAD",defaultMessage:"Choose carefully! Anyone on your team can see tags. People who can edit the file can edit tags, too."}),alreadyExistsError:s.intl.formatMessage({id:"370uDs",defaultMessage:"That tags already selected"}),invalidCharsError:s.intl.formatMessage({id:"USd6JI",defaultMessage:"Use letters (a-z), numbers (0-9), and underscores ( _ )"}),tooLongError:s.intl.formatMessage({id:"l83VsE",defaultMessage:"32 characters is the maximum"}),addAtLeastOneTagError:s.intl.formatMessage({id:"1uuRDP",defaultMessage:"You need to add at least one tag"})}}u.displayName="AutoTaggingTypeaheadWithoutCss",t.AutoTaggingTypeahead=(0,r.requireCssWithComponent)(u,["/static/typescript/component_libraries/organized-content/src/index.web.css"])})),define("metaserver/static/js/tidy_up/modal/options_view/tidy_by_date_expansion",["require","exports","tslib","react","dig-components/menu","metaserver/static/js/tidy_up/modal/types","dig-components/buttons","react-intl","dig-components/controls","dig-components/typography","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TidyUpByDateExpansion=t.TIDY_UP_MONTHYEAR_SELECTION=t.TIDY_UP_YEARMONTHMONTH_SELECTION=t.TIDY_UP_YEARMONTH_SELECTION=void 0,n=a.__importStar(n),t.TIDY_UP_YEARMONTH_SELECTION=(0,r.defineMessage)({id:"B2XGBO",defaultMessage:"YYYY-MM"}),t.TIDY_UP_YEARMONTHMONTH_SELECTION=(0,r.defineMessage)({id:"NrgzrW",defaultMessage:"YYYY-MM Month"}),t.TIDY_UP_MONTHYEAR_SELECTION=(0,r.defineMessage)({id:"WY4cZj",defaultMessage:"Month YYYY"});t.TidyUpByDateExpansion=({excludePromptLabel:e,excludeCurrent:a,setExcludeCurrent:r,showDateFormatSelection:m,dateFormatSelection:u,setDateFormatSelection:g})=>{const f=(0,n.useCallback)(e=>{r(e.target.checked)},[r]),p="tidy-up-expansion__check-box",_=(0,n.useMemo)(()=>new Map([[o.DateFormatSelection.YYYY_MM,d.intl.formatMessage(t.TIDY_UP_YEARMONTH_SELECTION)],[o.DateFormatSelection.YYYY_MM_Month,d.intl.formatMessage(t.TIDY_UP_YEARMONTHMONTH_SELECTION)],[o.DateFormatSelection.Month_YYYY,d.intl.formatMessage(t.TIDY_UP_MONTHYEAR_SELECTION)]]),[d.intl]);return m?n.default.createElement("span",{className:`${p}-container`},n.default.createElement(s.Menu.Wrapper,{onSelection:e=>{e!==u&&void 0!==g&&g(e)},className:"tidy-up-expansion__date-format-drop-down"},({getContentProps:e,getTriggerProps:t})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(i.Button,Object.assign({},t(),{variant:"opacity",withDropdownIcon:!0}),_.get(null!=u?u:o.DateFormatSelection.YYYY_MM)),n.default.createElement(s.Menu.Content,Object.assign({},e(),{placement:"bottom-end"}),n.default.createElement(s.Menu.Segment,null,[o.DateFormatSelection.YYYY_MM,o.DateFormatSelection.YYYY_MM_Month,o.DateFormatSelection.Month_YYYY].map(e=>n.default.createElement(s.Menu.SelectItem,{key:e,value:e,selected:u===e},_.get(e))))))),n.default.createElement("span",{className:p},n.default.createElement(l.Checkbox,{checked:a,onChange:f,"aria-label":e,id:p})),n.default.createElement(c.Text,{tagName:"label",htmlFor:p},e)):n.default.createElement("span",{className:`${p}-container`},n.default.createElement("span",{className:p},n.default.createElement(l.Checkbox,{checked:a,onChange:f,"aria-label":e,id:p})),n.default.createElement(c.Text,{tagName:"label",htmlFor:p},e))},t.TidyUpByDateExpansion.displayName="TidyUpByDateExpansion"})),define("metaserver/static/js/tidy_up/modal/options_view/tidy_custom_filters_selection",["require","exports","tslib","react-intl","react","metaserver/static/js/tidy_up/modal/options_view/tidy_radio_selection","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TidyUpCustomFiltersSelection=t.TIDY_UP_CUSTOM_FILTERS_SUBTEXT=t.TIDY_UP_CUSTOM_FILTERS_SELECTION=void 0,s=a.__importDefault(s),t.TIDY_UP_CUSTOM_FILTERS_SELECTION=(0,n.defineMessage)({id:"dp9FT7",defaultMessage:"Custom filters"}),t.TIDY_UP_CUSTOM_FILTERS_SUBTEXT=(0,n.defineMessage)({id:"ZmwGuf",defaultMessage:"Define custom rules based on keywords and filetypes"});t.TidyUpCustomFiltersSelection=({isSelected:e,onSelect:a})=>s.default.createElement(o.TidyUpSelection,{isSelected:e,onSelect:a,value:i.TidyUpType.custom_filters,label:r.intl.formatMessage(t.TIDY_UP_CUSTOM_FILTERS_SELECTION),subtext:r.intl.formatMessage(t.TIDY_UP_CUSTOM_FILTERS_SUBTEXT)}),t.TidyUpCustomFiltersSelection.displayName="TidyUpCustomFiltersSelection"})),define("metaserver/static/js/tidy_up/modal/options_view/tidy_month_selection",["require","exports","tslib","react-intl","react","metaserver/static/js/tidy_up/modal/options_view/tidy_radio_selection","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/tidy_up/modal/options_view/tidy_by_date_expansion","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TidyUpMonthSelection=t.TIDY_UP_EXCLUDE_MONTH_PROMPT=t.TIDY_UP_MONTH_DESCRIPTION=t.TIDY_UP_MONTH_SELECTION=void 0,s=a.__importStar(s),t.TIDY_UP_MONTH_SELECTION=(0,n.defineMessage)({id:"n8ISVS",defaultMessage:"Month"}),t.TIDY_UP_MONTH_DESCRIPTION=(0,n.defineMessage)({id:"/6zLhV",defaultMessage:"Month your content was added to Dropbox"}),t.TIDY_UP_EXCLUDE_MONTH_PROMPT=(0,n.defineMessage)({id:"n4bpuy",defaultMessage:"Exclude current month"});t.TidyUpMonthSelection=({isSelected:e,onSelect:a,excludeCurrentMonth:n,setExcludeCurrentMonth:d,dateFormatSelection:m,setDateFormatSelection:u})=>((0,s.useEffect)(()=>{e&&void 0===m&&u(l.DateFormatSelection.YYYY_MM)},[e,m,u]),s.default.createElement(o.TidyUpSelection,{isSelected:e,onSelect:a,value:i.TidyUpType.by_month,label:c.intl.formatMessage(t.TIDY_UP_MONTH_SELECTION),subtext:c.intl.formatMessage(t.TIDY_UP_MONTH_DESCRIPTION)},s.default.createElement(r.TidyUpByDateExpansion,{excludeCurrent:n,setExcludeCurrent:d,excludePromptLabel:c.intl.formatMessage(t.TIDY_UP_EXCLUDE_MONTH_PROMPT),showDateFormatSelection:!0,dateFormatSelection:m,setDateFormatSelection:u}))),t.TidyUpMonthSelection.displayName="TidyUpMonthSelection"})),define("metaserver/static/js/tidy_up/modal/options_view/tidy_year_selection",["require","exports","tslib","react-intl","react","metaserver/static/js/tidy_up/modal/options_view/tidy_radio_selection","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/tidy_up/modal/options_view/tidy_by_date_expansion","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TidyUpYearSelection=t.TIDY_UP_EXCLUDE_YEAR_PROMPT=t.TIDY_UP_YEAR_DESCRIPTION=t.TIDY_UP_YEAR_SELECTION=void 0,s=a.__importDefault(s),t.TIDY_UP_YEAR_SELECTION=(0,n.defineMessage)({id:"f9xbnY",defaultMessage:"Year"}),t.TIDY_UP_YEAR_DESCRIPTION=(0,n.defineMessage)({id:"oCxF9e",defaultMessage:"Year your content was added to Dropbox"}),t.TIDY_UP_EXCLUDE_YEAR_PROMPT=(0,n.defineMessage)({id:"fNhXRH",defaultMessage:"Exclude current year"});t.TidyUpYearSelection=({isSelected:e,onSelect:a,excludeCurrentYear:n,setExcludeCurrentYear:c})=>s.default.createElement(o.TidyUpSelection,{isSelected:e,onSelect:a,value:i.TidyUpType.by_year,label:l.intl.formatMessage(t.TIDY_UP_YEAR_SELECTION),subtext:l.intl.formatMessage(t.TIDY_UP_YEAR_DESCRIPTION)},s.default.createElement(r.TidyUpByDateExpansion,{excludeCurrent:n,setExcludeCurrent:c,excludePromptLabel:l.intl.formatMessage(t.TIDY_UP_EXCLUDE_YEAR_PROMPT),showDateFormatSelection:!1})),t.TidyUpYearSelection.displayName="TidyUpYearSelection"})),define("metaserver/static/js/tidy_up/modal/options_view/tidy_time_frame_filter_selection",["require","exports","tslib","react-intl","react","metaserver/static/js/tidy_up/modal/options_view/tidy_radio_selection","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TidyUpTimeFrameFilterSelection=t.TIDY_UP_TIME_FRAME_FILTER_SUBTEXT=t.TIDY_UP_TIME_FRAME_FILTER_SELECTION=void 0,s=a.__importDefault(s),t.TIDY_UP_TIME_FRAME_FILTER_SELECTION=(0,n.defineMessage)({id:"6bhfMK",defaultMessage:"Timeframe"}),t.TIDY_UP_TIME_FRAME_FILTER_SUBTEXT=(0,n.defineMessage)({id:"ZSDbXp",defaultMessage:"Group based on a specific timeframe"});t.TidyUpTimeFrameFilterSelection=({isSelected:e,onSelect:a})=>s.default.createElement(o.TidyUpSelection,{isSelected:e,onSelect:a,value:i.TidyUpType.time_frame_filter,label:r.intl.formatMessage(t.TIDY_UP_TIME_FRAME_FILTER_SELECTION),subtext:r.intl.formatMessage(t.TIDY_UP_TIME_FRAME_FILTER_SUBTEXT)}),t.TidyUpTimeFrameFilterSelection.displayName="TidyUpTimeFrameFilterSelection"})),define("metaserver/static/js/tidy_up/modal/options_view/tidy_keyphrase_selection",["require","exports","tslib","react-intl","react","metaserver/static/js/tidy_up/modal/types","metaserver/static/js/tidy_up/modal/options_view/tidy_radio_selection","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TidyUpKeyphraseSelection=t.TIDY_UP_KEYPHRASE_SUBTEXT=t.TIDY_UP_KEYPHRASE_SELECTION=void 0,s=a.__importDefault(s),t.TIDY_UP_KEYPHRASE_SELECTION=(0,n.defineMessage)({id:"z86vBB",defaultMessage:"Keyword"}),t.TIDY_UP_KEYPHRASE_SUBTEXT=(0,n.defineMessage)({id:"wwhItj",defaultMessage:"Select to enter keyword"});t.TidyUpKeyphraseSelection=({isSelected:e,onSelect:a})=>s.default.createElement(i.TidyUpSelection,{isSelected:e,onSelect:a,value:o.TidyUpType.keyphrase,label:r.intl.formatMessage(t.TIDY_UP_KEYPHRASE_SELECTION),subtext:r.intl.formatMessage(t.TIDY_UP_KEYPHRASE_SUBTEXT)}),t.TidyUpKeyphraseSelection.displayName="TidyUpKeyphraseSelection"})),define("metaserver/static/js/tidy_up/modal/keyphrase_view/tidy_keyphrase",["require","exports","tslib","react","dig-components/text_fields","dig-components/typography","dig-components/buttons","dig-components/modal","metaserver/static/js/tidy_up/modal/tidy_strings","metaserver/static/js/tidy_up/modal/tidy_up_header","dig-components/menu","typescript/libraries/spectrum-content-icon-compatibility/src/index","metaserver/static/js/filepath/filepath","metaserver/static/js/core/i18n","classnames"],(function(e,t,a,n,s,o,i,r,l,c,d,m,u,g,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TidyUpKeyphraseView=void 0,n=a.__importStar(n),u=a.__importStar(u),f=a.__importDefault(f);t.TidyUpKeyphraseView=({keyphraseParameters:e,onPreview:t,onCancel:a,onBack:d,subfolderPaths:m,setKeyphraseParameters:f,isUsedInAutomationModal:_})=>{const y=n.default.useRef(null),[M,S]=(0,n.useState)(e.keyphrase),E=((e,t)=>{const[a,s]=(0,n.useState)(e);return(0,n.useEffect)(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),a})(M,300);(0,n.useEffect)(()=>{E!==e.keyphrase&&f({keyphrase:E})},[e,f,E]);const T=e.keyphraseDestination,h=0===m.length,b=h||!(E&&T),C=e=>{"Enter"===e.key&&y.current&&(b?y.current.blur():t())},N=n.default.useMemo(()=>m.sort(),[m]),w=(0,n.useCallback)(e=>{f({keyphraseDestination:u.filename(e)})},[f]);return _?n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"tidy-auto-keyphrase-view__text-input"},n.default.createElement(s.TextInput,{placeholder:g.intl.formatMessage(l.TIDY_KEYPHRASE.INPUT_PLACEHOLDER),onChange:e=>S(e.target.value),value:M,onKeyPress:()=>null,ref:y}),n.default.createElement(p,{sortedFolderPaths:N,selectedDestinationPath:T,setDestinationSelection:w,noSubfolders:h,isUsedInAutomationModal:_}))):n.default.createElement(n.default.Fragment,null,n.default.createElement(c.TidyUpModalHeader,{label:l.TIDY_KEYPHRASE.HEADER_LABEL}),n.default.createElement(r.Modal.Body,null,n.default.createElement(o.Text,{className:"tidy-keyphrase-view__input-label",isBold:!0},g.intl.formatMessage(l.TIDY_KEYPHRASE.INPUT_LABEL)),n.default.createElement(s.TextInput,{placeholder:g.intl.formatMessage(l.TIDY_KEYPHRASE.INPUT_PLACEHOLDER),onChange:e=>S(e.target.value),value:M,onKeyPress:C,ref:y}),n.default.createElement(p,{sortedFolderPaths:N,selectedDestinationPath:T,setDestinationSelection:w,noSubfolders:h,isUsedInAutomationModal:_})),n.default.createElement(r.Modal.Footer,null,n.default.createElement(i.Button,{variant:"transparent",onClick:d},g.intl.formatMessage(l.TIDY_UP_MODAL_BACK_LABEL)),n.default.createElement(i.Button,{variant:"opacity",onClick:a},g.intl.formatMessage(l.TIDY_UP_MODAL_CANCEL_LABEL)),n.default.createElement(v,{onPreview:t,isDisabled:b})))},t.TidyUpKeyphraseView.displayName="TidyUpKeyphraseView";const p=({sortedFolderPaths:e,selectedDestinationPath:t,setDestinationSelection:a,noSubfolders:s,isUsedInAutomationModal:i})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(o.Text,{isBold:!0,className:(0,f.default)({"tidy-auto-keyphrase-view__dropdown-label":i,"tidy-keyphrase-view__dropdown-label":!i})},g.intl.formatMessage(l.TIDY_KEYPHRASE.FOLDER_SELECTION_LABEL)),n.default.createElement(_,{disabled:s,selectedDestinationPath:t,onSelection:e=>{a(e)},sortedFolderPaths:e,dropdownPlaceholderLabel:g.intl.formatMessage(l.TIDY_FOLDER_SELECTION.DROPDOWN_PLACEHOLDER)}),s&&n.default.createElement(o.Text,{variant:"label",size:"small"},g.intl.formatMessage(l.TIDY_FOLDER_SELECTION.NO_SUBFOLDERS)));p.displayName="DestinationSelectionSection";const _=({onSelection:e,selectedDestinationPath:t,sortedFolderPaths:a,dropdownPlaceholderLabel:s,disabled:r})=>n.default.createElement("div",{className:"tidy-keyphrase-view__dropdown"},n.default.createElement(d.Menu.Wrapper,{className:"tidy-keyphrase-view__menu-wrapper",matchContainingWidth:!0,onSelection:e,hasMaxHeight:164},({getContentProps:e,getTriggerProps:l})=>n.default.createElement(n.default.Fragment,null,n.default.createElement(i.Button,Object.assign({disabled:r,className:"tidy-keyphrase-view__dropdown-button",variant:"opacity",withDropdownIcon:!0},l()),t?n.default.createElement(y,{folderName:u.filename(t)}):n.default.createElement("div",{className:"tidy-keyphrase-view__button-container"},n.default.createElement(o.Text,{color:r?"disabled":"standard",className:"tidy-keyphrase-view__button-text"},s))),n.default.createElement(d.Menu.Content,Object.assign({},e()),n.default.createElement(d.Menu.Segment,null,a.map(e=>n.default.createElement(d.Menu.SelectItem,{key:e,value:e,selected:t===u.filename(e)},n.default.createElement(y,{folderName:u.filename(e)}))))))));_.displayName="FolderSelectionDropdown";const v=({onPreview:e,isDisabled:t})=>n.default.createElement(i.Button,{variant:"primary",onClick:e,disabled:t},g.intl.formatMessage(l.TIDY_KEYPHRASE.PREVIEW_LABEL));v.displayName="TidyKeyphrasePrimaryButton";const y=({folderName:e})=>n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{className:"tidy-keyphrase-view__select-item-content"},n.default.createElement(m.IconContent,{className:"tidy-keyphrase-view__folder-icon",height:"24",width:"24",name:"folder-small"}),n.default.createElement(o.Text,{className:"tidy-keyphrase-view__button-text"},e)));y.displayName="FolderIconAndName"})),define("metaserver/static/js/tidy_up/modal/tidy_up_header",["require","exports","tslib","react","dig-components/modal","dig-components/typography","metaserver/static/js/core/i18n"],(function(e,t,a,n,s,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TidyUpModalHeader=void 0,n=a.__importDefault(n);t.TidyUpModalHeader=({label:e})=>n.default.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard",className:"tidy-up-modal__header"},n.default.createElement(o.Title,null,i.intl.formatMessage(e))),t.TidyUpModalHeader.displayName="TidyUpModalHeader"}));
//# sourceMappingURL=pkg-flows-actions.min.js-vflU1xRJ7.map