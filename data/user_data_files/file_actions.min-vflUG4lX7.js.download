define(["require","exports","metaserver/static/js/action_bar/file_actions/portable/delete/delete","metaserver/static/js/action_bar/file_actions/portable/delete/snackbars","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/action_bar/file_actions/portable/copy","metaserver/static/js/action_bar/file_actions/portable/move","metaserver/static/js/action_bar/file_actions/portable/rename/rename","metaserver/static/js/action_bar/file_actions/portable/rename/snackbars","metaserver/static/js/action_bar/file_actions/portable/open_desktop","metaserver/static/js/action_bar/file_actions/portable/go_to_folder"],(function(e,o,t,r,n,i,a,s,l,c,_,p){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.goToFolderAction=o.renameAction=o.moveAction=o.openInReplayAction=o.publishPaintedDoorAction=o.openInDesktopAction=o.deleteAction=o.copyAction=void 0;o.copyAction=(e,o,t,r,n)=>{const i={fq_path:e.fq_path,is_dir:e.is_dir};t.logUserAction("copy","overflow_menu"),(0,a.portableCopy)({user:o,source:"preview",filesPath:[i],exceptions:n||{isOverFreeQuota:!1,hasExcludedNsIds:!1},currentFQPath:r,createNewFolderInMoveDialog:!0,nsId:e.ns_id},{})};o.deleteAction=(e,o,n,a,s,l,c)=>{const _={file_id:e.file_id,is_dir:e.is_dir};(0,t.portableDelete)({user:o,filesPath:[_],fq_path:e.fq_path},{onNetworkRequest:()=>(0,r.deleteSnackBarInProgress)(i.PREVIEWS_SNACKBAR_ID),onSuccess:()=>{(0,r.deleteCompleteSnackBar)(i.PREVIEWS_SNACKBAR_ID),null==l||l(e),null==n||n()},onError:e=>{(0,r.deleteFailedSnackBar)(e,i.PREVIEWS_SNACKBAR_ID),null==a||a()},setDeleteFileModalOpen:c,onRequestClose:()=>null==s?void 0:s()})};o.openInDesktopAction=(e,o,t,r)=>{t.logUserAction("open_desktop_click","open_dropdown");const n=e.ns_id||(null==r?void 0:r.currentNSID),i="ns_path"in e?e.ns_path:null==r?void 0:r.currentNSPath;(0,_.portableOpenInDesktop)({user:o,nsPath:i,nsId:n},{})};o.publishPaintedDoorAction=(e,o)=>{o.logUserAction("publish_painted_door_click");window.open("https://a.sprig.com/ZUhTWTBXaDQ0WX5zaWQ6OTVjMTMyMTgtYzJmMi00MjZkLWJiZjctMGJjODFiMTM1YTc4?source=previews")};o.openInReplayAction=(e,o)=>{o.logUserAction("open_replay_click");const t=e?`https://replay.dropbox.com/project/creating/${e.file_id}?creationSource=dropbox_previews_action_bar`:"https://replay.dropbox.com/?login=true";window.open(t)};o.moveAction=(e,o,t,r,n,i)=>{let a;t.logUserAction("move","overflow_menu"),(0,s.portableMove)({user:o,source:"preview",filesPath:[e],exceptions:i||{isOverFreeQuota:!1,hasExcludedNsIds:!1},currentFQPath:r,createNewFolderInMoveDialog:!0,nsId:e.ns_id},{onSuccess:(o,t)=>{n&&t&&(a=t[0],n(e,t[0]))},onUndo:o=>{n&&o&&a&&n(a,e)}})};o.renameAction=(e,o,t,r,a)=>{(0,l.portableRename)({currentName:(0,n.getFilename)(e),user:o,fq_path:e.fq_path},{onNetworkRequest:()=>(0,c.renameSnackBarInProgress)(i.PREVIEWS_SNACKBAR_ID),onSuccess:o=>{(0,c.renameCompleteSnackBar)(i.PREVIEWS_SNACKBAR_ID),a&&o&&"file"===o[".tag"]&&a(e,{fq_path:o.path_display||e.fq_path,revision_id:o.rev,file_id:o.id}),null==t||t()},onError:o=>{(0,c.renameFailedSnackBar)(o,e.fq_path,i.PREVIEWS_SNACKBAR_ID),null==r||r()}})};o.goToFolderAction=(e,o,t)=>{t.logUserAction("go_to_folder_click","overflow_menu"),(0,p.handleShowInFolder)({fqPaths:[e.fq_path],user:o})}}));
//# sourceMappingURL=file_actions.min.js-vflCuUdtV.map