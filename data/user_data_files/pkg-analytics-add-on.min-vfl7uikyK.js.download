define("metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal",["require","exports","tslib","react","dig-components/modal","metaserver/static/js/components/ui/modal","metaserver/static/js/docsend_analytics_add_on/data/use_account_status","metaserver/static/js/docsend_analytics_add_on/data/use_analytics_link","metaserver/static/js/docsend_analytics_add_on/components/terms_of_service","metaserver/static/js/docsend_analytics_add_on/components/link_management","metaserver/static/js/docsend_analytics_add_on/components/spinner_utils","metaserver/static/js/docsend_analytics_add_on/components/upgrade_banner","metaserver/static/js/docsend_analytics_add_on/components/summary_analytics","metaserver/static/js/docsend_analytics_add_on/components/visit_analytics","metaserver/static/js/ux_analytics/utils","metaserver/static/js/core/i18n","dig-components/typography","metaserver/static/js/filepath/filepath","metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.css","metaserver/static/js/docsend_analytics_add_on/components/snackbar_utils","metaserver/static/js/docsend_analytics_add_on/components/delete_link_confirmation_modal","dig-components/badges","metaserver/static/js/user_survey/user_survey"],(function(e,t,a,s,n,i,l,o,r,d,c,u,_,m,f,g,y,p,v,E,b,k,w){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showDocSendAnalyticsModal=t.DocSendAnalyticsModal=void 0,s=a.__importDefault(s),v=a.__importDefault(v);const h=({accountStatus:e,link:t,fileId:a,filePath:n,user:i,fileExt:l,accountStatusError:o,didDeleteLink:c,onShowDeleteLinkModal:g,onUpdatedLink:y,hasNewerFileVersion:p,fileTimestampMicro:E,stormcrowVariant:b,entryPoint:k,isNewLink:h})=>{const[M,T]=s.default.useState(!1),[S,A]=s.default.useState(e.daysRemaining),[C,N]=s.default.useState(p),[x,D]=s.default.useState(E),L=s.default.useRef(null),O=s.default.useCallback((e,t,a)=>{N(t),D(a),y(e),T(!0),A(30)},[y]);s.default.useEffect(()=>{L.current&&((0,f.dispatchModalOpened)(),w.UserSurvey.trackEvent("viewed_docsend_analytics_add_on_modal","docsend_analytics_add_on_modal"))},[L]);const P=e.isProvisioned||t||M||c,V=!o&&!P,j=!t||c||!e.hasAddOnAccess&&!M,I=(e.isProvisioned||M)&&!e.hasActivePlan;return s.default.createElement("div",{className:v.default.modalContent,ref:L},I&&s.default.createElement(u.UpgradeBanner,{daysRemaining:S,stormcrowVariant:b,fileId:a,filePath:n,user:i,fileExt:l,entryPoint:k,link:t}),P?s.default.createElement(d.LinkManagement,{link:t,onUpdatedLink:y,fileId:a,user:i,fileExt:l,didDeleteLink:c,onShowDeleteLinkModal:g,hasNewerFileVersion:C,fileTimestampMicro:x,entryPoint:k}):V?s.default.createElement(r.TermsOfService,{onAcceptedTOS:O,user:i,fileId:a,fileExt:l,entryPoint:k}):null,V?s.default.createElement(r.OnboardingImage,null):s.default.createElement(s.default.Fragment,null,s.default.createElement(_.SummaryAnalytics,{fileId:a,fileExt:l,user:i,link:t,disabled:j,entryPoint:k,skip:h}),s.default.createElement(m.VisitAnalytics,{fileId:a,fileExt:l,user:i,link:t,disabled:j,entryPoint:k,skip:h})))};t.DocSendAnalyticsModal=({fileName:e,fileId:t,filePath:a,user:i,stormcrowVariant:r,entryPoint:d})=>{var u;const _=(0,p.file_extension)(e),[m,w]=s.default.useState(!0),{isAccountStatusLoading:M,accountStatus:T,accountStatusError:S}=(0,l.useAccountStatus)({user:i,entryPoint:d}),{isAnalyticsLinkLoading:A,linkData:C,linkDataError:N}=(0,o.useAnalyticsLink)({user:i,skip:M||!!S||!T.isProvisioned,fileId:t,fileExt:_,entryPoint:d}),[x,D]=s.default.useState(!1),[L,O]=s.default.useState(!1),[P,V]=s.default.useState(null==C?void 0:C.link),j=s.default.useCallback(e=>{V(e),O(!1)},[]);s.default.useEffect(()=>{(null==C?void 0:C.link)&&V(C.link)},[C]);const I=s.default.useCallback(e=>{e&&O(!0),D(!1)},[]),R=s.default.useCallback(()=>{D(!0)},[]),U=s.default.useCallback(()=>{w(!1),(0,f.dispatchModalClosed)()},[]),B=M||A;return s.default.useEffect(()=>{(S||N)&&(0,E.showSnackbar)("fail",g.intl.formatMessage({id:"CXl2Hh",defaultMessage:"There was a problem completing this request"}))},[S,N]),x&&P?s.default.createElement(b.DeleteLinkModal,{link:P,fileExt:_,fileName:e,fileId:t,user:i,onCloseDeleteLinkModal:I,entryPoint:d}):s.default.createElement(n.Modal,{open:m,isCentered:!0,withCloseButton:"Close",className:"uxa-modal",id:"docsend_analytics_add_on_modal",width:700,onRequestClose:U,"aria-labelledby":"ds-analytics-modal-title"},s.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(n.Modal.Title,{id:"ds-analytics-modal-title",className:v.default.dsAnalyticsHeader},s.default.createElement("div",null,g.intl.formatMessage({id:"m/4By6",defaultMessage:"Analytics for "}),s.default.createElement(y.Text,{className:v.default.dsAnalyticsHeaderFilename},e)),s.default.createElement(k.AccessoryBadge,{"data-testid":"beta-badge"},g.intl.formatMessage({id:"QT7EnD",defaultMessage:"Beta"})))),s.default.createElement(n.Modal.Body,{hasVerticalSpacing:!0},B?s.default.createElement(c.CenteredSpinner,null):s.default.createElement(h,{accountStatus:T,link:P,hasNewerFileVersion:null==C?void 0:C.hasNewerFileVersion,fileTimestampMicro:null==C?void 0:C.fileTimestampMicro,user:i,fileId:t,filePath:a,fileExt:(0,p.file_extension)(e),accountStatusError:S,didDeleteLink:L,onShowDeleteLinkModal:R,onUpdatedLink:j,stormcrowVariant:r,entryPoint:d,isNewLink:null===(u=null==C?void 0:C.isNewLink)||void 0===u||u})))},t.DocSendAnalyticsModal.displayName="DocSendAnalyticsModal";t.showDocSendAnalyticsModal=e=>{i.Modal.showInstance(s.default.createElement(t.DocSendAnalyticsModal,Object.assign({},e)))}})),define("metaserver/static/js/docsend_analytics_add_on/components/delete_link_confirmation_modal",["require","exports","tslib","react","dig-components/modal","dig-components/typography","dig-components/buttons","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/ux_analytics/utils","metaserver/static/js/docsend_analytics_add_on/components/snackbar_utils","metaserver/static/js/core/i18n","metaserver/static/js/docsend_analytics_add_on/data/apiUtils","metaserver/static/js/clean/analytics","metaserver/static/js/docsend_analytics_add_on/helpers/utils"],(function(e,t,a,s,n,i,l,o,r,d,c,u,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteLinkModal=void 0,s=a.__importDefault(s);t.DeleteLinkModal=({fileName:e,fileId:t,fileExt:f,link:g,user:y,onCloseDeleteLinkModal:p,entryPoint:v})=>{const[E,b]=s.default.useState(!1),k=s.default.useMemo(()=>new o.DefaultUserApiV2Client(y),[y]),w=s.default.useCallback(()=>{(0,r.dispatchModalClosed)(),p(!1);const e=(0,m.getLinkIdFromLink)(g);_.ProEventsLogger.log("docsend_analytics_add_on_delete_link_cancel",{fileExt:f,entryPoint:v,linkId:e})},[p]),h=s.default.useCallback(()=>a.__awaiter(void 0,void 0,void 0,(function*(){b(!0),(0,d.showSnackbar)("sync",c.intl.formatMessage({id:"3/ldox",defaultMessage:"Deleting link to {fileName}."},{fileName:e}),0),(yield(0,u.deleteLink)(k,t,g,f,v))?((0,d.showSnackbar)("complete",c.intl.formatMessage({id:"3qNu/U",defaultMessage:"Deleted link to {fileName}."},{fileName:e})),(0,r.dispatchModalClosed)(),p(!0)):(0,d.showSnackbar)("fail",c.intl.formatMessage({id:"aIZcFS",defaultMessage:"There was a problem deleting this link."})),b(!1)})),[k,e,g,t,p]);return s.default.useEffect(()=>{(0,r.dispatchModalOpened)()},[]),s.default.createElement(n.Modal,{open:!0,isCentered:!0,className:"uxa-modal",id:"docsend_analytics_add_on_delete_link_modal","aria-labelledby":"ds-analytics-delete-link-modal-title","data-testid":"delete-link-modal"},s.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},s.default.createElement(n.Modal.Title,{id:"ds-analytics-delete-link-modal-title"},c.intl.formatMessage({id:"Q9LBuK",defaultMessage:'Delete link to "{fileName}"'},{fileName:e}))),s.default.createElement(n.Modal.Body,{hasVerticalSpacing:!0},s.default.createElement(i.Text,null,c.intl.formatMessage({id:"ZWg0m3",defaultMessage:"By deleting this link you will lose access to all past analytics. A new link can be created to track future analytics."}))),s.default.createElement(n.Modal.Footer,null,s.default.createElement(l.Button,{"data-testid":"cancel-button",variant:"opacity",onClick:w,autoFocus:!0},c.intl.formatMessage({id:"q/OeYK",defaultMessage:"Cancel"})),s.default.createElement(l.Button,{"data-testid":"delete-link-button",variant:"primary",onClick:h,disabled:E,autoFocus:!0},c.intl.formatMessage({id:"zpwh5R",defaultMessage:"Delete"}))))},t.DeleteLinkModal.displayName="DeleteLinkModal"})),define("metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.css",["require","exports","css!metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.teamsCloseButton=t.onboardingImage=t.documentVersionContainer=t.disabledText=t.email=t.emailBox=t.nameCell=t.visitCount=t.visitCountSection=t.visitAnalyticsTableHeader=t.visitAnalyticsTable=t.visitAnalyticsSection=t.chartLabel=t.chartBar=t.topPagesChart=t.summaryDataLabel=t.summaryAnalyticsDataImage=t.summaryAnalyticsData=t.summaryAnalyticsSection=t.linkArea=t.linkDetails=t.linkOptions=t.linkPermission=t.linkSection=t.tosError=t.tosCheckboxSection=t.tosTitle=t.tosHeading=t.tosSection=t.modalContent=t.spinnerText=t.spinnerWithText=t.spinnerContainer=t.divider=t.dsAnalyticsHeaderFilename=t.dsAnalyticsHeader=void 0,t.dsAnalyticsHeader="_ds-analytics-header_yp5ew_2",t.dsAnalyticsHeaderFilename="_ds-analytics-header-filename_yp5ew_10",t.divider="_divider_yp5ew_16",t.spinnerContainer="_spinner-container_yp5ew_25",t.spinnerWithText="_spinner-with-text_yp5ew_33",t.spinnerText="_spinner-text_yp5ew_39",t.modalContent="_modal-content_yp5ew_44",t.tosSection="_tos-section_yp5ew_50",t.tosHeading="_tos-heading_yp5ew_56",t.tosTitle="_tos-title_yp5ew_62",t.tosCheckboxSection="_tos-checkbox-section_yp5ew_68",t.tosError="_tos-error_yp5ew_74",t.linkSection="_link-section_yp5ew_78",t.linkPermission="_link-permission_yp5ew_84",t.linkOptions="_link-options_yp5ew_88",t.linkDetails="_link-details_yp5ew_94",t.linkArea="_link-area_yp5ew_101",t.summaryAnalyticsSection="_summary-analytics-section_yp5ew_106",t.summaryAnalyticsData="_summary-analytics-data_yp5ew_113",t.summaryAnalyticsDataImage="_summary-analytics-data-image_yp5ew_120",t.summaryDataLabel="_summary-data-label_yp5ew_134",t.topPagesChart="_top-pages-chart_yp5ew_138",t.chartBar="_chart-bar_yp5ew_149",t.chartLabel="_chart-label_yp5ew_161",t.visitAnalyticsSection="_visit-analytics-section_yp5ew_165",t.visitAnalyticsTable="_visit-analytics-table_yp5ew_172",t.visitAnalyticsTableHeader="_visit-analytics-table-header_yp5ew_179",t.visitCountSection="_visit-count-section_yp5ew_185",t.visitCount="_visit-count_yp5ew_185",t.nameCell="_name-cell_yp5ew_195",t.emailBox="_email-box_yp5ew_202",t.email="_email_yp5ew_202",t.disabledText="_disabled-text_yp5ew_214",t.documentVersionContainer="_document-version-container_yp5ew_218",t.onboardingImage="_onboarding-image_yp5ew_225",t.teamsCloseButton="_teams-close-button_yp5ew_238";t.default={dsAnalyticsHeader:"_ds-analytics-header_yp5ew_2",dsAnalyticsHeaderFilename:"_ds-analytics-header-filename_yp5ew_10",divider:"_divider_yp5ew_16",spinnerContainer:"_spinner-container_yp5ew_25",spinnerWithText:"_spinner-with-text_yp5ew_33",spinnerText:"_spinner-text_yp5ew_39",modalContent:"_modal-content_yp5ew_44",tosSection:"_tos-section_yp5ew_50",tosHeading:"_tos-heading_yp5ew_56",tosTitle:"_tos-title_yp5ew_62",tosCheckboxSection:"_tos-checkbox-section_yp5ew_68",tosError:"_tos-error_yp5ew_74",linkSection:"_link-section_yp5ew_78",linkPermission:"_link-permission_yp5ew_84",linkOptions:"_link-options_yp5ew_88",linkDetails:"_link-details_yp5ew_94",linkArea:"_link-area_yp5ew_101",summaryAnalyticsSection:"_summary-analytics-section_yp5ew_106",summaryAnalyticsData:"_summary-analytics-data_yp5ew_113",summaryAnalyticsDataImage:"_summary-analytics-data-image_yp5ew_120",summaryDataLabel:"_summary-data-label_yp5ew_134",topPagesChart:"_top-pages-chart_yp5ew_138",chartBar:"_chart-bar_yp5ew_149",chartLabel:"_chart-label_yp5ew_161",visitAnalyticsSection:"_visit-analytics-section_yp5ew_165",visitAnalyticsTable:"_visit-analytics-table_yp5ew_172",visitAnalyticsTableHeader:"_visit-analytics-table-header_yp5ew_179",visitCountSection:"_visit-count-section_yp5ew_185",visitCount:"_visit-count_yp5ew_185",nameCell:"_name-cell_yp5ew_195",emailBox:"_email-box_yp5ew_202",email:"_email_yp5ew_202",disabledText:"_disabled-text_yp5ew_214",documentVersionContainer:"_document-version-container_yp5ew_218",onboardingImage:"_onboarding-image_yp5ew_225",teamsCloseButton:"_teams-close-button_yp5ew_238"}})),define("metaserver/static/js/docsend_analytics_add_on/components/teams_painted_door_test/teams_analytics_survey_modal",["require","exports","tslib","react","dig-components/carousel","dig-components/modal","metaserver/static/js/components/ui/modal","dig-components/typography","metaserver/static/js/ux_analytics/utils","metaserver/static/js/clean/static_urls","metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.css"],(function(e,t,a,s,n,i,l,o,r,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showTeamsAnalyticsSurveyModal=t.TeamsAnalyticsSurveyModal=void 0,s=a.__importDefault(s),c=a.__importDefault(c);const u=({closeModal:e,goToNext:t})=>s.default.createElement(s.default.Fragment,null,s.default.createElement(n.CarouselSlideColumnContent,null,s.default.createElement(n.CarouselHeading,null,"Analytics for teams is coming soon"),s.default.createElement(n.CarouselText,null,s.default.createElement(o.Text,null,"Track activity for the files you share using Dropbox including:"),s.default.createElement("ul",null,s.default.createElement("li",null,"Who visited the file and when"),s.default.createElement("li",null,"How many times it was downloaded"),s.default.createElement("li",null,"Page-by-page engagement")),s.default.createElement(o.Text,{isBold:!0},"Sign up to be notified when we launch analytics for teams."))),s.default.createElement(n.CarouselSlideActions,null,s.default.createElement(n.CarouselButton,{onClick:t,variant:"primary",size:"standard"},"Sign up to be notified"),s.default.createElement(n.CarouselButton,{onClick:e,variant:"transparent",size:"standard",className:c.default.teamsCloseButton},"Close"))),_=({closeModal:e,goToPrevious:t})=>s.default.createElement(s.default.Fragment,null,s.default.createElement(n.CarouselSlideColumnContent,null,s.default.createElement(n.CarouselHeading,null,"Thanks for your interest"),s.default.createElement(n.CarouselText,null,s.default.createElement(o.Text,null,"Form Contents"))),s.default.createElement(n.CarouselSlideActions,null,s.default.createElement(n.CarouselButton,{onClick:t,variant:"opacity",size:"standard"},"Back"),s.default.createElement(n.CarouselButton,{onClick:e,variant:"primary",size:"standard"},"Submit"),s.default.createElement(n.CarouselButton,{onClick:e,variant:"transparent",size:"standard",className:c.default.teamsCloseButton},"Close"))),m=()=>s.default.createElement("img",{src:(0,d.static_url)("/static/metaserver/static/images/docsend_addon/abstract_ui-vflEMii5w.png"),alt:"",width:302,height:269});t.TeamsAnalyticsSurveyModal=({user:e,stormcrowVariant:t,entryPoint:a})=>{const l=s.default.useRef(null),[o,d]=s.default.useState(!0),c=s.default.useCallback(()=>{d(!1),(0,r.dispatchModalClosed)()},[]);s.default.useEffect(()=>{l.current&&(0,r.dispatchModalOpened)()},[l]);const f=s.default.useRef(null),g=s.default.useRef(null),y=(0,n.useFocusSlideOnTransition)([f,g]);return s.default.createElement(i.Modal,{open:o,isCentered:!0,className:"uxa-modal",id:"docsend_analytics_add_on_modal",width:700,onRequestClose:c},s.default.createElement(n.Carousel,{width:700,height:590,totalSlides:2,onSlideTransitioned:y,transitionDuration:"1500ms",showPager:!0},({goToPrevious:e,goToNext:t})=>s.default.createElement(n.CarouselContainer,null,s.default.createElement(n.CarouselSlide,{primaryColor:"var(--color__accent__cloud)",ref:f},s.default.createElement(n.CarouselSlideColumn,null,s.default.createElement(u,{closeModal:c,goToNext:t})),s.default.createElement(n.CarouselSlideColumn,null,s.default.createElement(m,null))),s.default.createElement(n.CarouselSlide,{primaryColor:"var(--color__accent__cloud)",ref:g},s.default.createElement(n.CarouselSlideColumn,null,s.default.createElement(_,{closeModal:c,goToPrevious:e})),s.default.createElement(n.CarouselSlideColumn,null,s.default.createElement(m,null))))))},t.TeamsAnalyticsSurveyModal.displayName="TeamsAnalyticsSurveyModal";t.showTeamsAnalyticsSurveyModal=e=>{l.Modal.showInstance(s.default.createElement(t.TeamsAnalyticsSurveyModal,Object.assign({},e)))}})),define("metaserver/static/js/docsend_analytics_add_on/components/link_management",["require","exports","tslib","react","dig-components/typography","dig-components/buttons","dig-components/icons","dig-components/icons/src","metaserver/static/js/api_v2/default_user_client","dig-components/text_fields","metaserver/static/js/docsend_analytics_add_on/data/apiUtils","metaserver/static/js/core/i18n","metaserver/static/js/docsend_analytics_add_on/components/spinner_utils","metaserver/static/js/clean/analytics","metaserver/static/js/docsend_analytics_add_on/components/snackbar_utils","metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.css","metaserver/static/js/docsend_analytics_add_on/helpers/utils"],(function(e,t,a,s,n,i,l,o,r,d,c,u,_,m,f,g,y){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),t.LinkManagement=t.LinkCreationError=void 0,s=a.__importDefault(s),g=a.__importDefault(g),(function(e){e.UNABLE_TO_CREATE_LINK="UNABLE_TO_CREATE_LINK"})(p=t.LinkCreationError||(t.LinkCreationError={}));const v=({apiV2Client:e,fileId:t,fileExt:r,link:d,hasNewerFileVersion:m,fileTimestampMicro:y,entryPoint:p})=>{const[v,E]=s.default.useState(!1),[b,k]=s.default.useState(!m),[w,h]=s.default.useState(!1),[M,T]=s.default.useState(y?y/1e3:void 0),S=s.default.useCallback(()=>a.__awaiter(void 0,void 0,void 0,(function*(){E(!0);const a=yield(0,c.updateDocument)(e,t,r,p,d);a?(T((a.file_hlc_unix_micros||0)/1e3),h(!0),k(!0)):(0,f.showSnackbar)("fail",u.intl.formatMessage({id:"DQ80ri",defaultMessage:"There was a problem updating this link"})),E(!1)})),[]);if(v)return s.default.createElement("div",{className:g.default.documentVersionContainer,"data-testid":"loading-latest-version"},s.default.createElement(_.SpinnerWithText,{text:u.intl.formatMessage({id:"FJY4Sn",defaultMessage:"Loading latest version..."})}));if(!b)return s.default.createElement("div",{className:g.default.documentVersionContainer,"data-testid":"update-document-banner"},s.default.createElement(l.UIIcon,{src:o.WarningLine,size:"small"}),s.default.createElement(n.Text,null,u.intl.formatMessage({id:"gpZE8T",defaultMessage:"There is a new version of this file. Update it so viewers can see your latest changes."})),s.default.createElement(i.Button,{variant:"transparent",onClick:S,"data-testid":"update-button"},u.intl.formatMessage({id:"OwaQ5z",defaultMessage:"Update"})));if(!M||!w)return null;const A=new Date(M),C=A.toLocaleDateString(),N=A.toLocaleTimeString();return s.default.createElement("div",{className:g.default.documentVersionContainer,"data-testid":"latest-version-banner"},s.default.createElement(l.UIIcon,{src:o.CheckmarkCircleLine,size:"small",color:"var(--color__faint__text)"}),s.default.createElement(n.Text,{color:"faint"},u.intl.formatMessage({id:"gSpGZq",defaultMessage:"Latest version. Last updated on {date} at {time}."},{date:C,time:N})))};t.LinkManagement=({onUpdatedLink:e,link:t,fileId:l,user:o,fileExt:E,didDeleteLink:b,onShowDeleteLinkModal:k,hasNewerFileVersion:w,fileTimestampMicro:h,entryPoint:M})=>{const T=s.default.useMemo(()=>new r.DefaultUserApiV2Client(o),[o]),[S,A]=s.default.useState(!1),[C,N]=s.default.useState(void 0),x=s.default.useRef(null),D=s.default.useCallback(()=>a.__awaiter(void 0,void 0,void 0,(function*(){A(!0);const t=yield(0,c.getOrCreateLink)(T,l,E,M);t?(N(void 0),e(t.link)):(N(p.UNABLE_TO_CREATE_LINK),(0,f.showSnackbar)("fail",u.intl.formatMessage({id:"Uwmac/",defaultMessage:"There was a problem creating or getting this link"}))),A(!1)})),[T,l,e,E]),L=s.default.useCallback(()=>{var e;const a=(0,y.getLinkIdFromLink)(t);navigator.clipboard.writeText(null===(e=x.current)||void 0===e?void 0:e.textContent).then(()=>{m.ProEventsLogger.log("docsend_analytics_add_on_copy_link_success",{fileExt:E,linkId:a,entryPoint:M}),(0,f.showSnackbar)("complete",u.intl.formatMessage({id:"hdfAQY",defaultMessage:"Link copied. Allows viewing."}))}).catch(()=>{m.ProEventsLogger.log("docsend_analytics_add_on_copy_link_failure",{fileExt:E,linkId:a,entryPoint:M}),(0,f.showSnackbar)("fail",u.intl.formatMessage({id:"g71D9h",defaultMessage:"There was a problem copying this link"}))})},[E]),O=s.default.useCallback(()=>{const e=(0,y.getLinkIdFromLink)(t);m.ProEventsLogger.log("docsend_analytics_add_on_manually_copy_link_success",{fileExt:E,linkId:e,entryPoint:M}),(0,f.showSnackbar)("complete",u.intl.formatMessage({id:"hdfAQY",defaultMessage:"Link copied. Allows viewing."}))},[E]),P=s.default.useCallback(()=>{k()},[k]);return s.default.useEffect(()=>{t?A(!1):(D(),A(!0))},[t,D]),S?s.default.createElement("div",{className:g.default.linkSection,"data-testid":"link-section"},s.default.createElement(_.SpinnerWithText,{text:u.intl.formatMessage({id:"R6/Bzs",defaultMessage:"Creating link..."})})):C||b?s.default.createElement("div",{className:g.default.linkSection,"data-testid":"link-section"},s.default.createElement("div",{className:g.default.linkDetails},s.default.createElement(i.Button,{variant:"primary",onClick:D,"data-testid":"create-link-button",autoFocus:!0},u.intl.formatMessage({id:"JalrqG",defaultMessage:"Create shareable link"})))):s.default.createElement("div",{className:g.default.linkSection,"data-testid":"link-section"},s.default.createElement(n.Text,null,u.intl.formatMessage({id:"fZek45",defaultMessage:"Copy and share this link to get page-by-page viewer insights for your document."})," "),s.default.createElement(v,{hasNewerFileVersion:w,fileTimestampMicro:h,apiV2Client:T,fileId:l,fileExt:E,link:t,entryPoint:M}),s.default.createElement("div",{className:g.default.linkDetails,"data-testid":"link-details-section"},s.default.createElement(d.TextArea,{"aria-labelledby":u.intl.formatMessage({id:"FGPqKs",defaultMessage:"Link textbox"}),ref:x,onCopy:O,className:g.default.linkArea,readOnly:!0,value:t,"data-testid":"link-text-area"}),s.default.createElement(i.Button,{variant:"primary",size:"large",onClick:L,"data-testid":"copy-link-button",autoFocus:!0},u.intl.formatMessage({id:"fMWfC+",defaultMessage:"Copy link"}))),s.default.createElement("div",{className:g.default.linkOptions},s.default.createElement(n.Text,null," ",u.intl.formatMessage({id:"ohyMJi",defaultMessage:"Anyone with this link "})," ",s.default.createElement(n.Text,{className:g.default.linkPermission}," ",u.intl.formatMessage({id:"X8/J/n",defaultMessage:"can view "}))," ",u.intl.formatMessage({id:"VIfxi5",defaultMessage:"this document"})," "),s.default.createElement(i.Button,{"data-testid":"delete-link-button",variant:"transparent",onClick:P},u.intl.formatMessage({id:"peEHe5",defaultMessage:"Delete link"}))))}})),define("metaserver/static/js/docsend_analytics_add_on/components/snackbar_utils",["require","exports","tslib","react","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/i18n"],(function(e,t,a,s,n,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showSnackbar=void 0,s=a.__importDefault(s);t.showSnackbar=(e,t,a=5e3)=>{n.Snackbar.update(s.default.createElement(n.Snackbar,{id:"docsend-analytics-add-on-snackbar",title:t,closeButtonText:i.intl.formatMessage({id:"UuZQQK",defaultMessage:"Close"}),variant:e,timeoutDelayMs:a,"data-testid":"snackbar"}))}})),define("metaserver/static/js/docsend_analytics_add_on/components/spinner_utils",["require","exports","tslib","react","dig-components/progress_indicators","dig-components/typography","metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.css"],(function(e,t,a,s,n,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpinnerWithText=t.CenteredSpinner=void 0,s=a.__importDefault(s),l=a.__importDefault(l);t.CenteredSpinner=()=>s.default.createElement("div",{className:l.default.spinnerContainer,"data-testid":"centered-spinner"},s.default.createElement(n.Spinner,null));t.SpinnerWithText=({text:e})=>s.default.createElement("div",{className:l.default.spinnerWithText,"data-testid":"spinner-with-text"},s.default.createElement(n.Spinner,{"aria-valuetext":e,size:"xsmall"}),s.default.createElement(i.Text,{className:l.default.spinnerText},e))})),define("metaserver/static/js/docsend_analytics_add_on/components/summary_analytics",["require","exports","tslib","react","dig-components/typography","dig-components/buttons","metaserver/static/js/core/i18n","metaserver/static/js/docsend_analytics_add_on/data/use_summary_analytics","metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.css","metaserver/static/js/docsend_analytics_add_on/components/spinner_utils","metaserver/static/js/docsend_analytics_add_on/components/snackbar_utils","metaserver/static/js/docsend_analytics_add_on/helpers/utils","dig-components/tooltips"],(function(e,t,a,s,n,i,l,o,r,d,c,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SummaryAnalytics=void 0,s=a.__importDefault(s),r=a.__importDefault(r);const m=({label:e,value:t,disabled:a})=>s.default.createElement("div",null,s.default.createElement(n.Text,{className:a?r.default.disabledText:r.default.summaryDataLabel,variant:"label",size:"small"},e),s.default.createElement(n.Text,{className:a?r.default.disabledText:"",variant:"label",size:"xlarge",isBold:!0,"data-testid":"summary-data-value"},t)),f=({pageViews:e,pageAvgViewTime:t,disabled:a})=>(void 0===e&&(e={}),void 0===t&&(t={}),s.default.createElement("div",null,s.default.createElement(n.Text,{className:a?r.default.disabledText:r.default.summaryDataLabel,variant:"label",size:"small"},l.intl.formatMessage({id:"0upQrV",defaultMessage:"Top pages (latest file version)"})),s.default.createElement(g,{pageViews:e,pageAvgViewTime:t,disabled:a}))),g=({pageViews:e,pageAvgViewTime:t,disabled:a})=>{if(a||0===Object.keys(e).length)return s.default.createElement(n.Text,{className:a?r.default.disabledText:"",variant:"label",size:"xlarge",isBold:!0},l.intl.formatMessage({id:"/Eqf0q",defaultMessage:"N/A"}));{const a=Object.keys(t).sort((e,a)=>t[a]-t[e]);a.length>3&&(a.length=3);const o=a.reduce((a,s)=>[...a,{pageNum:s,views:e[s],avgViewTime:t[s]}],[]),d=[];return o.forEach(e=>{const t=p(e,o),a=e.pageNum,c=(0,u.convertToHumanReadableTime)(e.avgViewTime),m=s.default.createElement(s.default.Fragment,null,s.default.createElement(n.Text,{variant:"label",tagName:"p",inverse:!0},l.intl.formatMessage({id:"owVLCX",defaultMessage:"Avg. visit time: {avgViewTime}"},{avgViewTime:c})),s.default.createElement(n.Text,{variant:"label",tagName:"p",inverse:!0},l.intl.formatMessage({id:"BXZjTy",defaultMessage:"Views: {views}"},{views:e.views}))),f=s.default.createRef();d.push(s.default.createElement(s.default.Fragment,null,s.default.createElement(_.Tooltip,{title:m,triggerRef:f,placement:"bottom"},s.default.createElement(i.Button,{variant:"primary",style:{height:`${t}px`},className:r.default.chartBar})),s.default.createElement(n.Text,{className:r.default.chartLabel,variant:"label",size:"xsmall",ref:f},l.intl.formatMessage({id:"4OIiar",defaultMessage:"p. {pageNum}"},{pageNum:a}))))}),s.default.createElement("div",{className:r.default.topPagesChart,"data-testid":"top-pages-chart"},d)}},y={numVisitors:0,avgViewTimeMs:0,numDownloads:0,pageViews:{},pageAvgViewTime:{}};t.SummaryAnalytics=({fileId:e,fileExt:t,link:a,user:n,disabled:i,entryPoint:_,skip:g})=>{const p=g||i,{isSummaryAnalyticsLoading:v,summaryData:E,summaryDataError:b}=(0,o.useSummaryAnalytics)({user:n,fileId:e,link:a,skip:p,fileExt:t,entryPoint:_});if(s.default.useEffect(()=>{b&&(0,c.showSnackbar)("fail",l.intl.formatMessage({id:"ixxWOz",defaultMessage:"There was a problem getting summmary analytics."}))},[b]),v)return s.default.createElement("div",{className:r.default.summaryAnalyticsSection},s.default.createElement("div",{className:r.default.divider}),s.default.createElement(d.CenteredSpinner,null));const k=i||!!b,w=p||k?y:E;return s.default.createElement("div",{className:r.default.summaryAnalyticsSection},s.default.createElement("div",{className:r.default.divider}),s.default.createElement("div",{className:(0,u.isImage)(t)?r.default.summaryAnalyticsDataImage:r.default.summaryAnalyticsData,"data-testid":"summary-analytics-data"},s.default.createElement(m,{label:l.intl.formatMessage({id:"Ju+Xsr",defaultMessage:"Viewers"}),value:null==w?void 0:w.numVisitors,disabled:k}),s.default.createElement(m,{label:l.intl.formatMessage({id:"apw/4g",defaultMessage:"Avg. visit time"}),value:(0,u.convertToHumanReadableTime)(null==w?void 0:w.avgViewTimeMs),disabled:k}),s.default.createElement(m,{label:l.intl.formatMessage({id:"31KJBU",defaultMessage:"Downloads"}),value:null==w?void 0:w.numDownloads,disabled:k}),!(0,u.isImage)(t)&&s.default.createElement(f,{pageViews:null==w?void 0:w.pageViews,pageAvgViewTime:null==w?void 0:w.pageAvgViewTime,disabled:k})))};const p=(e,t)=>{const a=Math.floor(24*e.avgViewTime/t[0].avgViewTime);return Math.max(a,6)}})),define("metaserver/static/js/docsend_analytics_add_on/components/terms_of_service",["require","exports","tslib","react","dig-components/typography","dig-components/controls","dig-components/buttons","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/docsend_analytics_add_on/data/apiUtils","metaserver/static/js/core/i18n","metaserver/static/js/docsend_analytics_add_on/components/spinner_utils","metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.css","metaserver/static/js/docsend_analytics_add_on/components/snackbar_utils","dig-components/typography","metaserver/static/js/clean/static_urls","metaserver/static/js/clean/analytics"],(function(e,t,a,s,n,i,l,o,r,d,c,u,_,m,f,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TermsOfService=t.ProvisionAccountError=t.OnboardingImage=void 0,s=a.__importDefault(s),u=a.__importDefault(u),t.OnboardingImage=s.default.memo(()=>s.default.createElement("div",{className:u.default.onboardingImage,"data-testid":"onboarding-image"},s.default.createElement("img",{src:(0,f.static_url)("/static/metaserver/static/images/docsend_addon/abstract_ui-vflEMii5w.png"),alt:"",width:320,height:286}))),t.OnboardingImage.displayName="OnboardingImage",(function(e){e.UNABLE_TO_PROVISION_ACCOUNT="UNABLE_TO_PROVISION_ACCOUNT",e.UNABLE_TO_CREATE_LINK="UNABLE_TO_CREATE_LINK"})(t.ProvisionAccountError||(t.ProvisionAccountError={}));t.TermsOfService=({onAcceptedTOS:e,fileId:t,fileExt:f,user:y,entryPoint:p})=>{const[v,E]=s.default.useState(!1),[b,k]=s.default.useState(!1),w=s.default.useMemo(()=>new o.DefaultUserApiV2Client(y),[y]),[h,M]=s.default.useState(!1),T=s.default.useCallback(()=>a.__awaiter(void 0,void 0,void 0,(function*(){if(!v)return k(!0),void g.ProEventsLogger.log("docsend_analytics_add_on_failed_to_accept_tos",{fileExt:f,entryPoint:p});if(M(!0),yield(0,r.provisionAccount)(w,p)){const a=yield(0,r.getOrCreateLink)(w,t,f,p);a||(0,_.showSnackbar)("fail",d.intl.formatMessage({id:"LGBKXL",defaultMessage:"There was a problem creating this link."})),e(null==a?void 0:a.link,null==a?void 0:a.file_has_newer_version,null==a?void 0:a.file_hlc_unix_micros)}else(0,_.showSnackbar)("fail",d.intl.formatMessage({id:"y6HA13",defaultMessage:"There was a problem provisioning your account."}));M(!1)})),[w,t,e,p,f,k,v]),S=s.default.useCallback(()=>{E(e=>!e),k(!1)},[]);return s.default.createElement("div",{className:u.default.tosSection,"data-testid":"terms-of-service-section"},h?s.default.createElement(c.SpinnerWithText,{text:d.intl.formatMessage({id:"R6/Bzs",defaultMessage:"Creating link..."})}):s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:u.default.divider}),s.default.createElement("div",{className:u.default.tosHeading},s.default.createElement(n.Title,{className:u.default.tosTitle}," ",d.intl.formatMessage({id:"xt9dt6",defaultMessage:"Try analytics in Dropbox"})," "),s.default.createElement(n.Text,null,d.intl.formatMessage({id:"vH5eUV",defaultMessage:"Get page-by-page viewer insights for the documents you share using Dropbox."}))),s.default.createElement("div",null,s.default.createElement("div",{className:u.default.tosCheckboxSection},s.default.createElement(i.Checkbox,{checked:v,onChange:S,"data-testid":"terms-of-service-checkbox",autoFocus:!0}),s.default.createElement(n.Text,null,d.intl.formatMessage({id:"yAx7CP",defaultMessage:"I agree to <link1>DocSend Terms</link1> and <link2>Privacy Policy</link2>. We’ll create a DocSend account with your Dropbox email address. If you have an existing DocSend account, we will create a separate account to power the analytics feature. This new account will be linked across platforms."},{link1:e=>s.default.createElement(m.Link,{rel:"noreferrer",target:"_blank",hasNoUnderline:!0,href:"https://www.docsend.com/terms-of-service/",key:"terms"},e),link2:e=>s.default.createElement(m.Link,{rel:"noreferrer",target:"_blank",hasNoUnderline:!0,href:"https://www.docsend.com/privacy-policy/",key:"privacy-policy"},e)}))),b&&s.default.createElement(n.Text,{tagName:"p",className:u.default.tosError,color:"error","data-testid":"tos-error"},d.intl.formatMessage({id:"q02yFP",defaultMessage:"Please agree to the terms of service."}))),s.default.createElement("div",null,s.default.createElement(l.Button,{variant:"primary",size:"large",onClick:T,"data-testid":"terms-of-service-button"},d.intl.formatMessage({id:"bElaaI",defaultMessage:"Get 30 days free access"})))))}})),define("metaserver/static/js/docsend_analytics_add_on/components/upgrade_banner",["require","exports","tslib","react","dig-components/banner","metaserver/static/js/core/i18n","dig-components/buttons","metaserver/static/js/clean/dropbox_form","metaserver/static/js/clean/browse_uri_interface","metaserver/static/js/clean/analytics","dig-components/typography","metaserver/static/js/docsend_analytics_add_on/helpers/utils"],(function(e,t,a,s,n,i,l,o,r,d,c,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpgradeBanner=void 0,s=a.__importDefault(s);t.UpgradeBanner=({daysRemaining:e,stormcrowVariant:t,fileId:a,filePath:_,user:m,fileExt:f,entryPoint:g,link:y})=>{const[p,v]=s.default.useState(!0),E=s.default.useCallback(()=>{v(!1)},[v]),b=`https://${document.location.host.replace(/^www./g,"")}${(0,r.get_browse_root)(m)}${_}?analytics_file_id=${a}&plan_upgraded=true`,k=(0,u.getUpgradeURL)(null!=t?t:"",b),w=s.default.useCallback(()=>(d.ProEventsLogger.log("docsend_analytics_add_on_upgrade_button_click",{daysRemaining:e,stormcrowVariant:t,fileExt:f,entryPoint:g,linkId:(0,u.getLinkIdFromLink)(y)}),!1),[e,t,f,g,y]);return void 0!==e&&p?e>5?s.default.createElement(n.Banner,{type:"attention",withLeftIcon:!1,withCloseButton:"Close",onRequestClose:E,"data-testid":"upgrade-banner-attention"},s.default.createElement(n.Banner.Message,null,i.intl.formatMessage({id:"XFu8X8",defaultMessage:"You have {daysRemaining, number} days to access analytics. Add analytics to your Dropbox plan now."},{daysRemaining:e})),s.default.createElement(n.Banner.Actions,null,s.default.createElement(o.DropboxForm,{action:k,method:"post",handleSubmit:w},s.default.createElement(l.Button,{variant:"transparent","data-testid":"upgrade-button"},i.intl.formatMessage({id:"sOfbLs",defaultMessage:"Upgrade"}))))):e>0?s.default.createElement(n.Banner,{type:"warning",withLeftIcon:!1,withCloseButton:"Close",onRequestClose:E,"data-testid":"upgrade-banner-warning"},s.default.createElement(n.Banner.Message,null,i.intl.formatMessage({id:"8egoWm",defaultMessage:"You will lose access to analytics in {daysRemaining, plural, one {# day} other {# days}}. Add it to your Dropbox plan now."},{daysRemaining:e})),s.default.createElement(n.Banner.Actions,null,s.default.createElement(o.DropboxForm,{action:k,method:"post",handleSubmit:w},s.default.createElement(l.Button,{variant:"transparent"},i.intl.formatMessage({id:"sOfbLs",defaultMessage:"Upgrade"}))))):s.default.createElement(n.Banner,{variant:"rich",type:"alert",withLeftPictogram:null,"data-testid":"upgrade-banner-alert"},s.default.createElement(n.Banner.Message,null,s.default.createElement(c.Title,{size:"small"},i.intl.formatMessage({id:"rfgp7o",defaultMessage:"Your access to analytics has ended"})),s.default.createElement(c.Text,null,i.intl.formatMessage({id:"/M90bu",defaultMessage:"Add analytics to your Dropbox plan now to continue getting real-time document analytics and more."}))),s.default.createElement(n.Banner.Actions,null,s.default.createElement(o.DropboxForm,{action:k,method:"post",handleSubmit:w},s.default.createElement(l.Button,{variant:"outline"},i.intl.formatMessage({id:"XKOnEF",defaultMessage:"Upgrade now"}))))):null}})),define("metaserver/static/js/docsend_analytics_add_on/components/visit_analytics",["require","exports","tslib","react","metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal.module.css","dig-components/table","metaserver/static/js/core/i18n","dig-components/typography","dig-components/avatar","metaserver/static/js/docsend_analytics_add_on/data/use_visit_analytics","metaserver/static/js/docsend_analytics_add_on/components/spinner_utils","metaserver/static/js/docsend_analytics_add_on/components/snackbar_utils","metaserver/static/js/docsend_analytics_add_on/helpers/utils"],(function(e,t,a,s,n,i,l,o,r,d,c,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VisitAnalytics=void 0,s=a.__importDefault(s),n=a.__importDefault(n);const m=({email:e,initials:t,disabled:a})=>{const i=`${n.default.email} ${n.default.disabledText}`;return s.default.createElement("div",{className:n.default.nameCell},s.default.createElement("div",null,s.default.createElement(r.Avatar,{size:"standard",backgroundColor:(0,r.avatarColorForUserIdentifier)(t),isInactive:a},a?"":t)),s.default.createElement("div",{className:n.default.emailBox},s.default.createElement(o.Text,{"data-testid":"email-text",className:a?i:n.default.email},e)))},f=({visit:e,index:t,disabled:a,hidePercentViewed:r})=>{let d="";if(e.occurredAt){const t=new Date(e.occurredAt);d=isNaN(t.getTime())?e.occurredAt:t.toLocaleDateString()}const c=v(e.numPagesViewed,e.totalPages);return s.default.createElement(i.Table.Row,{key:t,"data-testid":`row-${t}`},s.default.createElement(i.Table.Cell,null,s.default.createElement(m,{email:e.email,initials:E(e.email),disabled:a})),s.default.createElement(i.Table.Cell,null,s.default.createElement(o.Text,{"data-testid":"date-text",className:a?n.default.disabledText:""},d)),s.default.createElement(i.Table.Cell,null,s.default.createElement(o.Text,{"data-testid":"time-spent-text",className:a?n.default.disabledText:""},(0,_.convertToHumanReadableTime)(e.timeSpentMs))),!r&&s.default.createElement(i.Table.Cell,null,s.default.createElement(o.Text,{"data-testid":"percent-viewed-text",className:a?n.default.disabledText:""},l.intl.formatMessage({id:"ZLFg36",defaultMessage:"{percentViewed}%"},{percentViewed:c}))))},g=()=>{const e={timeSpentMs:0,occurredAt:l.intl.formatMessage({id:"/Eqf0q",defaultMessage:"N/A"}),email:l.intl.formatMessage({id:"GrD0Fp",defaultMessage:"Email address"}),numPagesViewed:0,totalPages:0,downloaded:!1,documentVersion:0};return s.default.createElement("div",{className:n.default.visitAnalyticsSection,"data-testid":"disabled-visit-analytics"},s.default.createElement("div",{className:n.default.divider}),s.default.createElement(y,{numVisits:0,disabled:!0}),s.default.createElement("div",{className:n.default.visitAnalyticsTable},s.default.createElement(i.Table,{spacing:"large"},s.default.createElement(p,{disabled:!0}),s.default.createElement(i.Table.Body,null,s.default.createElement(f,{key:0,visit:e,index:0,disabled:!0})))))},y=({numVisits:e,disabled:t})=>s.default.createElement("div",{className:n.default.visitCountSection,"data-testid":"visit-count-section"},s.default.createElement(o.Text,{className:`${n.default.visitCount} ${t?n.default.disabledText:""}`}," ",l.intl.formatMessage({id:"aNjPN4",defaultMessage:"{numVisits, plural, one {# visit} other {# visits}}"},{numVisits:e}))),p=({disabled:e,changeSortDirection:t,sortState:a,hidePercentViewed:o})=>{const r=s.default.useCallback((e,t)=>t.columnName===e?t.sortDirection:"none",[]);return s.default.createElement(i.Table.Header,{className:n.default.visitAnalyticsTableHeader},s.default.createElement(i.Table.Row,null,s.default.createElement(i.Table.HeaderCell,Object.assign({"data-testid":"email-header",className:e?n.default.disabledText:""},t&&a?{sortDirection:r(d.Column.EMAIL,a),onSort:()=>t(d.Column.EMAIL)}:{}),l.intl.formatMessage({id:"BLNJWZ",defaultMessage:"Email"})),s.default.createElement(i.Table.HeaderCell,Object.assign({"data-testid":"date-header",className:e?n.default.disabledText:""},t&&a?{sortDirection:r(d.Column.DATE,a),onSort:()=>t(d.Column.DATE)}:{}),l.intl.formatMessage({id:"U0C7zN",defaultMessage:"Date"})),s.default.createElement(i.Table.HeaderCell,Object.assign({"data-testid":"view-time-header",className:e?n.default.disabledText:""},t&&a?{sortDirection:r(d.Column.VIEW_TIME,a),onSort:()=>t(d.Column.VIEW_TIME)}:{}),l.intl.formatMessage({id:"bGYbSG",defaultMessage:"Visit time"})),!o&&s.default.createElement(i.Table.HeaderCell,Object.assign({"data-testid":"percent-viewed-header",className:e?n.default.disabledText:""},t&&a?{sortDirection:r(d.Column.PERCENT_VIEWED,a),onSort:()=>t(d.Column.PERCENT_VIEWED)}:{}),l.intl.formatMessage({id:"xFgp/b",defaultMessage:"Percent viewed"}))))};t.VisitAnalytics=({fileId:e,fileExt:t,link:a,user:o,disabled:r,entryPoint:m,skip:v})=>{var E,b;const k=v||r,{isVisitAnalyticsLoading:w,visitData:h,visitDataError:M,sortVisitData:T}=(0,d.useVisitAnalytics)({user:o,fileId:e,link:a,fileExt:t,skip:k,entryPoint:m}),[S,A]=s.default.useState({columnName:d.Column.NONE,sortDirection:"none"});s.default.useEffect(()=>{if(M){let e=l.intl.formatMessage({id:"niUAOO",defaultMessage:"There was a problem getting visit analytics."});M===d.VisitDataError.GET_MORE_VISIT_DATA_FAILED&&(e=l.intl.formatMessage({id:"ViJ/ns",defaultMessage:"There was a problem getting more visit analytics."})),(0,u.showSnackbar)("fail",e)}},[M]);const C=s.default.useCallback(e=>{switch(S.columnName!==e&&(S.columnName=e,S.sortDirection="none"),S.sortDirection){case"asc":S.sortDirection="desc";break;case"desc":case"none":S.sortDirection="asc"}T&&(T(S.columnName,S.sortDirection),A({columnName:S.columnName,sortDirection:S.sortDirection}))},[T]);if(r||M&&M!==d.VisitDataError.GET_MORE_VISIT_DATA_FAILED)return s.default.createElement(g,null);if(w)return s.default.createElement("div",{className:n.default.visitAnalyticsSection},s.default.createElement("div",{className:n.default.divider}),s.default.createElement(c.CenteredSpinner,null));const N=(null===(E=null==h?void 0:h.visits)||void 0===E?void 0:E.length)||0;return s.default.createElement("div",{className:n.default.visitAnalyticsSection},s.default.createElement("div",{className:n.default.divider}),s.default.createElement(y,{numVisits:N}),N>0&&(null===(b=null==h?void 0:h.visits)||void 0===b?void 0:b.length)?s.default.createElement("div",{className:n.default.visitAnalyticsTable},s.default.createElement(i.Table,{spacing:"large","data-testid":"visit-analytics-table"},s.default.createElement(p,{changeSortDirection:C,sortState:S,hidePercentViewed:(0,_.isImage)(t)}),s.default.createElement(i.Table.Body,null,h.visits.map((e,a)=>s.default.createElement(f,{key:a,visit:e,index:a,hidePercentViewed:(0,_.isImage)(t)}))))):null)};const v=(e,t)=>e&&t?Math.ceil(e/t*100):0,E=e=>e?e.charAt(0).toUpperCase():""})),define("metaserver/static/js/docsend_analytics_add_on/data/apiUtils",["require","exports","tslib","metaserver/static/js/docsend_analytics_add_on/helpers/utils","metaserver/static/js/clean/analytics"],(function(e,t,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateDocument=t.getVisitAnalytics=t.getAnalyticsForDocumentVersion=t.getSummaryAnalytics=t.deleteLink=t.getLink=t.getOrCreateLink=t.getPlanStatus=t.provisionAccount=t.SERVER_RESPONSE_TIME_HEADER=t.REQUEST_ID_HEADER=void 0;t.REQUEST_ID_HEADER="x-dropbox-request-id",t.SERVER_RESPONSE_TIME_HEADER="x-server-response-time";t.provisionAccount=(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){try{const{result:a,headers:s}=yield e.ns("docsend_addon").rpcWithResponseHeaders("account/provision_account",void 0,{});return"PROVISIONED"===a.provision_status?(n.ProEventsLogger.log("docsend_analytics_add_on_provision_account_success",Object.assign({provisionStatus:a.provision_status,entryPoint:t},i(s))),!0):(n.ProEventsLogger.log("docsend_analytics_add_on_provision_account_failure",Object.assign({provisionStatus:a.provision_status,entryPoint:t},i(s))),!1)}catch(e){n.ProEventsLogger.log("docsend_analytics_add_on_provision_account_failure",Object.assign(Object.assign({},l(e)),{entryPoint:t}))}return!1}));t.getPlanStatus=(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){try{const{result:a,headers:s}=yield e.ns("docsend_addon").rpcWithResponseHeaders("account/get_plan_status",void 0,{});return n.ProEventsLogger.log("docsend_analytics_add_on_get_plan_status_success",Object.assign({hasActivePlan:a.has_active_plan,hasAddOnAccess:a.has_addon_access,daysRemaining:a.trial_days_left,provisionStatus:a.provision_status,accessDeniedReason:a.addon_access_denied_reason,entryPoint:t},i(s))),a}catch(e){return void n.ProEventsLogger.log("docsend_analytics_add_on_get_plan_status_failure",Object.assign(Object.assign({},l(e)),{entryPoint:t}))}}));t.getOrCreateLink=(e,t,o,r)=>a.__awaiter(void 0,void 0,void 0,(function*(){try{const{result:a,headers:l}=yield e.ns("docsend_addon").rpcWithResponseHeaders("link/get_or_create_link",{file_id:t},{});return n.ProEventsLogger.log("docsend_analytics_add_on_get_or_create_link_success",Object.assign({fileExt:o,linkId:(0,s.getLinkIdFromLink)(a.link),fileHasNewerVersion:a.file_has_newer_version,fileHlcMicroseconds:a.file_hlc_unix_micros,entryPoint:r},i(l))),a}catch(e){n.ProEventsLogger.log("docsend_analytics_add_on_get_or_create_link_failure",Object.assign(Object.assign({},l(e)),{fileExt:o,entryPoint:r}))}}));t.getLink=(e,t,o,r,d)=>a.__awaiter(void 0,void 0,void 0,(function*(){try{const{result:a,headers:l}=yield e.ns("docsend_addon").rpcWithResponseHeaders("link/get_link",{file_id:t},d);return n.ProEventsLogger.log("docsend_analytics_add_on_get_link_success",Object.assign({fileExt:o,linkId:(0,s.getLinkIdFromLink)(a.link),fileHasNewerVersion:a.file_has_newer_version,fileHlcMicroseconds:a.file_hlc_unix_micros,entryPoint:r},i(l))),a}catch(e){n.ProEventsLogger.log("docsend_analytics_add_on_get_link_failure",Object.assign(Object.assign({},l(e)),{fileExt:o,entryPoint:r}))}}));t.deleteLink=(e,t,o,r,d)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=(0,s.getLinkIdFromLink)(o);try{const{headers:s}=yield e.ns("docsend_addon").rpcWithResponseHeaders("link/delete_link",{file_id:t,link:o},{});return n.ProEventsLogger.log("docsend_analytics_add_on_delete_link_success",Object.assign(Object.assign({linkId:a,fileExt:r},i(s)),{entryPoint:d})),!0}catch(e){return n.ProEventsLogger.log("docsend_analytics_add_on_delete_link_failure",Object.assign(Object.assign({},l(e)),{linkId:a,fileExt:r,entryPoint:d})),!1}}));t.getSummaryAnalytics=(e,t,o,r,d)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=(0,s.getLinkIdFromLink)(o);try{const{result:s,headers:l}=yield e.ns("docsend_addon").rpcWithResponseHeaders("analytics/get_summary_analytics",{file_id:t,link:o},{});return n.ProEventsLogger.log("docsend_analytics_add_on_get_summary_analytics_success",Object.assign({linkId:a,fileExt:r,numVisitors:s.num_visitors,numVisits:s.num_visits,numDownloads:s.num_downloads,avgViewTimeMs:s.average_view_time_ms,entryPoint:d},i(l))),s}catch(e){n.ProEventsLogger.log("docsend_analytics_add_on_get_summary_analytics_failure",Object.assign(Object.assign({},l(e)),{linkId:a,fileExt:r,entryPoint:d}))}}));t.getAnalyticsForDocumentVersion=(e,t,o,r,d,c)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=(0,s.getLinkIdFromLink)(o);try{const{result:s,headers:l}=yield e.ns("docsend_addon").rpcWithResponseHeaders("analytics/get_analytics_for_document_version",{file_id:t,link:o,docsend_version:c},{});return n.ProEventsLogger.log("docsend_analytics_add_on_get_analytics_for_document_version_success",Object.assign({linkId:a,fileExt:r,documentVersion:c,pageViews:s.top_viewed_pages,entryPoint:d},i(l))),s}catch(e){n.ProEventsLogger.log("docsend_analytics_add_on_get_analytics_for_document_version_failure",Object.assign(Object.assign({},l(e)),{linkId:a,fileExt:r,documentVersion:c,entryPoint:d}))}}));t.getVisitAnalytics=(e,t,o,r,d=50,c,u,_)=>a.__awaiter(void 0,void 0,void 0,(function*(){var a;const m=(0,s.getLinkIdFromLink)(o);try{const{result:s,headers:l}=yield e.ns("docsend_addon").rpcWithResponseHeaders("analytics/get_visits_analytics",{file_id:t,link:o,cursor:_,page_size:d},{});return n.ProEventsLogger.log("docsend_analytics_add_on_get_visit_analytics_success",Object.assign({linkId:m,fileExt:r,pageSize:d,pageNumber:c,currCursor:_,nextCursor:s.cursor,pageCount:null===(a=s.visits)||void 0===a?void 0:a.length,totalCount:s.total_count,entryPoint:u},i(l))),s}catch(e){n.ProEventsLogger.log("docsend_analytics_add_on_get_visit_analytics_failure",Object.assign(Object.assign({},l(e)),{linkId:m,fileExt:r,pageSize:d,currCursor:_,pageNumber:c,entryPoint:u}))}}));t.updateDocument=(e,t,o,r,d)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=(0,s.getLinkIdFromLink)(d);try{const{result:s,headers:l}=yield e.ns("docsend_addon").rpcWithResponseHeaders("link/update_document",{file_id:t},{});return n.ProEventsLogger.log("docsend_analytics_add_on_update_document_success",Object.assign({fileExt:o,fileHlcMicroseconds:s.file_hlc_unix_micros,linkId:a,entryPoint:r},i(l))),s}catch(e){n.ProEventsLogger.log("docsend_analytics_add_on_update_document_failure",Object.assign(Object.assign({},l(e)),{fileExt:o,linkId:a,entryPoint:r}))}}));const i=e=>{const a=parseInt(e[t.SERVER_RESPONSE_TIME_HEADER],10),s=isNaN(a)?void 0:a;return{requestId:e[t.REQUEST_ID_HEADER],serverTimeMs:s}},l=e=>{var a,s;if(!e)return{};let n="";return e.headers&&e.headers&&t.REQUEST_ID_HEADER in e.headers&&(n=e.headers[t.REQUEST_ID_HEADER]),{error:null===(a=null==e?void 0:e.raw)||void 0===a?void 0:a.responseBody,requestId:n,statusCode:null===(s=null==e?void 0:e.raw)||void 0===s?void 0:s.status}}})),define("metaserver/static/js/docsend_analytics_add_on/data/use_account_status",["require","exports","tslib","react","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/docsend_analytics_add_on/data/apiUtils"],(function(e,t,a,s,n,i){"use strict";var l,o;Object.defineProperty(t,"__esModule",{value:!0}),t.useAccountStatus=t.AccountStatus=t.AccountStatusError=void 0,s=a.__importStar(s),(function(e){e.UNKNOWN="UNKNOWN",e.UNABLE_TO_GET_PLAN_STATUS="UNABLE_TO_GET_PLAN_STATUS"})(l=t.AccountStatusError||(t.AccountStatusError={})),(function(e){e.PROVISIONED="PROVISIONED",e.NONE="NONE"})(o=t.AccountStatus||(t.AccountStatus={}));t.useAccountStatus=({user:e,entryPoint:t})=>{const[r,d]=s.useState(!0),[c,u]=s.useState({}),[_,m]=s.useState(void 0),f=s.useMemo(()=>new n.DefaultUserApiV2Client(e),[e]),g=s.useCallback(()=>a.__awaiter(void 0,void 0,void 0,(function*(){const e=yield(0,i.getPlanStatus)(f,t);if(e){const t={hasActivePlan:e.has_active_plan,hasAddOnAccess:e.has_addon_access,daysRemaining:e.trial_days_left,isProvisioned:e.provision_status===o.PROVISIONED};u(t)}else m(l.UNABLE_TO_GET_PLAN_STATUS);d(!1)})),[f]);return s.useEffect(()=>{g()},[g]),{isAccountStatusLoading:r,accountStatus:c,accountStatusError:_}}})),define("metaserver/static/js/docsend_analytics_add_on/data/use_analytics_link",["require","exports","tslib","react","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/docsend_analytics_add_on/data/apiUtils"],(function(e,t,a,s,n,i){"use strict";var l;Object.defineProperty(t,"__esModule",{value:!0}),t.useAnalyticsLink=t.LinkDataError=void 0,s=a.__importStar(s),(function(e){e.UNKNOWN="UNKNOWN"})(l=t.LinkDataError||(t.LinkDataError={}));t.useAnalyticsLink=({skip:e,fileId:t,fileExt:o,user:r,entryPoint:d})=>{const[c,u]=s.useState(!0),[_,m]=s.useState({}),[f,g]=s.useState(void 0),y=s.useMemo(()=>new n.DefaultUserApiV2Client(r),[r]),p=s.useCallback(()=>a.__awaiter(void 0,void 0,void 0,(function*(){const e=yield(0,i.getOrCreateLink)(y,t,o,d);e?m({link:null==e?void 0:e.link,hasNewerFileVersion:e.file_has_newer_version,fileTimestampMicro:e.file_hlc_unix_micros,isNewLink:e.is_new_link}):g(l.UNKNOWN),u(!1)})),[y,t]);return s.useEffect(()=>{e||p()},[p,e]),e?{}:{isAnalyticsLinkLoading:c,linkData:_,linkDataError:f}}})),define("metaserver/static/js/docsend_analytics_add_on/data/use_visit_analytics",["require","exports","tslib","react","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/docsend_analytics_add_on/data/apiUtils","metaserver/static/js/clean/analytics","metaserver/static/js/docsend_analytics_add_on/helpers/utils","metaserver/static/js/user_survey/user_survey"],(function(e,t,a,s,n,i,l,o,r){"use strict";var d,c;Object.defineProperty(t,"__esModule",{value:!0}),t.convertToVisitData=t.useVisitAnalytics=t.Column=t.VisitDataError=void 0,s=a.__importStar(s),(function(e){e.UNKNOWN="UNKNOWN",e.LINK_NOT_FOUND="LINK_NOT_FOUND",e.GET_MORE_VISIT_DATA_FAILED="GET_MORE_VISIT_DATA_FAILED"})(d=t.VisitDataError||(t.VisitDataError={})),(function(e){e.EMAIL="email",e.DATE="date",e.VIEW_TIME="view_time",e.PERCENT_VIEWED="percent_viewed",e.NONE="none"})(c=t.Column||(t.Column={}));t.useVisitAnalytics=({fileId:e,fileExt:p,link:v,cursor:E,pageSize:b,user:k,skip:w,entryPoint:h})=>{const[M,T]=s.useState(!0),[S,A]=s.useState({}),[C,N]=s.useState(void 0),x=s.useMemo(()=>new n.DefaultUserApiV2Client(k),[k]),D=s.useCallback((e,t)=>{var a;switch(e){case c.EMAIL:A(m(S,t));break;case c.DATE:A(f(S,t));break;case c.VIEW_TIME:A(g(S,t));break;case c.PERCENT_VIEWED:A(y(S,t))}l.ProEventsLogger.log(`docsend_analytics_add_on_sort_visit_table_by_${e}_${t}`,{fileExt:p,entryPoint:h,linkId:(0,o.getLinkIdFromLink)(v),pageSize:S.pageSize,pageCount:null===(a=S.visits)||void 0===a?void 0:a.length,totalCount:S.totalCount})},[S]),L=s.useCallback(()=>a.__awaiter(void 0,void 0,void 0,(function*(){if(v){const a=yield(0,i.getVisitAnalytics)(x,e,v,p,b,1,h,E);if(a){const s=(0,t.convertToVisitData)(a);A(s),s.totalCount&&r.UserSurvey.trackEvent("viewed_analytics_on_file_shared_with_docsend_analytics_add_on","docsend_analytics_add_on_modal"),u(s)&&_(x,Object.assign({},s),e,v,p,A,N,h,b,a.cursor)}else N(d.UNKNOWN)}else l.ProEventsLogger.log("docsend_analytics_add_on_use_visit_analytics_failure",{error:d.LINK_NOT_FOUND,fileExt:p,entryPoint:h}),N(d.LINK_NOT_FOUND);T(!1)})),[x,e,v,E,b]);return s.useEffect(()=>{w||L()},[L,w]),w?{}:{isVisitAnalyticsLoading:M,visitData:S,visitDataError:C,sortVisitData:D}};const u=e=>!!(e.totalCount&&e.visits&&e.visits.length<e.totalCount),_=(e,s,n,l,o,r,c,u,_,m)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=s;let f=m;if(!a.totalCount||!a.visits)return;let g=1,y=a.totalCount-a.visits.length;for(;y>0;){g++;const s=yield(0,i.getVisitAnalytics)(e,n,l,o,_,g,u,f);if(!s){c(d.GET_MORE_VISIT_DATA_FAILED);break}{const e=(0,t.convertToVisitData)(s);if(!e.visits)break;a.visits=[...a.visits,...e.visits],a.cursor=e.cursor,f=a.cursor,y-=e.visits.length}}r(a)})),m=(e,t)=>{if(!e.visits)return e;switch(t){case"asc":return e.visits.sort((e,t)=>e.email.localeCompare(t.email)),Object.assign({},e);case"desc":return e.visits.sort((e,t)=>t.email.localeCompare(e.email)),Object.assign({},e)}return e},f=(e,t)=>{if(!e.visits)return e;switch(t){case"asc":return e.visits.sort((e,t)=>new Date(e.occurredAt).getTime()-new Date(t.occurredAt).getTime()),Object.assign({},e);case"desc":return e.visits.sort((e,t)=>new Date(t.occurredAt).getTime()-new Date(e.occurredAt).getTime()),Object.assign({},e)}return e},g=(e,t)=>{if(!e.visits)return e;switch(t){case"asc":return e.visits.sort((e,t)=>e.timeSpentMs-t.timeSpentMs),Object.assign({},e);case"desc":return e.visits.sort((e,t)=>t.timeSpentMs-e.timeSpentMs),Object.assign({},e)}return e},y=(e,t)=>{if(!e.visits)return e;switch(t){case"asc":return e.visits.sort((e,t)=>p(e.numPagesViewed,e.totalPages)-p(t.numPagesViewed,t.totalPages)),Object.assign({},e);case"desc":return e.visits.sort((e,t)=>p(t.numPagesViewed,t.totalPages)-p(e.numPagesViewed,e.totalPages)),Object.assign({},e)}return e},p=(e,t)=>e&&t?Math.ceil(e/t*100):0;t.convertToVisitData=e=>{return e?{cursor:e.cursor,pageSize:e.page_size,totalCount:e.total_count,visits:(t=e.visits,t?t.map(e=>({timeSpentMs:e.time_spent_ms,occurredAt:e.occurred_at,email:e.email,visitorName:e.visitor_name,numPagesViewed:e.num_pages_viewed,totalPages:e.total_pages,downloaded:e.downloaded,documentVersion:e.document_version})):[])}:{};var t}})),define("metaserver/static/js/docsend_analytics_add_on/data/use_summary_analytics",["require","exports","tslib","react","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/docsend_analytics_add_on/data/apiUtils","metaserver/static/js/clean/analytics"],(function(e,t,a,s,n,i,l){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.useSummaryAnalytics=t.SummaryDataError=void 0,s=a.__importStar(s),(function(e){e.UNKNOWN="UNKNOWN",e.LINK_NOT_FOUND="LINK_NOT_FOUND"})(o=t.SummaryDataError||(t.SummaryDataError={}));t.useSummaryAnalytics=({fileId:e,fileExt:t,link:d,user:c,skip:u,entryPoint:_})=>{const[m,f]=s.useState(!0),[g,y]=s.useState({}),[p,v]=s.useState(void 0),E=s.useMemo(()=>new n.DefaultUserApiV2Client(c),[c]),b=s.useCallback(()=>a.__awaiter(void 0,void 0,void 0,(function*(){if(d){const[a,s]=yield Promise.all([(0,i.getSummaryAnalytics)(E,e,d,t,_),(0,i.getAnalyticsForDocumentVersion)(E,e,d,t,_)]);if(void 0===a||void 0===s)v(o.UNKNOWN);else{const e=r(a,s);y(e)}}else l.ProEventsLogger.log("docsend_analytics_add_on_use_summary_analytics_failure",{error:o.LINK_NOT_FOUND,fileExt:t,entryPoint:_}),v(o.LINK_NOT_FOUND);f(!1)})),[E,e,d]);return s.useEffect(()=>{u||b()},[b,u]),u?{}:{isSummaryAnalyticsLoading:m,summaryData:g,summaryDataError:p}};const r=(e,t)=>e&&t?{numVisitors:e.num_visitors,avgViewTimeMs:e.average_view_time_ms,numDownloads:e.num_downloads,pageViews:t.top_viewed_pages,pageAvgViewTime:t.top_viewed_pages_average_time_ms}:{}})),define("metaserver/static/js/docsend_analytics_add_on/helpers/utils",["require","exports","metaserver/static/js/core/browser_detection","metaserver/static/js/core/i18n","metaserver/static/js/cloud_docs/constants"],(function(e,t,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDocsendAnalyticsAddOnConfig=t.isImage=t.convertToHumanReadableTime=t.getLinkIdFromLink=t.getUpgradeURL=void 0;t.getUpgradeURL=function(e,t){const a=`https://docsend.com/account/auth/dropbox?signup_source=docsend_analytics_add_on_${e}&next_url=${encodeURIComponent(t)}`;return`/docsend/redirect?cont=${encodeURIComponent(a)}`};t.getLinkIdFromLink=e=>{if(!e)return"";const t=e.split("/");return t.length?t[t.length-1]:""};t.convertToHumanReadableTime=(e=0)=>{let t=Math.floor(e/1e3)%60;const a=Math.floor(e/1e3/60)%60,n=Math.floor(e/1e3/60/60);e<1e3&&e>0&&(t=1);let i="";return n>0&&(i+=s.intl.formatMessage({id:"BpGKhY",defaultMessage:"{hours}h"},{hours:n}),i+=" "),a>0&&(i+=s.intl.formatMessage({id:"mefQKO",defaultMessage:"{minutes}m"},{minutes:a}),i+=" "),(0===n&&t>0||0===e)&&(i+=s.intl.formatMessage({id:"/FkI8S",defaultMessage:"{seconds}s"},{seconds:t})),i.trim()};const i=["bmp","jpg","jpeg","png","svg","tiff","webp","gif","heic"];t.isImage=e=>i.includes(e);const l=(e,t)=>{if(t)return["V1","V2","V3"].includes(e)?"ANALYTICS":["TEAMS_V1"].includes(e)?"SURVEY":void 0};t.getDocsendAnalyticsAddOnConfig=(e,t)=>{const s=(null==t?void 0:t.toUpperCase())||"OFF",i=s.toLowerCase(),o=!(0,a.is_supported_mobile_browser)()&&e.is_email_verified;return{variantForLogging:i,fileBrowser:{deeplinkEnabled:["V1","V2","V3"].includes(s)&&o},workflowMenu:{logExposure:["V1","V2","V3","CONTROL","TEAMS_V1","TEAMS_CONTROL"].includes(s)&&o,showMenuItem:["V1","V2","V3","TEAMS_V1"].includes(s)&&o},splitShare:{logExposure:["CONTROL","TEAMS_CONTROL"].includes(s)&&o,showMenuItem:["V1","V2","V3","TEAMS_V1"].includes(s)&&o,removeDocsendAppAction:["V1","V3","TEAMS_V1"].includes(s),moveDocsendEntryPoint:["V2"].includes(s)&&o},coreSharingModal:{showFooter:["TEAMS_V1"].includes(s)&&o},docsendModalVariant:l(s,o),isSupportedFile:(e,t)=>!!["TEAMS_V1","TEAMS_CONTROL"].includes(s)||(0,n.isDocsendSupportedFile)(e,t)}}})),define("metaserver/static/js/docsend_analytics_add_on/helpers/modals",["require","exports","metaserver/static/js/docsend_analytics_add_on/components/docsend_analytics_add_on_modal","metaserver/static/js/docsend_analytics_add_on/components/teams_painted_door_test/teams_analytics_survey_modal","metaserver/static/js/docsend_analytics_add_on/helpers/utils"],(function(e,t,a,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showDocsendModal=void 0;t.showDocsendModal=e=>{const{docsendModalVariant:t}=(0,n.getDocsendAnalyticsAddOnConfig)(e.user,e.stormcrowVariant);switch(t){case"ANALYTICS":(0,a.showDocSendAnalyticsModal)(e);break;case"SURVEY":(0,s.showTeamsAnalyticsSurveyModal)(e)}}}));
//# sourceMappingURL=pkg-analytics-add-on.min.js-vfl4Is29D.map