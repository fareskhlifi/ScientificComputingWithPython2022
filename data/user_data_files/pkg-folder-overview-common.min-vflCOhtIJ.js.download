define("metaserver/static/js/previews/api",["require","exports","metaserver/static/js/api_v2/user_client","metaserver/static/js/api_v2/noauth_client"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPreviewData=t.MAX_REQUEST_SIZE=void 0,t.MAX_REQUEST_SIZE=50,t.fetchPreviewData=function(e,t,i=!1){if(!t)return Promise.reject(new Error("user not logged in, no support for un-auth'd users yet"));const n={files:e.map(e=>({ns_id:e.ns_id,sj_id:e.sjid})),include_dimensions:i};return t?(new a.UserApiV2Client).ns("previews").rpc("get_preview_data_batch",n,{subjectUserId:t.id}):(new r.NoAuthApiV2Client).ns("previews").rpc("get_preview_data_batch",n,{})}})),define("metaserver/static/js/previews/data/actions",["require","exports","tslib","lodash","metaserver/static/js/previews/data/types","metaserver/static/js/redux/constants","metaserver/static/js/previews/data/util","metaserver/static/js/previews/api","metaserver/static/js/file_store/utils"],(function(e,t,a,r,i,n,o,s,l){"use strict";function p(e){return{type:i.ActionTypes.UpdatePreviewData,payload:e}}function c(e,t){const a=t.results.reduce((e,t)=>(e[(0,l.getFileRevisionId)({ns_id:t.file.ns_id,sjid:t.file.sj_id})]=t,e),{});return{type:i.ActionTypes.UpdatePreviewData,payload:e.reduce((e,t)=>{const r=a[t],i={data:null==r?void 0:r.preview,status:n.ApiClientStatus.Success};return e[t]=i,e},{})}}function d(e){return{type:i.ActionTypes.UpdatePreviewData,payload:(0,r.mapValues)(e,e=>({data:void 0,status:n.ApiClientStatus.Error}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.apiRequestErrorAction=t.apiRequestSuccessAction=t.apiRequestInFlightAction=t.updatePreviewData=t.buildPreviewData=t.fetchPreviewUrl=t.fetchPreviewData=t.populateFilesPreviewData=void 0,t.populateFilesPreviewData=function(e){const t={};return e.forEach(e=>{const a=(0,l.getFileRevisionId)(e),r=e.preview;r&&(t[a]={data:r,status:n.ApiClientStatus.Success})}),{type:i.ActionTypes.UpdatePreviewData,payload:t}},t.fetchPreviewData=function(e,r,i,p){return(u,m)=>a.__awaiter(this,void 0,void 0,(function*(){const _=(0,o.filterFilesMissingPreviewData)(m(),e,i);if(0===_.length)return;const f=(0,o.chunkFiles)(_,s.MAX_REQUEST_SIZE).map(e=>(function(e,r,i,o){return a.__awaiter(this,void 0,void 0,(function*(){const a=(function(e){return e.reduce((e,t)=>(e[(0,l.getFileRevisionId)(t)]={data:void 0,status:n.ApiClientStatus.Request},e),{})})(r);e((0,t.apiRequestInFlightAction)(a));try{const t=yield(0,s.fetchPreviewData)(r,i,o);return e(c(Object.keys(a),t))}catch(t){return e(d(a))}}))})(u,e,r,p));return Promise.all(f)}))},t.fetchPreviewUrl=function(e,t){return(0,s.fetchPreviewData)([e],t).then(e=>{if(e.results.length>0){const t=e.results[0].preview;if(t&&t.preview_url)return t.preview_url}})},t.buildPreviewData=function(e,t){return e.reduce((e,a)=>(e[(0,l.getFileRevisionId)(a)]={data:a.preview,status:t},e),{})},t.updatePreviewData=p,t.apiRequestInFlightAction=p,t.apiRequestSuccessAction=c,t.apiRequestErrorAction=d})),define("metaserver/static/js/previews/data/reducer",["require","exports","metaserver/static/js/previews/data/types"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.initialState=void 0,t.initialState={filePreviews:{}},t.reducer=function(e=t.initialState,r){switch(r.type){case a.ActionTypes.UpdatePreviewData:return Object.assign(Object.assign({},e),{filePreviews:Object.assign(Object.assign({},e.filePreviews),r.payload)});default:return e}}})),define("metaserver/static/js/previews/data/selectors",["require","exports","metaserver/static/js/redux/constants","metaserver/static/js/redux/selectors","metaserver/static/js/file_store/utils","metaserver/static/js/redux/namespaces"],(function(e,t,a,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApiDataForFiles=t.getApiDataForFile=void 0;const o={data:void 0,status:a.ApiClientStatus.Error};function s(e,t){const a=(function(e){return(0,r.getStateAtNamespace)(e,n.PREVIEW_NAMESPACE_KEY)})(e);if(!a||!t)return o;const s=(0,i.getFileRevisionId)(t),l=a.filePreviews[s];return l&&l.status?l:o}t.getApiDataForFile=s,t.getApiDataForFiles=function(e,t){return t.reduce((t,a)=>(t[(0,i.getFileRevisionId)(a)]=s(e,a),t),{})}})),define("metaserver/static/js/previews/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(function(e){e.UpdatePreviewData="FileViewer/Previews/UpdatePreviewData"})(t.ActionTypes||(t.ActionTypes={}))})),define("metaserver/static/js/previews/data/util",["require","exports","tslib","lodash","metaserver/static/js/previews/data/selectors","metaserver/static/js/file_store/utils","metaserver/static/js/redux/constants"],(function(e,t,a,r,i,n,o){"use strict";function s(e,t){const a=(0,i.getApiDataForFile)(e,t);return a?a.status:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.chunkFiles=t.previewDataStatus=t.previewDataInFlight=t.previewDataPresentForFile=t.filterFilesMissingPreviewData=void 0,r=a.__importStar(r),t.filterFilesMissingPreviewData=function(e,t,a=!1){if(a)return t;const s=(0,i.getApiDataForFiles)(e,t);return r.filter(t,e=>{const t=(0,n.getFileRevisionId)(e);return!e.is_dir&&(!s[t]||!s[t].data&&s[t].status===o.ApiClientStatus.Error)})},t.previewDataPresentForFile=function(e,t){const a=(0,i.getApiDataForFile)(e,t);return!(!a||!a.data||a.status===o.ApiClientStatus.Error)},t.previewDataInFlight=function(e,t){return s(e,t)===o.ApiClientStatus.Request},t.previewDataStatus=s,t.chunkFiles=function(e,t){if(e.length<=0)return[];if(e.length<t)return[e];const a=Array(Math.ceil(e.length/t));let r=0,i=0;for(;r<e.length;)a[i++]=e.slice(r,r+=t);return a}})),define("metaserver/static/js/clean/open_in_mobile_app",["require","exports","tslib","react","dig-components/typography","metaserver/static/js/clean/clipboard_v3","metaserver/static/js/core/i18n","metaserver/static/js/clean/analytics","metaserver/static/js/core/browser","metaserver/static/js/core/browser_detection","metaserver/static/js/core/assert","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants"],(function(e,t,a,r,i,n,o,s,l,p,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanup=t.open_android_intent=t.open_ios=t.open_on_click=t.registerLoggingHandlers=t.CopyUrlLabelText=void 0,r=a.__importDefault(r),s=a.__importStar(s),l=a.__importStar(l),p=a.__importStar(p);function u(){return p.iOS&&(window.location.pathname.startsWith("/s/")||window.location.pathname.startsWith("/sh/")||window.location.pathname.startsWith("/scl/"))}t.CopyUrlLabelText=e=>u()?r.default.createElement(i.Text,Object.assign({color:"faint",tagName:"div"},e),o.intl.formatMessage({id:"EvntjN",defaultMessage:"Tapping Get the app will copy a link and open the content in the app"})):null,t.CopyUrlLabelText.displayName="CopyUrlLabelText";let m=void 0;let _=!1;let f=()=>{},v=()=>{};t.registerLoggingHandlers=(e,t)=>{f=e,v=t};t.open_on_click=(e,a,r,i,n,o)=>{const s=r=>{r.preventDefault(),o?(0,t.open_android_intent)(o):(0,t.open_ios)(e,a,i)};r&&r.addEventListener("click",s)};t.open_ios=(e,t,a)=>{return u()&&(0,n.copyToClipboard)(window.location.href),a?void(((null==(r=t)?void 0:r.startsWith("https://itunes.apple.com/"))||(null==r?void 0:r.startsWith("https://app.adjust.com/")))&&(v(),l.unsafeRedirect(r))):((e,t,a)=>{if(f(),_)return;let r=!1;m=()=>r=!0,document.addEventListener("visibilitychange",m);let i=!1;const n=()=>i=!0;window.addEventListener("pagehide",n),null!=a&&s.ShareTibEventLogger.log_unauth("CLICK_MOBILE_OPEN",d.SHARE_ACTION_ORIGIN_TYPE.WEB_MOBILE,{scl_url:a}),(function(){const t=document.createElement("iframe");t.src=e||"",t.style.display="none",document.body.append(t)})();const o=Date.now();setTimeout(()=>{_=!1,m&&document.removeEventListener("visibilitychange",m),window.removeEventListener("pagehide",n),!i&&!r&&Date.now()<o+4700&&(null!=a&&s.ShareTibEventLogger.log_unauth("CLICK_MOBILE_INSTALL",d.SHARE_ACTION_ORIGIN_TYPE.WEB_MOBILE,{scl_url:a}),t&&window.location.replace(t))},3200),_=!0})(e,t);var r};t.open_android_intent=e=>{(0,c.assert)(e.startsWith("intent://www.dropbox.com/sm/launch_intent_or_fallback_page"),"intentUrl must use intent:// protocol"),f&&f(),window.location.href=e};t.cleanup=()=>{if(m)return document.removeEventListener("visibilitychange",m)}})),define("metaserver/static/js/file_store/actions",["require","exports","tslib","metaserver/static/js/file_store/types","metaserver/static/js/file_store/utils","lodash"],(function(e,t,a,r,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.putFiles=t.putFile=void 0,n=a.__importStar(n),t.putFile=function(e,t){return{type:r.FileNamespaceActions.PutFile,payload:{file:e,fileId:null!=t?t:(0,i.getFileStoreId)(e)}}},t.putFiles=function(e){const t=n.keyBy(e,i.getFileStoreId);return{type:r.FileNamespaceActions.PutFileMap,payload:t}}})),define("metaserver/static/js/file_store/reducer",["require","exports","metaserver/static/js/file_store/types"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileNamespaceReducer=t.defaultFileState=void 0,t.defaultFileState={},t.fileNamespaceReducer=function(e=t.defaultFileState,r){switch(r.type){case a.FileNamespaceActions.PutFile:return Object.assign(Object.assign({},e),{[r.payload.fileId]:r.payload.file});case a.FileNamespaceActions.PutFileMap:return Object.assign(Object.assign({},e),r.payload)}return e}})),define("metaserver/static/js/file_store/selectors",["require","exports","metaserver/static/js/file_store/reducer","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/selectors"],(function(e,t,a,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=void 0,t.getFile=function(e,t){return t?(function(e){return(0,i.getStateAtNamespace)(e,r.FILE_NAMESPACE_KEY)||a.defaultFileState})(e)[t]:void 0}})),define("metaserver/static/js/file_store/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileNamespaceActions=void 0,(function(e){e.PutFile="PUT_FILE",e.PutFileMap="PUT_FILE_MAP"})(t.FileNamespaceActions||(t.FileNamespaceActions={}))})),define("metaserver/static/js/open_in_app/types",["require","exports","typescript/dropbox/proto/js_init_data/sharing/open_in_app_urls_pb"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areUrlsAndroid=t.areUrlsIOS=t.OpenInMobileAppPlatform=void 0,t.OpenInMobileAppPlatform=a.OpenInMobileAppPlatform,t.areUrlsIOS=function(e){return e.platform===t.OpenInMobileAppPlatform.IPAD||e.platform===t.OpenInMobileAppPlatform.IPHONE},t.areUrlsAndroid=function(e){return e.platform===t.OpenInMobileAppPlatform.ANDROID_MARKET}})),define("typescript/dropbox/proto/js_init_data/sharing/open_in_app_urls_pb",["require","exports","@bufbuild/protobuf"],(function(e,t,a){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AndroidOpenInAppUrls=t.IOSOpenInAppUrls=t.OpenInMobileAppPlatform=void 0,(function(e){e[e.UNUSED=0]="UNUSED",e[e.UNSUPPORTED=1]="UNSUPPORTED",e[e.IPHONE=2]="IPHONE",e[e.ANDROID_MARKET=3]="ANDROID_MARKET",e[e.IPAD=4]="IPAD"})(r=t.OpenInMobileAppPlatform||(t.OpenInMobileAppPlatform={})),a.proto3.util.setEnumType(r,"open_in_app_urls.OpenInMobileAppPlatform",[{no:0,name:"UNUSED"},{no:1,name:"UNSUPPORTED"},{no:2,name:"IPHONE"},{no:3,name:"ANDROID_MARKET"},{no:4,name:"IPAD"}]);class i extends a.Message{constructor(e){super(),this.platform=r.UNUSED,this.iOSAppUrl="",this.iOSAppStoreUrl="",a.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return a.proto3.util.equals(i,e,t)}}t.IOSOpenInAppUrls=i,i.runtime=a.proto3,i.typeName="open_in_app_urls.IOSOpenInAppUrls",i.fields=a.proto3.util.newFieldList(()=>[{no:1,name:"platform",kind:"enum",T:a.proto3.getEnumType(r)},{no:2,name:"iOS_app_url",kind:"scalar",T:9},{no:3,name:"iOS_app_store_url",kind:"scalar",T:9}]);class n extends a.Message{constructor(e){super(),this.platform=r.UNUSED,this.androidAppUrl="",a.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new n).fromBinary(e,t)}static fromJson(e,t){return(new n).fromJson(e,t)}static fromJsonString(e,t){return(new n).fromJsonString(e,t)}static equals(e,t){return a.proto3.util.equals(n,e,t)}}t.AndroidOpenInAppUrls=n,n.runtime=a.proto3,n.typeName="open_in_app_urls.AndroidOpenInAppUrls",n.fields=a.proto3.util.newFieldList(()=>[{no:1,name:"platform",kind:"enum",T:a.proto3.getEnumType(r)},{no:2,name:"android_app_url",kind:"scalar",T:9}])})),define("typescript/dropbox/proto/js_init_data/file_viewer/experiments_pb",["require","exports","@bufbuild/protobuf"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileViewerFlowExperiments=t.FileViewerFeatureExperiments=t.FileViewerConfiguration=void 0;class r extends a.Message{constructor(e){super(),this.wopiButtonVisible=!1,this.watermarkingByUserId={},this.watermarkTrialVariantByUserId={},a.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new r).fromBinary(e,t)}static fromJson(e,t){return(new r).fromJson(e,t)}static fromJsonString(e,t){return(new r).fromJsonString(e,t)}static equals(e,t){return a.proto3.util.equals(r,e,t)}}t.FileViewerConfiguration=r,r.runtime=a.proto3,r.typeName="file_viewer.FileViewerConfiguration",r.fields=a.proto3.util.newFieldList(()=>[{no:4,name:"wopi_button_visible",kind:"scalar",T:8},{no:6,name:"watermarking_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:8}},{no:7,name:"watermark_trial_variant_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:9}}]);class i extends a.Message{constructor(e){super(),this.partialPrewarmAllowed=!1,this.fvsdkAxAnnotations=!1,this.enableFvsdkPdfEditor="",this.enableFvsdkDynamicActions=!1,this.fvsdkExcel2Phase="",this.enableAddToCollection=!1,this.fvsdkTtiAaExperiment="",this.fvsdkExcelMsEmbedPhase="",this.tagsSectionVariant="",this.dragSectionAnnotation=!1,this.docsendAnalyticsAddOn="",this.fvsdkFastforwardRewind="",this.btSignaturesActionbarDropdown="",this.imgSizeOptimization=!1,this.enableAssignedTasksPlugin=!1,this.fvsdkToolbarRename=!1,this.deleteFromKeyboard=!1,this.initialVideoBandwidth="",this.fvsdkVideoEditing="",this.fvsdkSlowConnectionBanner=!1,this.replayPreviewsPermanentEntrypoint="",this.videoTranscription="",this.captureSdkIntegrationSharing=!1,this.fvsdkCampaignsToolkitPublish=!1,this.mobileWebPreviewFlipper="",this.mobileWebPreviewOpenInAppBanner=!1,this.captureSdkIntegrationSharingVariant="",this.comments2EnableStickers=!1,this.papLogging="",this.campaignsDownloadSisu=!1,this.publishPreviewsPaintedDoorEntrypoint="",this.fvsdkVideoCrop="",this.fvsdkVideoRotate="",this.campaignsLoggedOutSignUpTooltip="",this.loggedOutAcquisitionSaveAs="",this.googleOneTapVariant="",this.capturePreviewCommentRecording="",this.publishPreviewsPermanentEntrypoint="",this.saveAsForFileShmodels="",a.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new i).fromBinary(e,t)}static fromJson(e,t){return(new i).fromJson(e,t)}static fromJsonString(e,t){return(new i).fromJsonString(e,t)}static equals(e,t){return a.proto3.util.equals(i,e,t)}}t.FileViewerFeatureExperiments=i,i.runtime=a.proto3,i.typeName="file_viewer.FileViewerFeatureExperiments",i.fields=a.proto3.util.newFieldList(()=>[{no:1,name:"partial_prewarm_allowed",kind:"scalar",T:8},{no:5,name:"fvsdk_ax_annotations",kind:"scalar",T:8},{no:10,name:"enable_fvsdk_pdf_editor",kind:"scalar",T:9},{no:17,name:"enable_fvsdk_dynamic_actions",kind:"scalar",T:8},{no:20,name:"fvsdk_excel2_phase",kind:"scalar",T:9},{no:23,name:"enable_add_to_collection",kind:"scalar",T:8},{no:24,name:"fvsdk_tti_aa_experiment",kind:"scalar",T:9},{no:29,name:"fvsdk_excel_ms_embed_phase",kind:"scalar",T:9},{no:33,name:"tags_section_variant",kind:"scalar",T:9},{no:38,name:"drag_section_annotation",kind:"scalar",T:8},{no:39,name:"docsend_analytics_add_on",kind:"scalar",T:9},{no:43,name:"fvsdk_fastforward_rewind",kind:"scalar",T:9},{no:45,name:"bt_signatures_actionbar_dropdown",kind:"scalar",T:9},{no:46,name:"img_size_optimization",kind:"scalar",T:8},{no:47,name:"enable_assigned_tasks_plugin",kind:"scalar",T:8},{no:48,name:"fvsdk_toolbar_rename",kind:"scalar",T:8},{no:49,name:"delete_from_keyboard",kind:"scalar",T:8},{no:50,name:"initial_video_bandwidth",kind:"scalar",T:9},{no:51,name:"fvsdk_video_editing",kind:"scalar",T:9},{no:52,name:"fvsdk_slow_connection_banner",kind:"scalar",T:8},{no:54,name:"replay_previews_permanent_entrypoint",kind:"scalar",T:9},{no:55,name:"video_transcription",kind:"scalar",T:9},{no:56,name:"capture_sdk_integration_sharing",kind:"scalar",T:8},{no:57,name:"fvsdk_campaigns_toolkit_publish",kind:"scalar",T:8},{no:58,name:"mobile_web_preview_flipper",kind:"scalar",T:9},{no:59,name:"mobile_web_preview_open_in_app_banner",kind:"scalar",T:8},{no:60,name:"capture_sdk_integration_sharing_variant",kind:"scalar",T:9},{no:61,name:"comments2_enable_stickers",kind:"scalar",T:8},{no:63,name:"pap_logging",kind:"scalar",T:9},{no:65,name:"campaigns_download_sisu",kind:"scalar",T:8},{no:66,name:"publish_previews_painted_door_entrypoint",kind:"scalar",T:9},{no:67,name:"fvsdk_video_crop",kind:"scalar",T:9},{no:68,name:"fvsdk_video_rotate",kind:"scalar",T:9},{no:69,name:"campaigns_logged_out_sign_up_tooltip",kind:"scalar",T:9},{no:70,name:"logged_out_acquisition_save_as",kind:"scalar",T:9},{no:71,name:"google_one_tap_variant",kind:"scalar",T:9},{no:72,name:"capture_preview_comment_recording",kind:"scalar",T:9},{no:73,name:"publish_previews_permanent_entrypoint",kind:"scalar",T:9},{no:74,name:"save_as_for_file_shmodels",kind:"scalar",T:9}]);class n extends a.Message{constructor(e){super(),this.manualVideoGifByUserId={},this.approvalFlowByUserId={},this.approvalFlowVariantByUserId={},this.flowsApprovalInShareModalEnabled=!1,this.versioningFlowVariantByUserId={},this.approvalAndVersioningNewBadgeByUserId={},this.approvalCopyVariantByUserId={},this.approvalPdfEditingToastByUserId={},a.proto3.util.initPartial(e,this)}static fromBinary(e,t){return(new n).fromBinary(e,t)}static fromJson(e,t){return(new n).fromJson(e,t)}static fromJsonString(e,t){return(new n).fromJsonString(e,t)}static equals(e,t){return a.proto3.util.equals(n,e,t)}}t.FileViewerFlowExperiments=n,n.runtime=a.proto3,n.typeName="file_viewer.FileViewerFlowExperiments",n.fields=a.proto3.util.newFieldList(()=>[{no:4,name:"manual_video_gif_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:8}},{no:8,name:"approval_flow_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:8}},{no:9,name:"approval_flow_variant_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:9}},{no:11,name:"flows_approval_in_share_modal_enabled",kind:"scalar",T:8},{no:14,name:"versioning_flow_variant_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:9}},{no:15,name:"approval_and_versioning_new_badge_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:9}},{no:16,name:"approval_copy_variant_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:9}},{no:17,name:"approval_pdf_editing_toast_by_user_id",kind:"map",K:3,V:{kind:"scalar",T:8}}])})),define("metaserver/static/js/file_viewer/sdk_file_viewer/experiments",["require","exports","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/file_viewer_flows_experiments","typescript/dropbox/proto/js_init_data/file_viewer/experiments_pb","js/proto_utils/unpack"],(function(e,t,a,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileViewerFlowExperiments=t.fileViewerFeatureExperiments=t.fileViewerConfiguration=void 0,t.fileViewerConfiguration=(0,o.unmarshalProto)(a.proto,n.FileViewerConfiguration),t.fileViewerFeatureExperiments=(0,o.unmarshalProto)(r.proto,n.FileViewerFeatureExperiments),t.fileViewerFlowExperiments=(0,o.unmarshalProto)(i.proto,n.FileViewerFlowExperiments)})),define("metaserver/static/js/file_viewer/app_download_interstitial/app_download_interstitial",["require","exports","tslib","classnames","react","lodash","dig-components/logos","dig-components/typography","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/truncate","typescript/libraries/spectrum-content-icon-compatibility/src/index","typescript/libraries/spectrum-content-icon-compatibility/src/index","metaserver/static/js/open_in_app/types","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/open_in_app/actions","metaserver/static/js/clean/open_in_mobile_app","metaserver/static/js/file_viewer/app_download_interstitial/app_download_interstitial.module.css"],(function(e,t,a,r,i,n,o,s,l,p,c,d,u,m,_,f,v,g,w,h){"use strict";function b({onClose:e}){return i.default.createElement("header",null,i.default.createElement("h1",{className:h.dropboxLogo},i.default.createElement(o.FssWordmark,null)),i.default.createElement(l.IconButton,{className:h.appDownloadInterstitialClose,variant:"transparent",size:"small","aria-label":f.intl.formatMessage({id:"5xXFHL",defaultMessage:"Close"}),onClick:e},i.default.createElement(c.UIIcon,{src:p.CloseLine})))}function y({appUrls:e,onContinue:t,onAppDownload:a}){const r=i.default.useCallback(()=>{null==a||a(),(0,g.openInApp)(e)},[e,a]);return i.default.createElement("div",{className:h.appDownloadInterstitialCtas},i.default.createElement(w.CopyUrlLabelText,{className:h.appDownloadInterstialCopyNotification}),i.default.createElement(l.Button,{className:h.appDownloadInterstitialCta,size:"large",variant:"primary",href:A(e),onClick:r},f.intl.formatMessage({id:"iFaoLl",defaultMessage:"Get the app"})),i.default.createElement(l.Button,{className:h.appDownloadInterstitialCta,size:"large",variant:"opacity",onClick:t},f.intl.formatMessage({id:"D55B6I",defaultMessage:"Or continue to website"})))}function S({fileOrFolderName:e,isFolder:t,ownerName:a,ownerTeamName:r}){return i.default.createElement("section",{className:h.appDownloadInterstitialContent},i.default.createElement("header",null,i.default.createElement(s.Title,null,f.intl.formatMessage({id:"F43usw",defaultMessage:"Get a better view with our mobile app"}))),i.default.createElement("div",{className:h.appDownloadInterstitialContentThumbnail},t?i.default.createElement(m.IconContent,{name:"folder_shared-large",className:h.fileIcon}):i.default.createElement(u.FileIcon,{path:e,variant:"large",className:h.fileIcon}),i.default.createElement("div",null,i.default.createElement(s.Text,{isBold:!0},i.default.createElement(d.Truncate,{location:.5},e))),i.default.createElement(s.Text,{color:"faint"},(o=r,(n=a)&&o?f.intl.formatMessage({id:"eqU+DV",defaultMessage:"{owner} ({team}) shared this with you."},{owner:n,team:o}):n&&!o?f.intl.formatMessage({id:"6skgcw",defaultMessage:"{owner} shared this with you."},{owner:n}):!n&&o?f.intl.formatMessage({id:"pT8Q4Y",defaultMessage:"{team} shared this with you."},{team:o}):f.intl.formatMessage({id:"RDRrX1",defaultMessage:"This file was shared with you."})))));var n,o}function A(e){if(e){if((0,_.areUrlsIOS)(e))return e.iOSAppStoreUrl;if((0,_.areUrlsAndroid)(e))return e.androidAppUrl}}Object.defineProperty(t,"__esModule",{value:!0}),t.AppDownloadInterstitial=void 0,r=a.__importDefault(r),i=a.__importDefault(i),h=a.__importStar(h);const E=(0,v.requireCssWithComponent)(e=>{const{className:t,open_in_app_data:a,fileOrFolderName:o,isFolder:s,onClose:l,onContinue:p,onAppDownload:c,ownerName:d,ownerTeamName:u}=e,[m,_]=i.default.useState(()=>window.innerHeight);return i.default.useEffect(()=>{const e=(0,n.throttle)(()=>{_(window.innerHeight)});return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),i.default.createElement("section",{className:(0,r.default)(h.appDownloadInterstitialContainer,t),style:{height:m}},i.default.createElement(b,{onClose:l}),i.default.createElement(S,{isFolder:s,fileOrFolderName:o,ownerName:d,ownerTeamName:u}),i.default.createElement(y,{onContinue:p,onAppDownload:c,appUrls:a}))},["/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css"]);t.AppDownloadInterstitial=E})),define("metaserver/static/js/file_viewer/app_download_interstitial/app_download_interstitial.module.css",["require","exports","css!metaserver/static/js/file_viewer/app_download_interstitial/app_download_interstitial.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileIcon=t.appDownloadInterstialCopyNotification=t.appDownloadInterstitialContentThumbnail=t.appDownloadInterstitialContent=t.appDownloadInterstitialCta=t.appDownloadInterstitialCtas=t.appDownloadInterstitialClose=t.dropboxLogo=t.appDownloadInterstitialContainer=void 0,t.appDownloadInterstitialContainer="_app-download-interstitial-container_1bwad_1",t.dropboxLogo="_dropbox-logo_1bwad_18",t.appDownloadInterstitialClose="_app-download-interstitial-close_1bwad_33",t.appDownloadInterstitialCtas="_app-download-interstitial-ctas_1bwad_44",t.appDownloadInterstitialCta="_app-download-interstitial-cta_1bwad_44",t.appDownloadInterstitialContent="_app-download-interstitial-content_1bwad_64",t.appDownloadInterstitialContentThumbnail="_app-download-interstitial-content-thumbnail_1bwad_77",t.appDownloadInterstialCopyNotification="_app-download-interstial-copy-notification_1bwad_91",t.fileIcon="_file-icon_1bwad_96";t.default={appDownloadInterstitialContainer:"_app-download-interstitial-container_1bwad_1",dropboxLogo:"_dropbox-logo_1bwad_18",appDownloadInterstitialClose:"_app-download-interstitial-close_1bwad_33",appDownloadInterstitialCtas:"_app-download-interstitial-ctas_1bwad_44",appDownloadInterstitialCta:"_app-download-interstitial-cta_1bwad_44",appDownloadInterstitialContent:"_app-download-interstitial-content_1bwad_64",appDownloadInterstitialContentThumbnail:"_app-download-interstitial-content-thumbnail_1bwad_77",appDownloadInterstialCopyNotification:"_app-download-interstial-copy-notification_1bwad_91",fileIcon:"_file-icon_1bwad_96"}})),define("metaserver/static/js/open_in_app/actions",["require","exports","tslib","metaserver/static/js/open_in_app/types","metaserver/static/js/clean/open_in_mobile_app"],(function(e,t,a,r,i){"use strict";function n(){const e=(navigator.userAgent||"").match(/OS (\d+)_(\d+)_?(\d+)?/);return!e||parseInt(e[1],10)>=9}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanUp=t.openImmediately=t.openInApp=t.isIOS9OrHigher=void 0,i=a.__importStar(i),t.isIOS9OrHigher=n,t.openInApp=function(e){(0,r.areUrlsIOS)(e)?i.open_ios(e.iOSAppUrl,e.iOSAppStoreUrl,n()):(0,r.areUrlsAndroid)(e)&&i.open_android_intent(e.androidAppUrl)},t.openImmediately=function(e){let t;if((0,r.areUrlsIOS)(e))t=e.iOSAppUrl;else{if(!(0,r.areUrlsAndroid)(e))return;t=e.androidAppUrl}const a=document.createElement("iframe");a.setAttribute("class","open-in-app-transport"),a.setAttribute("src",t),a.setAttribute("style","display: none"),document.body.appendChild(a)},t.cleanUp=function(){i.cleanup()}})),define("metaserver/static/js/open_in_app/ui/banner",["require","exports","tslib","react","metaserver/static/js/open_in_app/actions","metaserver/static/js/open_in_app/types","metaserver/static/js/core/i18n","metaserver/static/js/core/browser","metaserver/static/js/core/browser_detection","metaserver/static/js/clean/open_in_mobile_app","dig-components/icons","dig-components/icons/src","dig-components/buttons","dig-components/banner","metaserver/static/js/open_in_app/ui/banner.module.css","dig-components/icons/src"],(function(e,t,a,r,i,n,o,s,l,p,c,d,u,m,_,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenInAppBanner=void 0,r=a.__importStar(r),s=a.__importStar(s),l=a.__importStar(l),_=a.__importStar(_);t.OpenInAppBanner=e=>{const{onClick:t,onClose:a,urls:v,isMountedFile:g,mwebOpenInAppBannerExp:w}=e,[h,b]=(0,r.useState)(!1);r.default.useEffect(()=>i.cleanUp,[]);const y=(0,r.useCallback)(()=>{b(!0),null==a||a()},[a]),S=(0,r.useCallback)(()=>{null==t||t(),g&&(null==v?void 0:v.platform)===n.OpenInMobileAppPlatform.ANDROID_MARKET?s.redirect(v.androidAppUrl):(0,i.openInApp)(v)},[t,g,v]);if(h||!v)return null;const A=l.iOS&&(0,i.isIOS9OrHigher)();return w&&A?r.default.createElement(m.Banner,{type:"attention",withLeftIcon:!1,withCloseButton:"Close",onRequestClose:y},r.default.createElement(m.Banner.Message,null,o.intl.formatMessage({id:"eNdtXI",defaultMessage:"Browse files faster in the Dropbox app"})),r.default.createElement(m.Banner.Actions,null,r.default.createElement(u.Button,{onClick:S,variant:"outline",withIconLeft:r.default.createElement(c.UIIcon,{src:f.DropboxLine})},o.intl.formatMessage({id:"/239AG",defaultMessage:"Open in App"})))):r.default.createElement("div",{className:_.banner},r.default.createElement("div",{className:_.textContainer},r.default.createElement(u.Button,{onClick:S,variant:"transparent",hasNoUnderline:!0},A?o.intl.formatMessage({id:"ye+BbQ",defaultMessage:"Get the Dropbox App"}):g&&v.platform===n.OpenInMobileAppPlatform.ANDROID_MARKET?o.intl.formatMessage({id:"gxO/+x",defaultMessage:"Open App"}):o.intl.formatMessage({id:"pezXnL",defaultMessage:"View In App"})),r.default.createElement(p.CopyUrlLabelText,{className:_.copyNotification,color:"standard",size:"small"})),r.default.createElement(u.IconButton,{variant:"transparent",className:_.closeButton,size:"large","aria-label":o.intl.formatMessage({id:"LwqLT7",defaultMessage:"Close"}),onClick:y},r.default.createElement(c.UIIcon,{src:d.CloseLine})))},t.OpenInAppBanner.displayName="OpenInAppBanner"})),define("metaserver/static/js/open_in_app/ui/banner.module.css",["require","exports","css!metaserver/static/js/open_in_app/ui/banner.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeButton=t.copyNotification=t.textContainer=t.banner=void 0,t.banner="_banner_1qu5f_1",t.textContainer="_text-container_1qu5f_9",t.copyNotification="_copy-notification_1qu5f_14",t.closeButton="_close-button_1qu5f_18";t.default={banner:"_banner_1qu5f_1",textContainer:"_text-container_1qu5f_9",copyNotification:"_copy-notification_1qu5f_14",closeButton:"_close-button_1qu5f_18"}})),define("metaserver/static/js/comments2/util",["require","exports","tslib","metaserver/static/js/core/browser"],(function(e,t,a,r){"use strict";function i(e){return(t,a)=>void 0===t||void 0===a?t===a:e(t,a)}function n(...e){return i((t,a)=>e.every(e=>t[e]===a[e]))}function o({x:e,y:t,width:a,height:r}){return 0===e&&0===t&&1===a&&1===r}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActiveCommentFromUrl=t.isFullImageAnnotation=t.isFullPageAnnotation=t.isTimecodeAnnotation=t.isContextSame=t.isStreamSame=t.isUserSame=void 0,r=a.__importStar(r),t.isUserSame=n("id"),t.isStreamSame=n("type","id"),t.isContextSame=i((e,a)=>(0,t.isStreamSame)(e.stream,a.stream)&&(0,t.isUserSame)(e.viewer,a.viewer)),t.isTimecodeAnnotation=function(e){return void 0!==e&&("audio"===e.type||"video"===e.type)},t.isFullPageAnnotation=function(e){return 1===e.regions.length&&o(e.regions[0])},t.isFullImageAnnotation=function(e){return o(e.region)},t.parseActiveCommentFromUrl=function(){const e=/comment_id=(.*)/.exec(r.get_uri().getFragment());return e?e[1]:void 0}})),define("metaserver/static/js/home/starred/conditional_interface",["require","exports","metaserver/static/js/home/starred/starred_resource_store","metaserver/static/js/starred/star","metaserver/static/js/home/recents/recent_activity_starred","metaserver/static/js/home/starred/starred_view","metaserver/static/js/starred/id_type_pair","metaserver/static/js/files_page/data/store","metaserver/static/js/files_page/data/action_creators","metaserver/static/js/starred/redux/store","metaserver/static/js/starred/redux/slice"],(function(e,t,a,r,i,n,o,s,l,p,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredActions=t.fetchMissingStarredStatuses=t.getStoreForStarred=t.filesPageAppInit=t.getStoreForFilesPage=t.idTypePairToString=t.StarredView=t.getIdTypePairFromRecentItem=t.Star=t.getStarredResourceStore=void 0,Object.defineProperty(t,"getStarredResourceStore",{enumerable:!0,get:function(){return a.getStarredResourceStore}}),Object.defineProperty(t,"Star",{enumerable:!0,get:function(){return r.Star}}),Object.defineProperty(t,"getIdTypePairFromRecentItem",{enumerable:!0,get:function(){return i.getIdTypePairFromRecentItem}}),Object.defineProperty(t,"StarredView",{enumerable:!0,get:function(){return n.StarredView}}),Object.defineProperty(t,"idTypePairToString",{enumerable:!0,get:function(){return o.idTypePairToString}}),Object.defineProperty(t,"getStoreForFilesPage",{enumerable:!0,get:function(){return s.getStoreForFilesPage}}),Object.defineProperty(t,"filesPageAppInit",{enumerable:!0,get:function(){return l.appInit}}),Object.defineProperty(t,"getStoreForStarred",{enumerable:!0,get:function(){return p.getStoreForStarred}}),Object.defineProperty(t,"fetchMissingStarredStatuses",{enumerable:!0,get:function(){return c.fetchMissingStarredStatuses}}),Object.defineProperty(t,"StarredActions",{enumerable:!0,get:function(){return c.StarredActions}})})),define("metaserver/static/js/starred/star",["require","exports","tslib","classnames","react","react-redux","dig-components/icons","dig-components/icons/src","dig-components/tooltips","metaserver/static/js/components/ui/css","metaserver/static/js/starred/starred_activity_logger","metaserver/static/js/starred/redux/selectors","metaserver/static/js/starred/redux/slice","metaserver/static/js/starred/redux/types","metaserver/static/js/core/i18n","metaserver/static/js/common/uuid"],(function(e,t,a,r,i,n,o,s,l,p,c,d,u,m,_,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Star=void 0,r=a.__importDefault(r),i=a.__importDefault(i);const v=({user:e,id:t,idType:a,isDir:p,source:v,itemName:g,onStarClick:w,tooltipPlacement:h,isReadOnly:b,isTabbing:y,tabIndex:S,starButtonClassName:A,alwaysShowUnstarred:E,ariaLabelledBy:I})=>{const T=(0,n.useSelector)(e=>(0,d.getFileStarredData)(e,t));let P=!1,C=!0;(null==T?void 0:T.loadingState)===m.StarredLoadingStateEnum.LOAD_SUCCESS&&(P=T.isStarred,C=!1);const[O]=i.default.useState(()=>(0,f.generateUUID)("star-")),j=(0,n.useDispatch)(),M=i.default.useMemo(()=>b?P?_.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:P?_.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):_.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"}),[P,b]),R=i.default.useCallback(r=>{if(r.stopPropagation(),r.preventDefault(),!C){const r=!P;c.starredActivityLogger.logClick(e,t,a,p,v,r),w&&w(r),j((0,u.updateStarredStatus)({id:t,idType:a,newStatus:r,itemName:g,showSnackbar:!0}))}},[C,P]);if(void 0===P)return null;if(b&&!P)return null;const F={star__toggle:!0,"star__toggle--starred":P,"star__toggle--unstarred":!P&&!y&&!E,"star__toggle--loading":C};return i.default.createElement(l.Tooltip,{title:M,placement:h||"top"},i.default.createElement("button",{className:(0,r.default)(F,A),role:"button","aria-pressed":P,"aria-label":M,onClick:R,onDoubleClick:R,disabled:b,tabIndex:S,id:O,"aria-labelledby":(0,r.default)(O,I)},i.default.createElement("span",{hidden:!0},M),i.default.createElement(o.UIIcon,{src:P?s.StarFill:s.StarLine})))};v.displayName="_Star",t.Star=(0,p.requireCssWithComponent)(v,["/static/metaserver/static/css/starred/star-vflRNeO9W.css"])})),define("metaserver/static/js/starred/starred_activity_logger",["require","exports","metaserver/static/js/home/api","metaserver/static/js/home/starred/constants","metaserver/static/js/starred/constants","metaserver/static/js/clean/web_user_action_logger","metaserver/static/js/clean/web_user_action_events"],(function(e,t,a,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.starredActivityLogger=t.StarredActivityLogger=void 0;const s=[i.StarredSource.HOME_STARRED,i.StarredSource.HOME_RECENTS];class l{logClick(e,t,i,l,p,c){if("BROWSE"===p)return Promise.resolve();const d=[];if(s.includes(p)){const n=c?r.StarredLoggingTypes.CLICK_STAR:r.StarredLoggingTypes.CLICK_UNSTAR;d.push((0,a.logHomeActivity)({eventName:n,role:e.role,extra:{resource_id:t,id_type:i,is_dir:l}}))}const u=c?o.WebUserActionLogEvent.STAR:o.WebUserActionLogEvent.REMOVE_STAR;return d.push(n.WebUserActionLog.log(e.id,u,{resource_id:t,id_type:i,is_dir:l,role:e.role,source:p})),Promise.all(d)}}t.StarredActivityLogger=l,t.starredActivityLogger=new l})),define("typescript/component_libraries/files_components/src/common/format_bytes",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBytes=t.SWITCH_UNIT_THRESHOLD=void 0,t.SWITCH_UNIT_THRESHOLD=900,t.formatBytes=function(e,a,r=2,i=!0,n=!0,o=!0){a=o?parseFloat(a):Math.max(0,parseFloat(a));const s=Math.abs(a);let l,p;return s<1024?(r=0,l=a,p=e.formatMessage({id:"se/5fs",defaultMessage:"{count, plural, one{byte} other{bytes}}"},{count:a}),i=!0):s<1024*t.SWITCH_UNIT_THRESHOLD?(l=a/1024,p=e.formatMessage({id:"fcOrPH",defaultMessage:"KB"})):s<1048576*t.SWITCH_UNIT_THRESHOLD?(l=a/1048576,p=e.formatMessage({id:"UFZYVH",defaultMessage:"MB"})):s<1073741824*t.SWITCH_UNIT_THRESHOLD||0===r&&a<1099511627776?(l=a/1073741824,p=e.formatMessage({id:"5nCO1R",defaultMessage:"GB"})):(l=a/1099511627776,p=e.formatMessage({id:"4rrpQj",defaultMessage:"TB"})),`${e.formatNumber(l,{maximumFractionDigits:r,minimumFractionDigits:n?0:r})}${i?" ":""}${p}`}})),define("metaserver/static/js/comments2/data/mentions_api",["require","exports","tslib","lodash","metaserver/static/js/contacts/bloodhound_contacts_v2","metaserver/static/js/contacts/data_v2","metaserver/static/js/comments2/transforms"],(function(e,t,a,r,i,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mentionsApi=t.MentionsApiImpl=void 0,r=a.__importStar(r);class s{constructor(e,t=!1){this.cache={},this.filterContact=e=>{const t=!!e.group_id,a=!this.allowMentionSelf&&e.email===this.user.email;return!(t||a)},this.updateCache=(e,t,a)=>{let r;const i=t.map(o.contactToIMentionUser);if(a){r=[...this.cache[e]||[],...i]}else r=i;return this.cache=Object.assign(Object.assign({},this.cache),{[e]:r}),this.cache},this.user=e,this.allowMentionSelf=t,this.dataSource=new n.ContactsDataSourceV2(e,this.filterContact)}query(e,t,a){this.dataSource.search(e,a=>{t(this.updateCache(e,a,!1))},r=>{(a||t)(this.updateCache(e,r,!0))})}getMatchesWithStarterSuggestions(){const e=i.BloodhoundContactsV2.getAll(this.user).filter(this.filterContact).map(o.contactToIMentionUser),t=r.sortBy(e.slice(0,50),e=>e.name||e.email);return this.cache=Object.assign(Object.assign({},this.cache),{"":t}),this.cache}}t.MentionsApiImpl=s,t.mentionsApi=function(e,t){return e?new s(e,t):{cache:{},query:()=>{},getMatchesWithStarterSuggestions:()=>({})}}})),define("metaserver/static/js/comments2/transforms",["require","exports","tslib","metaserver/static/js/core/user_i18n"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactToIMentionUser=t.sharingTextAndUsersToICommentContent=t.dbxUserToIUser=void 0,r=a.__importStar(r),t.dbxUserToIUser=function(e){return{id:e.account_id,name:{display:e.display_name,initials:r.getInitials(e.display_name),public:r.getShortName(e.display_name)},photoUrl:e.photo_circle_url}},t.sharingTextAndUsersToICommentContent=function(e,t){if(!t.length)return{metadata:[],text:e};const a=[],i=[];let n=0;for(const e of t){let t,o;"accountId"in e?(t=r.getShortName(e.displayName),o={type:"id",identifier:e.accountId}):(t=e.email,o={type:"email",identifier:e.email}),t&&(t="@"+t,a.push(t),i.push({location:{start:n,end:n+t.length},type:"mention",user:o}),n+=t.length+1)}return a.push(e),{text:a.join(" "),metadata:i}},t.contactToIMentionUser=function(e){return{id:e.dbx_account_id,email:e.email,name:{display:e.name,initials:r.getInitials(e.name),public:r.getShortName(e.name)},photoUrl:e.photo_url||e.avatar_url}}})),define("typescript/component_libraries/flows/src/components/contact-typeahead/index",["require","exports","tslib","react","dig-components/typeahead","dig-components/text_fields","dig-components/form_row","dig-components/chips","dig-components/avatar","react-intl","dig-components/typography","dig-components/tooltips"],(function(e,t,a,r,i,n,o,s,l,p,c,d){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0}),t.TypeaheadEmailSuggestion=t.TypeaheadSuggestion=t.ContactTypeahead=t.getContactKey=t.ValidationResult=void 0,r=a.__importStar(r),(function(e){e.OK="OK",e.DUPLICATE="DUPLICATE",e.INVALID="INVALID",e.OVER_RECIPIENTS_LIMIT="OVER_RECIPIENTS_LIMIT"})(u=t.ValidationResult||(t.ValidationResult={})),t.getContactKey=function(e){return`CONTACT-${e.email}`};const m=/[ ,]+/,_=/^['&A-Za-z0-9\._%+-]+@[A-Za-z0-9-][A-Za-z0-9\.-]*\.[A-Za-z]{2,15}$/i;t.ContactTypeahead=e=>{const[a,p]=(0,r.useState)(""),[v,g]=(0,r.useState)(!1),[w,h]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),S=(0,r.useRef)(null),{noMatches:A,selectFromSuggestionErrMsg:E}=f();(0,r.useEffect)(()=>{e.recipients.length>e.recipientNumLimit?h(!0):h(!1),e.recipients.length>0&&e.recipients.filter(e=>e.validationResult!==u.OK).length>0?g(!0):g(!1)},[e.recipients,e.recipientNumLimit]);const I=t=>{const a=e.recipients.filter(e=>e.email!==t.email);e.onRecipientsChange(a)},T=t=>{if(e.recipients.length>e.recipientNumLimit)return u.OVER_RECIPIENTS_LIMIT;return e.recipients.find(e=>t.email===e.email)?u.DUPLICATE:_.test(t.email)?u.OK:u.INVALID},P=(t,a,r)=>{if(e.onQueryChange(""),p(""),!t)return!1;if(!t&&!r)return!1;const i=t?[t]:r.split(m).filter(Boolean).map(e=>({email:e})),n={},o=[...e.recipients];for(const e of i){if(e.email in n)continue;const t=T(e);if(t===u.OVER_RECIPIENTS_LIMIT)break;t!==u.DUPLICATE&&(n[e.email]=null,e.validationResult=t,o.push(e))}return o.length>e.recipients.length&&e.onRecipientsChange(o),0===o.filter(e=>e.validationResult!==u.OK).length},C=t=>{P(t,0,a),e.onTypeAheadSelection&&e.onTypeAheadSelection(t)},O=t=>{const a=t.currentTarget.value;p(a),e.onQueryChange(a)},j=t=>{if(8===t.keyCode&&""===a&&e.recipients.length>0&&I(e.recipients[e.recipients.length-1]),(9==t.keyCode||13===t.keyCode)&&""!==a){let t=null;e.suggestions.length>0?t=e.suggestions[0]:_.test(a)&&(t={email:a}),P(t,0,a)}},M=()=>{e.onFocus&&e.onFocus(),y(!0)},R="flows-typeahead__input",F=e.recipients.length>=e.recipientNumLimit,D=()=>r.default.createElement(i.Typeahead.Wrapper,{onSelection:C},({getTriggerProps:p,getContentProps:c})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(n.TextInput.Container,{isInvalid:v||w||!b&&!!a,ref:S},r.default.createElement(n.TextInput.ChipsContainer,null,!!e.recipients.length&&e.recipients.map((e,t)=>r.default.createElement(s.InputChip,{key:t,size:"small",isAlert:e.validationResult!==u.OK,onDelete:()=>I(e),withAvatarLeft:e.avatarUrl&&r.default.createElement(l.Avatar,{hasNoOutline:!0,size:"xsmall",src:e.avatarUrl})},e.name||e.email)),r.default.createElement(n.TextInput.Input,Object.assign({autoFocus:!0,id:R,placeholder:F?void 0:e.placeholder,"aria-label":e.placeholder,value:a},p({onChange:O,onKeyDown:j}),{disabled:F,onBlur:()=>y(!1),onFocus:M,style:{fontSize:"12px"},autoComplete:"off"})))),!b&&a&&r.default.createElement(o.FormHelperText,{isInvalid:!0},E),r.default.createElement(i.Typeahead.Container,Object.assign({},c(),{triggerRef:{current:S.current},isEmptyQuery:Boolean(a)&&0==e.suggestions.length&&!_.test(a),emptyPrompt:r.default.createElement(i.Typeahead.EmptyPrompt,{placeholderText:A}),onBlur:()=>y(!1),onFocus:()=>y(!0)}),e.suggestions.length>0?r.default.createElement(i.Typeahead.Results,{results:e.suggestions,renderRow:e.renderTypeaheadSuggestion}):Boolean(a)&&r.default.createElement(i.Typeahead.Results,{results:[{email:a}],renderRow:e=>r.default.createElement(t.TypeaheadEmailSuggestion,{suggestion:e})}))));return r.default.createElement(r.default.Fragment,null,e.label&&r.default.createElement(o.FormLabel,{htmlFor:R},r.default.createElement(c.Text,{isBold:!0,size:"small",tagName:"label"},e.label),e.labelSubtext),F&&e.maxNumTooltip?r.default.createElement(d.Tooltip,{title:e.maxNumTooltip},r.default.createElement("span",{style:{display:"inline-block",width:"100%"},tabIndex:0},D())):D())},t.ContactTypeahead.displayName="ContactTypeahead";t.TypeaheadSuggestion=({suggestion:e,getInitials:t})=>{const a=t(e.name||e.email);return r.default.createElement(i.Typeahead.Row,{key:e.email,value:e,withTitle:e.name,withSubtitle:e.email,withLeftAccessory:r.default.createElement(l.Avatar,{src:e.avatarUrl,backgroundColor:(0,l.avatarColorForUserIdentifier)(a),hasNoOutline:!0},a),onKeyDown:e=>{e.nativeEvent.stopImmediatePropagation()}})},t.TypeaheadSuggestion.displayName="TypeaheadSuggestion";function f(){const e=(0,p.useIntl)();return{noMatches:e.formatMessage({id:"T2ynaE",defaultMessage:"No matches"}),selectFromSuggestionErrMsg:e.formatMessage({id:"4gphPK",defaultMessage:"Please select an assignee"}),inviteEmailMsg:t=>e.formatMessage({id:"E9a3yV",defaultMessage:"Invite {email}"},{email:t})}}t.TypeaheadEmailSuggestion=({suggestion:e})=>{const{inviteEmailMsg:t}=f();return r.default.createElement(i.Typeahead.Row,{key:e.email,value:e,withTitle:t(e.email)})},t.TypeaheadEmailSuggestion.displayName="TypeaheadEmailSuggestion"})),define("metaserver/static/js/flows/approval/api",["require","exports","metaserver/static/js/api_v2/user_client"],(function(e,t,a){"use strict";function r(e,t,r,i,n,o){const s={file_id:t,comment:{content:o},thread_id:r,status:{".tag":i},approval_type:{".tag":n}};return(new a.UserApiV2Client).ns("flows").rpc("respond_to_approval",s,{subjectUserId:e})}function i(e,t,r,i,n){const o={file_id:t,comment_id:r,comment:{content:n},status:{".tag":i}};return(new a.UserApiV2Client).ns("flows").rpc("edit_approval",o,{subjectUserId:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubmittedApprovalsCount=t.getFileApprovalStatus=t.deleteApprovalThread=t.deleteApproval=t.editApprovalRequest=t.editApprovalResponse=t.resubmitApprovalRequest=t.respondToApprovalRequest=t.createApproval=void 0,t.createApproval=function(e,t,r,i,n){const o={file_id:t,comment:{content:r},status:{".tag":"pending"},approvers:i,requires_all:n};return(new a.UserApiV2Client).ns("flows").rpc("create_approval",o,{subjectUserId:e})},t.respondToApprovalRequest=function(e,t,a,i,n){return r(e,t,a,i?"approved":"rejected","response",n)},t.resubmitApprovalRequest=function(e,t,a,i){return r(e,t,a,"pending","request",i)},t.editApprovalResponse=function(e,t,a,r,n){return i(e,t,a,r?"approved":"rejected",n)},t.editApprovalRequest=function(e,t,a,r){return i(e,t,a,"pending",r)},t.deleteApproval=function(e,t,r){const i={file_id:t,comment_id:r};return(new a.UserApiV2Client).ns("flows").rpc("delete_approval",i,{subjectUserId:e})},t.deleteApprovalThread=function(e,t,r){const i={file_id:t,comment_id:r};return(new a.UserApiV2Client).ns("flows").rpc("delete_approval_thread",i,{subjectUserId:e})},t.getFileApprovalStatus=function(e,t){const r={file_id:t};return(new a.UserApiV2Client).ns("flows").rpc("get_file_status",r,{subjectUserId:e})},t.getSubmittedApprovalsCount=function(e){return(new a.UserApiV2Client).ns("flows").rpc("get_submitted_approvals_count",{},{subjectUserId:e})}})),define("metaserver/static/js/flows/approval/approval_delete_modal",["require","exports","tslib","react","dig-components/modal","dig-components/typography","dig-components/buttons","metaserver/static/js/flows/approval/api","dig-components/form_row","react-intl","metaserver/static/js/flows/logging/approvals_logger"],(function(e,t,a,r,i,n,o,s,l,p,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApprovalDeleteThreadModal=t.ApprovalDeleteCommentModal=void 0,r=a.__importStar(r);const d=({open:e,title:t,body:a,onCancel:s,onDelete:p,error:c,isLoading:d})=>{const{closeButton:m,deleteButton:_,genericError:f}=u();return r.default.createElement(i.Modal,{open:e,onRequestClose:s},r.default.createElement(i.Modal.Header,{hasBottomSpacing:"title-standard"},r.default.createElement(n.Title,null,t)),r.default.createElement(i.Modal.Body,null,r.default.createElement(n.Text,null,a),c&&r.default.createElement(l.FormHelperText,{isInvalid:!0},f)),r.default.createElement(i.Modal.Footer,null,r.default.createElement(o.Button,{variant:"opacity",onClick:s},m),r.default.createElement(o.Button,{variant:"primary",onClick:p,isLoading:d},_)))};d.displayName="ApprovalDeleteModal";t.ApprovalDeleteCommentModal=({userId:e,fileId:t,actor:a,onDeleteSuccess:i,commentId:n})=>{const[o,l]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!0),[_,f]=(0,r.useState)(!1),{getDeleteCommentTitle:v,getDeleteCommentBody:g}=u();r.default.useEffect(()=>{c.PapLogger.logShownRemoveApprovalModal(t,"delete_comment_modal",n)},[]);const w=v(a),h=g(a);return w&&h?r.default.createElement(d,{open:p,onCancel:()=>{c.PapLogger.logRemoveApprovalCancelClick(t,"delete_comment_modal",n),m(!1)},onDelete:()=>{c.PapLogger.logRemoveApprovalConfirmClick(t,"delete_comment_modal",n),l(!1),f(!0),(0,s.deleteApproval)(e,t,n).then(()=>{i(),m(!1)}).catch(()=>{l(!0),f(!1)})},title:w,body:h,error:o,isLoading:_}):null},t.ApprovalDeleteCommentModal.displayName="ApprovalDeleteCommentModal";t.ApprovalDeleteThreadModal=({userId:e,fileId:t,threadId:a,onDeleteSuccess:i})=>{const[n,o]=(0,r.useState)(!1),[l,p]=(0,r.useState)(!0),[m,_]=(0,r.useState)(!1),{deleteThreadTitle:f,deleteThreadBody:v}=u();r.default.useEffect(()=>{c.PapLogger.logShownRemoveApprovalModal(t,"delete_approval_modal",a)},[e,t,a]);return r.default.createElement(d,{open:l,onCancel:()=>{c.PapLogger.logRemoveApprovalCancelClick(t,"delete_approval_modal",a),p(!1)},onDelete:()=>{c.PapLogger.logRemoveApprovalConfirmClick(t,"delete_approval_modal",a),o(!1),_(!0),(0,s.deleteApprovalThread)(e,t,a).then(()=>{i(),p(!1)}).catch(()=>{o(!0),_(!1)})},title:f,body:v,error:n,isLoading:m})},t.ApprovalDeleteThreadModal.displayName="ApprovalDeleteThreadModal";const u=()=>{const e=(0,p.useIntl)();return{getDeleteCommentTitle:t=>"requester"===t?e.formatMessage({id:"l623DN",defaultMessage:"Delete your approval request?"}):"approver"===t?e.formatMessage({id:"a6tb8g",defaultMessage:"Delete your response?"}):null,getDeleteCommentBody:t=>"requester"===t?e.formatMessage({id:"o4wQ1b",defaultMessage:"Your request for approval on this file will be deleted. Youll be able to start a new approval request."}):"approver"===t?e.formatMessage({id:"lTKaYp",defaultMessage:"Your response to the approval request on this file will be deleted. Youll be able to submit a new response."}):null,closeButton:e.formatMessage({id:"67AKp5",defaultMessage:"Cancel"}),deleteButton:e.formatMessage({id:"sDOGa0",defaultMessage:"Delete"}),genericError:e.formatMessage({id:"cdCpqV",defaultMessage:"Something went wrong. Please try again later."}),deleteThreadTitle:e.formatMessage({id:"bJ6YI2",defaultMessage:"Remove approval request?"}),deleteThreadBody:e.formatMessage({id:"OtCoJc",defaultMessage:"Your request for approval on this file and all of its responses will be deleted. You can always initiate a new approval request."})}}})),define("metaserver/static/js/flows/approval/approval_io_client",["require","exports","tslib","metaserver/static/js/flows/utils/use_suggestions","metaserver/static/js/core/user_i18n","metaserver/static/js/flows/approval/api","metaserver/static/js/flows/approval/utils","metaserver/static/js/user_survey/user_survey","metaserver/static/js/logging/hive/schemas/web-approvals_feedback","metaserver/static/js/logging/telemetry","metaserver/static/js/flows/logging/approvals_logger","metaserver/static/js/file_viewer/sdk_file_viewer/experiments"],(function(e,t,a,r,i,n,o,s,l,p,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.approvalIOClient=void 0;const u=new((p=a.__importStar(p)).HiveLogger);t.approvalIOClient=e=>{const t=e=>{s.UserSurvey.trackEvent(e,"browse")};return{useSuggestions:t=>(0,r.useSuggestions)(e,t,!1,!0),getInitials:i.getInitials,createApproval(t,a,r,i){const o=r.map(e=>({email:e.email}));return(0,n.createApproval)(e,t,a,o,i)},respondToApprovalRequest:(t,a,r,i)=>(0,n.respondToApprovalRequest)(e,t,a,r,i),editApprovalResponse:(t,a,r,i)=>(0,n.editApprovalResponse)(e,t,a,r,i),showApprovalDeleteCommentModal(t,a,r,i){(0,o.launchApprovalDeleteCommentModal)(e,t,a,r,i)},editApprovalRequest:(t,a,r)=>(0,n.editApprovalRequest)(e,t,a,r),resubmitApprovalRequest:(t,a,r)=>(0,n.resubmitApprovalRequest)(e,t,a,r),showApprovalDeleteThreadModal(t,a,r){(0,o.launchApprovalDeleteThreadModal)(e,t,a,r)},triggerSprigSurvey(){return a.__awaiter(this,void 0,void 0,(function*(){const{num_requested_approvals:a}=yield(0,n.getSubmittedApprovalsCount)(e);1===a?t("approval_requested_one_time"):5===a?t("approval_requested_five_times"):25===a&&t("approval_requested_twenty_five_times")}))},trackUserSurveyEvent:t,logApprovalsFeedback(e,t){u.log(new l.ApprovalsFeedbackLoggingTableRow({is_feature_helpful:e,feedback:t}))},logger:c.PapLogger,getUserExperiments:()=>({flows_approval_flow_variant:d.fileViewerFlowExperiments.approvalFlowVariantByUserId[e],flows_approval_copy_experiment_variant:d.fileViewerFlowExperiments.approvalCopyVariantByUserId[e],flows_approval_flow_enabled:d.fileViewerFlowExperiments.approvalFlowByUserId[e]})}}})),define("metaserver/static/js/logging/hive/schemas/web-approvals_feedback",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApprovalsFeedbackLoggingTableRow=void 0;t.ApprovalsFeedbackLoggingTableRow=class{constructor(e){this.category="web-approvals_feedback",this.user_id=null,this.is_feature_helpful=e.is_feature_helpful,this.feedback=e.feedback,this.timestamp=Date.now(),Object.seal(this)}}})),define("metaserver/static/js/flows/approval/utils",["require","exports","tslib","react","metaserver/static/js/components/ui/modal","metaserver/static/js/core/i18n","react-intl","metaserver/static/js/flows/approval/approval_delete_modal"],(function(e,t,a,r,i,n,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.launchApprovalDeleteThreadModal=t.launchApprovalDeleteCommentModal=void 0,r=a.__importDefault(r),t.launchApprovalDeleteCommentModal=function(e,t,a,l,p){i.Modal.showInstance(r.default.createElement(o.RawIntlProvider,{value:n.intl},r.default.createElement(s.ApprovalDeleteCommentModal,{userId:e,fileId:t,commentId:a,actor:l,onDeleteSuccess:p})))},t.launchApprovalDeleteThreadModal=function(e,t,a,l){i.Modal.showInstance(r.default.createElement(o.RawIntlProvider,{value:n.intl},r.default.createElement(s.ApprovalDeleteThreadModal,{userId:e,fileId:t,threadId:a,onDeleteSuccess:l})))}})),define("metaserver/static/js/flows/logging/approvals_logger",["require","exports","tslib","metaserver/static/js/pap/analytics_client","metaserver/static/js/pap/util"],(function(e,t,a,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PapLogger=void 0;const n=(()=>{let t;return{getOrLoadPapEvents:()=>a.__awaiter(void 0,void 0,void 0,(function*(){return t||(t=yield new Promise((t,a)=>{e(["metaserver/static/js/flows/logging/approvals_logging_events"],t,a)}).then(a.__importStar)),t}))}})();function o(e,t){let a=void 0;switch(e){case"approved":a=(0,i.getEnumValueForString)("APPROVED_APPROVAL_STATUS",t);break;case"rejected":a=(0,i.getEnumValueForString)("REJECTED_APPROVAL_STATUS",t);break;case"pending":a=(0,i.getEnumValueForString)("PENDING_APPROVAL_STATE",t);break;case"other":a=(0,i.getEnumValueForString)("OTHER_APPROVAL_STATE",t)}return a}t.PapLogger={logRequestApprovalClick:(e,t,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RequestApprovalButton.create({actionSurface:e,fileId:t,previewsSurface:i?i(a.Select_RequestApprovalButton.PreviewsSurface):void 0}))})),logShownRequestForm:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Shown_RequestApprovalForm.create({actionSurface:t,fileId:e}))})),logFocusApproverTypeahead:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RequestApprovalApproverInput.create({actionSurface:t,fileId:e}))})),logRequestFormCancelClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RequestApprovalFormCancelButton.create({actionSurface:t,fileId:e}))})),logAddApprover:(e,t,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RequestApprovalApprover.create({actionSurface:t,fileId:e,approverId:i}))})),logSubmitApprovalRequest:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield n.getOrLoadPapEvents();(0,r.logEvent)(t.Initiate_RequestApproval.create(e))})),logSubmitApprovalSuccess:(e,t,i,o,s,l,p)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Succeed_RequestApproval.create({actionSurface:t,threadId:p,fileId:e,approvalDetailsLength:i,approvers:o,requiresAll:s,numApprovers:l}))})),logSubmitApprovalFailure:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield n.getOrLoadPapEvents();let a=void 0;switch(e.errorReason){case"user_not_found":a=(0,i.getEnumValueForString)("USER_NOT_FOUND_REQUEST_APPROVAL_ERROR_REASON",t.Fail_RequestApproval.RequestApprovalErrorReason);break;default:a=(0,i.getEnumValueForString)("UNKNOWN_REQUEST_APPROVAL_ERROR_REASON",t.Fail_RequestApproval.RequestApprovalErrorReason)}(0,r.logEvent)(t.Fail_RequestApproval.create({actionSurface:e.actionSurface,fileId:e.fileId,requestApprovalErrorReason:a}))})),logApproverOptionsClick:(e,t,i="request_approval_form")=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RequestApprovalApproverOption.create({actionSurface:i,fileId:e,requiresAll:t}))})),logRespondClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RespondApprovalButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logShownRespondForm:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Shown_RespondApprovalForm.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logApproveChipClick:(e,t,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();i?(0,r.logEvent)(a.Select_RespondApprovalApproveButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e})):(0,r.logEvent)(a.Select_RespondApprovalRejectButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logRespondFormCancelClick:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield n.getOrLoadPapEvents();(0,r.logEvent)(t.Select_RespondApprovalFormCancelButton.create({actionSurface:"respond_approval_form",fileId:e}))})),logSubmitResponseSuccess:(e,t,i,s)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Succeed_RespondApproval.create({actionSurface:"respond_approval_form",threadId:i,fileId:t,approvalStatus:o(e,a.Succeed_RespondApproval.ApprovalStatus),approvalDetailsLength:s}))})),logResubmitRequestClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_ResubmitApprovalButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logResubmitRequestSuccess:(e,t,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Succeed_ResubmitRequestApproval.create({actionSurface:"respond_approval_form",fileId:e,threadId:t,approvalDetailsLength:i}))})),logShownRemoveApprovalModal:(e,t,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Shown_RemoveApprovalModal.create({actionSurface:t,fileId:e,commentId:i}))})),logRemoveApprovalConfirmClick:(e,t,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RemoveApprovalConfirmButton.create({actionSurface:t,fileId:e,commentId:i}))})),logRemoveApprovalCancelClick:(e,t,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RemoveApprovalCancelButton.create({actionSurface:t,fileId:e,commentId:i}))})),logEditApprovalResponseClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RespondApprovalEditButton.create({actionSurface:"respond_approval_form",fileId:e,threadId:t}))})),logEditApprovalRequestClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Select_RequestApprovalEditButton.create({actionSurface:"request_approval_form",fileId:e,threadId:t}))})),logApprovalResponseResubmitSuccess:(e,t,i,s)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Succeed_ResubmitRespondApproval.create({actionSurface:"respond_approval_form",fileId:e,threadId:t,approvalStatus:o(i,a.Succeed_RespondApproval.ApprovalStatus),approvalDetailsLength:s}))})),logEditApprovalRequestSuccess:(e,t,i)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield n.getOrLoadPapEvents();(0,r.logEvent)(a.Succeed_RequestApprovalEdit.create({actionSurface:"request_approval_form",fileId:e,threadId:i,approvalDetailsLength:t}))})),logShownApprovalPostPdfEditingToast:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield n.getOrLoadPapEvents();(0,r.logEvent)(t.Shown_ApprovalPostPdfEditingToast.create({fileId:e}))}))}})),define("metaserver/static/js/flows/utils/use_suggestions",["require","exports","tslib","react","typescript/component_libraries/flows/src/components/contact-typeahead/index","metaserver/static/js/contacts/data_v2","metaserver/static/js/contacts/types","metaserver/static/js/clean/viewer"],(function(e,t,a,r,i,n,o,s){"use strict";function l(e,t,a,r=!1,n=!1){if(!a)return[];const s=new Set;for(const e of t)s.add((0,i.getContactKey)(e));const l=[];for(const t of a)if(t.email&&(t.type===o.default.DBX_ID||t.type===o.default.EMAIL)){if(n&&t.email===e.email)continue;if(r&&(!t.dbx_account_id||!t.dbx_team_id||t.dbx_team_id!==e.team_dbtid))continue;const a={name:t.name,email:t.email,avatarUrl:t.photo_url,dbx_account_id:t.dbx_account_id};s.has((0,i.getContactKey)(a))||l.push(a)}return l}Object.defineProperty(t,"__esModule",{value:!0}),t.useSuggestions=void 0,o=a.__importDefault(o),t.useSuggestions=function(e,t,a=!1,i=!1){const[o,p]=(0,r.useState)(""),[c,d]=(0,r.useState)([]),u=s.Viewer.get_viewer().get_user_by_id(e),m=new n.ContactsDataSourceV2(u);return(0,r.useEffect)(()=>{let e=!1;const r=[];if(!o.length)return void d(r);return m.search(o,e=>{const n=l(u,t,e,a,i);r.push(...n),d(r)},n=>{const o=l(u,t,n,a,i);!e&&o.length>0&&(r.push(...o),d(r))}),()=>{e=!0}},[o,t]),{suggestions:c,onQueryChange:e=>{p(e)}}}})),define("typescript/libraries/comments2/src/components/utils/to_percent",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPercent=void 0,t.toPercent=function(e){return`${100*e}%`}})),define("typescript/libraries/comments2/src/components/annotation_utils",["require","exports","typescript/libraries/comments2/src/components/utils/to_percent"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoAnnotation=t.toRectangleStyle=t.INTERSECTION_DELTA=void 0,t.INTERSECTION_DELTA=.02,t.toRectangleStyle=function({x:e,y:t,width:r,height:i}){return{top:(0,a.toPercent)(t),left:(0,a.toPercent)(e),width:(0,a.toPercent)(r),height:(0,a.toPercent)(i)}},t.isVideoAnnotation=function(e){return void 0!==e&&"video"===e.type}})),define("metaserver/static/js/flows/version/async_components",["require","exports","tslib","react","metaserver/static/js/common/rendering"],(function(e,t,a,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncChangeLogSection=void 0;const n=(r=a.__importStar(r)).lazy(()=>a.__awaiter(void 0,void 0,void 0,(function*(){const{ChangeLogSection:t}=yield new Promise((t,a)=>{e(["metaserver/static/js/flows/version/change_log_section"],t,a)}).then(a.__importStar);return{default:t}})));t.AsyncChangeLogSection=e=>r.createElement(i.LazySuspense,{fallback:r.createElement("div",null)},r.createElement(n,Object.assign({},e)))})),define("metaserver/static/js/flows/version/experiments",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVersioningMVPEnabled=void 0;t.isVersioningMVPEnabled=e=>"MVP"===e}));
//# sourceMappingURL=pkg-folder-overview-common.min.js-vflw4W2At.map