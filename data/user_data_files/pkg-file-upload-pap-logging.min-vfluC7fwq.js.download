define("metaserver/static/js/dropbox/proto/pap_events/manual_upload/upload_file",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/pap_events/predefined_event","metaserver/static/js/dropbox/proto/pap_events/event_enums"],(function(e,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.pap_events=void 0;(i=s.__importStar(i)).Reader,i.Writer,i.util;const r=i.roots.default||(i.roots.default={});var a,o;t.default=r,t.pap_events=r.pap_events=((a=r.pap_events||{}).manual_upload=((o=a.manual_upload||{}).Upload_File=(function(e){function e(e){if(e)for(let t=Object.keys(e),s=0;s<t.length;++s)null!=e[t[s]]&&(this[t[s]]=e[t[s]])}return e.prototype.actionSurface="",e.prototype.eventClass=0,e.prototype.eventState=0,e.prototype.errorCode=0,e.prototype.startTime=0,e.prototype.cancelTime=0,e.prototype.totalUploadTimeMs=0,e.prototype.fileType=0,e.prototype.fileSize=0,e.prototype.uploadMethod="",e.prototype.fileSystemWarning="",e.prototype.errorMessage="",e.prototype.extension="",e.prototype.actionSource="",e.prototype.actionScreen="",e.prototype.actionElement="",e.create=function(t){return new e(t)},e.getTypeUrl=function(){return"type.googleapis.com/pap_events.manual_upload.Upload_File"},e.EventClass=(function(){const e={},t=Object.create(e);return t[e[0]="MANUAL_UPLOAD"]=0,t})(),e.FileType=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FILE_TYPE"]=0,t[e[1]="DOCX_FILE_TYPE"]=1,t[e[2]="PDF_FILE_TYPE"]=2,t[e[3]="XLS_FILE_TYPE"]=3,t[e[4]="JPG_FILE_TYPE"]=4,t[e[5]="PNG_FILE_TYPE"]=5,t[e[6]="HEIC_FILE_TYPE"]=6,t[e[7]="MP4_FILE_TYPE"]=7,t[e[8]="MOV_FILE_TYPE"]=8,t[e[9]="TXT_FILE_TYPE"]=9,t[e[10]="MP3_FILE_TYPE"]=10,t[e[11]="M4A_FILE_TYPE"]=11,t[e[12]="WEBP_FILE_TYPE"]=12,t[e[13]="XLSX_FILE_TYPE"]=13,t[e[14]="PAGES_FILE_TYPE"]=14,t[e[15]="ZIP_FILE_TYPE"]=15,t[e[16]="GIF_FILE_TYPE"]=16,t[e[17]="URL_FILE_TYPE"]=17,t[e[18]="NUMBERS_FILE_TYPE"]=18,t[e[19]="WAV_FILE_TYPE"]=19,t[e[20]="EPUB_FILE_TYPE"]=20,t[e[21]="DNG_FILE_TYPE"]=21,t[e[22]="OPUS_FILE_TYPE"]=22,t[e[23]="CR2_FILE_TYPE"]=23,t[e[24]="ARW_FILE_TYPE"]=24,t[e[25]="PPTX_FILE_TYPE"]=25,t[e[26]="PSD_FILE_TYPE"]=26,t[e[27]="DOC_FILE_TYPE"]=27,t[e[28]="AMR_FILE_TYPE"]=28,t[e[29]="CSV_FILE_TYPE"]=29,t[e[30]="CLIP_FILE_TYPE"]=30,t[e[31]="NEF_FILE_TYPE"]=31,t[e[32]="KDBX_FILE_TYPE"]=32,t[e[33]="TIFF_FILE_TYPE"]=33,t[e[34]="SVG_FILE_TYPE"]=34,t[e[35]="APK_FILE_TYPE"]=35,t[e[36]="KEY_FILE_TYPE"]=36,t[e[37]="GPX_FILE_TYPE"]=37,t[e[38]="AAC_FILE_TYPE"]=38,t[e[39]="PROCREATE_FILE_TYPE"]=39,t[e[40]="WEBM_FILE_TYPE"]=40,t[e[41]="TORRENT_FILE_TYPE"]=41,t[e[42]="IPV_FILE_TYPE"]=42,t[e[43]="CR3_FILE_TYPE"]=43,t[e[44]="HTML_FILE_TYPE"]=44,t[e[45]="XML_FILE_TYPE"]=45,t[e[46]="VCF_FILE_TYPE"]=46,t[e[47]="RAR_FILE_TYPE"]=47,t[e[48]="PVT_FILE_TYPE"]=48,t[e[49]="ODT_FILE_TYPE"]=49,t[e[50]="MD_FILE_TYPE"]=50,t[e[51]="WEB_FILE_TYPE"]=51,t[e[52]="GSLIDES_FILE_TYPE"]=52,t[e[53]="GDOC_FILE_TYPE"]=53,t[e[54]="GSHEET_FILE_TYPE"]=54,t[e[55]="BINDER_FILE_TYPE"]=55,t[e[56]="PAPERT_FILE_TYPE"]=56,t[e[57]="PAPER_FILE_TYPE"]=57,t[e[58]="WEBSITE_FILE_TYPE"]=58,t[e[59]="JPEG_FILE_TYPE"]=59,t[e[60]="JSON_FILE_TYPE"]=60,t})(),e})(o.Upload_File||{}),o),a.EventState=(function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_EVENT_STATE"]=0,t[e[1]="START"]=1,t[e[2]="SUCCESS"]=2,t[e[3]="FAILED"]=3,t[e[4]="CANCELED"]=4,t})(),a)})),define("metaserver/static/js/browse/components/file_breadcrumb",["require","exports","tslib","react","dig-components/breadcrumb","metaserver/static/js/filepath/filepath","metaserver/static/js/clean/viewer","metaserver/static/js/clean/browse_uri_interface","metaserver/static/js/pnm/utils"],(function(e,t,s,i,r,a,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileBreadcrumb=void 0,i=s.__importStar(i),a=s.__importStar(a),t.FileBreadcrumb=i.memo(e=>{var{path:t,size:c,user:d,useFullPath:_,isForCurrentPath:u,setUrl:p}=e,m=s.__rest(e,["path","size","user","useFullPath","isForCurrentPath","setUrl"]);const h=a.normalize(t),f=o.Viewer.get_root_name(d),E=a.parent_dirs(h).reverse();return E.unshift(""),_&&""!==h&&E.push(h),i.createElement(r.Breadcrumb,Object.assign({size:c,isRootOverflow:!0},m),E.map((e,t)=>{const s=u&&t===E.length-1,o=s?void 0:(0,n.browse_uri_for_fq_path)(d,e).toString(),c=s?void 0:(function(e,t){return s=>{0===s.button&&(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey)||(s.preventDefault(),t(e))}})(e,p);return i.createElement(r.Breadcrumb.Link,{key:a.filename(e,f),href:o,isCurrentPath:s,onClick:c,className:"file-breadcrumb-link"},(0,l.getDisplayedFilename)(a.filename(e,f)))}))}),t.FileBreadcrumb.displayName="FileBreadcrumb"})),define("metaserver/static/js/sync_everything/components/backup_breadcrumb",["require","exports","tslib","react","react-intl","dig-components/breadcrumb","metaserver/static/js/filepath/filepath","metaserver/static/js/clean/browse_uri_interface","metaserver/static/js/pnm/utils","metaserver/static/js/core/browser"],(function(e,t,s,i,r,a,o,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackupBreadcrumb=void 0,i=s.__importStar(i),o=s.__importStar(o),c=s.__importStar(c);const d="https://www.dropbox.com/backup/all?_source=breadcrumb";function _(e,t){return s=>{0===s.button&&(s.altKey||s.ctrlKey||s.metaKey||s.shiftKey)||(s.preventDefault(),t(e))}}t.BackupBreadcrumb=i.memo(e=>{var{basePath:t,path:u,size:p,user:m,useFullPath:h,isForCurrentPath:f,setUrl:E,hasBackupsLoaded:g}=e,S=s.__rest(e,["basePath","path","size","user","useFullPath","isForCurrentPath","setUrl","hasBackupsLoaded"]);if(!t&&!g)return null;const T=t?o.normalize(o.parent_dir(t)):"",y=o.normalize(u).replace(T,""),b=o.parent_dirs(y).reverse().map(e=>T+e);return h&&""!==y&&b.push(T+y),i.createElement(a.Breadcrumb,Object.assign({size:p,isRootOverflow:!0},S),i.createElement(a.Breadcrumb.Link,{key:"breadcrumb-backup",href:d,isCurrentPath:!1,onClick:_(d,c.redirect),className:"file-breadcrumb-link"},i.createElement(r.FormattedMessage,{id:"96Ymix",defaultMessage:"Backups"})),b.map((e,t)=>{const s=f&&t===b.length-1,r=s?void 0:(0,n.browse_uri_for_fq_path)(m,e).toString(),c=s?void 0:_(e,E);return i.createElement(a.Breadcrumb.Link,{key:o.filename(e),href:r,isCurrentPath:s,onClick:c,className:"file-breadcrumb-link"},(0,l.getDisplayedFilename)(o.filename(e)))}))}),t.BackupBreadcrumb.displayName="BackupBreadcrumb"})),define("metaserver/static/js/naming_conventions/types",["require","exports"],(function(e,t){"use strict";var s,i,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.WhenToShowError=t.ErrorType=t.dateFormatStrToEnum=t.ruleStrToEnum=t.TextDataState=t.LearnMoreLink=t.NamingConventionModal=t.NamingConventionOrigin=t.defaultNamingConventionParameters2WithSenderNameRule=t.defaultNamingConventionsParametersDataWithSenderNameRule=t.defaultNamingConventionParameters2=t.defaultNamingConventionsParametersData=t.emptyNamingConventionParameters=t.defaultNamingConventionParameters=t.ConsistentSeparatorSelection=t.FolderScopeOptions=t.DateFormatSelection=t.NamingConventionML=t.NamingConventionAutomation=t.NamingConventionType=t.APIRequestState=void 0,(function(e){e[e.IN_PROGRESS=0]="IN_PROGRESS",e[e.FAILED=1]="FAILED",e[e.SUCCEEDED=2]="SUCCEEDED"})(t.APIRequestState||(t.APIRequestState={})),(function(e){e.none="none",e.upload_date="upload_date",e.parent_folder_name="include_parent_folder_name",e.sender_name="sender_name",e.keyword="keyword",e.capture_date="capture_date",e.camera_make="camera_make",e.camera_model="camera_model",e.dimensions="dimensions",e.dots_per_inch="dots_per_inch",e.lens_model="lens_model",e.dots_per_cm="dots_per_cm",e.original_snippet="original_snippet",e.capitalize_all_initials="capitalize_all_initials",e.consistent_separators="change_all_separators",e.renaming_bar_enabled="renaming_bar_enabled"})(s=t.NamingConventionType||(t.NamingConventionType={})),t.NamingConventionAutomation="automation",t.NamingConventionML="ml",(function(e){e.yyyy_mm="yyyy_mm",e.yyyy_mm_dd="yyyy_mm_dd",e.yyyymmdd="yyyymmdd",e.yyyy_abbr_dd="yyyy_abbr_dd",e.yyyy_mm_hh_mm="yyyy_mm_hh_mm",e.yyyy_mm_dd_hh_mm="yyyy_mm_dd_hh_mm",e.yyyy_abbr_dd_hh_mm="yyyy_abbr_dd_hh_mm",e.yyyymmdd_hh_mm="yyyymmdd_hh_mm"})(i=t.DateFormatSelection||(t.DateFormatSelection={})),(function(e){e.THIS_FOLDER_ONLY="this_folder_only",e.THIS_FOLDER_AND_SUBFOLDERS="this_folder_and_subfolders"})(r=t.FolderScopeOptions||(t.FolderScopeOptions={})),(function(e){e.spaces="spaces",e.dashes="dashes",e.underscores="underscores"})(a=t.ConsistentSeparatorSelection||(t.ConsistentSeparatorSelection={})),t.defaultNamingConventionParameters={selectedRules:[s.upload_date],dateFormatSelection:i.yyyy_mm_dd,consistentSeparatorSelection:a.spaces,mlFilenameParsing:!1,data:{keyword:""},subfolderOption:r.THIS_FOLDER_ONLY},t.emptyNamingConventionParameters={selectedRules:[],dateFormatSelection:i.yyyy_mm_dd,consistentSeparatorSelection:a.spaces,mlFilenameParsing:!1,data:{keyword:""},subfolderOption:r.THIS_FOLDER_ONLY},t.defaultNamingConventionsParametersData={dateInfo:[{mlFilenameParsing:!1,dateFormatSelection:i.yyyy_mm_dd},{mlFilenameParsing:!1,dateFormatSelection:i.yyyy_mm_dd}],consistentSeparatorSelection:a.spaces,keywords:["",""]},t.defaultNamingConventionParameters2={componentList:[s.none,s.original_snippet],capitalizeAllInitials:!1,changeAllSeparators:!1,renamingBarEnabled:!0,data:t.defaultNamingConventionsParametersData,subfolderOption:r.THIS_FOLDER_ONLY},t.defaultNamingConventionsParametersDataWithSenderNameRule={dateInfo:[{mlFilenameParsing:!1,dateFormatSelection:i.yyyy_mm_dd},{mlFilenameParsing:!1,dateFormatSelection:i.yyyy_mm_dd}],consistentSeparatorSelection:a.spaces,keywords:["",""]},t.defaultNamingConventionParameters2WithSenderNameRule={componentList:[s.original_snippet,s.sender_name],capitalizeAllInitials:!1,changeAllSeparators:!1,renamingBarEnabled:!0,data:t.defaultNamingConventionsParametersDataWithSenderNameRule,subfolderOption:r.THIS_FOLDER_ONLY},(function(e){e.from_desktop="from_desktop",e.from_menu="from_menu",e.from_upload_snackbar="from_upload_snackbar",e.from_rename_snackbar="from_rename_snackbar",e.from_reengagement_open_snackbar="from_reengagement_open_snackbar",e.from_discovery_open_snackbar="from_discovery_open_snackbar",e.from_reengagement_upload_snackbar="from_reengagement_upload_snackbar",e.from_discovery_upload_snackbar="from_discovery_upload_snackbar",e.from_reengagement_rename_snackbar="from_reengagement_rename_snackbar",e.from_discovery_rename_snackbar="from_discovery_rename_snackbar",e.from_file_request="from_file_request",e.from_automation="from_automation",e.from_heuristic_renaming_bar="from_heuristic_renaming_bar",e.from_existing_nc_renaming_bar="from_existing_nc_renaming_bar",e.from_upload_renaming_bar="from_upload_renaming_bar",e.from_desktop_organized_home="from_desktop_organized_home",e.from_web_organized_menu="from_web_organized_menu",e.from_in_folder_activation="from_in_folder_activation",e.from_unknown_nc_origin="from_unknown_nc_origin"})(t.NamingConventionOrigin||(t.NamingConventionOrigin={})),(function(e){e.rule_selection_page="rule_selection_page",e.automation_change_warning_page="automation_change_warning_page",e.automation_delete_warning_page="automation_delete_warning_page"})(t.NamingConventionModal||(t.NamingConventionModal={})),(function(e){e.ml="https://help.dropbox.com/en-us/files-folders/sort-preview/naming-conventions"})(t.LearnMoreLink||(t.LearnMoreLink={})),(function(e){e.empty="empty",e.invalid="invalid",e.valid="valid",e.lengthError="lengthError"})(t.TextDataState||(t.TextDataState={})),t.ruleStrToEnum=new Map([["upload_date",s.upload_date],["include_parent_folder_name",s.parent_folder_name],["sender_name",s.sender_name],["keyword",s.keyword],["capture_date",s.capture_date],["camera_make",s.camera_make],["camera_model",s.camera_model],["dimensions",s.dimensions],["dots_per_inch",s.dots_per_inch],["lens_model",s.lens_model],["dots_per_cm",s.dots_per_cm],["renaming_bar_enabled",s.renaming_bar_enabled]]),t.dateFormatStrToEnum=new Map([["yyyy_mm",i.yyyy_mm],["yyyy_mm_dd",i.yyyy_mm_dd],["yyyy_abbr_dd",i.yyyy_abbr_dd],["yyyymmdd",i.yyyymmdd],["yyyy_mm_hh_mm",i.yyyy_mm_hh_mm],["yyyy_mm_dd_hh_mm",i.yyyy_mm_dd_hh_mm],["yyyy_abbr_dd_hh_mm",i.yyyy_abbr_dd_hh_mm],["yyyymmdd_hh_mm",i.yyyymmdd_hh_mm]]),(function(e){e[e.TEXT_ERROR=0]="TEXT_ERROR",e[e.RULE_ERROR=1]="RULE_ERROR"})(t.ErrorType||(t.ErrorType={})),(function(e){e[e.IMMEDIATELY=0]="IMMEDIATELY",e[e.WHEN_BUTTON_CLICKED=1]="WHEN_BUTTON_CLICKED"})(t.WhenToShowError||(t.WhenToShowError={}))})),define("metaserver/static/js/business_space/api/internal_client",["require","exports","metaserver/static/js/api_v2/default_user_client"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessSpaceClient=void 0;t.BusinessSpaceClient=class{constructor(e){this.apiV2Client=new s.DefaultUserApiV2Client(e)}create_file_request(e,t){const s={title:t,destination:e};return this.apiV2Client.ns("file_requests").rpc("create",s,{})}enable_client_upload(e,t){const s={business_space_xgid:e,file_request_id:t};return this.apiV2Client.ns("business_space").rpc("uploads/enable_client_upload",s,{})}disable_client_upload(e){const t={business_space_xgid:e};return this.apiV2Client.ns("business_space").rpc("uploads/disable_client_upload",t,{})}upload_status_by_xgid(e){const t={business_space_xgid:e};return this.apiV2Client.ns("business_space").rpc("uploads/uploads_status_by_xgid",t,{})}browse_find(e="/"){const t={full_path:e};return this.apiV2Client.ns("business_space").rpc("browse/find",t,{})}create_business_space(e,t){const s={name:e,full_path:t};return this.apiV2Client.ns("business_space").rpc("create_business_space",s,{})}delete_business_space(e,t=!1){const s={business_space_xgid:e,skip_if_active:t};return this.apiV2Client.ns("business_space").rpc("delete",s,{})}get_loginless_link(e){const t={business_space_xgid:e};return this.apiV2Client.ns("business_space").rpc("get_loginless_link",t,{})}recreate_loginless_link(e,t){const s={business_space_xgid:e,space_xid:t};return this.apiV2Client.ns("business_space").rpc("recreate_loginless_link",s,{})}get_objects_visibility(e="",t={".tag":"unknown_object_visibility_type"},s=[]){const i={business_space_xgid:e,parent_visibility:t,full_paths:s};return this.apiV2Client.ns("business_space").rpc("browse/get_objects_visibility",i,{})}update_object_visibility(e,t,s){const i={business_space_xgid:e,shared_object:{identifier:{".tag":"fq_path",fq_path:t}},is_shared:s};return this.apiV2Client.ns("business_space").rpc("update_object_visibility",i,{})}delete_check(e){const t={async_job_id:e};return this.apiV2Client.ns("business_space").rpc("delete/check",t,{})}update_object_visibility_check(e){const t={async_job_id:e};return this.apiV2Client.ns("business_space").rpc("update_object_visibility/check",t,{})}}})),define("metaserver/static/js/plusplus/file_actions",["require","exports","tslib","metaserver/static/js/pnm/constants","metaserver/static/js/pnm/utils","metaserver/static/js/plusplus/constants","metaserver/static/js/core/browser"],(function(e,t,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLinkNodeEventObject=t.handleLinkNodeAction=t.openPasswords=void 0,o=s.__importStar(o);t.openPasswords=()=>{o.redirect(a.PASSWORDS_POST_SETUP_URL)};t.handleLinkNodeAction=(a,o)=>s.__awaiter(void 0,void 0,void 0,(function*(){const{openBackupsModal:n,setupPasswords:l,setupVault:c}=yield new Promise((t,s)=>{e(["metaserver/static/js/plusplus/setup_actions"],t,s)}).then(s.__importStar);switch((0,r.getLinkNodeAction)(a)){case i.BACKUP_PRE_SETUP_ACTION:null==o||o("backup_set_up"),n();break;case i.PASSWORDS_PRE_SETUP_ACTION:null==o||o("passwords_set_up"),l();break;case i.PASSWORDS_POST_SETUP_ACTION:null==o||o("passwords_open"),(0,t.openPasswords)();break;case i.VAULT_PRE_SETUP_ACTION:null==o||o("vault_set_up"),c()}})),t.getLinkNodeEventObject=function(e){switch((0,r.getLinkNodeAction)()){case i.BACKUP_PRE_SETUP_ACTION:return"backup_set_up";case i.PASSWORDS_PRE_SETUP_ACTION:return"passwords_set_up";case i.PASSWORDS_POST_SETUP_ACTION:return"passwords_open";case i.VAULT_PRE_SETUP_ACTION:return"vault_set_up"}return null}})),define("metaserver/static/js/browse/naming_conventions_actions",["require","exports","tslib","react","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/i18n","metaserver/static/js/clean/web_user_action_logger","metaserver/static/js/clean/web_user_action_events","metaserver/static/js/browse/data/selectors","metaserver/static/js/browse/data/store","react-intl","metaserver/static/js/browse/data/action_creators/index","metaserver/static/js/naming_conventions/types","metaserver/static/js/growth/ui/rich_snackbar_actions/types"],(function(e,t,s,i,r,a,o,n,l,c,d,_,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openNamingConventionsModal=t.showSnackbar=t.promptNamingConventions=t.snackbarCloseActionButtonText=t.snackbarActionButtonText=t.snackbarId=t.millisecondSnackbarTimeout=void 0,i=s.__importDefault(i),l=s.__importStar(l),_=s.__importStar(_),t.millisecondSnackbarTimeout=1e4,t.snackbarId="naming-conventions-feature-growth",t.snackbarActionButtonText=a.intl.formatMessage({id:"ghdSnP",defaultMessage:"Show me"}),t.snackbarCloseActionButtonText=a.intl.formatMessage({id:"3ps1+a",defaultMessage:"Dismiss"}),t.promptNamingConventions=function(i,r,a){return s.__awaiter(this,void 0,void 0,(function*(){const{shouldShowSnackbar:d,snackbarDismissed:_}=yield new Promise((t,s)=>{e(["metaserver/static/js/naming_conventions/api_v2"],t,s)}).then(s.__importStar),m={".tag":"date_open",source_path:r},E=yield d(i,m),g=E.should_show,S=E.snackbar_type;if(!g)return!1;const T=(0,c.getStoreForBrowse)().getState();if(l.path(T)===r){let e,s;const c=S&&"reengagement"===S[".tag"];c&&l.uploaderPostTTIExperiments(T).expNamingConventionsReengagement?(e=f,s=u.NamingConventionOrigin.from_reengagement_open_snackbar):(e=h,s=u.NamingConventionOrigin.from_discovery_open_snackbar),o.WebUserActionLog.log(i,n.WebUserActionLogEvent.FEATURE_DISCOVERY_SNACKBAR_SHOW,{ns_id:a,trigger:"folder_open_with_dates",feature:"naming_conventions",origin:c?p.FeatureGrowthOrigin.reengagement:p.FeatureGrowthOrigin.discovery});const d=()=>(0,t.openNamingConventionsModal)(r,i,a,s),m=()=>_(i);return(0,t.showSnackbar)(d,m,e),!0}return!1}))};const m=(0,d.defineMessages)({DEFAULT:{id:"MsPjEI",defaultMessage:"This folder has some files with dates in them. Did you know you can set up naming conventions in Dropbox?"},REENGAGEMENT:{id:"fy5RJ8",defaultMessage:"We updated naming conventions with new customizable rules and richer metadata options."}}),h=a.intl.formatMessage(m.DEFAULT),f=a.intl.formatMessage(m.REENGAGEMENT);t.showSnackbar=(e,s,a)=>{r.Snackbar.show(i.default.createElement(r.Snackbar,{actionButtonText:t.snackbarActionButtonText,onActionClick:e,closeButtonText:t.snackbarCloseActionButtonText,onCloseClick:s,timeoutDelayMs:t.millisecondSnackbarTimeout,title:a,variant:"complete",id:t.snackbarId}))};t.openNamingConventionsModal=(i,a,d,u)=>{r.Snackbar.close(t.snackbarId);const p=(0,c.getStoreForBrowse)(),m=p.getState(),{expNamingConventionsPositioning:h}=l.browsePostTTIExperiments(m);l.path(m)!==i&&p.dispatch(_.setUrl({path:i})),o.WebUserActionLog.log(a,n.WebUserActionLogEvent.NAMING_CONVENTIONS_OPEN_MODAL,{ns_id:d,origin:u,positioning:h?1:0}),new Promise((t,s)=>{e(["metaserver/static/js/naming_conventions/naming_conventions_modal"],t,s)}).then(s.__importStar).then(({showNamingConventionsModal:e})=>e({currentUserId:a,targetPath:i,namespaceId:d,origin:u}))}})),define("metaserver/static/js/browse/tidy_up_actions",["require","exports","tslib","react","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/core/i18n","metaserver/static/js/tidy_up/modal/tidy_strings","metaserver/static/js/tidy_up/utils","metaserver/static/js/tidy_up/constants"],(function(e,t,s,i,r,a,o,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promptTidyUp=t.snackbarCloseActionButtonText=t.snackbarActionButtonText=t.snackbarId=t.millisecondSnackbarTimeout=void 0,i=s.__importDefault(i);t.millisecondSnackbarTimeout=1e4,t.snackbarId="tidyup-feature-growth",t.snackbarActionButtonText=a.intl.formatMessage({id:"V4/4Hh",defaultMessage:"Open Organize"}),t.snackbarCloseActionButtonText=a.intl.formatMessage({id:"cK/p7/",defaultMessage:"Dismiss"}),t.promptTidyUp=function(t,i,r,a){return s.__awaiter(this,void 0,void 0,(function*(){const{dismissSnackbar:o,getNumAddedFilesAndFolders:n,shouldShowSnackbar:d,shouldShowUploadSnackbar:_}=yield new Promise((t,s)=>{e(["metaserver/static/js/tidy_up/api_v2"],t,s)}).then(s.__importStar),{openTidyUpModal:u}=yield new Promise((t,s)=>{e(["metaserver/static/js/tidy_up/feature_growth"],t,s)}).then(s.__importStar),{TidySpecificActionSurfaceLogValue:p}=yield new Promise((t,s)=>{e(["metaserver/static/js/tidy_up/modal/types"],t,s)}).then(s.__importStar);let m,h=!1;if(a){const e=yield _(t,i);h=e.should_show,e.snackbar_type&&(m=e.snackbar_type[".tag"])}else{const e=yield d(t),s=yield n(t,i);e&&(s.num_added_files>=5||s.num_added_folders>=2)&&(m=l.FEATURE_GROWTH_SNACKBARS.discovery,h=!0)}const f=m===l.FEATURE_GROWTH_SNACKBARS.discovery?p.DISCOVERY_UPLOAD_SNACKBAR:p.REENGAGEMENT_UPLOAD_SNACKBAR;if(!h)return!1;return c(t,r,()=>u(i,t,r,f),()=>o(t),m),!0}))};const c=(e,c,d,_,u)=>s.__awaiter(void 0,void 0,void 0,(function*(){let s;u===l.FEATURE_GROWTH_SNACKBARS.discovery?(s=a.intl.formatMessage(o.TIDY_FEATURE_GROWTH_STRINGS.DISCOVERY_TITLE),(0,n.logTidyUpDiscoverySnackbar)(e,c,"bulk_upload")):u===l.FEATURE_GROWTH_SNACKBARS.reengagement&&(s=a.intl.formatMessage(o.TIDY_FEATURE_GROWTH_STRINGS.REENGAGEMENT_TITLE),(0,n.logTidyUpReengagementSnackbar)(e,c,"bulk_upload")),r.Snackbar.show(i.default.createElement(r.Snackbar,{actionButtonText:t.snackbarActionButtonText,onActionClick:d,closeButtonText:t.snackbarCloseActionButtonText,onCloseClick:_,timeoutDelayMs:t.millisecondSnackbarTimeout,title:s,variant:"generic",id:t.snackbarId}))}))})),define("metaserver/static/js/file_uploader/upload_hybrid_scheduler",["require","exports","tslib","metaserver/static/js/upload_kit/scheduler/types","metaserver/static/js/file_uploader/utils"],(function(e,t,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileChunkReader=t.UploadHybridScheduler=t.CHUNK_SIZE=t.MAX_FINISH_BATCH_SIZE=t.MAX_LEGACY_COMMIT_BATCH_SIZE=t.MAX_PARALLEL_FINISH_REQUESTS=t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS=void 0,t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS=6,t.MAX_PARALLEL_FINISH_REQUESTS=1,t.MAX_LEGACY_COMMIT_BATCH_SIZE=100,t.MAX_FINISH_BATCH_SIZE=1e3,t.CHUNK_SIZE=4194304;class a extends i.UploadHybridScheduler{constructor(e){super(e),this.itemQueue=new Map,this.commitQueue=[],this.availableBlockRequests=t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS,this.availableFinishRequests=t.MAX_PARALLEL_FINISH_REQUESTS,this.onCompleteSubscribers=[],this.handleUploadBlocks=e.handleUploadBlocks,this.handleCommitBlocks=e.handleCommitBlocks,this.handleAppend=e.handleAppend,this.handleFinish=e.handleFinish,this.handleProgress=e.handleProgress,this.handleItemExit=e.handleItemExit,this.currentItemState=null}itemExit(e,t){const s=this.itemQueue.get(e);s&&(s.status=t,this.itemQueue.delete(e),this.handleItemExit(s.info,t))}dispenseChunkData(){if(null===this.currentItemState||this.currentItemState.fileChunkReader.isEmpty()||!this.isItemUploading(this.currentItemState.item.destPath)){const e=Array.from(this.itemQueue.values()).find(e=>"Queued"===e.status&&e.file.size>0);if(!e)return null;const t=(0,r.shouldUseSessionUploadForFile)(e.file.size)?4:1;this.currentItemState={item:e,fileChunkReader:new o(e.file,t)},e.status="Uploading"}const e=this.currentItemState.fileChunkReader.getNextChunks();if(!e)return null;const s=this.currentItemState.item,i=s.blockIndex;return s.blockIndex+=Math.ceil(e.size/t.CHUNK_SIZE),{item:s,chunk:e,blockIndex:i}}commitLegacyItems(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=[],s=[];e.forEach(e=>{const{info:i,destPath:r,blockTokens:a}=e;a&&t.push({info:i,tokens:a}),s.push(r)});try{(yield this.handleCommitBlocks(t)).forEach(e=>{this.itemExit(e.filePath,e.success?"Completed":"Error")})}catch(e){s.forEach(e=>{this.itemExit(e,"Error")})}}))}finishApiV2Items(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=[],s=[];e.forEach(e=>{const{info:i,destPath:r}=e;t.push({info:i}),s.push(r)});try{(yield this.handleFinish(t)).forEach(e=>{this.itemExit(e.filePath,e.success?"Completed":"Error")})}catch(e){s.forEach(e=>{this.itemExit(e,"Error")})}}))}commitNext(){return s.__awaiter(this,void 0,void 0,(function*(){if(0===this.availableFinishRequests)return;if(0===this.commitQueue.length)return void(this.isUploading()||this.fireComplete());this.availableFinishRequests--;const e=[];this.commitQueue.forEach(t=>{const s=this.itemQueue.get(t);s&&e.push(s)});const s=e.filter(e=>!(0,r.shouldUseSessionUploadForFile)(e.file.size)).slice(0,t.MAX_LEGACY_COMMIT_BATCH_SIZE),i=e.filter(e=>(0,r.shouldUseSessionUploadForFile)(e.file.size)).slice(0,t.MAX_FINISH_BATCH_SIZE);s.forEach(e=>{const t=this.commitQueue.indexOf(e.destPath);this.commitQueue.splice(t)}),i.forEach(e=>{const t=this.commitQueue.indexOf(e.destPath);this.commitQueue.splice(t)});const a=s.length>0?this.commitLegacyItems(s):void 0,o=i.length>0?this.finishApiV2Items(i):void 0;yield Promise.all([a,o]),this.availableFinishRequests++,this.commitNext()}))}queueCommit(e){this.commitQueue.push(e),this.commitNext()}uploadNextBlock(){return s.__awaiter(this,void 0,void 0,(function*(){if(this.availableBlockRequests<=0)return;const e=this.dispenseChunkData();if(!e)return void(this.isUploading()||this.fireComplete());const{item:t,chunk:s,blockIndex:i}=e;let a=0;const o=e=>{if(this.isItemUploading(t.destPath)){const i=Math.min(s.size,t.file.size),r=Math.min(e,i),o=Math.max(r-a,0);a+=o;const n=Math.min(t.visualBytesUploaded+o,t.file.size);t.visualBytesUploaded=n,this.handleProgress(t.info,n)}};this.availableBlockRequests--;try{let e;(0,r.shouldUseSessionUploadForFile)(t.file.size)?yield this.handleAppend(t.info,s,i,o):e=yield this.handleUploadBlocks(t.info,s,o),t.confirmedBytesUploaded+=s.size,this.isItemUploading(t.destPath)&&(e&&t.blockTokens&&(t.blockTokens[i]=e),n(t)&&(t.status="Committing",this.queueCommit(t.destPath)))}catch(e){this.itemExit(t.destPath,"Error")}this.availableBlockRequests++,this.uploadNextBlock()}))}addFile(e,t,i){return s.__awaiter(this,void 0,void 0,(function*(){this.itemQueue.set(t,{file:e,destPath:t,status:"Queued",bytesUploaded:0,info:i,visualBytesUploaded:0,confirmedBytesUploaded:0,blockIndex:0,blockTokens:[]}),this.isUploading()&&this.startUploading()}))}startUploading(){return s.__awaiter(this,void 0,void 0,(function*(){const e=this.onComplete(),t=this.availableBlockRequests;for(let e=0;e<t;e++)this.uploadNextBlock();return e}))}cancelFile(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=this.itemQueue.get(e);t&&!n(t)&&this.itemExit(e,"Cancelled")}))}stopUploading(){this.itemQueue.forEach(({destPath:e})=>{this.cancelFile(e)})}isQueueEmpty(){return 0===this.itemQueue.size}isItemUploading(e){const t=this.itemQueue.get(e);return Boolean(t&&"Uploading"===t.status)}isUploading(){return this.availableBlockRequests<t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS||this.availableFinishRequests<t.MAX_PARALLEL_FINISH_REQUESTS}fireComplete(){for(;this.onCompleteSubscribers.length>0;){const e=this.onCompleteSubscribers.shift();e&&e()}}onComplete(){return new Promise(e=>{this.onCompleteSubscribers.push(e)})}}t.UploadHybridScheduler=a;class o{constructor(e,t){this.currentOffset=0,this.file=e,this.chunkCount=t}getNextChunks(){const e=this.file.size-this.currentOffset;if(e<=0)return null;const s=Math.floor(e/t.CHUNK_SIZE);let i;i=s<1?e:s<this.chunkCount?s*t.CHUNK_SIZE:this.chunkCount*t.CHUNK_SIZE;const r=this.file.slice(this.currentOffset,i+this.currentOffset);return this.currentOffset+=i,r}isEmpty(){return this.file.size<=this.currentOffset}}t.FileChunkReader=o;const n=({confirmedBytesUploaded:e,file:t})=>e>=t.size})),define("metaserver/static/js/file_uploader/upload_session_scheduler",["require","exports","tslib","metaserver/static/js/upload_kit/scheduler/types","metaserver/static/js/modules/constants/global_file_upload"],(function(e,t,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileChunkReader=t.UploadSessionScheduler=t.CHUNK_SIZE=t.COMMIT_REQUEST_BATCH_SIZE=t.MAX_PARALLEL_FINISH_REQUESTS=t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS=void 0,t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS=6,t.MAX_PARALLEL_FINISH_REQUESTS=1,t.COMMIT_REQUEST_BATCH_SIZE=100,t.CHUNK_SIZE=4194304;const a=parseInt(r.UPLOAD_CHUNK_COUNT)||1;class o extends i.UploadSessionScheduler{constructor(e){super(e),this.itemQueue=new Map,this.commitQueue=[],this.availableBlockRequests=t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS,this.availableFinishRequests=t.MAX_PARALLEL_FINISH_REQUESTS,this.onCompleteSubscribers=[],this.handleAppend=e.handleAppend,this.handleFinish=e.handleFinish,this.handleProgress=e.handleProgress,this.handleItemExit=e.handleItemExit,this.currentItemState=null}itemExit(e,t){const s=this.itemQueue.get(e);s&&(s.status=t,this.itemQueue.delete(e),this.handleItemExit(s.info,t))}dispenseChunkData(){if(null===this.currentItemState||this.currentItemState.fileChunkReader.isEmpty()||!this.isItemUploading(this.currentItemState.item.destPath)){const e=Array.from(this.itemQueue.values()).find(e=>"Queued"===e.status&&e.file.size>0);if(!e)return null;this.currentItemState={item:e,fileChunkReader:new n(e.file,a)},e.status="Uploading"}const e=this.currentItemState.fileChunkReader.getNextChunks();if(!e)return null;const s=this.currentItemState.item,i=s.blockIndex;return s.blockIndex+=Math.ceil(e.size/t.CHUNK_SIZE),{item:s,chunk:e,blockIndex:i}}commitNext(){return s.__awaiter(this,void 0,void 0,(function*(){if(0===this.availableFinishRequests)return;if(0===this.commitQueue.length)return void(this.isUploading()||this.fireComplete());this.availableFinishRequests--;const e=[],s=[];let i=t.COMMIT_REQUEST_BATCH_SIZE;for(;i>0&&this.commitQueue.length>0;){const t=this.commitQueue.shift(),r=this.itemQueue.get(t);if(!r)continue;const{info:a,destPath:o}=r;e.push({info:a}),s.push(o),i--}try{(yield this.handleFinish(e)).forEach(e=>{this.itemExit(e.filePath,e.success?"Completed":"Error")})}catch(e){s.forEach(e=>{this.itemExit(e,"Error")})}this.availableFinishRequests++,this.commitNext()}))}queueCommit(e){this.commitQueue.push(e),this.commitNext()}uploadNextBlock(){return s.__awaiter(this,void 0,void 0,(function*(){if(this.availableBlockRequests<=0)return;const e=this.dispenseChunkData();if(!e)return void(this.isUploading()||this.fireComplete());const{item:t,chunk:s,blockIndex:i}=e;let r=0;const a=e=>{if(this.isItemUploading(t.destPath)){const i=Math.min(s.size,t.file.size),a=Math.min(e,i),o=Math.max(a-r,0);r+=o;const n=Math.min(t.visualBytesUploaded+o,t.file.size);t.visualBytesUploaded=n,this.handleProgress(t.info,n)}};this.availableBlockRequests--;try{yield this.handleAppend(t.info,s,i,a),t.confirmedBytesUploaded+=s.size,this.isItemUploading(t.destPath)&&(a(s.size),l(t)&&(t.status="Committing",this.queueCommit(t.destPath)))}catch(e){this.itemExit(t.destPath,"Error")}this.availableBlockRequests++,this.uploadNextBlock()}))}addFile(e,t,i){return s.__awaiter(this,void 0,void 0,(function*(){this.itemQueue.set(t,{file:e,destPath:t,status:"Queued",bytesUploaded:0,info:i,visualBytesUploaded:0,confirmedBytesUploaded:0,blockIndex:0}),this.isUploading()&&this.startUploading()}))}startUploading(){return s.__awaiter(this,void 0,void 0,(function*(){const e=this.onComplete(),t=this.availableBlockRequests;for(let e=0;e<t;e++)this.uploadNextBlock();return e}))}cancelFile(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=this.itemQueue.get(e);t&&!l(t)&&this.itemExit(e,"Cancelled")}))}stopUploading(){this.itemQueue.forEach(({destPath:e})=>{this.cancelFile(e)})}isQueueEmpty(){return 0===this.itemQueue.size}isItemUploading(e){const t=this.itemQueue.get(e);return Boolean(t&&"Uploading"===t.status)}isUploading(){return this.availableBlockRequests<t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS||this.availableFinishRequests<t.MAX_PARALLEL_FINISH_REQUESTS}fireComplete(){for(;this.onCompleteSubscribers.length>0;){const e=this.onCompleteSubscribers.shift();e&&e()}}onComplete(){return new Promise(e=>{this.onCompleteSubscribers.push(e)})}}t.UploadSessionScheduler=o;class n{constructor(e,t){this.currentOffset=0,this.file=e,this.chunkCount=t}getNextChunks(){const e=this.file.size-this.currentOffset;if(e<=0)return null;const s=Math.floor(e/t.CHUNK_SIZE);let i;i=s<1?e:s<this.chunkCount?s*t.CHUNK_SIZE:this.chunkCount*t.CHUNK_SIZE;const r=this.file.slice(this.currentOffset,i+this.currentOffset);return this.currentOffset+=i,r}isEmpty(){return this.file.size<=this.currentOffset}}t.FileChunkReader=n;const l=({confirmedBytesUploaded:e,file:t})=>e>=t.size})),define("metaserver/static/js/file_uploader/parallel_scheduler_with_batch_commit",["require","exports","tslib","metaserver/static/js/upload_kit/scheduler/types"],(function(e,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParallelUploadSchedulerWithBatchCommit=t.CHUNK_SIZE=t.COMMIT_REQUEST_BATCH_SIZE=t.MAX_PARALLEL_COMMIT_REQUESTS=t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS=void 0,t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS=8,t.MAX_PARALLEL_COMMIT_REQUESTS=1,t.COMMIT_REQUEST_BATCH_SIZE=100,t.CHUNK_SIZE=4194304;class r extends i.UploadScheduler{constructor(e){super(e),this.itemQueue=new Map,this.commitQueue=[],this.availableBlockRequests=t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS,this.availableCommitRequests=t.MAX_PARALLEL_COMMIT_REQUESTS,this.onCompleteSubscribers=[],this.handleUploadBlocks=e.handleUploadBlocks,this.handleCommitBlocks=e.handleCommitBlocks,this.handleProgress=e.handleProgress,this.handleItemExit=e.handleItemExit}itemExit(e,t){const s=this.itemQueue.get(e);s&&(s.status=t,this.itemQueue.delete(e),this.handleItemExit(s.info,t))}dispenseChunkData(){if(!this.currentFileChunkReader||this.currentFileChunkReader.isEmpty()||!this.isItemUploading(this.currentFileChunkReader.item.destPath)){const e=Array.from(this.itemQueue.values()).find(e=>"Queued"===e.status&&e.file.size>0);if(!e)return null;this.currentFileChunkReader=new a(e),e.status="Uploading"}const e=this.currentFileChunkReader.getNextChunk();if(!e)return null;const t=this.currentFileChunkReader.item,s=t.blockTokens.length;return t.blockTokens.push(""),{item:t,chunk:e,blockIndex:s}}commitNext(){return s.__awaiter(this,void 0,void 0,(function*(){if(0===this.availableCommitRequests)return;if(0===this.commitQueue.length)return void(this.isUploading()||this.fireComplete());this.availableCommitRequests--;const e=[],s=[];let i=t.COMMIT_REQUEST_BATCH_SIZE;for(;i>0&&this.commitQueue.length>0;){const t=this.commitQueue.shift(),r=this.itemQueue.get(t);if(!r)continue;const{info:a,blockTokens:o,destPath:n}=r;e.push({info:a,tokens:o}),s.push(n),i--}try{(yield this.handleCommitBlocks(e)).forEach(e=>{this.itemExit(e.filePath,e.success?"Completed":"Error")})}catch(e){s.forEach(e=>{this.itemExit(e,"Error")})}this.availableCommitRequests++,this.commitNext()}))}queueCommit(e){this.commitQueue.push(e),this.commitNext()}uploadNextBlock(){return s.__awaiter(this,void 0,void 0,(function*(){if(this.availableBlockRequests<=0)return;const e=this.dispenseChunkData();if(!e)return void(this.isUploading()||this.fireComplete());const{item:t,chunk:s,blockIndex:i}=e;let r=0;const a=e=>{if(this.isItemUploading(t.destPath)){const i=Math.min(s.size,t.file.size),a=Math.min(e,i),o=Math.max(a-r,0);r+=o;const n=Math.min(t.totalBytesUploaded+o,t.file.size);t.totalBytesUploaded=n,this.handleProgress(t.info,n)}};this.availableBlockRequests--;try{const e=yield this.handleUploadBlocks(t.info,s,a);this.isItemUploading(t.destPath)&&(a(s.size),t.blockTokens[i]=e,o(t)&&(t.status="Committing",this.queueCommit(t.destPath)))}catch(e){this.itemExit(t.destPath,"Error")}this.availableBlockRequests++,this.uploadNextBlock()}))}addFile(e,t,i){return s.__awaiter(this,void 0,void 0,(function*(){this.itemQueue.set(t,{file:e,destPath:t,status:"Queued",bytesUploaded:0,info:i,blockTokens:[],totalBytesUploaded:0}),this.isUploading()&&this.startUploading()}))}startUploading(){return s.__awaiter(this,void 0,void 0,(function*(){const e=this.onComplete(),t=this.availableBlockRequests;for(let e=0;e<t;e++)this.uploadNextBlock();return e}))}cancelFile(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=this.itemQueue.get(e);t&&!o(t)&&this.itemExit(e,"Cancelled")}))}stopUploading(){this.itemQueue.forEach(({destPath:e})=>{this.cancelFile(e)})}isQueueEmpty(){return 0===this.itemQueue.size}isItemUploading(e){const t=this.itemQueue.get(e);return Boolean(t&&"Uploading"===t.status)}isUploading(){return this.availableBlockRequests<t.MAX_PARALLEL_BLOCK_UPLOAD_REQUESTS||this.availableCommitRequests<t.MAX_PARALLEL_COMMIT_REQUESTS}fireComplete(){for(;this.onCompleteSubscribers.length>0;){const e=this.onCompleteSubscribers.shift();e&&e()}}onComplete(){return new Promise(e=>{this.onCompleteSubscribers.push(e)})}}t.ParallelUploadSchedulerWithBatchCommit=r;class a{constructor(e){this.currentOffset=0,this.item=e}getNextChunk(){if(this.isEmpty())return null;const e=this.item.file.slice(this.currentOffset,t.CHUNK_SIZE+this.currentOffset);return this.currentOffset+=t.CHUNK_SIZE,e}isEmpty(){return this.item.file.size<=this.currentOffset}}const o=({blockTokens:e,file:s})=>{if(e.every(e=>""!==e)){const i=Math.ceil(s.size/t.CHUNK_SIZE);return e.length===i}return!1}})),define("metaserver/static/js/browse/actions_navigate",["require","exports","tslib","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/cloud_docs/preferred_editor_utils","metaserver/static/js/cloud_docs/types","metaserver/static/js/file_operations/notifications","metaserver/static/js/clean/filetypes","metaserver/static/js/clean/ui/async_file_modal_controller","metaserver/static/js/browse/api","metaserver/static/js/browse/constants","metaserver/static/js/browse/data/action_creators/index","metaserver/static/js/browse/data/selectors","metaserver/static/js/browse/data/selectors","metaserver/static/js/browse/data/store","metaserver/static/js/browse/models","metaserver/static/js/file_viewer/async_controller","metaserver/static/js/file_viewer/toggle_browse_elements_util","metaserver/static/js/pnm/utils","metaserver/static/js/plusplus/logging","metaserver/static/js/plusplus/file_actions","metaserver/static/js/vault/constants","metaserver/static/js/file_viewer/constants","metaserver/static/js/core/browser","metaserver/static/js/browse/tidy_up_actions","metaserver/static/js/clean/history_singleton","metaserver/static/js/files_view/util","metaserver/static/js/browse/naming_conventions_actions","metaserver/static/js/browse/data/helpers","metaserver/static/js/sync_everything/constants","metaserver/static/js/sync_everything/hive_logger","typescript/libraries/file-viewer/src/file_extension/extension_constants"],(function(e,t,s,i,r,a,o,n,l,c,d,_,u,p,m,h,f,E,g,S,T,y,b,v,A,I,C,R,O,P,F,k){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browseNavigateActions=void 0,o=s.__importStar(o),l=s.__importStar(l),c=s.__importStar(c),_=s.__importStar(_),p=s.__importStar(p),v=s.__importStar(v),F=s.__importStar(F);t.browseNavigateActions=new class{constructor(){this.setUrl=({path:e,qargs:t,expandedBlade:s,forceExpandRightRail:i})=>{this.reduxStore.dispatch(_.setUrl({path:e,qargs:t,expandedBlade:s,forceExpandRightRail:i}))},this.onRestore=(e,t,s)=>{c.restoreFiles({files:t,userId:e,onSuccess:()=>{o.notifyRestoreSuccess(t)},isSearchMode:s})},this.doRestoreFilesWithUnifiedTrashModal=({files:e})=>{const t=p.user(this.reduxStore.getState()),s=p.context(this.reduxStore.getState());l.showUnifiedTrashModal({userId:t.id,context:s,files:e,onRestore:(e,t)=>{this.onRestore(e,t,!1)}})},this.reduxStore=(0,m.getStoreForBrowse)()}reloadCurrentPath(){this.setUrl({path:p.path(this.reduxStore.getState()),qargs:{reload:!0}})}navigateToFileOrFolder({file:e,shouldFocusComment:t=!1,activeCommentThreadId:s,onFileViewerUnmount:i,fileViewOrigin:a=b.FileViewOriginType.BROWSE,skipFileViewerRouting:o=!1,performSpaRouting:c=!1,href:d,middleClick:_=!1}){var u;const f=p.user(this.reduxStore.getState()),E=p.context(this.reduxStore.getState()),I=p.browsePostTTIExperiments((0,m.getStoreForBrowse)().getState());if(e.isDeleted)this.doRestoreFilesWithUnifiedTrashModal({files:[e]});else{if((0,g.isSupportedLinkNodeClickAction)(e.per_node_metadata))return void(0,T.handleLinkNodeAction)(e.per_node_metadata,e=>{(0,S.logProductAnalytics)(f.id,"web","select",e,"files_main_bar")});if(e.is_dir)if(e.type===n.FileTypes.VAULT_FOLDER)v.redirect(y.VAULT_URL);else if((0,O.isBackupFolder)(e)&&I.expEnableBackupWeb&&!(0,P.isBackupBrowse)()){const t=(0,P.backupUrlForFqPath)(e.fq_path);F.logEvent({event:"click_backup",page_source:"browse",action_surface:"file_list"}),v.open_tab(t)}else if(h.File.isNoAccessSharedFolder(e))l.showNoAccess(f,e.fq_path,E);else{const t="V1"===I.expOEXNamingConventionsGrowth,s=I.expTidyUpReengagement;E.isCurrentPathWriteable()&&setTimeout(()=>{p.context(this.reduxStore.getState()).currentFQPath===e.fq_path&&(t?0===Math.floor(2*Math.random())?(0,A.promptTidyUp)(f.id,e.fq_path,e.ns_id,s).then(t=>{!1===t&&(0,R.promptNamingConventions)(f.id,e.fq_path,e.ns_id)}):(0,R.promptNamingConventions)(f.id,e.fq_path,e.ns_id).then(t=>{!1===t&&(0,A.promptTidyUp)(f.id,e.fq_path,e.ns_id)}):(0,A.promptTidyUp)(f.id,e.fq_path,e.ns_id,s))},5e3),(0,P.isBackupBrowse)()&&F.logEvent({page_source:"browse",action_surface:"file_list",event:(null===(u=e.per_node_metadata)||void 0===u?void 0:u.suppress_delete)?"click_system_folder":"click_folder"}),this.setUrl({path:e.fq_path})}else{const n=()=>{d&&_?v.open_tab(d):this.openPreviewForBrowseFile({file:e,shouldFocusComment:t,activeCommentThreadId:s,user:f,fileViewOrigin:a,onFileViewerUnmount:i,skipFileViewerRouting:o,performSpaRouting:c})},{preferredEditors:l}=p.browsePostTTIData(this.reduxStore.getState());!t&&l&&(0,r.hasPreferredEditorSupport)(e)?(0,r.openInPreferredEditor)(f,e,l,n,{fileViewOrigin:a}):n()}}}openPreviewForBrowseFile({file:e,shouldFocusComment:t,activeCommentThreadId:s,user:r,fileViewOrigin:o,onFileViewerUnmount:n,shouldFocusApproval:l,skipFileViewerRouting:c,performSpaRouting:h}){const g=p.context(this.reduxStore.getState()),{isOverFreeQuota:S,hasExcludedNsIds:T}=p.browsePostTTIData(this.reduxStore.getState());let y=(0,u.getIndexOfFile)(e,this.reduxStore.getState());const v=y<0?[e]:p.sortedFilesWithFolderSizes(this.reduxStore.getState()).toArray();if(y<0?y=0:v[y]=e,p.browsePostTTIExperiments((0,m.getStoreForBrowse)().getState()).expCloudDocsWebShortcutPreviews?e.is_cloud_doc&&!k.POINTER_CLOUD_DOC_EXTS.includes(e.ext):e.is_cloud_doc)(0,i.openCloudDoc)(e,r,a.WebBrowseSource);else{let i;const a=()=>{(0,E.showElementsBehindFileViewer)(),this.reduxStore.dispatch(_.setIsFileViewerShown({isShown:!1})),n&&n(),i&&i.focus()},u=()=>{i=document.querySelector(":focus"),(0,E.hideElementsBehindFileViewer)(),this.reduxStore.dispatch(_.setIsFileViewerShown({isShown:!0}))},p=c?()=>{const e=(0,I.getBrowserHistory)(),{location:t}=e,s=new URLSearchParams(t.search);s.delete("preview"),e.replace(`${t.pathname}?${s.toString()}`)}:void 0,m="browse_previews";(0,f.initializeAjaxPreviewTiming)(m,!0),(0,f.asyncOpenPreview)({containerId:d.BROWSE_FILE_VIEWER_ELEMENT_ID,files:v,indexOfPreviewFile:y,shouldFocusComment:t,activeCommentThreadId:s,user:r,onFileViewerDidMount:u,onFileViewerUnmount:a,fileViewOrigin:o,fileViewTarget:b.FileViewTargetType.PRIVATE,browseContext:g,browseExceptions:{hasExcludedNsIds:T,isOverFreeQuota:S},shouldFocusApproval:l,skipFileViewerRouting:c,onCloseViewer:p,ajaxTimerName:m}).then(()=>{if(h){const t=(0,I.getBrowserHistory)(),{location:s}=t,i=new URLSearchParams(s.search);i.append("preview",(0,C.getFilename)(e)),t.push(`${s.pathname}?${i.toString()}`)}})}}}})),define("metaserver/static/js/file_uploader/upload_kit_provider",["require","exports","tslib","react","metaserver/static/js/browse/crypto_subtle_digest","metaserver/static/js/filepath/filepath","metaserver/static/js/file_uploader/api_v2_client","metaserver/static/js/file_uploader/api_helper","metaserver/static/js/browse/crypto_subtle_digest","metaserver/static/js/filepath/filepath","metaserver/static/js/file_uploader/actions_adapter","metaserver/static/js/file_uploader/api","metaserver/static/js/file_uploader/constants","metaserver/static/js/file_uploader/parallel_scheduler_with_batch_commit","metaserver/static/js/file_uploader/upload_session_scheduler","metaserver/static/js/file_uploader/upload_hybrid_scheduler","metaserver/static/js/file_uploader/processors","metaserver/static/js/file_uploader/clean/data/store","metaserver/static/js/file_uploader/clean/data/selectors","metaserver/static/js/file_uploader/utils","metaserver/static/js/upload_kit/uploader/context","metaserver/static/js/modules/constants/global_file_upload","metaserver/static/js/file_uploader/api"],(function(e,t,s,i,r,a,o,n,l,c,d,_,u,p,m,h,f,E,g,S,T,y,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UploadKitProvider=void 0,i=s.__importDefault(i),o=s.__importStar(o),c=s.__importStar(c),_=s.__importStar(_),h=s.__importStar(h);class v extends i.default.Component{constructor(){super(...arguments),this.allProcessedFiles=[],this.onBeforeUpload=e=>new Promise(t=>{d.ActionsAdapter.emit("beforeUpload",{uploadItems:e,beforeUploadComplete:({items:e})=>{t(e)}})}),this.onFilesAdded=(e,t)=>new Promise(s=>{d.ActionsAdapter.emit("filesAdded",{uploadItems:e,allUploadItems:t,filesAddedComplete:s,chooseDestination:this.props.chooseDestination})}),this.processFiles=(e,t)=>s.__awaiter(this,void 0,void 0,(function*(){let s,i;t.forEach(({item:e,error:t})=>{d.ActionsAdapter.emit("error",{user:this.props.user,uploadItem:e,errorType:(0,d.convertValidationError)(t),loggingOnly:!0})});try{s=this.props.processFiles?yield this.props.processFiles(e,t):yield(0,f.processFiles)(e,t)}catch(e){s=[]}y.FILE_UPLOAD_SMALLEST_FILE&&s.sort((e,t)=>e.bytes-t.bytes);const r=(0,S.shouldUseHybridUploader)()&&s.some(e=>(0,S.shouldUseSessionUploadForFile)(e.bytes));if(r&&(0,S.precheckOptimizationIsOn)()&&(i=(0,f.startUploadSessions)(this.props.user.id,s)),this.allProcessedFiles=[...this.allProcessedFiles,...s],s=yield this.onFilesAdded(s,this.allProcessedFiles),s=yield this.onBeforeUpload(s),this.allProcessedFiles=[],r&&!(0,S.precheckOptimizationIsOn)()&&(i=(0,f.startUploadSessions)(this.props.user.id,s)),r&&i){const e=yield i;if(e.isError)s.forEach(e=>{d.ActionsAdapter.emit("error",{user:this.props.user,uploadItem:e,errorType:u.UploadErrorType.START_UPLOAD_SESSION_ERROR})});else{const t=e.result.session_ids;s.forEach((e,s)=>{e.cursor={session_id:t[s],offset:0}})}}return{items:s,errors:t}})),this.nsIdForRouting=e=>{if(this.props.nsIdForRouting)return this.props.nsIdForRouting(e);const t=(0,E.getStoreForUpload)().getState(),s=(0,g.getPath)(t),i=(0,g.getFolderNsId)(t);return""===c.normalize(s)?this.props.user.root_ns_id:null!==i?i:this.props.user.root_ns_id},this.appendBlock=(e,t,i,a)=>s.__awaiter(this,void 0,void 0,(function*(){if(!e.cursor||void 0===i)throw d.ActionsAdapter.emit("error",{uploadItem:e,errorType:u.UploadErrorType.APPEND_BLOCK_MISSING_PARAMS,user:this.props.user}),new Error;let s;if(d.ActionsAdapter.emit("blockUploadStart",{blob:t,uploadItem:e}),(0,l.windowHasCryptoSubtleDigest)()){const i=yield(0,n.hashBlobForAppend)(t,r.encryptArrayBuffer);i.isError?d.ActionsAdapter.emit("error",{uploadItem:e,errorType:u.UploadErrorType.CLIENT_HASH_DIGEST_ERROR,user:this.props.user}):s=i.result.hash}const c=t=>{a(t.loaded),d.ActionsAdapter.emit("uploadProgress",{uploadItem:e})},_=4194304*i+t.size>=e.bytes,p={cursor:{session_id:e.cursor.session_id,offset:4194304*i},close:_,content_hash:s};let m,h=0;if(y.UPLOAD_AUTORETRY_OPTIMIZATION){const{response:e,retryCount:s}=yield(0,S.newPromiseWithRetries)(()=>o.uploadSessionAppend(p,t,this.props.user.id,c));h+=s,m=e}else{const{response:e,retryCount:s}=yield(0,S.legacyPromiseWithRetries)(()=>o.uploadSessionAppend(p,t,this.props.user.id,c),3);h+=s,m=e}if(m.isError)throw d.ActionsAdapter.emit("error",{uploadItem:e,errorType:u.UploadErrorType.UPLOAD_BLOCK_ERROR,user:this.props.user,totalRetryCount:h}),new Error;d.ActionsAdapter.emit("uploadProgress",{uploadItem:e}),d.ActionsAdapter.emit("blockUploadEnd",{blob:t,totalRetryCount:h,uploadItem:e})})),this.uploadBlock=(e,t,i,r)=>s.__awaiter(this,void 0,void 0,(function*(){const s=t=>{i&&i(t.loaded),d.ActionsAdapter.emit("uploadProgress",{uploadItem:e})};d.ActionsAdapter.emit("blockUploadStart",{blob:t,uploadItem:e});let r,a=0;if(y.UPLOAD_AUTORETRY_OPTIMIZATION){const{response:i,retryCount:o}=yield(0,S.newPromiseWithRetries)(()=>_.uploadBlock(this.props.user.id,this.nsIdForRouting(e),e.bytes,t,s));a+=o,r=i}else{const{response:i,retryCount:o}=yield(0,S.legacyPromiseWithRetries)(()=>_.uploadBlock(this.props.user.id,this.nsIdForRouting(e),e.bytes,t,s),3);a+=o,r=i}if(r.isError)throw d.ActionsAdapter.emit("error",{uploadItem:e,errorType:r.error.type,user:this.props.user,errorMessage:r.error.message,errorMethodSource:r.error.method,totalRetryCount:a}),new Error;return d.ActionsAdapter.emit("blockUploadEnd",{blob:t,totalRetryCount:a,uploadItem:e}),r.result.token})),this.finishBatch=e=>s.__awaiter(this,void 0,void 0,(function*(){d.ActionsAdapter.emit("filesCommitting",{uploadItems:e.map(e=>e.info)});const t=[],s=[],i=[];let r,n;if(e.forEach(e=>{e.info.cursor&&(s.push({cursor:e.info.cursor,commit:{path:(0,a.normalize)((0,S.getDestinationDir)(e.info.parentPath||"",e.info.destPath))+(0,a.normalize)(c.filename(e.info.destPath))}}),i.push(e))}),y.UPLOAD_AUTORETRY_OPTIMIZATION){const{response:e,retryCount:t}=yield(0,S.newPromiseWithRetries)(()=>o.uploadSessionFinishBatch({entries:s},this.props.user.id));r=e,n=t}else{const{response:e,retryCount:t}=yield(0,S.legacyPromiseWithRetries)(()=>o.uploadSessionFinishBatch({entries:s},this.props.user.id),3);r=e,n=t}return r.isError?(e.map(({info:e})=>{d.ActionsAdapter.emit("error",{uploadItem:e,errorType:u.UploadErrorType.COMMIT_HTTP_ERROR,user:this.props.user,totalRetryCount:n,useBatchCommit:!0}),t.push({filePath:e.destPath,success:!1})}),t):(r.result.entries.forEach((e,s)=>{const r=i[s];"failure"===e[".tag"]?(d.ActionsAdapter.emit("error",{uploadItem:r.info,errorType:u.UploadErrorType.COMMIT_HTTP_ERROR,user:this.props.user,totalRetryCount:n,useBatchCommit:!0}),t.push({filePath:r.info.destPath,success:!1})):(d.ActionsAdapter.emit("fileUploaded",{uploadItem:r.info,totalRetryCount:n,useBatchCommit:!0}),t.push({filePath:r.info.destPath,success:!0}))}),t)})),this.commitBlocksBatchAPIV2=e=>s.__awaiter(this,void 0,void 0,(function*(){if(d.ActionsAdapter.emit("filesCommitting",{uploadItems:e.map(e=>e.info)}),e.length>3){const t=e.map(({info:e,tokens:t})=>({file_name:c.filename(e.destPath),destination:(0,S.getDestinationDir)(e.parentPath||"",e.destPath),file_size:e.bytes,block_tokens:t,local_identifier:e.id}));let s,i=0;if(y.UPLOAD_AUTORETRY_OPTIMIZATION){const{response:r,retryCount:a}=yield(0,S.newPromiseWithRetries)(()=>_.commitBlocksBatch(this.props.user.id,t,e.map(e=>e.info)));i+=a,s=r}else{const{response:r,retryCount:a}=yield(0,S.legacyPromiseWithRetries)(()=>_.commitBlocksBatch(this.props.user.id,t,e.map(e=>e.info)),3);i+=a,s=r}const r=[];return s.isError?e.map(({info:e,tokens:t})=>{d.ActionsAdapter.emit("error",{uploadItem:e,errorType:s.error.type,user:this.props.user,errorMessage:s.error.message,errorMethodSource:s.error.method,totalRetryCount:i,useBatchCommit:!0}),r.push({filePath:e.destPath,success:!1})}):s.result.forEach(e=>{e.status.isError?(d.ActionsAdapter.emit("error",{uploadItem:e.uploadItem,errorType:e.status.error.type,user:this.props.user,errorMessage:e.status.error.message,errorMethodSource:e.status.error.method,totalRetryCount:i,useBatchCommit:!0}),r.push({filePath:e.uploadItem.destPath,success:!1})):(d.ActionsAdapter.emit("fileUploaded",{uploadItem:e.uploadItem,totalRetryCount:i,useBatchCommit:!0}),r.push({filePath:e.uploadItem.destPath,success:!0}))}),Promise.resolve(r)}{const t=[];for(const{info:s,tokens:i}of e){let e,r=0;if(y.UPLOAD_AUTORETRY_OPTIMIZATION){const{response:t,retryCount:a}=yield(0,S.newPromiseWithRetries)(()=>_.commitBlocks(this.props.user.id,(0,S.getDestinationDir)(s.parentPath||"",s.destPath),c.filename(s.destPath),s.bytes,i,this.props.user.root_ns_id,(0,b.convertFileTimestampIfExists)(s)));r+=a,e=t}else{const{response:t,retryCount:a}=yield(0,S.legacyPromiseWithRetries)(()=>_.commitBlocks(this.props.user.id,(0,S.getDestinationDir)(s.parentPath||"",s.destPath),c.filename(s.destPath),s.bytes,i,this.props.user.root_ns_id,(0,b.convertFileTimestampIfExists)(s)),3);r+=a,e=t}e.isError?(d.ActionsAdapter.emit("error",{uploadItem:s,errorType:e.error.type,user:this.props.user,errorMessage:e.error.message,errorMethodSource:e.error.method,totalRetryCount:r,useBatchCommit:!0}),t.push({filePath:s.destPath,success:!1})):(d.ActionsAdapter.emit("fileUploaded",{uploadItem:s,totalRetryCount:r,useBatchCommit:!0}),t.push({filePath:s.destPath,success:!0}))}return Promise.resolve(t)}}))}render(){m.UploadSessionScheduler,this.appendBlock,this.finishBatch;const e={schedulerType:"hybrid",Scheduler:h.UploadHybridScheduler,append:this.appendBlock,finish:this.finishBatch,uploadBlock:this.uploadBlock,commitBlocksBatch:this.commitBlocksBatchAPIV2},t={schedulerType:"token",Scheduler:p.ParallelUploadSchedulerWithBatchCommit,uploadBlock:this.uploadBlock,commitBlocksBatch:this.commitBlocksBatchAPIV2};return i.default.createElement(T.UploadProvider,{userId:this.props.user.id,selectMultiple:!0,onChoose:this.props.onChoose,onChooseDropboxFile:this.props.onChooseDropboxFile,processFiles:this.processFiles,maxFileSize:(0,S.shouldUseHybridUploader)()?375809638400:524288e5,startUploadOnAdd:!0,scheduler:(0,S.shouldUseHybridUploader)()?e:t},this.props.children)}}t.UploadKitProvider=v,v.displayName="UploadKitProvider"})),define("metaserver/static/js/file_uploader/api",["require","exports","tslib","metaserver/static/js/clean/csrf","metaserver/static/js/browse/crypto_subtle_digest","metaserver/static/js/file_uploader/constants","metaserver/static/js/core/uri","metaserver/static/js/file_uploader/api_v2_client","metaserver/static/js/file_uploader/api_helper","metaserver/static/js/file_uploader/result_type"],(function(e,t,s,i,r,a,o,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertFileTimestampIfExists=t.uploadBlock=t.commitBlocksBatch=t.commitBlocks=void 0,t.commitBlocks=function(e,t,s,r,n,d,_){return new Promise((u,p)=>{try{const p={_subject_uid:e.toString(),dest:t,name:s,overwrite:"1",reported_total_size:r.toString(),t:(0,i.readCsrfToken)()||"",client_root_ns_id:d.toString()};_>0&&(p.last_modified=_.toString());const m=new o.URI({scheme:"https",authority:"www.dropbox.com",path:"/commit_web_upload_by_token",query:p}),h=new XMLHttpRequest;h.withCredentials=!0;const f=()=>{let e;return e=507===h.status?(0,l.getErrorOnStatus507)(h):0===h.status?a.UploadErrorType.CONNECTION_ERROR:a.UploadErrorType.COMMIT_HTTP_ERROR,{type:e}};return h.onreadystatechange=()=>{if(h.readyState===XMLHttpRequest.DONE)if(200===h.status){const e=JSON.parse(h.responseText);"complete"===e.status?u((0,c.ok)({})):u((0,c.error)({type:a.UploadErrorType.HTTP_ERROR,message:e.error,method:"commitBlocks/request.onreadystatechange"}))}else{const e=f().type===a.UploadErrorType.CONNECTION_ERROR,t=e?1/0:3;u((0,c.error)(f(),{isRetriable:!0,maxRetries:t,isNetworkError:e}))}},h.open("POST",m.toString(),!0),h.setRequestHeader("Content-Type","application/octet-stream"),h.send(JSON.stringify(n)),h}catch(e){return void u((0,c.error)({type:a.UploadErrorType.HTTP_ERROR,message:e.message,method:"commitBlocks/try-catch"}))}})},t.commitBlocksBatch=function(e,t,s){return new Promise((i,r)=>{const o={};s.map(e=>{o[e.id]=e});const l=[];(0,n.commitWebUploadTokenBatch)(e,t).then(e=>{var t,s;null===(t=e.completed)||void 0===t||t.forEach(e=>{l.push({uploadItem:o[e.local_identifier],status:{isError:!1}})}),null===(s=e.failed)||void 0===s||s.forEach(e=>{const t=e.status.status;let s=a.UploadErrorType.COMMIT_HTTP_ERROR;if("failure"===t[".tag"]){s=(function(e){var t;switch(null===(t=e.failure_reason)||void 0===t?void 0:t[".tag"]){case"invalid_argument":return a.UploadErrorType.COMMIT_INVALID_ARGS;case"too_large_file":case"too_many_blocks":return a.UploadErrorType.FILE_SIZE_ERROR;case"no_write_permission":return a.UploadErrorType.PERMISSIONS_AT_UPLOAD_ERROR;case"insufficient_quota":return a.UploadErrorType.OVER_QUOTA_ERROR;case"file_ignored":return a.UploadErrorType.IGNORED;case"others":default:return a.UploadErrorType.COMMIT_HTTP_ERROR}})(t)}l.push({uploadItem:o[e.local_identifier],status:{isError:!0,error:{type:s,method:"commitWebUploadTokenBatch"}}})}),i((0,c.ok)(l))}).catch(e=>{var t;0!==(null===(t=e.raw)||void 0===t?void 0:t.status)?i((0,c.error)({type:a.UploadErrorType.HTTP_ERROR,message:e.toString(),method:"commitWebUploadTokenBatch/try-catch"})):i((0,c.error)({type:a.UploadErrorType.CONNECTION_ERROR,message:e.toString(),method:"commitWebUploadTokenBatch/try-catch"},{isRetriable:!0,maxRetries:1/0,isNetworkError:!0}))})})};t.uploadBlock=(e,t,n,d,_)=>new Promise(u=>s.__awaiter(void 0,void 0,void 0,(function*(){try{let s;if((0,r.windowHasCryptoSubtleDigest)()){const e=yield(0,l.hashBlob)(d);if(e.isError)return u(e);s=e.result.hash}const p=new o.URI({scheme:"https",authority:"dl-web.dropbox.com",path:"/put_block_returning_token",query:{owner_id:e.toString(),_subject_uid:e.toString(),t:(0,i.readCsrfToken)()||"",reported_block_size:d.size.toString(),num_blocks:Math.ceil(n/d.size).toString(),ns_id_for_routing:t.toString()}}),m=new XMLHttpRequest;m.withCredentials=!0;const h=()=>{let e;return e=507===m.status?(0,l.getErrorOnStatus507)(m):0===m.status?a.UploadErrorType.CONNECTION_ERROR:a.UploadErrorType.UPLOAD_BLOCK_ERROR,{type:e}};return m.onreadystatechange=()=>{if(m.readyState!==XMLHttpRequest.DONE)return;if(0!==m.status&&200!==m.status)return u((0,c.error)({type:a.UploadErrorType.HTTP_ERROR,message:`request status was ${m.status}`,method:"uploadBlock/request.onreadystatechange"}));const e=JSON.parse(m.responseText);return e.token?(0,r.windowHasCryptoSubtleDigest)()&&e.block_hash!==s?u((0,c.error)({type:a.UploadErrorType.HASHES_NOT_EQUAL_ERROR})):void u((0,c.ok)({token:e.token})):u((0,c.error)({type:a.UploadErrorType.HTTP_ERROR,message:`no token in response, block hash:${e.block_hash}, request status:${m.status}`,method:"uploadBlock/request.onreadystatechange"}))},m.onerror=()=>{const e=h();e.type!==a.UploadErrorType.CONNECTION_ERROR?u((0,c.error)(e)):u((0,c.error)(e,{isRetriable:!0,maxRetries:1/0,isNetworkError:!0}))},m.upload&&(m.upload.onprogress=_),m.onload=()=>{m.status>=400&&u((0,c.error)(h()))},m.open("POST",p.toString(),!0),m.setRequestHeader("Content-Type","application/octet-stream"),m.send(d),m}catch(e){return void u((0,c.error)({type:a.UploadErrorType.HTTP_ERROR,message:e.message,method:"uploadBlock/try-catch"}))}})));t.convertFileTimestampIfExists=e=>{var t;if(!(e.file&&e.file instanceof File))return 0;const s=Date.now()+864e5,i=null!==(t=e.file.lastModified)&&void 0!==t?t:0;return i.toString().length>=12&&i<s?Math.round(i/1e3):0}})),define("metaserver/static/js/business_space/browse/data/action_creators",["require","exports","metaserver/static/js/business_space/browse/data/types"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActionForSetSplitShareButtonFileLoginlessLink=t.getActionForSetContextMenuFileBusinessSpaceInfo=t.getActionForSetSelectedFileLoginlessLink=t.getActionForSetSelectedFileBusinessSpaceInfo=t.getActionForSetVisibility=t.getActionForSetVisibilities=t.getActionForSetClientUploadsEnabled=t.getActionForSetLoginlessLink=t.getActionForSetBusinessSpaceInfo=void 0;t.getActionForSetBusinessSpaceInfo=({found:e,business_space_xgid:t,is_business_space_root:i,business_space_name:r,space_xid:a=""})=>({type:s.ActionTypes.SET_BUSINESS_SPACE_INFO,payload:{found:e,business_space_xgid:t,is_business_space_root:i,business_space_name:r,space_xid:a}});t.getActionForSetLoginlessLink=({client_portal_url:e,space_xid:t})=>({type:s.ActionTypes.SET_LOGINLESS_LINK,payload:{client_portal_url:e,space_xid:t}});t.getActionForSetClientUploadsEnabled=({client_uploads_enabled:e})=>({type:s.ActionTypes.SET_CLIENT_UPLOADS_ENABLED,payload:{client_uploads_enabled:e}});t.getActionForSetVisibilities=({objects_visibility:e})=>({type:s.ActionTypes.SET_VISIBILITIES,payload:{objects_visibility:e}});t.getActionForSetVisibility=({fileFqPath:e,newObjectVisibility:t})=>({type:s.ActionTypes.SET_VISIBILITY,payload:{fileFqPath:e,newObjectVisibility:t}});t.getActionForSetSelectedFileBusinessSpaceInfo=({found:e,business_space_xgid:t,is_business_space_root:i,business_space_name:r,space_xid:a="",client_portal_url:o=""})=>({type:s.ActionTypes.SET_SELECTED_FILE_BUSINESS_SPACE_INFO,payload:{found:e,business_space_xgid:t,is_business_space_root:i,business_space_name:r,space_xid:a,client_portal_url:o}});t.getActionForSetSelectedFileLoginlessLink=({client_portal_url:e,space_xid:t})=>({type:s.ActionTypes.SET_SELECTED_FILE_LOGINLESS_LINK,payload:{client_portal_url:e,space_xid:t}});t.getActionForSetContextMenuFileBusinessSpaceInfo=({found:e,business_space_xgid:t,is_business_space_root:i,business_space_name:r,space_xid:a="",client_portal_url:o=""})=>({type:s.ActionTypes.SET_SPLIT_SHARE_BUTTON_FILE_BUSINESS_SPACE_INFO,payload:{found:e,business_space_xgid:t,is_business_space_root:i,business_space_name:r,space_xid:a,client_portal_url:o}});t.getActionForSetSplitShareButtonFileLoginlessLink=({client_portal_url:e,space_xid:t})=>({type:s.ActionTypes.SET_SPLIT_SHARE_BUTTON_FILE_LOGINLESS_LINK,payload:{client_portal_url:e,space_xid:t}})})),define("typescript/component_libraries/files_components/src/icons/file_icon_extensions",["require","exports","typescript/libraries/spectrum-content-icon-compatibility/src/index","typescript/libraries/spectrum-content-icon-compatibility/src/index"],(function(e,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIconNameFromFile=t.FolderIconToSpectrumIcon=t.iconNameWithoutSize=void 0;const r=s.EXTENSION_ICONS;function a(e){const t=e.length,s=e.lastIndexOf("_",t);return parseInt(e.substr(s+1,t),10)?e.substr(0,s):e}t.iconNameWithoutSize=a,t.FolderIconToSpectrumIcon={folder_user:"folder_shared",folder_user_gray:"folder_shared",folder_team:"folder_team",folder_team_gray:"folder_team",folder_team_locked:"folder_team_read_only",folder_team_locked_gray:"folder_team_read_only",folder_user_locked:"folder_shared_read_only",folder_user_locked_gray:"folder_shared_read_only",folder:"folder",folder_gray:"folder",folder_team_member:"folder_team_member",folder_user_no_access:"folder_confidential",folder_app:"folder_app",package:"pkg",folder_camera:"folder_camera_upload",dropbox:"folder_dropbox",folder_user_no_access_admin_view:"folder_confidential_admin_view",folder_space:"folder_space",folder_space_read_only:"folder_space_read_only"};t.getIconNameFromFile=({isFolder:e,extension:s="",icon:o=""})=>{if(o&&`${o}-large`in i.ICONS)return o;if(e){const e=a(o);return t.FolderIconToSpectrumIcon[e]||"folder"}return r[s]||"unknown"}})),define("typescript/component_libraries/files_components/src/icons/file_icon",["require","exports","tslib","react","classnames","typescript/libraries/spectrum-content-icon-compatibility/src/index","typescript/component_libraries/files_components/src/icons/file_icon_extensions","typescript/component_libraries/files_components/src/icons/index.module.css"],(function(e,t,s,i,r,a,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderIcon=t.FileIcon=void 0,i=s.__importStar(i),r=s.__importDefault(r),n=s.__importDefault(n);t.FileIcon=({file:e,size:t="small"})=>{const s=(0,r.default)(n.default.ikeaFileIcon,{[n.default.ikeaFileIconXsmall]:"xsmall"===t,[n.default.ikeaFileIconSmall]:"small"===t,[n.default.ikeaFileIconLarge]:"large"===t}),l="xsmall"===t?"small":t;return i.createElement("div",{className:s},i.createElement(a.IconContent,{name:`${(0,o.getIconNameFromFile)(e)}-${l}`,"aria-hidden":"true"}))},t.FileIcon.displayName="FileIcon";t.FolderIcon=({icon:e,size:t="small"})=>{const s=(0,o.iconNameWithoutSize)(e),r=o.FolderIconToSpectrumIcon[s]||"folder",n="xsmall"===t?"small":t;return i.createElement(a.IconContent,{name:`${r}-${n}`,"aria-hidden":"true"})}})),define("typescript/component_libraries/files_components/src/icons/index.module.css",["require","exports","css!typescript/component_libraries/files_components/src/icons/index.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ikeaFileIconLarge=t.ikeaFileIconSmall=t.ikeaFileIconXsmall=t.ikeaFileIcon=void 0,t.ikeaFileIcon="_ikea-file-icon_1quko_1",t.ikeaFileIconXsmall="_ikea-file-icon--xsmall_1quko_8",t.ikeaFileIconSmall="_ikea-file-icon--small_1quko_14",t.ikeaFileIconLarge="_ikea-file-icon--large_1quko_20";t.default={ikeaFileIcon:"_ikea-file-icon_1quko_1",ikeaFileIconXsmall:"_ikea-file-icon--xsmall_1quko_8",ikeaFileIconSmall:"_ikea-file-icon--small_1quko_14",ikeaFileIconLarge:"_ikea-file-icon--large_1quko_20"}})),define("typescript/component_libraries/files_components/src/table/columns/file_name_column",["require","exports","tslib","react","typescript/component_libraries/files_components/src/icons/file_icon","dig-components/combinations","react-intl","dig-components/typography"],(function(e,t,s,i,r,a,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileNameColumn=t.getLabelIDFromRowIndex=t.FileNameCell=void 0,i=s.__importStar(i);function l(e){return`files-table-label-${e}`}t.FileNameCell=({file:e,labelID:t,subTitle:s=""})=>{const o=e.url?i.createElement(n.Link,{id:t,"data-testid":"files-filename",href:e.url},e.title):i.createElement("span",{id:t,"data-testid":"files-filename"},e.title);return i.createElement(i.Fragment,null,i.createElement(a.LabelGroup,{withLeftAccessory:i.createElement(r.FileIcon,{file:e}),withText:o,withSubtext:s}))},t.FileNameCell.displayName="FileNameCell",t.getLabelIDFromRowIndex=l,t.FileNameColumn={id:"filename",Header:()=>i.createElement(i.Fragment,null,i.createElement("div",{style:{width:"48px"}})," ",(0,o.useIntl)().formatMessage(c)),Cell:({row:e})=>i.createElement(t.FileNameCell,{file:e.original,labelID:l(e.index)}),accessor:e=>e.title,width:300};const c=(0,o.defineMessage)({id:"A2npVi",defaultMessage:"Name"})})),define("metaserver/static/js/file_actions/metrics",["require","exports","metaserver/static/js/metrics/index"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recordPathLookupErrors=t.batchContentType=t.bucketForBatchSize=t.FILE_ACTIONS_AMP_NAMESPACE=void 0,t.FILE_ACTIONS_AMP_NAMESPACE="web_file_actions",t.bucketForBatchSize=function(e){return 1===e?"single":e<=10?"small":e<=100?"medium":e<=1e3?"large":"massive"},t.batchContentType=function(e){return e.every(e=>e.is_dir)?"folders":e.every(e=>!e.is_dir)?"files":"mixed"};t.recordPathLookupErrors=function(e,i,r){const a={};e.forEach(e=>{if("path_lookup"===e.failure[".tag"]){const t=e.failure.path_lookup[".tag"];a[t]=(a[t]||0)+1}});for(const e in a)a.hasOwnProperty(e)&&(0,s.getMetricsReporter)().createStats({ns:t.FILE_ACTIONS_AMP_NAMESPACE,name:"common/failure/path_lookup"},Object.assign(Object.assign({},r),{lookupFailureType:e,operation:i})).record(a[e])}})),define("metaserver/static/js/file_actions/strings",["require","exports","react-intl"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unstarSnackbarError=t.starSnackbarError=t.unstarSnackbarSuccess=t.starSnackbarSuccess=t.createFolderSnackbarSuccess=t.createFolderFswConfirmText=t.createFolderErrorGeneric=t.createFolderErrorMalformedPath=t.createFolderSnackbarProgress=t.renameSnackbarSuccessMessage=t.renameUndoSnackbarSuccessMessage=t.renameUndoSnackbarErrorMessage=t.renameUndoSnackbarProgressMessage=t.renameFswConfirmText=t.renameSnackbarProgressMessage=t.renameErrorInvalidName=t.deleteUndoSnackbarMessage=t.deleteFswConfirmText=t.deleteSnackbarProgressMessage=void 0,t.deleteSnackbarProgressMessage=(0,s.defineMessage)({id:"z7/sbf",defaultMessage:"{count, plural, one{Deleting {count} item...} other{Deleting {count} items...}}"}),t.deleteFswConfirmText=(0,s.defineMessage)({id:"da2lvf",defaultMessage:"Delete"}),t.deleteUndoSnackbarMessage=(0,s.defineMessage)({id:"hCpZct",defaultMessage:"Delete undone."}),t.renameErrorInvalidName=(0,s.defineMessage)({id:"KYHY0Z",defaultMessage:"Name was invalid."}),t.renameSnackbarProgressMessage=(0,s.defineMessage)({id:"8j6sBp",defaultMessage:"Renaming"}),t.renameFswConfirmText=(0,s.defineMessage)({id:"NYv8Vp",defaultMessage:"Rename"}),t.renameUndoSnackbarProgressMessage=(0,s.defineMessage)({id:"deJ8cD",defaultMessage:"Undoing rename..."}),t.renameUndoSnackbarErrorMessage=(0,s.defineMessage)({id:"n4o67d",defaultMessage:"Undo failed."}),t.renameUndoSnackbarSuccessMessage=(0,s.defineMessage)({id:"6RXx/7",defaultMessage:"Rename undone."}),t.renameSnackbarSuccessMessage=(0,s.defineMessage)({id:"NqCfwG",defaultMessage:"Renamed 1 item."}),t.createFolderSnackbarProgress=(0,s.defineMessage)({id:"U3y3i9",defaultMessage:"Creating folder..."}),t.createFolderErrorMalformedPath=(0,s.defineMessage)({id:"HOb8Zp",defaultMessage:'The following characters are not allowed: angle brackets \\ / : ? * " |'}),t.createFolderErrorGeneric=(0,s.defineMessage)({id:"qZTFM0",defaultMessage:"Cant create folder."}),t.createFolderFswConfirmText=(0,s.defineMessage)({id:"VDjS9+",defaultMessage:"Create folder"}),t.createFolderSnackbarSuccess=(0,s.defineMessage)({id:"1zC4ih",defaultMessage:"Folder created."}),t.starSnackbarSuccess=(0,s.defineMessage)({id:"m96IvY",defaultMessage:"Starred {itemName}."}),t.unstarSnackbarSuccess=(0,s.defineMessage)({id:"Yn2gx1",defaultMessage:"Unstarred {itemName}."}),t.starSnackbarError=(0,s.defineMessage)({id:"LdcLnn",defaultMessage:"There was a problem starring {itemName}"}),t.unstarSnackbarError=(0,s.defineMessage)({id:"t8Eqso",defaultMessage:"There was a problem unstarring {itemName}"})})),define("metaserver/static/js/file_operations/notifications",["require","exports","tslib","lodash","metaserver/static/js/clean/browse_interface","metaserver/static/js/clean/em_string","metaserver/static/js/filepath/filepath","metaserver/static/js/browse/api","metaserver/static/js/clean/undo","metaserver/static/js/core/html","metaserver/static/js/core/i18n","metaserver/static/js/core/notify"],(function(e,t,s,i,r,a,o,n,l,c,d,_){"use strict";function u(e,t,s,i){l.notifyWithUndo(e,s,()=>n.rollbackChangeSets({changesets:s,userId:t.id,progressText:d.intl.formatMessage({id:"wKzr7W",defaultMessage:"Undoing"}),onSuccess:()=>{_.Notify.success(d.intl.formatMessage({id:"t6mPeQ",defaultMessage:"Undo complete."})),i&&i()}}))}function p(e,t){const s=r.browse_uri_for_fq_path(t,e),n=a.Emstring.em_snippet(o.filename(e),40);return{href:s,text:i.escape(n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.notifyRestoreSuccess=t.notifyPurgeSuccess=t.notifyFolderCreationSuccess=t.notifyRenameSuccess=t.notifyDeleteSuccess=t.notifyMoveSuccess=t.notifyCopySuccess=void 0,i=s.__importStar(i),r=s.__importStar(r),o=s.__importStar(o),n=s.__importStar(n),l=s.__importStar(l),t.notifyCopySuccess=function(e,t,s,i,r){let a;if(i){const s=p(i,t);a=d.intl.formatMessage({id:"UZ+XVI",defaultMessage:"{count, plural, one{Copied {count} item to {dest}.} other{Copied {count} items to {dest}.}}"},{count:e,dest:`<a href="${s.href.toString()}">${s.text}</a>`}),a=new c.HTML(a)}else a=d.intl.formatMessage({id:"BDtFp+",defaultMessage:"{count, plural, one{Copied {count} item.} other{Copied {count} items.}}"},{count:e});u(a,t,s,r)},t.notifyMoveSuccess=function(e,t,s,i,r){let a;if(i){const s=p(i,t);a=d.intl.formatMessage({id:"GBu2Ic",defaultMessage:"{count, plural, one{Moved {count} item to {dest}.} other{Moved {count} items to {dest}.}}"},{count:e,dest:`<a href="${s.href.toString()}">${s.text}</a>`}),a=new c.HTML(a)}else a=d.intl.formatMessage({id:"tFGyx0",defaultMessage:"{count, plural, one{Moved {count} item.} other{Moved {count} items.}}"},{count:e});u(a,t,s,r)},t.notifyDeleteSuccess=function(e,t,s,i){u(d.intl.formatMessage({id:"THAbub",defaultMessage:"{count, plural, one{Deleted {count} item.} other{Deleted {count} items.}}"},{count:e}),t,s,i)},t.notifyRenameSuccess=function(e,t,s){u(d.intl.formatMessage({id:"sAZa2U",defaultMessage:"Rename complete."}),e,t,s)},t.notifyFolderCreationSuccess=function(e,t,s){u(d.intl.formatMessage({id:"ndMNx/",defaultMessage:"Created folder {folder_name}."},{folder_name:e}),t,s)},t.notifyPurgeSuccess=function(e){const t=d.intl.formatMessage({id:"jh+GyF",defaultMessage:"{count, plural, one{Permanently deleted {count} item.} other{Permanently deleted {count} items.}}"},{count:e});_.Notify.success(t)},t.notifyRestoreSuccess=function(e){let t;const s=e.length;if(1===s){const s=i.escape(o.filename(e[0].fq_path));t=d.intl.formatMessage({id:"TAukDw",defaultMessage:"Restored <strong>{filename}</strong>."},{strong:e=>`<strong>${e}</strong>`,filename:s}),t=new c.HTML(t)}else t=d.intl.formatMessage({id:"8N7KT8",defaultMessage:"{count, plural, one{Restored {count} file.} other{Restored {count} files.}}"},{count:s});_.Notify.success(t,30)}})),define("metaserver/static/js/files_view/file_actions/file_from_metadata",["require","exports","metaserver/static/js/browse/models"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.folderFromFolderMetadata=t.fileFromMetadata=void 0;t.fileFromMetadata=(e,t)=>{if("file"===t[".tag"]){const i=t,r=Object.assign(Object.assign({},e),{fq_path:i.path_display||e.fq_path,icon:i.icon+"_32",revision_id:i.rev,file_id:i.id});return new s.File(r)}return"folder"===t[".tag"]?new s.File(Object.assign(Object.assign({},e),{fq_path:t.path_display||e.fq_path})):e};t.folderFromFolderMetadata=e=>new s.File({file_id:e.id,fq_path:e.path_display||"",icon:e.icon,is_dir:!0})})),define("metaserver/static/js/files_view/file_actions/rollback",["require","exports","tslib","metaserver/static/js/browse/api","metaserver/static/js/core/i18n"],(function(e,t,s,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rollback=void 0,i=s.__importStar(i);t.rollback=({changeset_data:e,userId:t,onSuccess:s})=>{const a={};for(const{ns_id:t,op_id:s}of e){const e=parseInt(s.slice(6),10);a.hasOwnProperty(t)?a[t].push(e):a[t]=[e]}i.rollbackChangeSets({changesets:a,onSuccess:s,userId:t,progressText:r.intl.formatMessage({id:"wKzr7W",defaultMessage:"Undoing"})})}})),define("metaserver/static/js/folder_overview/data/reducer",["require","exports","metaserver/static/js/browse/data/types","metaserver/static/js/browse/models","metaserver/static/js/folder_overview/data/types","metaserver/static/js/folder_overview/utils","metaserver/static/js/search/single_page/data/types"],(function(e,t,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.folderOverviewReducer=t.defaultFolderOverviewState=void 0,t.defaultFolderOverviewState={folderDataCache:{},fileIdCache:{},accountCache:{},nsIdCache:{},componentDataCache:{}};const n=(e,t)=>{const s=e.componentDataCache[t];return s||{requiredComponents:[],loadedComponents:[],hasFailedToLoad:!1,descriptionHasFocus:!1}},l=e=>{const t={};return e.forEach(e=>{t[(0,a.normalizePath)(e.fq_path)]=e.target_ns?`ns:${e.target_ns}/`:`ns:${e.ns_id}/${e.ns_path}`}),t};t.folderOverviewReducer=function(e=t.defaultFolderOverviewState,c){switch(c.type){case r.ActionTypes.UPDATE_FOLDER_DATA_CACHE:return((e,{fileId:t,folderData:s})=>Object.assign(Object.assign({},e),{folderDataCache:Object.assign(Object.assign({},e.folderDataCache),{[t]:Object.assign(Object.assign({},e.folderDataCache[t]),s)})}))(e,c.payload);case r.ActionTypes.UPDATE_FILE_ID_CACHE:return((e,{fileIdCache:t})=>Object.assign(Object.assign({},e),{fileIdCache:Object.assign(Object.assign({},e.fileIdCache),t)}))(e,c.payload);case r.ActionTypes.UPDATE_ACCOUNT_CACHE:return((e,{accountCache:t})=>Object.assign(Object.assign({},e),{accountCache:Object.assign(Object.assign({},e.accountCache),t)}))(e,c.payload);case r.ActionTypes.SET_REQUIRED_COMPONENTS:return((e,{componentNamespace:t,requiredComponents:s})=>{const i=n(e,t);return Object.assign(Object.assign({},e),{componentDataCache:Object.assign(Object.assign({},e.componentDataCache),{[t]:Object.assign(Object.assign({},i),{requiredComponents:s})})})})(e,c.payload);case s.ActionTypes.SET_CONTEXT:return((e,{context:t})=>Object.assign(Object.assign({},e),{nsIdCache:Object.assign(Object.assign({},e.nsIdCache),{[(0,a.normalizePath)(t.currentFQPath)]:`ns:${t.currentNSID}/${t.currentNSPath}`})}))(e,c.payload);case r.ActionTypes.REMOVE_LOADED_COMPONENT:return((e,{componentNamespace:t,component:s})=>{const i=n(e,t),r=i.loadedComponents;return Object.assign(Object.assign({},e),{componentDataCache:Object.assign(Object.assign({},e.componentDataCache),{[t]:Object.assign(Object.assign({},i),{loadedComponents:r.filter(e=>e!==s)})})})})(e,c.payload);case r.ActionTypes.ADD_LOADED_COMPONENT:return((e,{componentNamespace:t,component:s})=>{const i=n(e,t),r=i.loadedComponents;return r.includes(s)?e:Object.assign(Object.assign({},e),{componentDataCache:Object.assign(Object.assign({},e.componentDataCache),{[t]:Object.assign(Object.assign({},i),{loadedComponents:[...r,s]})})})})(e,c.payload);case r.ActionTypes.SET_FAILED_TO_LOAD:return((e,{componentNamespace:t,hasFailedToLoad:s})=>{const i=n(e,t);return Object.assign(Object.assign({},e),{componentDataCache:Object.assign(Object.assign({},e.componentDataCache),{[t]:Object.assign(Object.assign({},i),{hasFailedToLoad:s})})})})(e,c.payload);case r.ActionTypes.SET_DESCRIPTION_HAS_FOCUS:return((e,{componentNamespace:t,descriptionHasFocus:s})=>{const i=n(e,t);return Object.assign(Object.assign({},e),{componentDataCache:Object.assign(Object.assign({},e.componentDataCache),{[t]:Object.assign(Object.assign({},i),{descriptionHasFocus:s})})})})(e,c.payload);case s.ActionTypes.SET_UNSORTED_FILES:return((e,{unsortedFiles:t})=>{const s=t.filter(e=>e.is_dir).toArray();return Object.assign(Object.assign({},e),{nsIdCache:Object.assign(Object.assign({},e.nsIdCache),l(s))})})(e,c.payload);case o.ActionTypes.SET_RESULTS:case o.ActionTypes.APPEND_RESULTS:return((e,{searchResults:t})=>{const s=t.results.filter(e=>e instanceof i.File&&e.is_dir);return Object.assign(Object.assign({},e),{nsIdCache:Object.assign(Object.assign({},e.nsIdCache),l(s))})})(e,c.payload)}return e}})),define("metaserver/static/js/folder_overview/data/store",["require","exports","metaserver/static/js/folder_overview/data/reducer","metaserver/static/js/redux/store","metaserver/static/js/redux/namespaces"],(function(e,t,s,i,r){"use strict";let a;Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreForFolderOverview=void 0;t.getStoreForFolderOverview=()=>(a||(a=(0,i.getStoreAndRegisterReducers)({[r.FOLDER_OVERVIEW_NAMESPACE_KEY]:s.folderOverviewReducer})),a)})),define("metaserver/static/js/folder_overview/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DescriptionSaveState=t.ActionTypes=void 0,(function(e){e.UPDATE_FOLDER_DATA_CACHE="FOLDER_OVERVIEW/UPDATE_FOLDER_DATA_CACHE",e.UPDATE_FILE_ID_CACHE="FOLDER_OVERVIEW/UPDATE_FILE_ID_CACHE",e.REMOVE_LOADED_COMPONENT="FOLDER_OVERVIEW/REMOVE_LOADED_COMPONENT",e.ADD_LOADED_COMPONENT="FOLDER_OVERVIEW/ADD_LOADED_COMPONENT",e.SET_FAILED_TO_LOAD="FOLDER_OVERVIEW/SET_FAILED_TO_LOAD",e.SET_DESCRIPTION_HAS_FOCUS="FOLDER_OVERVIEW/SET_DESCRIPTION_HAS_FOCUS",e.UPDATE_ACCOUNT_CACHE="FOLDER_OVERVIEW/UPDATE_ACCOUNT_CACHE",e.SET_REQUIRED_COMPONENTS="FOLDER_OVERVIEW/SET_REQUIRED_COMPONENTS"})(t.ActionTypes||(t.ActionTypes={})),(function(e){e.IDLE="IDLE",e.SAVING="SAVING",e.CONFLICT="CONFLICT",e.ERROR="ERROR"})(t.DescriptionSaveState||(t.DescriptionSaveState={}))})),define("metaserver/static/js/folder_overview/utils",["require","exports","tslib","metaserver/static/js/filepath/filepath","metaserver/static/js/browse/models","metaserver/static/js/core/i18n","typescript/libraries/comments2/src/components/folder_overview_utils/index"],(function(e,t,s,i,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canEditOverviewForFile=t.userInitials=t.fileToContentReferenceId=t.pathFromSharingFolder=t.extractSharedFolderPath=t.extractSharedFolderId=t.getFileExtension=t.convertContentReferencesToSortedFiles=t.hasUnsavedDescriptionDraft=t.normalizePath=t.convertDbxUserToIUser=void 0,i=s.__importStar(i);t.convertDbxUserToIUser=e=>({id:e.id.toString(),name:{display:e.display_name,initials:[e.fname.substr(0,1),e.lname.substr(0,1)].join(""),public:e.familiar_name},photoUrl:e.initials_url});t.normalizePath=e=>i.normalize(e).toLowerCase();t.hasUnsavedDescriptionDraft=e=>{if(!e)return!1;try{const t=void 0===e.description||""===e.description||(0,o.isEmptyDescription)(JSON.parse(e.description)),s=void 0===e.descriptionDraft||""===e.descriptionDraft||(0,o.isEmptyDescription)(JSON.parse(e.descriptionDraft));if(t&&s)return!1}catch(e){}return e.description!==e.descriptionDraft&&void 0!==e.descriptionDraft};t.convertContentReferencesToSortedFiles=e=>{const s=[];e.forEach(e=>{const i={file_id:e.file_id,fq_path:e.fq_path,href:e.href,icon:e.icon,is_cloud_doc:e.is_cloud_doc,is_dir:e.is_dir,thumbnail_url_tmpl:e.thumbnail_url_tmpl,ns_id:e.ns_id,ns_path:e.ns_path,sjid:e.sjid,isDeleted:e.is_deleted,ext:(0,t.getFileExtension)(e.fq_path)},a=new r.File(i);s.push(a)});const i=(0,a.case_insensitive_comparator)(!0);return s.sort((e,t)=>i(r.File.getFilename(e),r.File.getFilename(t)))};t.getFileExtension=e=>{if(!e)return"";const t=i.file_extension(e);return t?`.${t}`:""};t.extractSharedFolderId=e=>{const t=/^ns:([0-9]+)\/?/.exec(e);return t?t[1]:void 0};t.extractSharedFolderPath=e=>{const t=/^ns:[0-9]+\/?(.*)/.exec(e);return t?t[1]:void 0};t.pathFromSharingFolder=(e,t)=>e.length>=t.length?i.filename(t):[i.filename(e),...t.substr(e.length).split("/").filter(e=>!!e)].join("  ");t.fileToContentReferenceId=e=>e.is_dir&&e.target_ns?`ns:${e.target_ns}`:e.file_id;t.userInitials=e=>(e=>"fname"in e)(e)?e.fname.substr(0,1)+e.lname.substr(0,1):e.name.given_name.substr(0,1)+e.name.surname.substr(0,1);t.canEditOverviewForFile=e=>(!e.is_dir||!e.isDeleted)&&(e.target_ns?!e._mount_access_perms||!(!e._mount_access_perms||!e._mount_access_perms.includes("can_edit")):!e.read_only)})),define("metaserver/static/js/search/single_page/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(function(e){e.SET_VARIANT="SEARCH/SET_VARIANT",e.SET_USER="SEARCH/SET_USER",e.SET_EXPERIMENTS="SEARCH/SET_EXPERIMENTS",e.SET_PATH="SEARCH/SET_PATH",e.SET_QUERY="SEARCH/SET_QUERY",e.SET_FILE_CATEGORIES="SEARCH/SET_FILE_CATEGORIES",e.SET_RESULTS="SEARCH/SET_RESULTS",e.CLEAR_RESULTS="SEARCH/CLEAR_RESULTS",e.APPEND_RESULTS="SEARCH/APPEND_RESULTS",e.SET_LOADING_STATE="SEARCH/SET_LOADING_STATE",e.SET_SESSION_ID="SEARCH/SET_SESSION_ID",e.SET_SEARCH_SESSION_ID="SEARCH/SET_SEARCH_SESSION_ID",e.SET_SEARCH_SESSION_QUERY_ID="SEARCH/SET_SEARCH_SESSION_QUERY_ID",e.SET_PREVIOUS_SEARCH_SESSION_QUERY_ID="SEARCH/SET_PREVIOUS_SEARCH_SESSION_QUERY_ID",e.SET_REQUEST_ID="SEARCH/SET_REQUEST_ID",e.SET_SELECTION="SEARCH/SET_SELECTION",e.SET_PREVIEW_FILE_ID="SEARCH/SET_PREVIEW_FILE",e.SET_PREVIEW_COMMENTS_THREAD_ID="SEARCH/SET_PREVIEW_COMMENTS_THREAD_ID",e.SET_SORT_ORDER="SEARCH/SET_SORT_ORDER",e.CLEAR_TTI_COMPONENTS="SEARCH/CLEAR_TTI_COMPONENTS",e.SET_IMAGE_SUGGESTION="SEARCH/SET_IMAGE_SUGGESTION",e.UPDATE_FILE_IN_RESULTS="SEARCH/UPDATE_FILE_IN_RESULTS",e.UPDATE_RESULTS="SEARCH/UPDATE_RESULTS",e.REMOVE_RESULTS="SEARCH/REMOVE_RESULTS",e.RENAME_FILE="SEARCH/RENAME_FILE",e.DELETE_FILES="SEARCH/DELETE_FILES",e.PURGE_FILES="SEARCH/PURGE_FILES",e.RESTORE_FILES="SEARCH/RESTORE_FILES",e.SET_QUERY_HISTORY="SEARCH/SET_QUERY_HISTORY",e.SET_HIGHLIGHTED_ROW="SEARCH/SET_HIGHLIGHTED_ROW",e.UPDATE_QUERY_SUGGESTIONS_CACHE="SEARCH/UPDATE_QUERY_SUGGESTIONS_CACHE",e.SET_LAST_QUERY_WITH_QUERY_SUGGESTIONS_LOADED="SEARCH/SET_LAST_QUERY_WITH_QUERY_SUGGESTIONS_LOADED",e.SET_FILTERED_ACCOUNT_ID="SEARCH/SET_FILTERED_ACCOUNT_ID",e.SET_SUGGESTED_PEOPLE_FOR_FILTERS="SEARCH/SET_SUGGESTED_PEOPLE_FOR_FILTERS",e.UPDATE_PEOPLE_SUGGESTIONS_CACHE="SEARCH/UPDATE_PEOPLE_SUGGESTIONS_CACHE",e.SET_LAST_QUERY_WITH_PEOPLE_SUGGESTIONS_LOADED="SEARCH/SET_LAST_QUERY_WITH_PEOPLE_SUGGESTIONS_LOADED",e.SET_DWELL_TIME="SEARCH/SET_DWELL_TIME",e.SET_QUERY_START_TIME="SEARCH/SET_QUERY_START_TIME",e.SET_IS_CREATING_SHARED_LINK="SEARCH/SET_IS_CREATING_SHARED_LINK",e.UPDATE_TAGS_SUGGESTIONS_CACHE="SEARCH/UPDATE_TAGS_SUGGESTIONS_CACHE",e.SET_LAST_QUERY_WITH_TAGS_SUGGESTIONS_LOADED="SEARCH/SET_LAST_QUERY_WITH_TAGS_SUGGESTIONS_LOADED",e.SET_LAST_MODIFIED_DATE="SEARCH/SET_LAST_MODIFIED_DATE",e.SET_DATE_TAKEN="SEARCH/SET_DATE_TAKEN_VALUE",e.SET_SELECTED_DIMENSIONS="SEARCH/SET_SELECTED_DIMENSIONS",e.SET_MEDIA_DATA="SEARCH/SET_MEDIA_DATA",e.UPDATE_RESULT_SUGGESTIONS_CACHE="SEARCH/UPDATE_RESULT_SUGGESTIONS_CACHE",e.SET_EXPANDED_BLADE="SEARCH/SET_EXPANDED_BLADE"})(t.ActionTypes||(t.ActionTypes={}))})),define("metaserver/static/js/tagging/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAX_TAGS_PER_ITEM=void 0,t.MAX_TAGS_PER_ITEM=20})),define("metaserver/static/js/tagging/data/action_creators",["require","exports","tslib","lodash","metaserver/static/js/core/i18n","metaserver/static/js/filepath/filepath","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/tagging/data/selectors/index","metaserver/static/js/tagging/data/types","metaserver/static/js/tagging/api","metaserver/static/js/tagging/constants","metaserver/static/js/tagging/logger","metaserver/static/js/tagging/utils"],(function(e,t,s,i,r,a,o,n,l,c,d,_,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAllTagsSuggestions=t.fetchTagsForFiles=t.setAllTags=t.fileRename=t.removeTagFromFiles=t.addTagToFiles=void 0,a=s.__importStar(a),n=s.__importStar(n),_=s.__importStar(_);const p=({fileToTags:e,override:t})=>({type:l.ActionTypes.SET_FILE_TO_TAGS_MAP,payload:{fileToTags:e,override:t}});t.addTagToFiles=function({user:e,files:t,tag:l,onPartialError:m,onSuccess:h,autoTagFolderContents:f,actionSurface:E}){return(g,S)=>s.__awaiter(this,void 0,void 0,(function*(){const s=n.selectTagsByFile(S()),T=(0,u.tagTextToTagUserGeneratedTag)(l),y=t[0];if(1!==t.length||f)try{o.Snackbar.sync(r.intl.formatMessage({id:"U2RxSG",defaultMessage:"Tagging"}),!0,"add-tag-bulk");let s=!1;if(f){const i=yield c.tagsApiClient.listFolder((0,u.getFileObjectNsIdAndPath)(y).nsPath,e);t=i.files,s=i.reachedLimit}const b=yield c.tagsApiClient.addTagBulk(e,l,t),v=t.filter(e=>-1===b.findIndex(t=>{const s=(0,u.getFileObjectNsIdAndPath)(e);return s.nsId===t.ns_id&&s.nsPath===t.ns_path})),A=b.length,I=v.length,C=t.filter(e=>{var t;return(null===(t=e.tags)||void 0===t?void 0:t.length)===d.MAX_TAGS_PER_ITEM}).length,R=t.filter(e=>!(0,u.fileHasEditPermissions)(e)).length,O=v.reduce((e,t)=>{const s=(0,u.getFileMapKey)(t),r=n.selectTagsByFile(S())[s],a=(0,i.uniq)([T,...null!=r?r:[]]);return Object.assign(Object.assign({},e),{[s]:a})},{});if(_.logAddTag(e,v,l,E),g(p({fileToTags:O})),0===b.length&&!s)return o.Snackbar.close(),void h(!0,I,f);if(m(v),s)return void o.Snackbar.complete(r.intl.formatMessage({id:"Y9TAaz",defaultMessage:"Tagged {numOfSuccesses} of the files in {folderName}."},{numOfSuccesses:I,folderName:a.filename(y.fq_path)}),"add-tag-bulk");if(C>0&&R>0)return void o.Snackbar.complete(r.intl.formatMessage({id:"Evli0B",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldnt tag {numOfFailures} files or folders."},{numOfSuccesses:I,tag:l,numOfFailures:A}),"add-tag-bulk");if(C>0)return void o.Snackbar.complete(r.intl.formatMessage({id:"jk4Wg3",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldnt tag {numOfFailures} items that dont have room for more tags."},{numOfSuccesses:I,tag:l,numOfFailures:A}),"add-tag-bulk");o.Snackbar.complete(r.intl.formatMessage({id:"JmcOdr",defaultMessage:"Tagged {numOfSuccesses} items #{tag}. Couldnt tag {numOfFailures} files or folders without editing access."},{numOfSuccesses:I,tag:l,numOfFailures:A}),"add-tag-bulk")}catch(i){g(p({fileToTags:s,override:!0})),_.logFailTag(e,t,l,E),o.Snackbar.fail(r.intl.formatMessage({id:"8bKaBW",defaultMessage:"Couldnt tag these files or folders."}),"add-tag-bulk")}else{const d=(0,u.getFileMapKey)(y),m=n.selectTagsByFile(S())[d],b=(0,i.uniq)([T,...null!=m?m:[]]);g(p({fileToTags:{[d]:b}}));try{yield c.tagsApiClient.addTag(e,l,y),_.logAddTag(e,t,l,E)}catch(i){return g(p({fileToTags:s,override:!0})),_.logFailTag(e,t,l,E),void o.Snackbar.fail(r.intl.formatMessage({id:"IibVuC",defaultMessage:"Couldnt add #{tag} to {fileName}."},{tag:l,fileName:a.filename(y.fq_path)}))}h(!1,1,f)}}))};t.removeTagFromFiles=function({user:t,files:i,tag:l,actionSurface:d}){return(m,h)=>s.__awaiter(this,void 0,void 0,(function*(){var f;const E=l.tag_text,g=n.selectTagsByFile(h());if(1===i.length){const e=(0,u.getFileMapKey)(i[0]),s=n.selectTagsByFile(h())[e],S=null!==(f=null==s?void 0:s.filter(e=>e.tag_text!==E))&&void 0!==f?f:[];m(p({fileToTags:{[e]:S}}));try{yield c.tagsApiClient.removeTag(t,E,i[0]),_.logRemoveTag(t,i,l,d)}catch(e){m(p({fileToTags:g,override:!0})),o.Snackbar.fail(r.intl.formatMessage({id:"zXNhaY",defaultMessage:"Couldnt remove #{tag} from {fileName}."},{tag:E,fileName:a.filename(i[0].fq_path)}))}return}const{showRemoveTagsModal:S}=yield new Promise((t,s)=>{e(["metaserver/static/js/tagging/components/remove_tags_modal"],t,s)}).then(s.__importStar);S({numOfFiles:i.length,tag:E,onRemoveClick:()=>s.__awaiter(this,void 0,void 0,(function*(){try{o.Snackbar.sync(r.intl.formatMessage({id:"FAj93H",defaultMessage:"Removing tags"}),!0,"remove-tag-bulk");const e=yield c.tagsApiClient.removeTagBulk(t,E,i),s=i.filter(t=>-1===e.findIndex(e=>{const s=(0,u.getFileObjectNsIdAndPath)(t);return s.nsId===e.ns_id&&s.nsPath===e.ns_path})),a=s.reduce((e,t)=>{var s;const i=(0,u.getFileMapKey)(t),r=n.selectTagsByFile(h())[i],a=null!==(s=null==r?void 0:r.filter(e=>e.tag_text!==E))&&void 0!==s?s:[];return Object.assign(Object.assign({},e),{[i]:a})},{});_.logRemoveTag(t,s,l,d),m(p({fileToTags:a})),o.Snackbar.complete(r.intl.formatMessage({id:"fXEVtA",defaultMessage:"Removed #{tag} from {numOfFiles} files."},{numOfFiles:s.length,tag:E}),"remove-tag-bulk")}catch(e){m(p({fileToTags:g,override:!0})),o.Snackbar.fail(r.intl.formatMessage({id:"YV4k+f",defaultMessage:"Couldnt remove #{tag}."},{tag:E}),"remove-tag-bulk")}}))})}))};t.fileRename=({file:e,newFile:t})=>({type:l.ActionTypes.FILE_RENAME,payload:{file:e,newFile:t}});t.setAllTags=({tags:e})=>({type:l.ActionTypes.SET_ALL_TAGS,payload:{tags:e}});t.fetchTagsForFiles=function({user:e,files:t,override:s=!1}){return(i,r)=>{0!==t.length&&c.tagsApiClient.getTags(e,t).then(e=>{i(p({fileToTags:e,override:s}))})}};t.fetchAllTagsSuggestions=function({user:e,onSuccess:s}){return(i,r)=>{void 0===n.selectAllTagsSuggestions(r())&&c.tagsApiClient.getAllTags(e).then(e=>{i((0,t.setAllTags)({tags:e})),null==s||s()})}}})),define("metaserver/static/js/tagging/api",["require","exports","tslib","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/tagging/utils","metaserver/static/js/browse/models"],(function(e,t,s,i,r,a){"use strict";function o(e){const t=(0,r.getFileObjectNsIdAndPath)(e);return{ns_id:t.nsId,ns_path:t.nsPath}}Object.defineProperty(t,"__esModule",{value:!0}),t.tagsApiClient=t.TagsApiClient=void 0;const n=e=>new Promise(t=>setTimeout(t,e));class l{getTags(e,t){return s.__awaiter(this,void 0,void 0,(function*(){const s=new i.DefaultUserApiV2Client(e),a={content_ids:t.map(o)};return(yield s.ns("manual_tagging").rpc("tags/get",a,{})).tags_by_content_id.reduce((e,{content_id:{ns_id:t,ns_path:s},tags:i,typed_tags:a})=>(e[(0,r.getFileObjectNsIdAndPathKey)({nsId:t,nsPath:s})]=((e,t)=>t?t.filter(r.isTextTag):e.map(e=>({".tag":"user_generated_tag",tag_text:e})))(i,a),e),{})}))}getAllTags(e){return s.__awaiter(this,void 0,void 0,(function*(){const t=new i.DefaultUserApiV2Client(e);return(yield t.ns("manual_tagging").rpc("tags/get_viewable_tags",void 0,{})).tag_and_counts.map(e=>e.typed_tag).filter(r.isTextTag)}))}addTag(e,t,r){return s.__awaiter(this,void 0,void 0,(function*(){const s=new i.DefaultUserApiV2Client(e),a={tag:t,content_id:o(r)};return(yield s.ns("manual_tagging").rpc("tag/add",a,{})).hlc}))}addTagBulk(e,t,r){return s.__awaiter(this,void 0,void 0,(function*(){const a=new i.DefaultUserApiV2Client(e),l={tag:t,content_ids:r.map(o)},c=yield a.ns("manual_tagging").rpc("tag/add_bulk",l,{});if("complete"===c[".tag"])return c.failed;if("failed"===c[".tag"])throw new Error("tag/add_bulk failed");const{async_job_id:d}=c,_=()=>s.__awaiter(this,void 0,void 0,(function*(){return yield a.ns("manual_tagging").rpc("tag/add_bulk/check",{async_job_id:d},{})}));let u=yield _();for(;"in_progress"===u[".tag"];)yield n(1e3),u=yield _();if("failed"===u[".tag"]||"other"===u[".tag"])throw new Error("tag/add_bulk failed");return u.failed}))}removeTag(e,t,r){return s.__awaiter(this,void 0,void 0,(function*(){const s=new i.DefaultUserApiV2Client(e),a={tag:t,content_id:o(r)};return(yield s.ns("manual_tagging").rpc("tag/remove",a,{})).hlc}))}removeTagBulk(e,t,r){return s.__awaiter(this,void 0,void 0,(function*(){const a=new i.DefaultUserApiV2Client(e),l={tag:t,content_ids:r.map(o)},c=yield a.ns("manual_tagging").rpc("tag/remove_bulk",l,{});if("complete"===c[".tag"])return c.failed;if("failed"===c[".tag"])throw new Error("tag/remove_bulk failed");const{async_job_id:d}=c,_=()=>s.__awaiter(this,void 0,void 0,(function*(){return yield a.ns("manual_tagging").rpc("tag/remove_bulk/check",{async_job_id:d},{})}));let u=yield _();for(;"in_progress"===u[".tag"];)yield n(1e3),u=yield _();if("failed"===u[".tag"]||"other"===u[".tag"])throw new Error("tag/remove_bulk failed");return u.failed}))}listFolder(e,t){var r,o;return s.__awaiter(this,void 0,void 0,(function*(){try{"/"===e&&(e="");const s={fq_path:e,include_deleted:!1,sort_is_ascending:!1,sort_folders_first:!1,include_xattrs:!1,include_folder_overview:!1};let n=!1;const l=[],c=new i.DefaultUserApiV2Client(t);let d=yield c.ns("files").rpc("browse",s,{});for(null===(r=d.paginated_file_info)||void 0===r||r.forEach(e=>e.file_info&&l.push(e.file_info));d.has_more;){if(l.length>700){n=!0;break}d=yield c.ns("files").rpc("browse_continue",{cursor:d.next_request_voucher},{}),null===(o=d.paginated_file_info)||void 0===o||o.forEach(e=>e.file_info&&l.push(e.file_info))}return{files:l.map(e=>a.File.fromAnyFileObject(e)),reachedLimit:n}}catch(e){throw new Error("list_folder API error")}}))}}t.TagsApiClient=l,t.tagsApiClient=new l})),define("typescript/libraries/comments2/src/components/folder_overview_utils/index",["require","exports","typescript/libraries/comments2/src/components/folder_overview_utils/description_utils"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyDescription=void 0,Object.defineProperty(t,"isEmptyDescription",{enumerable:!0,get:function(){return s.isEmptyDescription}})})),define("typescript/libraries/comments2/src/components/folder_overview_utils/description_utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmptyDescription=void 0;t.isEmptyDescription=e=>{if(!e)return!0;if(0===e.blocks.length)return!0;if(e.blocks.length>1)return!1;if("unstyled"!==e.blocks[0].type)return!1;return 0===e.blocks.map(e=>e.text).join("\n").replace(/%u200B/g,"").trim().length}}));
//# sourceMappingURL=pkg-file-upload-pap-logging.min.js-vflkq8bKT.map