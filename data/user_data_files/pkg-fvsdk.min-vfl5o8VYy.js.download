define("typescript/dropbox/proto/edison_dws2/messages_pb",["require","exports","@bufbuild/protobuf"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.EdisonRequest_ModulePreload=i.EdisonRequest_CssPreload=i.EdisonRequest_ServiceMethodPrefetch=i.EdisonRequest_Prefetch=i.EdisonRequest=i.EdisonInitParams=i.PrefetchArguments=void 0;class r extends t.Message{constructor(e){super(),this.isFromOfficeIp=!1,t.proto3.util.initPartial(e,this)}static fromBinary(e,i){return(new r).fromBinary(e,i)}static fromJson(e,i){return(new r).fromJson(e,i)}static fromJsonString(e,i){return(new r).fromJsonString(e,i)}static equals(e,i){return t.proto3.util.equals(r,e,i)}}i.PrefetchArguments=r,r.runtime=t.proto3,r.typeName="edison_dws2.PrefetchArguments",r.fields=t.proto3.util.newFieldList(()=>[{no:1,name:"is_from_office_ip",kind:"scalar",T:8},{no:2,name:"proto_arguments",kind:"message",T:t.Any}]);class a extends t.Message{constructor(e){super(),this.rpcProxyUrl="",this.atlasservlet="",this.pageName="",this.pageLifecycle="",this.activeUserId=t.protoInt64.zero,this.activeTeamId=t.protoInt64.zero,this.uriPath="",this.legacyController="",this.legacyAction="",this.isOfficeIp=!1,this.staticRepoRev="",this.dws2RepoRev="",this.streamingEnabled=!1,this.rollupFormat="",this.entryPointModuleName="",this.beforeRenderModuleName="",this.isDws2Stage=!1,t.proto3.util.initPartial(e,this)}static fromBinary(e,i){return(new a).fromBinary(e,i)}static fromJson(e,i){return(new a).fromJson(e,i)}static fromJsonString(e,i){return(new a).fromJsonString(e,i)}static equals(e,i){return t.proto3.util.equals(a,e,i)}}i.EdisonInitParams=a,a.runtime=t.proto3,a.typeName="edison_dws2.EdisonInitParams",a.fields=t.proto3.util.newFieldList(()=>[{no:22,name:"rpc_proxy_url",kind:"scalar",T:9},{no:2,name:"atlasservlet",kind:"scalar",T:9},{no:3,name:"page_name",kind:"scalar",T:9},{no:15,name:"page_lifecycle",kind:"scalar",T:9},{no:4,name:"active_user_id",kind:"scalar",T:4},{no:5,name:"active_team_id",kind:"scalar",T:4},{no:6,name:"uri_path",kind:"scalar",T:9},{no:9,name:"legacy_controller",kind:"scalar",T:9},{no:10,name:"legacy_action",kind:"scalar",T:9},{no:11,name:"is_office_ip",kind:"scalar",T:8},{no:12,name:"static_repo_rev",kind:"scalar",T:9},{no:13,name:"dws2_repo_rev",kind:"scalar",T:9},{no:14,name:"streaming_enabled",kind:"scalar",T:8},{no:17,name:"rollup_format",kind:"scalar",T:9},{no:25,name:"entry_point_module_name",kind:"scalar",T:9},{no:26,name:"before_render_module_name",kind:"scalar",T:9},{no:27,name:"is_dws2_stage",kind:"scalar",T:8}]);class n extends t.Message{constructor(e){super(),this.type={case:void 0},this.b64RequestKey="",t.proto3.util.initPartial(e,this)}static fromBinary(e,i){return(new n).fromBinary(e,i)}static fromJson(e,i){return(new n).fromJson(e,i)}static fromJsonString(e,i){return(new n).fromJsonString(e,i)}static equals(e,i){return t.proto3.util.equals(n,e,i)}}i.EdisonRequest=n,n.runtime=t.proto3,n.typeName="edison_dws2.EdisonRequest",n.fields=t.proto3.util.newFieldList(()=>[{no:1,name:"prefetch",kind:"message",T:s,oneof:"type"},{no:2,name:"service_method_prefetch",kind:"message",T:o,oneof:"type"},{no:3,name:"css_preload",kind:"message",T:l,oneof:"type"},{no:5,name:"module_preload",kind:"message",T:c,oneof:"type"},{no:4,name:"b64_request_key",kind:"scalar",T:9}]);class s extends t.Message{constructor(e){super(),this.key="",this.initialPageAtlasservlet="",this.initialPageName="",t.proto3.util.initPartial(e,this)}static fromBinary(e,i){return(new s).fromBinary(e,i)}static fromJson(e,i){return(new s).fromJson(e,i)}static fromJsonString(e,i){return(new s).fromJsonString(e,i)}static equals(e,i){return t.proto3.util.equals(s,e,i)}}i.EdisonRequest_Prefetch=s,s.runtime=t.proto3,s.typeName="edison_dws2.EdisonRequest.Prefetch",s.fields=t.proto3.util.newFieldList(()=>[{no:1,name:"key",kind:"scalar",T:9},{no:2,name:"proto_arguments",kind:"message",T:t.Any},{no:3,name:"initial_page_atlasservlet",kind:"scalar",T:9},{no:4,name:"initial_page_name",kind:"scalar",T:9}]);class o extends t.Message{constructor(e){super(),this.service="",this.method="",this.initialPageAtlasservlet="",this.initialPageName="",t.proto3.util.initPartial(e,this)}static fromBinary(e,i){return(new o).fromBinary(e,i)}static fromJson(e,i){return(new o).fromJson(e,i)}static fromJsonString(e,i){return(new o).fromJsonString(e,i)}static equals(e,i){return t.proto3.util.equals(o,e,i)}}i.EdisonRequest_ServiceMethodPrefetch=o,o.runtime=t.proto3,o.typeName="edison_dws2.EdisonRequest.ServiceMethodPrefetch",o.fields=t.proto3.util.newFieldList(()=>[{no:1,name:"service",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"proto_arguments",kind:"message",T:t.Any},{no:5,name:"initial_page_atlasservlet",kind:"scalar",T:9},{no:6,name:"initial_page_name",kind:"scalar",T:9}]);class l extends t.Message{constructor(e){super(),this.cssPaths=[],t.proto3.util.initPartial(e,this)}static fromBinary(e,i){return(new l).fromBinary(e,i)}static fromJson(e,i){return(new l).fromJson(e,i)}static fromJsonString(e,i){return(new l).fromJsonString(e,i)}static equals(e,i){return t.proto3.util.equals(l,e,i)}}i.EdisonRequest_CssPreload=l,l.runtime=t.proto3,l.typeName="edison_dws2.EdisonRequest.CssPreload",l.fields=t.proto3.util.newFieldList(()=>[{no:1,name:"css_paths",kind:"scalar",T:9,repeated:!0}]);class c extends t.Message{constructor(e){super(),this.modulePaths=[],t.proto3.util.initPartial(e,this)}static fromBinary(e,i){return(new c).fromBinary(e,i)}static fromJson(e,i){return(new c).fromJson(e,i)}static fromJsonString(e,i){return(new c).fromJsonString(e,i)}static equals(e,i){return t.proto3.util.equals(c,e,i)}}i.EdisonRequest_ModulePreload=c,c.runtime=t.proto3,c.typeName="edison_dws2.EdisonRequest.ModulePreload",c.fields=t.proto3.util.newFieldList(()=>[{no:1,name:"module_paths",kind:"scalar",T:9,repeated:!0}])})),define("typescript/libraries/file-viewer/src/ui/close_button",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/ui/ui.module.css"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CloseButton=void 0,r=t.__importStar(r);i.CloseButton=({className:e,onClick:i,isInverse:t=!0})=>{const c=(0,a.useIntl)();return r.createElement("span",{className:null!=e?e:l.close},r.createElement(n.IconButton,{onClick:i,variant:"transparent",inverse:t},r.createElement(s.UIIcon,{"aria-label":c.formatMessage({id:"R/Hjn0",defaultMessage:"Close"}),src:o.CloseLine})))},i.CloseButton.displayName="CloseButton",i.CloseButton.displayName="CloseButton"})),define("typescript/libraries/file-viewer/src/plugins/layers",["require","exports","tslib","react","react-dom"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PortalWrapper=i.PortalTargetProvider=void 0,r=t.__importStar(r),a=t.__importDefault(a);class n extends r.Component{constructor(){super(...arguments),this.portalContainer=document.createElement("div"),this.attachPortalContainer=e=>{null!=e?(e.childNodes.forEach(i=>e.removeChild(i)),e.appendChild(this.portalContainer)):null!=this.portalContainer.parentElement&&this.portalContainer.parentElement.removeChild(this.portalContainer)}}render(){const{children:e}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{ref:this.attachPortalContainer}),e(this.portalContainer))}}i.PortalTargetProvider=n,n.displayName="PortalTargetProvider";class s extends r.PureComponent{render(){const{children:e,element:i}=this.props;return a.default.createPortal(e,i)}}i.PortalWrapper=s,s.displayName="PortalWrapper"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog",["require","exports","tslib","react","dig-components/typography","dig-components/buttons","metaserver/static/js/components/ui/css","react"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.UpsellDialog=void 0,r=t.__importStar(r);const l=({acceptText:e,declineText:i,titleText:t,bodyContent:s,afterAccept:l,afterDecline:c,uxaPrefix:d,redirectUrl:u,acceptLinkProps:p={},"data-testid":v})=>{const[f,_]=(0,o.useState)(!1),g=(0,o.useRef)(!0);r.useEffect(()=>(g.current=!0,()=>{g.current=!1}));return f?null:r.createElement("div",{className:"upsell-dialog-container","data-testid":v},r.createElement("div",{className:"upsell-dialog"},r.createElement(a.Title,{size:"standard",isBold:!0},t),s,r.createElement("div",{className:"upsell-footer"},r.createElement(n.Button,Object.assign({variant:"outline",href:u,onClick:()=>l(_),"data-uxa-log":`${d}-upsell-dialog-continue`},p),e),r.createElement("div",{className:"upsell-secondary-button"},r.createElement(n.Button,{variant:"transparent",onClick:()=>{_(!0),c&&c()},"data-uxa-log":`${d}-upsell-dialog-dismiss`},i)))))};l.displayName="UnstyledUpsellDialog",i.UpsellDialog=(0,s.requireCssWithComponent)(l,["/static/metaserver/static/css/file_viewer/upsell_dialog-vflLk_tpf.css"])})),define("metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog_api",["require","exports","tslib","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/clean/analytics"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.logReplayDialogAction=i.shouldShowReplayDialog=void 0;const n=e=>new r.DefaultUserApiV2Client(e);i.shouldShowReplayDialog=function(e,i){return t.__awaiter(this,void 0,void 0,(function*(){return yield n(e).ns("reel").rpc("get_replay_preview_entry_point_eligibility",{media_type:{".tag":i}},{})}))},i.logReplayDialogAction=function(e,i,r){return t.__awaiter(this,void 0,void 0,(function*(){e&&(yield n(e).ns("reel").rpc("log_replay_preview_entry_point_action",{entrypoint_action:{".tag":i}},{})),a.UserActivityLogger.log("web","replay-fvsdk-dialog-"+i,{variant:r})}))}})),define("metaserver/static/js/file_viewer/container",["require","exports","tslib","react","metaserver/static/js/clean/history","metaserver/static/js/cloud_docs/types","metaserver/static/js/open_in_app/actions","metaserver/static/js/sharing/async_share_modal_util","metaserver/static/js/clean/ui/snackbar_manager","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/clean/viewer","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/extensions/data/store","metaserver/static/js/integrations/zoom_share_dialog/async_modal","metaserver/static/js/core/browser","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/file_viewer/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/libraries/file-viewer/src/core/types/auth_modal","metaserver/static/js/auth/login_or_register/types","metaserver/static/js/file_viewer/constants","metaserver/static/js/action_bar/file_actions/portable/save_as_copy/save_as_copy","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/sharing/clean/util/link_util/parser","metaserver/static/js/clean/ui/error_boundary","metaserver/static/js/core/exception","metaserver/static/js/previews/ui/constants","metaserver/static/js/sync_everything/constants","metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer","typescript/libraries/file-viewer/src/logging/performance","metaserver/static/js/user_survey/user_survey","metaserver/static/js/privacy_consent/privacy_consent_cookies","js/browser/cookies","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/action_bar/file_actions/portable/file_conversion"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I,T,C,A,O,F,k,x,D,L,M){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewerContainerTestOnly=i.FileViewerContainer=i.useAuthModalKind=void 0,r=t.__importDefault(r),a=t.__importDefault(a),f=t.__importStar(f),P=t.__importStar(P);const R=({children:e})=>{const i=r.default.useRef(null),t=r.default.useRef(null);return r.default.useEffect(()=>{c.Snackbar.manager=c.Snackbar.manager?c.Snackbar.manager:i.current},[]),r.default.createElement("div",{ref:t},e,r.default.createElement(l.SnackbarManager,{ref:i,getParentElement:()=>t.current,useDigSnackbars:!0}))};R.displayName="SnackbarManagerContainer";const N=(e,i)=>{i&&(0,p.initializeStore)(i,[e])};i.useAuthModalKind=e=>r.default.useMemo(()=>{if(!e)return;return new x.ConsentCookieStore({}).hasPreviouslyDeclinedConsent()?void 0:D.Cookies.read("seen-sl-signup-modal")?D.Cookies.read("seen-sl-download-modal")?void 0:(D.Cookies.create("seen-sl-download-modal","true",30),b.LoginOrRegisterKind.DOWNLOAD):(D.Cookies.create("seen-sl-signup-modal","true",30),b.LoginOrRegisterKind.IMMEDIATE)},[e]);const j=({file:l,userId:c,shareModalVariant:p,openImmediatelyInApp:I,onCloseUrl:T,redirectOnClose:x,isEmbedded:D,brandingInfo:j,encryptionOptions:V,sharedLinkInfo:B,shareToken:U,sharePermission:K,authModalKind:z,copyLinkButtonOOBPreviewsVariant:H,fileViewOrigin:q,appDownloadInterstitialDismissed:W,initialPreviewSourceAction:G,initialPreviewSourceContext:Y,hidePageChrome:Z,showCloudDocPreview:X,allowAuthModal:Q})=>{const $=r.default.useMemo(()=>{const e=d.Viewer.get_viewer();return c?e.get_user_by_id(c):e.work_user||e.personal_user},[c]),{openInHelloSignSrc:J,urlSourceContext:ee,copyToDropbox:ie,presentInZoom:te,isCapture:re,shareEmail:ae,saveAs:ne,saveAsAction:se}=r.default.useMemo(()=>{var e,i,t;const r=new URLSearchParams(window.location.search);return{openInHelloSignSrc:null!==(e=r.get("hellosign"))&&void 0!==e?e:void 0,urlSourceContext:null!==(i=r.get("context"))&&void 0!==i?i:C.PreviewSourceContext.Unknown,presentInZoom:!!r.get("zoom"),isCapture:!!r.get("capture"),copyToDropbox:r.has("copy_to_dropbox"),shareEmail:null!==(t=r.get("share_email"))&&void 0!==t?t:void 0,saveAs:r.get("save_as"),saveAsAction:r.get("save_as_action")}},[]),oe=(0,i.useAuthModalKind)(Q),le=null!=z?z:oe,ce=Y||ee,[de,ue]=r.default.useState(l);r.default.useEffect(()=>{(0,u.log_js_modules_application_code_start)(),F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.CONTAINER_CODE_START),N(l,$)},[]);const pe=r.default.useMemo(()=>{if(T)return e=>{const{path:i,qargs:t}=a.default.deconstruct_url(T);x?"fileDeleted"===e?f.redirect(i):f.redirect(T):a.default.push_state(i,t)}},[T,x]),ve=r.default.useCallback((e,i)=>{if(e.revision_id===de.revision_id&&(0,S.isBrowseFile)(de))if(i){const e=Object.assign(Object.assign({},de),{file_id:i.file_id,revision_id:i.revision_id,fq_path:i.fq_path});ue(e),N(e,$)}else null==pe||pe("fileDeleted")},[de,pe,$]);r.default.useEffect(()=>{if(ce===C.PreviewSourceContext.PdfEditor&&k.UserSurvey.trackEvent("save_pdf_editor","previews"),ie&&l&&$&&U){const i=new URL(window.location.href);(0,y.portableSaveAsCopy)({fileName:(0,S.getFilename)(de),user:$,shareToken:U},{onNetworkRequest:()=>{new Promise((i,t)=>{e(["metaserver/static/js/action_bar/file_actions/portable/save_as_copy/snackbars"],i,t)}).then(t.__importStar).then(({saveCopySnackBarInProgress:e})=>{e(E.PREVIEWS_SNACKBAR_ID)})}}),i.searchParams.delete("copy_to_dropbox"),window.history.replaceState(i.href,"",i.href)}if(ne&&l&&$){const e=new URL(window.location.href);e.searchParams.delete("save_as"),e.searchParams.delete("save_as_action"),window.history.replaceState(e.href,"",e.href),(0,M.portableFileConversion)({file:l,sharedLinkInfo:B,sharePermission:K,shareToken:U,user:$,actionToTrigger:se})}if(ae||p&&p!==n.ShareModalVariant.closed&&$?new Promise((i,t)=>{e(["metaserver/static/js/browse/models"],i,t)}).then(t.__importStar).then(({File:e})=>{const i=new e(l);if(p!==n.ShareModalVariant.manageAccess||ae||i.is_unmounted){const e=ae?ae.split(","):[];(0,o.asyncShowPrefilledShareModal)({user:$,sharePrefillEmails:e,content:i})}else(0,o.asyncShowManageAccessModal)($,i,L.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE)}):le!==b.LoginOrRegisterKind.IMMEDIATE||$||re?te&&$&&(0,v.asyncShowModal)($.id,l.file_id,"file-viewer-modal-overlay","desktop"):(0,m.showAuthModal)({mode:w.AuthMode.REGISTER,kind:w.LoginOrRegisterKind.IMMEDIATE,encryptionOptions:V,loggingExtra:{source:"file_preview_initial_load"}}),I){const e=l;(0,s.openImmediately)(e.open_in_app_data)}f.get_uri().getQuery().sync_from_docsend&&(0,g.showDocSendSnackbar)($)},[]);const fe=void 0!==$&&q===h.FileViewOriginType.SHARE_PAGE,_e=q===h.FileViewOriginType.SHARED_LINK_PAGE,ge=q===h.FileViewOriginType.PAPER&&D,me=ce===C.PreviewSourceContext.FileLocking,we=P.parseLink(window.location.href),be=fe||_e||ge?r.default.createElement(R,null,r.default.createElement(O.FileViewer,{closeFile:pe,file:l,previewContentOnly:Z,showCloudDocPreview:X,sharedLinkInfo:B,sharePermission:K,shareToken:U,brandingInfo:j,user:$,encryptionOptions:V,previewSurface:fe?_.SDKPreviewSurface.INBAND_SHARE:ge?_.SDKPreviewSurface.SHARED_LINK_EMBED:_.SDKPreviewSurface.SHARED_LINK,canShowFileFlippers:!1,hideOpenInAppInterstitial:!!W,authModalKind:le,copyLinkButtonOOBPreviewsVariant:H,parsedSharedCopyLink:we,initialSourceAction:G,fileViewOrigin:q,sourceContext:ce})):r.default.createElement(R,null,r.default.createElement(O.FileViewer,{closeFile:pe,file:l,previewContentOnly:Z,showCloudDocPreview:X,user:$,brandingInfo:j,encryptionOptions:V,previewSurface:(0,A.isBackupBrowse)()?_.SDKPreviewSurface.BACKUP:me?_.SDKPreviewSurface.FILE_LOCKING:_.SDKPreviewSurface.STANDALONE_PREVIEW,canShowFileFlippers:!1,hideOpenInAppInterstitial:!!W,authModalKind:le,onFileChanged:ve,fileViewOrigin:q,sourceContext:ce}));return J&&((i,r,a)=>{new Promise((i,t)=>{e(["metaserver/static/js/integrations/hellosign_deep_integration/launcher"],i,t)}).then(t.__importStar).then(({getLauncher:e})=>{const t=e();return t.init({entryPoint:"file_preview_side_bar",file:i,user:r,source:a}),t}).then(e=>(e.launch(),e))})(de,$,J),D?r.default.createElement("div",{className:"embedded"},be):be};i.FileViewerContainerTestOnly=j,j.displayName="FileViewerContainer";i.FileViewerContainer=e=>r.default.createElement(I.ErrorBoundary,{onCatch:e=>(0,T.reportException)({err:e,tags:["file-viewer-container"],severity:"critical"})},r.default.createElement(j,Object.assign({},e)))})),define("typescript/libraries/file-viewer/src/right_rail/right_rail.module.css",["require","exports","css!typescript/libraries/file-viewer/src/right_rail/right_rail.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.overlay=i.editPluginContainer=i.previewRightRailWrapper=i.skeletonExpanded=i.skeletonCollapsed=i.rightRailContainer=void 0,i.rightRailContainer="_rightRailContainer_y9oqf_1",i.skeletonCollapsed="_skeletonCollapsed_y9oqf_7",i.skeletonExpanded="_skeletonExpanded_y9oqf_8",i.previewRightRailWrapper="_previewRightRailWrapper_y9oqf_20",i.editPluginContainer="_editPluginContainer_y9oqf_24",i.overlay="_overlay_y9oqf_37";i.default={rightRailContainer:"_rightRailContainer_y9oqf_1",skeletonCollapsed:"_skeletonCollapsed_y9oqf_7",skeletonExpanded:"_skeletonExpanded_y9oqf_8",previewRightRailWrapper:"_previewRightRailWrapper_y9oqf_20",editPluginContainer:"_editPluginContainer_y9oqf_24",overlay:"_overlay_y9oqf_37"}})),define("typescript/libraries/file-viewer/src/ui/error_boundary",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ErrorBoundary=void 0,r=t.__importDefault(r);class o extends r.default.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){this.props.onException(e)}render(){const{fallback:e,children:i}=this.props;return this.state.hasError?e:i}}o.displayName="_ErrorBoundary";i.ErrorBoundary=({children:e,fallback:i,previewKey:t,onError:l})=>{const c=(0,a.useDispatch)(),d=(0,a.useSelector)(e=>t?(0,s.getPreviewMetadata)(e,t):void 0),u=r.default.useCallback(e=>{var i;null==l||l(e),c((0,n.reportException)({error:e,fileType:(null===(i=null==d?void 0:d.content)||void 0===i?void 0:i[".tag"])||"unknown",isCritical:!0}))},[d]);return r.default.createElement(o,{fallback:i,children:e,onException:u})},i.ErrorBoundary.displayName="ErrorBoundary"})),define("typescript/libraries/file-viewer/src/plugins/types",["require","exports","typescript/libraries/file-viewer/src/core/types/plugins/lifecycle"],(function(e,i,t){"use strict";function r(e){return"editUI"in e?e:null}function a(e){return"fullscreenLayer"in e?e:null}Object.defineProperty(i,"__esModule",{value:!0}),i.PluginInitialParams=i.isSnackbarManagerPlugin=i.isToolbarPlugin=i.isEditPluginFullscreenInstance=i.parseFullscreenEditPlugin=i.isEditPluginOverlayInstance=i.parseEditOverlayPlugin=i.isActionBarPlugin=i.parseActionBarPlugin=i.isRightRailPlugin=i.parseRightRailPlugin=void 0,i.parseRightRailPlugin=function(e){return"rightRailUI"in e?e:null},i.isRightRailPlugin=function(e){return!!e&&"rightRailUI"in e},i.parseActionBarPlugin=function(e){return"actionDefinitions"in e?e:null},i.isActionBarPlugin=function(e){return"actionDefinitions"in e},i.parseEditOverlayPlugin=r,i.isEditPluginOverlayInstance=function(e){return!!e&&!!r(e)},i.parseFullscreenEditPlugin=a,i.isEditPluginFullscreenInstance=function(e){return!!e&&!!a(e)},i.isToolbarPlugin=function(e){return"toolbarUI"in e},i.isSnackbarManagerPlugin=function(e){return"isSnackbarVisible"in e},Object.defineProperty(i,"PluginInitialParams",{enumerable:!0,get:function(){return t.PluginInitialParams}})})),define("typescript/libraries/file-viewer/src/plugins/selectors/active_plugin",["require","exports","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t){"use strict";function r(e,i){const t=e.plugins[i];if(null==t)return;const{activeRightRailPluginId:r}=t;return r}function a(e,i){const t=e.plugins[i];if(null==t)return;const{activeEditPluginId:r}=t;return r}function n(e,i){const n=a(e,i);return n||((0,t.isRightRailOpen)(e,i)?r(e,i):void 0)}Object.defineProperty(i,"__esModule",{value:!0}),i.isToolbarRenameActive=i.getToolBarOverride=i.getSelectedHideContentPanePluginId=i.isPluginEditMode=i.getActivePluginId=i.getSelectedEditPluginId=i.getSelectedRightRailPluginId=void 0,i.getSelectedRightRailPluginId=r,i.getSelectedEditPluginId=a,i.getActivePluginId=n,i.isPluginEditMode=function(e,i){return!!a(e,i)},i.getSelectedHideContentPanePluginId=function(e,i){const t=e.plugins[i];if(null==t)return;const{hideContentPanePluginId:r}=t;return r},i.getToolBarOverride=function(e,i){if(e.toolbar.override){if("fvsdk"===e.toolbar.overridePluginId)return e.toolbar.override;const t=n(e,i);if(e.toolbar.overridePluginId===t)return e.toolbar.override}},i.isToolbarRenameActive=function(e){return e.isToolbarRenameActive}})),define("typescript/libraries/file-viewer/src/plugins/utils",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.isPluginEditMode=void 0;i.isPluginEditMode=e=>null!=e&&"edit"===e.type})),define("typescript/libraries/file-viewer/src/core/utils/browser_detection",["require","exports"],(function(e,i){"use strict";function t(e=navigator.userAgent){const i=(function(e){const i=e.toLowerCase(),t=/(ipad)/.exec(i)||/(edge)[ \/]([\w.]+)/.exec(i)||/(edg)[ \/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||/(trident).*? rv:([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[],r=i.match(/version\/([\d.]+)/i);let a=null!=r?t[1]:null;return"webkit"===a&&(a=null!=r?r[1]:null),{browser:t[1]||"",version:a||t[2]||"0",userAgent:e}})(e);return"trident"===i.browser&&(i.browser="msie"),i}Object.defineProperty(i,"__esModule",{value:!0}),i.mac=i.is_mobile_or_tablet=i.is_tablet=i.is_android=i.is_supported_mobile_browser=i.windows=i.iphone=i.mozilla=i.edge=i.safari=i.ipad=i.ipod=i.get_browser_info=void 0,i.get_browser_info=t;const r=t();function a(e=navigator.userAgent){const t=(e||"").toLowerCase();return i.ipod||i.iphone||-1!==t.indexOf("tizen")||-1!==t.indexOf("android")&&-1!==t.indexOf("mobile")||-1!==t.indexOf("bb10")||-1!==t.indexOf("netfront")||/windows phone|opera mini|blackberry|nokia/.test(t)||-1!==t.indexOf("firefox")&&-1!==t.indexOf("mobile")||-1!==t.indexOf("googlebot-mobile")||-1!==t.indexOf("iemobile")||-1!==t.indexOf("opera mobi")||/ucweb|ucbrowser/.test(t)||-1!==t.indexOf("microsoft office mobile")}function n(e=navigator.userAgent){const i=(e||"").toLowerCase();return-1!==i.indexOf("android")||-1!==i.indexOf("silk")}function s(e=navigator.userAgent){return i.ipad||n(e)&&!a(e)}i.ipod=Boolean(/(ipod)/.exec(navigator.userAgent.toLowerCase())),i.ipad="ipad"===r.browser||void 0,i.safari=!("webkit"!==r.browser&&!Boolean(i.ipad))||void 0,i.edge="edge"===r.browser||"edg"===r.browser,i.mozilla="mozilla"===r.browser||void 0,i.iphone=Boolean(/(iphone)/.exec(navigator.userAgent.toLowerCase())),i.windows=/win(16|nt|dows)/.test(navigator.userAgent.toLowerCase()),i.is_supported_mobile_browser=a,i.is_android=n,i.is_tablet=s,i.is_mobile_or_tablet=function(e=navigator.userAgent){return a(e)||s(e)},i.mac=Boolean(/(macintosh)/.exec(navigator.userAgent.toLowerCase()))})),define("typescript/libraries/file-viewer/src/hooks/selectors",["require","exports","react-redux","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.usePreviewState=i.useParameterizedSelector=i.usePreviewKeySelector=i.useFileViewerSelector=i.useCurrentFileMetadata=i.useCurrentPreviewKey=i.useCurrentFileInfo=void 0;i.useCurrentFileInfo=e=>a(e,r.getCurrentFile);i.useCurrentPreviewKey=e=>{var i;return null===(i=a(e,r.getCurrentFile))||void 0===i?void 0:i.previewKey};function a(e,i){return(0,t.useSelector)(t=>i(t,e))}function n(e,i){return(0,t.useSelector)(t=>i(t,e))}i.useCurrentFileMetadata=e=>(0,t.useSelector)(i=>(0,r.getFileMetadata)(i,e)),i.useFileViewerSelector=a,i.usePreviewKeySelector=n,i.useParameterizedSelector=function(e,...i){return(0,t.useSelector)(t=>e(t,...i))},i.usePreviewState=function(e,i,t,s){const o=n(i,r.getRivieraData),l=a(e,r.getCurrentFileMetadata),c=a(e,r.getCurrentFilePreviewUI),d=n(i,r.getPreviewMetadata),u=a(e,r.getFileViewerUi),p=a(e,r.getCurrentFileArchiveAware),v=t(o),f=c&&s(c);if(f&&v&&u)return{fileViewerUiData:u,rivieraData:v,fileMetadata:l,filePreviewUiData:f,previewMetadata:d,fileInfo:p}}})),define("typescript/libraries/file-viewer/src/hooks/useFlipOnSwipe",["require","exports","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useFlipOnSwipe=void 0;i.useFlipOnSwipe=(e,i,s)=>{const o=(0,r.useDispatch)(),l=(0,t.useRef)(0),c=(0,t.useRef)(0),d=(0,t.useRef)(0),u=(0,t.useRef)(!1);return{handleTouchStart:(0,t.useCallback)(e=>{if(!s)return;const i=e.changedTouches[0];l.current=Date.now(),c.current=i.pageX,d.current=i.pageY,e.touches.length>1&&(u.current=!0)},[s,l,c,d,u]),handleTouchEnd:(0,t.useCallback)(t=>{if(!s)return;const r=t.changedTouches[0];if(u.current)return void(0===t.touches.length&&(u.current=!1));if(Math.abs(r.pageY-d.current)>200)return;if(Date.now()-l.current>500)return;const p=r.pageX-c.current;p<=-100?o((0,a.flipToNextFile)({fileViewerId:e,previewKey:i,sourceContext:n.UserActionContext.SurfaceGesture})):p>=100&&o((0,a.flipToPreviousFile)({fileViewerId:e,previewKey:i,sourceContext:n.UserActionContext.SurfaceGesture}))},[e,i,s,l,c,d,u,o])}}})),define("typescript/libraries/file-viewer/src/hooks/useStabilizedCallback",["require","exports","react"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useStabilizedCallback=void 0;i.useStabilizedCallback=e=>{const i=(0,t.useRef)(e);return i.current=e,(0,t.useRef)((...e)=>(0,i.current)(...e)).current}})),define("typescript/libraries/file-viewer/src/toolbar/useShowAndStayOnHover",["require","exports","react","lodash","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useShowAndStayOnHover=void 0;i.useShowAndStayOnHover=function(e){const[i,n]=(0,t.useState)(!1),[s,o]=(0,t.useState)(!0),l=(0,t.useRef)(),c=(0,a.useStabilizedCallback)(e=>{const i=e.currentTarget.getBoundingClientRect();0===i.left&&0===i.top||n(!0)}),d=(0,a.useStabilizedCallback)(()=>{n(!1)}),u=(0,a.useStabilizedCallback)(()=>{i?p():(l.current=void 0,o(!1))}),p=(0,a.useStabilizedCallback)(()=>{l.current&&window.clearTimeout(l.current),l.current=window.setTimeout(u,3e3)});return(0,t.useEffect)(()=>{const e=(0,r.throttle)(()=>{o(!0),p()},1e3,{leading:!0,trailing:!1});return p(),window.addEventListener("mousemove",e),window.addEventListener("focusin",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("focusin",e)}},[p]),(0,t.useEffect)(()=>{o(!0),p()},[e]),(0,t.useEffect)(()=>()=>{l.current&&(window.clearTimeout(l.current),l.current=void 0)},[]),{elementProps:{onMouseEnter:c,onMouseLeave:d,onFocus:c,onBlur:d},isShown:s}}})),define("typescript/libraries/file-viewer/src/ui/header.module.css",["require","exports","css!typescript/libraries/file-viewer/src/ui/header.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.authButtons=i.floatingHeader=i.headerContainer=void 0,i.headerContainer="_headerContainer_q32w0_1",i.floatingHeader="_floatingHeader_q32w0_9",i.authButtons="_authButtons_q32w0_21";i.default={headerContainer:"_headerContainer_q32w0_1",floatingHeader:"_floatingHeader_q32w0_9",authButtons:"_authButtons_q32w0_21"}})),define("typescript/libraries/file-viewer/src/preview_error/preview_error",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_error/preview_error.module.css","typescript/libraries/file-viewer/src/ui/header.module.css","dig-components/buttons","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/open_with_native/open_with_button","react-intl","typescript/libraries/file-viewer/src/right_rail/download_dropdown","typescript/libraries/file-viewer/src/preview_archive/archive_snack_bar","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/i18n","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/ui/header","react-redux","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/hooks/selectors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewBootstrapError=i.PreviewRenderError=i.PreviewErrorBase=i.TestOnlyErrorPage=i.UserOffline=i.FileUploading=i.FileTooLarge=i.NoExtension=i.DataFetchFailure=i.Unavailable=i.ArchiveFilePasswordProtected=i.PasswordProtected=i.ArchiveFileUnavailable=i.ArchiveNestedFiletypeNotSupported=i.FiletypeNotSupported=i.ErrorContent=void 0,r=t.__importStar(r),a=t.__importStar(a);const S=(e,i)=>{const a=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{[i]:t}=yield e();return{default:t}}))),n=()=>r.createElement(r.Suspense,{fallback:null},r.createElement(a,null));return n.displayName=`Async${i}`,n},E=S(()=>new Promise((i,t)=>{e(["metaserver/static/js/dig-illustrations/spot/look-view"],i,t)}).then(t.__importStar),"LookViewSpot"),P=S(()=>new Promise((i,t)=>{e(["metaserver/static/js/dig-illustrations/spot/traffic-duck-crossing"],i,t)}).then(t.__importStar),"TrafficDuckCrossingSpot"),I=S(()=>new Promise((i,t)=>{e(["metaserver/static/js/dig-illustrations/spot/team-ants"],i,t)}).then(t.__importStar),"TeamAntsSpot"),T=S(()=>new Promise((i,t)=>{e(["metaserver/static/js/dig-illustrations/spot/passcode-lock"],i,t)}).then(t.__importStar),"PasscodeLockSpot"),C=(0,c.defineMessage)({id:"f0donV",defaultMessage:"Couldn't preview this file"});i.ErrorContent=({title:e,message:i,illustration:t,children:n})=>r.createElement("article",{className:a.container},r.createElement("div",{className:a.illustrationContainer},t),r.createElement("header",{className:a.header},r.createElement("h1",null,e)),i?r.createElement("p",{className:a.message},i):null,n),i.ErrorContent.displayName="ErrorContent",i.ErrorContent.displayName="ErrorContent";const A=({fileConfig:e,fileViewerId:i,previewKey:t,extractConfig:n={canExtract:!1}})=>{var s,o,c,u,p,v;const f=(0,b.useSelector)(e=>(0,h.getCurrentFile)(e,i)),_=null==f?void 0:f.file_id;return(null===(s=e.download_button)||void 0===s?void 0:s.enable_download_button)&&_&&t?r.createElement(d.DownloadDropdown,{fileViewerId:i,fileId:_,previewKey:t,copyTargets:null!==(c=null===(o=e.download_button)||void 0===o?void 0:o.copy_targets)&&void 0!==c?c:[],canDownload:null!==(p=null===(u=e.download_button)||void 0===u?void 0:u.can_download)&&void 0!==p&&p,useTextButton:!0,useOutlineButton:!0,extractConfig:n}):(null===(v=e.download_button)||void 0===v?void 0:v.enable_open_with_button)&&t?r.createElement(l.OpenWithButton,{fileViewerId:i,className:a.ctaSecondary}):null};A.displayName="DownloadOrOpenWithButton",A.displayName="DownloadOrOpenWithButton";i.FiletypeNotSupported=({fileViewerId:e,fileMetadata:t,previewKey:n,extractConfig:l,fileConfig:d})=>{const u=(0,c.useIntl)(),p=(0,b.useDispatch)();return r.createElement(i.ErrorContent,{illustration:r.createElement(E,null),title:u.formatMessage({id:"73IpwD",defaultMessage:"{extension} files can’t currently be previewed."},{extension:(0,m.getFileExtension)(t?t.file_name:"")})},r.createElement(A,{previewKey:n,fileViewerId:e,extractConfig:l,fileConfig:d}),d.enable_view_on_dropbox_button&&n?r.createElement("div",{className:a.ctaLink},r.createElement(s.Button,{variant:"transparent",onClick:()=>p((0,v.openWebPreview)({fileViewerId:e,previewKey:n,sourceContext:o.UserActionContext.PreviewError}))},u.formatMessage({id:"qLPMn5",defaultMessage:"View on dropbox.com"}))):null)},i.FiletypeNotSupported.displayName="FiletypeNotSupported",i.FiletypeNotSupported.displayName="FiletypeNotSupported";i.ArchiveNestedFiletypeNotSupported=({fileName:e,fileSize:t})=>{const a=(0,c.useIntl)(),n=(0,m.getFileExtension)(e),s=n?a.formatMessage({id:"x+ecOm",defaultMessage:"{extension} files can’t be previewed from an archive file."},{extension:n}):a.formatMessage({id:"SQjtty",defaultMessage:"This file cannot be previewed. Please check to see if your file extension is correct."});return r.createElement(i.ErrorContent,{illustration:r.createElement(E,null),title:s,message:a.formatMessage({id:"WF66bN",defaultMessage:"{filename} · {filesize}"},{filename:e,filesize:(0,_.formatBytes)(t,a)})})},i.ArchiveNestedFiletypeNotSupported.displayName="ArchiveNestedFiletypeNotSupported",i.ArchiveNestedFiletypeNotSupported.displayName="ArchiveNestedFiletypeNotSupported";i.ArchiveFileUnavailable=({fileName:e,fileSize:t})=>{const a=(0,c.useIntl)(),n=a.formatMessage(C);return r.createElement(i.ErrorContent,{illustration:r.createElement(E,null),title:n,message:a.formatMessage({id:"WF66bN",defaultMessage:"{filename} · {filesize}"},{filename:e,filesize:(0,_.formatBytes)(t,a)})})},i.ArchiveFileUnavailable.displayName="ArchiveFileUnavailable",i.ArchiveFileUnavailable.displayName="ArchiveFileUnavailable";i.PasswordProtected=({fileName:e})=>{const t=(0,c.useIntl)();return r.createElement(i.ErrorContent,{illustration:r.createElement(T,null),title:t.formatMessage({id:"tzyBCT",defaultMessage:"This {extension} file is password-protected"},{extension:(0,m.getFileExtension)(e)})})},i.PasswordProtected.displayName="PasswordProtected",i.PasswordProtected.displayName="PasswordProtected";i.ArchiveFilePasswordProtected=({fileName:e})=>{const t=(0,c.useIntl)();return r.createElement(i.ErrorContent,{illustration:r.createElement(T,null),title:t.formatMessage({id:"eO6mPw",defaultMessage:"Can't preview items inside password protected {extension} files."},{extension:(0,m.getFileExtension)(e)})})},i.ArchiveFilePasswordProtected.displayName="ArchiveFilePasswordProtected",i.ArchiveFilePasswordProtected.displayName="ArchiveFilePasswordProtected";i.Unavailable=({previewKey:e,fileConfig:t,fileViewerId:a,extractConfig:n})=>{const s=(0,c.useIntl)().formatMessage(C);return r.createElement(i.ErrorContent,{illustration:r.createElement(E,null),title:s},r.createElement(A,{previewKey:e,fileViewerId:a,extractConfig:n,fileConfig:t}))},i.Unavailable.displayName="Unavailable",i.Unavailable.displayName="Unavailable";i.DataFetchFailure=({fileMetadata:e})=>{const t=(0,c.useIntl)(),a=e?t.formatMessage({id:"ejp+g5",defaultMessage:"{extension} files are supported but something went wrong."},{extension:(0,m.getFileExtension)(e.file_name)}):t.formatMessage({id:"0ljH1z",defaultMessage:"This file cannot be previewed"});return r.createElement(i.ErrorContent,{illustration:r.createElement(E,null),title:a})},i.DataFetchFailure.displayName="DataFetchFailure",i.DataFetchFailure.displayName="DataFetchFailure";i.NoExtension=({fileViewerId:e,previewKey:t,extractConfig:a,fileConfig:n})=>{const s=(0,c.useIntl)();return r.createElement(i.ErrorContent,{illustration:r.createElement(E,null),title:s.formatMessage({id:"vbytsy",defaultMessage:"Files without extensions cannot be previewed"})},r.createElement(A,{previewKey:t,fileViewerId:e,extractConfig:a,fileConfig:n}))},i.NoExtension.displayName="NoExtension",i.NoExtension.displayName="NoExtension";i.FileTooLarge=({fileMetadata:e,previewKey:t,previewMetadata:a,fileViewerId:n,config:s,fileConfig:o,extractConfig:l={canExtract:!1}})=>{const d=(0,c.useIntl)();return r.createElement(i.ErrorContent,{illustration:r.createElement(I,null),title:d.formatMessage({id:"Jap7oN",defaultMessage:"This file is too big to preview"}),message:d.formatMessage({id:"CaboZW",defaultMessage:"The maximum size for {extension} files is {size}"},{extension:e?(0,m.getFileExtension)(e.file_name):"",size:(0,_.formatBytes)((0,p.getFileSizeLimit)(e?e.file_name:"",(0,g.resolvePreviewType)(a),s),d)})},r.createElement(A,{previewKey:t,fileViewerId:n,extractConfig:l,fileConfig:o}))},i.FileTooLarge.displayName="FileTooLarge",i.FileTooLarge.displayName="FileTooLarge";i.FileUploading=({fileViewerId:e,previewKey:t,extractConfig:a,fileConfig:n})=>{const s=(0,c.useIntl)();return r.createElement(i.ErrorContent,{illustration:r.createElement(P,null),title:s.formatMessage({id:"fz7GLr",defaultMessage:"File is uploading"})},r.createElement(A,{previewKey:t,fileViewerId:e,extractConfig:a,fileConfig:n}))},i.FileUploading.displayName="FileUploading",i.FileUploading.displayName="FileUploading";i.UserOffline=({fileViewerId:e,previewKey:t,extractConfig:a,fileConfig:n})=>{const s=(0,c.useIntl)();return r.createElement(i.ErrorContent,{illustration:r.createElement(E,null),title:s.formatMessage({id:"jZUA7r",defaultMessage:"This file cannot be previewed because you are offline"})},r.createElement(A,{previewKey:t,fileViewerId:e,extractConfig:a,fileConfig:n}))},i.UserOffline.displayName="UserOffline",i.UserOffline.displayName="UserOffline";const O=e=>{switch(e.error.type){case f.FVErrorCode.UnsupportedPreviewType:return r.createElement(i.FiletypeNotSupported,Object.assign({},e));case f.FVErrorCode.NoExtension:return r.createElement(i.NoExtension,Object.assign({},e));case f.FVErrorCode.FileTooLarge:return r.createElement(i.FileTooLarge,Object.assign({},e));case f.FVErrorCode.PasswordProtected:return r.createElement(i.PasswordProtected,{fileName:e.fileMetadata?e.fileMetadata.file_name:""});case f.FVErrorCode.FileUploading:return r.createElement(i.FileUploading,Object.assign({},e));case f.FVErrorCode.UserOffline:return r.createElement(i.UserOffline,Object.assign({},e));case f.FVErrorCode.RivieraDataFetchFailure:case f.FVErrorCode.PreviewsDataApiFailure:case f.FVErrorCode.MalformedPreviewsDataApiResponse:case f.FVErrorCode.MalformedRivieraData:return r.createElement(i.DataFetchFailure,Object.assign({},e));case f.FVErrorCode.Unknown:case f.FVErrorCode.FileSwitched:case f.FVErrorCode.InvalidFileInfo:case f.FVErrorCode.InvalidLoggingOrder:case f.FVErrorCode.InvalidLoggingSession:case f.FVErrorCode.MissingContentMetadata:return r.createElement(i.Unavailable,Object.assign({},e))}};i.TestOnlyErrorPage=O,O.displayName="ErrorPage",O.displayName="ErrorPage";i.PreviewErrorBase=e=>{var i;const{extractConfig:t,previewKey:a,fileViewerId:s,pluginProps:o,activePluginInstance:l,header:c,onComponentRendered:d,onInteractive:p,error:f}=e,_=(0,b.useDispatch)(),{fileMetadata:g,previewMetadata:m}=null!==(i=(0,y.usePreviewState)(s,a,()=>({}),e=>e))&&void 0!==i?i:{};r.useEffect(()=>{d(),p()},[p,d]),r.useEffect(()=>(f&&_((0,v.setFileViewerErrorAction)({fileViewerId:s,error:f})),()=>{f&&_((0,v.setFileViewerErrorAction)({fileViewerId:s,error:void 0}))}),[s,a]);const h=(null==t?void 0:t.canExtract)&&g?r.createElement(u.ArchiveSnackBar,{filePreviewUiData:t.filePreviewUiData,previewKey:a,fileViewerId:s}):null;return r.createElement("div",{className:n.headerContainer},o&&r.createElement(w.PluginHeader,{pluginProps:o,activePluginInstance:l||void 0,header:c}),h,r.createElement(O,Object.assign({},e,{fileMetadata:g,previewMetadata:m})))},i.PreviewErrorBase.displayName="PreviewErrorBase";i.PreviewRenderError=e=>r.createElement(i.PreviewErrorBase,Object.assign({onComponentRendered:e.onRenderFailed},e)),i.PreviewRenderError.displayName="PreviewRenderError";i.PreviewBootstrapError=e=>r.createElement(i.PreviewErrorBase,Object.assign({onComponentRendered:e.onSetPreviewLoaded},e)),i.PreviewBootstrapError.displayName="PreviewBootstrapError",i.PreviewRenderError.displayName="PreviewRenderError",i.PreviewBootstrapError.displayName="PreviewBootstrapError",i.PreviewErrorBase.displayName="PreviewErrorBase"})),define("typescript/libraries/file-viewer/src/preview_doc/sidebar",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/preview_doc/doc_sidebar.module.css","lodash","typescript/libraries/file-viewer/src/core/utils/functions","dig-components/progress_indicators"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Sidebar=i.InternalSidebarItem=i.SIDEBAR_WIDTH=void 0,r=t.__importStar(r),a=t.__importDefault(a),n=t.__importStar(n),i.SIDEBAR_WIDTH=parseInt(n.sidebarWidth,10);const c=parseInt(n.thumbnailWidth,10),d=parseInt(n.border,10),u=c-2*d;class p extends r.Component{constructor(){super(...arguments),this.state={error:!1,loaded:!1},this.handleLoad=e=>{this.setState({loaded:!0})},this.handleError=e=>{this.setState({error:!0})}}componentDidUpdate(e){!0===this.props.isSidebarFocused&&!0===this.props.isSelected&&!0!==e.isSelected&&this.ref&&this.ref.focus()}render(){const{isSelected:e,onClick:i,index:t,css:n,intl:s,thumbnailUrl:o,aspectRatio:c,isVisible:p,isEditMode:v,isSidebarFocused:f,top:_}=this.props,{error:g,loaded:m}=this.state,w=t+1,b=s.formatMessage({id:"HL27OJ",defaultMessage:"Page {index}"},{index:w});return r.createElement("li",{"data-index":t,style:{transform:`translateY(${_}px`}},r.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),i(t)},tabIndex:-1,"aria-current":e?"page":void 0,"aria-label":b,ref:e=>null!=e&&(this.ref=e)},r.createElement("div",{className:(0,a.default)(n.thumbnail,{[n.selected]:e,[n.isUnfocusedInEditMode]:v&&!f}),style:{height:u*c+2*d}},!p||(g||m)&&o?void 0:r.createElement(l.Spinner,{className:n.loader,size:"xsmall"}),p&&o&&!g?r.createElement("img",{src:o,onLoad:this.handleLoad,onError:this.handleError,alt:""}):void 0),r.createElement("span",{"aria-hidden":!0},w)))}}i.InternalSidebarItem=p,p.displayName="InternalSidebarItem";class v extends r.Component{constructor(){super(...arguments),this.containerHeight=0,this.state={startPage:0,endPage:0,startPageNoBuffer:0,endPageNoBuffer:0,pagesScrollTop:[],totalPagesHeight:0},this.handleScrollTo=(0,s.throttle)(e=>{this.nav&&(this.nav.scrollTop=this.state.pagesScrollTop[e])},50,{leading:!1,trailing:!0}),this.handleScrollTopChange=()=>{this.ol&&this.setStateForStartAndEndPage(this.state.pagesScrollTop)},this.throttledHandleScrollTopChange=(0,s.throttle)(()=>this.handleScrollTopChange(),50,{leading:!0})}computeScrollTops(){const{pages:e}=this.props;if(0==e.length)return[];const i=[16];let t=16;for(let r=0;r<e.length-1;++r){const a=e[r].dimension,n=u*a[1]/a[0]+2*d+16+20;i.push(t+n),t+=n}const r=e[e.length-1].dimension,a=t+(u*r[1]/r[0]+2*d)+32;return this.state.totalPagesHeight=a,this.setState({pagesScrollTop:i,totalPagesHeight:a}),i}scrollToItemIfNeeded(e){const{startPageNoBuffer:i,endPageNoBuffer:t}=this.state,{pages:r}=this.props;e<0||e>=r.length||!this.nav||(e<i||e>=t)&&this.handleScrollTo(e)}setStateForStartAndEndPage(e){const[i,t]=[(0,s.sortedIndex)(e,this.nav.scrollTop),(0,s.sortedIndex)(e,this.nav.scrollTop+this.nav.offsetHeight)];this.setState({startPageNoBuffer:i,endPageNoBuffer:t,startPage:Math.max(0,i-10),endPage:Math.min(this.props.pages.length-1,t+10)})}shouldComponentUpdate(e,i){const r=this.props,{pages:a}=r,n=t.__rest(r,["pages"]),{pages:s}=e,l=t.__rest(e,["pages"]);return!(0,o.shallowEqual)(n,l)||!(0,o.shallowEqual)(this.state,i)||!(function(e,i){return e.length===i.length&&!e.find((e,t)=>e.thumbnailUrl!==i[t].thumbnailUrl)})(a,s)}componentDidMount(){const e=this.computeScrollTops();this.setStateForStartAndEndPage(e),this.containerHeight=this.nav.offsetHeight}componentDidUpdate(e){this.nav&&this.nav.offsetHeight!==this.containerHeight&&(this.setStateForStartAndEndPage(this.state.pagesScrollTop),this.containerHeight=this.nav.offsetHeight),(this.props.currentPageIndex!==e.currentPageIndex||this.props.isOpened&&!e.isOpened)&&this.scrollToItemIfNeeded(this.props.currentPageIndex)}render(){const{currentPageIndex:e,isFocused:i,onBlur:t,onFocus:s,pages:o,intl:l,style:c,isOpened:d,isEditMode:u}=this.props,{startPage:v,endPage:f,totalPagesHeight:_}=this.state,g=o.slice(v,f+1).map((t,a)=>{const s=a+v;return r.createElement(p,{key:s,isSelected:e===s,onClick:this.props.onPageChange,index:s,intl:l,thumbnailUrl:t.thumbnailUrl,css:n,isVisible:!0,aspectRatio:t.dimension[1]/t.dimension[0],isSidebarFocused:!0===i,isEditMode:u,top:this.state.pagesScrollTop[s]})}),m={height:_,display:d?void 0:"none"};return r.createElement("div",{className:(0,a.default)(n.container,n.containerBorder,{[n.focused]:i,[n.open]:d,[n.isEditMode]:u}),"aria-label":l.formatMessage({id:"HzLiwF",defaultMessage:"Document Sidebar"}),style:c,ref:e=>{this.nav=e},onScroll:this.throttledHandleScrollTopChange},r.createElement("ol",{"aria-label":l.formatMessage({id:"J/2gSB",defaultMessage:"Page list"}),ref:e=>this.ol=e,tabIndex:d?0:-1,onFocus:s,onBlur:t,style:m},g))}}i.Sidebar=v,v.defaultProps={currentPageIndex:0,pages:[],onPageChange:function(){}},v.displayName="Sidebar"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/preview_doc",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/renderer/ppt","typescript/libraries/file-viewer/src/preview_doc/renderer/pdf","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/preview_doc/data_transform","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/libraries/file-viewer/src/preview_doc/password_modal","typescript/libraries/file-viewer/src/preview_error/preview_error","typescript/libraries/file-viewer/src/preview_doc/layers","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/plugins/utils","typescript/libraries/file-viewer/src/core/types/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/invariant","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc/find_in_doc_controller","typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc/find_in_doc_searchbar","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/core/data/utils","react-intl","react-redux","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I,T,C,A,O,F,k,x,D,L){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewDoc=i.UnconnectedPreviewDoc=void 0,r=t.__importStar(r);const M=[".docx",".pptx"];class R extends r.PureComponent{constructor(e){super(e),this.state={failedPasswordAttempt:0,passwordDismissed:!1,transformedData:this.props.rivieraData&&(0,l.transformData)(this.props.rivieraData)},this.pageRefs={},this.capturePageRef=(e,i)=>{null==i?delete this.pageRefs[e]:this.pageRefs[e]={el:i,pageIndex:e}},this.handlePageChange=(e,i)=>{this.props.dispatch((0,g.updateDocCurrentPageIndex)({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,pageIndex:e,sourceContext:i}))},this.handlePdfPageChange=e=>{this.handlePageChange(e,o.UserActionContext.MouseWheel)},this.getPageForSelection=e=>{if(null!=e)for(const{pageIndex:i,el:t}of Object.values(this.pageRefs))if(null!=t&&null!=e.anchorNode&&e.anchorNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINS&&null!=e.focusNode&&e.focusNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINS)return i},this.handlePasswordSubmit=e=>{const{fileViewerId:i,previewKey:t,previewMetadata:r}=this.props;if(!r||!r.content)return;const{refresh_url:a,text_url_tmpl:n,image_url_tmpl:s}=r.content;(0,h.invariant)(!!a,w.FVErrorCode.MalformedRivieraData,"Cannot send password! Missing refresh_url from preview metadata"),this.props.dispatch((0,g.refreshBlobAction)({fileViewerId:i,previewKey:t,refreshUrl:a,oldPreview:{text_url_tmpl:n,image_url_tmpl:s},password:e}))},this.handlePasswordDismiss=()=>{this.setState({passwordDismissed:!0})},this.fetchPageDataWithMetadata=(e,i,t)=>{const r=(0,v.calculatePageRange)(e,this.props.config.partial_prewarm_allowed);if(i&&(r[0]!==this.metadataBatchPageRange[0]||r[1]!==this.metadataBatchPageRange[1])){const[e,a]=this.metadataBatchPageRange=r;this.props.dispatch((0,g.fetchPageDataWithMetadata)({fileViewerId:this.props.fileViewerId,previewKey:t,textUrlTmpl:i.content.text_url_tmpl,startPage:e,endPage:a}))}},this.onRenderSucceeded=()=>{this.props.onRenderSucceeded(),this.fetchPageDataWithMetadata(this.props.filePreviewUiData.currentPageIndex,this.props.previewMetadata,this.props.previewKey)},this.zoomIn=()=>{const{dispatch:e,fileViewerId:i,previewKey:t}=this.props;e((0,g.zoomIn)({fileViewerId:i,previewKey:t,sourceContext:o.UserActionContext.Keyboard}))},this.zoomOut=()=>{const{dispatch:e,fileViewerId:i,previewKey:t}=this.props;e((0,g.zoomOut)({fileViewerId:i,previewKey:t,sourceContext:o.UserActionContext.Keyboard}))},this.logFindAction=(e,i,t)=>{this.props.dispatch((0,s.logUserActionEvent)({userAction:e,fileViewerId:this.props.fileViewerId,actionContext:i,extra:{find_method:t}}))},this.findInDoc=e=>{this.state.findInDoc&&(this.logFindAction(o.UserAction.FindInDocStart,"keyboard"===e?o.UserActionContext.Keyboard:o.UserActionContext.Toolbar,e),this.state.findInDoc.controller.initializeSearch(),this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchbarShown:!0})}))},this.closeFindInDoc=e=>{this.state.findInDoc&&(this.logFindAction(o.UserAction.FindInDocEnd,"keyboard"===e?o.UserActionContext.Keyboard:o.UserActionContext.FindInDocSearchbar,e),this.state.findInDoc.controller.onReset(),this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchbarShown:!1,searchResult:void 0})}))},this.keyboardBindings=[...(0,C.getZoomInOutBindings)({zoomIn:this.zoomIn,zoomOut:this.zoomOut}),(0,C.getBrowserFindBinding)(()=>this.logFindAction(o.UserAction.FindInDocStart,o.UserActionContext.Keyboard,"keyboard")),(0,C.getFindInDocBinding)(()=>this.findInDoc("keyboard"))],e.config.partial_prewarm_allowed?this.metadataBatchPageRange=[0,_.TEXT_FIRST_BATCH_SIZE]:this.metadataBatchPageRange=[0,50],T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_START),this.state.findInDoc={searchbarShown:!1,controller:new S.FindInDocController({fileViewerId:e.fileViewerId,previewKey:e.previewKey,dispatch:e.dispatch,retrievePages:()=>{var e,i;return null!==(i=null===(e=this.props.rivieraData)||void 0===e?void 0:e.pages)&&void 0!==i?i:[]},previewMetadata:e.previewMetadata,rivieraData:e.rivieraData,onSearchResult:e=>{this.state.findInDoc&&this.setState({findInDoc:Object.assign(Object.assign({},this.state.findInDoc),{searchResult:e})})}})}}recalculateFitScaleFactor(e=this.props){var i;const{rivieraData:t,fileViewerId:r,previewKey:a,width:n,height:s,dispatch:o,responsiveSize:l,config:c}=e;if(!t||!t.metadata)return;const d=(0,P.shouldShowDocSidebar)(n,b.PreviewType.SsrDoc)&&e.fileViewerUiData.isDocSidebarOpen,u=null===(i=this.props.fileMetadata)||void 0===i?void 0:i.file_name,p=!(0,y.noToolbarShown)(l,c),{scaleToFit:v,maxWidth:f}=this.props.config.preview_types[b.PreviewType.SsrDoc],_=(0,P.calculateDocumentScaleFactor)({width:n,height:s,dimensions:t.metadata.dimensions,isDocSidebarVisible:d,scaleToFit:v,toolbarShown:p,fileName:u,maxWidth:f});o((0,g.updateFitScaleFactor)({fileViewerId:r,previewKey:a,fitScaleFactor:_}))}componentDidMount(){this.props.fileMetadata&&M.includes((0,I.getFileExtension)(this.props.fileMetadata.file_name))&&this.props.dispatch((0,g.triggerDynamicRoutingModalCheck)()),this.recalculateFitScaleFactor(),T.PreviewsEventLogger.mark(T.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_MOUNT),null!=this.props.pluginQueryBus&&this.props.pluginQueryBus.handleQuery("getPageForSelection",this.getPageForSelection)}UNSAFE_componentWillReceiveProps(e){const{rivieraData:i,previewMetadata:t}=e;e.previewKey.serialized!==this.props.previewKey.serialized?this.setState({failedPasswordAttempt:0,passwordDismissed:!1}):i&&i!==this.props.rivieraData&&i.error&&i.error.statusCode===m.RivieraStatus.PasswordProtected&&this.setState({failedPasswordAttempt:this.state.failedPasswordAttempt+1}),i!==this.props.rivieraData&&this.setState({transformedData:i&&(0,l.transformData)(i)});const{currentPageIndex:r}=e.filePreviewUiData,[a,n]=this.metadataBatchPageRange;!(r>=a&&r<n)&&i&&t&&(0,v.canPreviewInPreviewDoc)(t)&&this.fetchPageDataWithMetadata(r,t,e.previewKey),this.recalculateFitScaleFactor(e)}render(){var e,i;const{fileMetadata:t,filePreviewUiData:s,height:o,width:l,brandingInfo:v,sharedLinkInfo:_}=this.props,{failedPasswordAttempt:g,transformedData:b,passwordDismissed:h,findInDoc:y}=this.state,S=t?t.file_name:"";if(null===(e=this.props.rivieraData)||void 0===e?void 0:e.error){const e=this.props.rivieraData.error.statusCode!==m.RivieraStatus.PasswordProtected?new w.FVError(w.FVErrorCode.RivieraDataFetchFailure,this.props.rivieraData.error.message):h||g>3?new w.FVError(w.FVErrorCode.PasswordProtected):void 0;return e?r.createElement(u.PreviewRenderError,Object.assign({},this.props,{error:e})):r.createElement(d.PasswordModal,{passwordAttempt:g,onSubmit:this.handlePasswordSubmit,onDismiss:this.handlePasswordDismiss,fileName:S})}const I=P.DOC_PAGE_MARGIN+P.DOC_PAGE_MARGIN_LEFT,T=Math.round(100*(l-I-P.DOC_SIDEBAR_WIDTH)/window.innerWidth/window.devicePixelRatio),C=Object.assign(Object.assign({},s),{viewportWidth:T}),F=Object.assign(Object.assign({},this.props),{onRenderSucceeded:this.onRenderSucceeded,filePreviewUiData:C,data:(b||[]).filter(e=>e),onPageChange:this.handlePdfPageChange,layerRenderFn:p.defaultLayerRenderFn,pageNavigation:s.pageNavigation,onFindInDoc:()=>this.findInDoc("click"),findInDocData:null==y?void 0:y.searchResult,findInDocController:null==y?void 0:y.controller,brandingInfo:v,sharedLinkInfo:_});return r.createElement("div",{className:c.app,style:{width:l,height:o}},r.createElement(O.ToolbarActionWrapper,{onFindInDoc:()=>this.findInDoc("click")},(0,P.isPpt)(S)?r.createElement(a.PreviewPPT,Object.assign({},F,{onPageChange:this.handlePageChange,onPageRef:this.capturePageRef})):r.createElement(n.PreviewPDF,Object.assign({},F,{isEditMode:(0,f.isPluginEditMode)(null===(i=this.props.activePluginInstance)||void 0===i?void 0:i.mode),onPageRef:this.capturePageRef}))),y&&y.searchbarShown&&r.createElement(E.FindInDocSearchbar,{onClose:this.closeFindInDoc,controller:y.controller}),r.createElement(A.KeyboardBindingConnector,{name:"preview_doc",keyboardBindings:this.keyboardBindings}))}}i.UnconnectedPreviewDoc=R,R.displayName="UnconnectedPreviewDoc";i.PreviewDoc=e=>{const{fileViewerId:i,previewKey:t}=e,a=(0,x.useIntl)(),n=(0,D.useDispatch)(),s=(0,F.useFileViewerSelector)(i,L.getSharedLinkInfo),o=(0,F.useFileViewerSelector)(i,L.getBrandingInfo),l=(0,F.usePreviewState)(i,t,k.filterDocPreviewRivieraData,k.filterDocFilePreviewUiState);return l?r.createElement(R,Object.assign({},e,l,{intl:a,dispatch:n,sharedLinkInfo:s,brandingInfo:o})):null},i.PreviewDoc.displayName="PreviewDoc"})),define("typescript/libraries/file-viewer/src/open_with_native/open_with_button",["require","exports","tslib","classnames","react","dig-components/buttons","typescript/libraries/file-viewer/src/core/logging/constants","react-redux","react-intl","typescript/libraries/file-viewer/src/core/data/selectors","dig-components/icons/src","dig-components/icons","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OpenWithButton=i.UnconnectedOpenWithButton=void 0,r=t.__importDefault(r),a=t.__importStar(a);i.UnconnectedOpenWithButton=({previewKey:e,fileViewerId:i,className:t="",sourceContext:c=s.UserActionContext.RightRail})=>{const v=(0,l.useIntl)(),f=(0,o.useDispatch)();if(!e)return null;const _=a.createElement(u.UIIcon,{src:d.OpenLine});return a.createElement(n.Button,{size:"standard",onClick:()=>f((0,p.openWith)({fileViewerId:i,previewKey:e,sourceContext:c})),variant:"outline",className:(0,r.default)(t),withIconLeft:_},v.formatMessage({id:"tB7wey",defaultMessage:"Open"}))},i.UnconnectedOpenWithButton.displayName="UnconnectedOpenWithButton",i.OpenWithButton=(0,o.connect)((function(e,i){const{fileViewerId:t}=i;return{previewKey:(0,c.getCurrentPreviewKey)(e,t)}}))(i.UnconnectedOpenWithButton)})),define("typescript/libraries/file-viewer/src/toolbar/configuration",["require","exports","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.noToolbarShown=i.getToolbarConfigByPreviewType=i.getToolbarConfigForEditMode=i.baseToolbarConfig=void 0,i.baseToolbarConfig={docSidebar:!1,fileFlipping:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!1,findInDocument:!1};i.getToolbarConfigForEditMode=e=>{switch(e){case r.PreviewType.SsrDoc:case r.PreviewType.CloudDoc:return{docSidebar:!0,fullscreen:!1,pageNavigation:!0,print:!1,zooming:!0,fileFlipping:!1,findInDocument:!1};case r.PreviewType.Image:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!0,fileFlipping:!1,findInDocument:!1};default:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!1,fileFlipping:!1,findInDocument:!1}}};i.getToolbarConfigByPreviewType=(e,t,a)=>{const n=((e,i)=>({docSidebar:!e.preview_content_only,fileFlipping:e.file_flipping,fullscreen:e.enable_fullscreen,print:i.enable_print||!1}))(t,a),s=(e=>{switch(e){case r.PreviewType.SsrDoc:return{docSidebar:!0,fullscreen:!0,pageNavigation:!0,print:!0,zooming:!0,findInDocument:!0};case r.PreviewType.CloudDoc:return{docSidebar:!0,fullscreen:!0,pageNavigation:!0,print:!0,zooming:!0,findInDocument:!1};case r.PreviewType.Image:return{docSidebar:!1,fullscreen:!0,pageNavigation:!1,print:!0,zooming:!0,findInDocument:!1};case r.PreviewType.HTML:return{docSidebar:!1,fullscreen:!0,print:!0,findInDocument:!1};case r.PreviewType.RawHTML:return{docSidebar:!1,fullscreen:!0,print:!1,findInDocument:!1};case r.PreviewType.Excel:return{docSidebar:!1,fullscreen:!0,print:!0,zooming:!0,pageNavigation:!1,findInDocument:!1};default:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,findInDocument:!1}}})(e);let o=i.baseToolbarConfig;for(const e in i.baseToolbarConfig){const i=e;i in n&&i in s?o=Object.assign(Object.assign({},o),{[i]:n[i]&&s[i]}):i in n&&!(i in s)?o=Object.assign(Object.assign({},o),{[i]:n[i]}):i in s&&!(i in n)&&(o=Object.assign(Object.assign({},o),{[i]:s[i]}))}return o};i.noToolbarShown=(e,i)=>e===t.ResponsiveSize.MOBILE||i.mobile_web||i.force_no_toolbar})),define("typescript/libraries/file-viewer/src/toolbar/file_name_display",["require","exports","tslib","react","react-redux","ts-key-enum","dig-components/click_outside","dig-components/text_fields","dig-components/truncate","dig-components/typography","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.css","typescript/libraries/file-viewer/src/preview_archive/breadcrumbs","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","classnames"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileNameDisplay=void 0,r=t.__importDefault(r),d=t.__importStar(d),u=t.__importStar(u),v=t.__importStar(v),w=t.__importDefault(w);i.FileNameDisplay=({intl:e,allowRename:i,fileViewerId:t,previewKey:b,filename:h,rootArchiveFileInformation:y,currentPath:S,showInverse:E,isEditingFilename:P})=>{const I=(0,a.useDispatch)(),T=r.default.useRef(null),[C,A]=r.default.useState(null!=h?h:"");r.default.useEffect(()=>{window.requestAnimationFrame(()=>{if(!T.current)return;T.current.focus();const e=null!=h?h:"";let i=e.lastIndexOf(".");i<0&&(i=e.length),T.current.setSelectionRange(0,i)})},[h,P]),r.default.useEffect(()=>()=>{I((0,_.setToolbarRenameActive)({isActive:!1}))},[I]);const O=e=>{h!==(null!=e?e:C)?I((0,_.renameFile)({fileViewerId:t,previewKey:b,sourceContext:f.UserActionContext.Toolbar,newFilename:null!=e?e:C})):A(null!=h?h:""),I((0,_.setToolbarRenameActive)({isActive:!1}))},F=r.default.useRef(null),[k,x]=r.default.useState();return h?y&&Array.isArray(S)?r.default.createElement("div",{className:u.titlebarV2Breadcrumbs},r.default.createElement(c.Text,{color:E?"standard":"faint",isBold:!0,inverse:E},r.default.createElement(p.ArchiveFileBreadcrumbs,{archiveName:h,currentPath:S,fileViewerId:t,previewKey:y.previewKey,dispatch:I,showInverse:E}))):P?r.default.createElement(s.ClickOutside,{isClickThroughPortaled:!1,shouldPropagateMouseEvents:!0,isActive:!0,onClickOutside:()=>{var e;return O(null===(e=null==T?void 0:T.current)||void 0===e?void 0:e.value)}},r.default.createElement("div",{style:k},r.default.createElement(o.TextInput,{className:d.toolbarFilename,ref:T,"aria-label":e.formatMessage({id:"XlFxo+",defaultMessage:"filename"}),isTransparent:!0,value:C,onChange:e=>A(e.currentTarget.value),inverse:E,onKeyDown:e=>{e.key===n.Key.Enter?O():e.key===n.Key.Escape&&(A(h),I((0,_.setToolbarRenameActive)({isActive:!1})))}}))):r.default.createElement("div",{ref:F,className:d.toolbarFilenameSectionTitle},r.default.createElement(l.Truncate,{className:(0,w.default)("fvsdk__toolbar-filename",d.toolbarFilename),location:v.safari?1:.5,tooltipControlProps:{placement:"top"},onDoubleClick:i?()=>{F.current&&x({minWidth:F.current.offsetWidth}),A(h),I((0,_.setToolbarRenameActive)({isActive:!0})),I((0,g.logUserActionEvent)({userAction:m.UserAction.Rename,fileViewerId:t,actionContext:f.UserActionContext.Toolbar}))}:void 0,title:h},h)):r.default.createElement(r.default.Fragment,null)},i.FileNameDisplay.displayName="FileNameDisplay"})),define("typescript/libraries/file-viewer/src/toolbar/snackbar_listener",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useIsSnackbarOpen=void 0,r=t.__importStar(r);i.useIsSnackbarOpen=e=>{const[i,t]=r.useState(e);return r.useEffect(()=>{const e=()=>{t(!0)},i=()=>{t(!1)};return document.addEventListener("snackbar_shown",e),document.addEventListener("snackbar_hidden",i),()=>{document.removeEventListener("snackbar_shown",e),document.removeEventListener("snackbar_hidden",i)}},[]),i}})),define("typescript/libraries/file-viewer/src/toolbar/toolbar",["require","exports","tslib","react","react-intl","react-redux","classnames","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons","typescript/libraries/file-viewer/src/toolbar/toolbar_buttons","typescript/libraries/file-viewer/src/toolbar/useShowAndStayOnHover","typescript/libraries/file-viewer/src/toolbar/snackbar_listener","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/toolbar/toolbar_file_counter","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/toolbar/utils","typescript/libraries/file-viewer/src/toolbar/file_name_display","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/ui/animations"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ConfigurableToolbar=void 0,r=t.__importDefault(r),s=t.__importDefault(s),o=t.__importStar(o);const T=r.default.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{VideoControlRow:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/toolbar/toolbar_video_controls"],i,t)}).then(t.__importStar);return{default:i}}))),C=({className:e,children:i})=>r.default.createElement("div",{className:(0,s.default)(o.toolbarSection,e)},i);C.displayName="ToolbarSection";const A=({className:e,children:i})=>r.default.createElement("div",{className:(0,s.default)(o.toolbarRow,e)},i);A.displayName="ToolbarRow";const O=({intl:e,allowRename:i,rootArchiveFileInformation:t,fileMetadata:a,filePreviewUi:n,showInverse:l,fileViewerId:c,previewKey:d,hasFileCounter:u,plugins:p,isEditingFilename:v})=>{let f=null;const _=null==p?void 0:p.star;f=r.default.createElement(S.FileNameDisplay,{intl:e,allowRename:i,fileViewerId:c,previewKey:d,filename:(null==t?void 0:t.fileName)||(null==a?void 0:a.file_name),rootArchiveFileInformation:t,currentPath:null==n?void 0:n.currentPath,showInverse:l,isEditingFilename:v});const m=r.default.createElement(r.default.Fragment,null,f,_&&r.default.createElement(_,{className:o.toolbarStar}));return r.default.createElement(A,{className:o.toolbarFilenameRow},u?r.default.createElement(r.default.Fragment,null,r.default.createElement(C,{className:(0,s.default)(o.toolbarFilenameSection,{[o.toolbarFilenameSectionTitle]:!v})},m),r.default.createElement(C,{className:o.toolbarCounterSection},r.default.createElement(g.ToolbarFileCounter,{fileCollectionContext:null==a?void 0:a.file_collection_context}))):m)};O.displayName="FileInfoRow";const F=({intl:e,toolbarConfig:i,filePreviewUi:t,fileRivieraData:a,scaleFactor:n,rendererWidth:s,previewType:o,useOverflowMenu:l,isDocSidebarOpen:c,plugins:d,fittedScaleFactor:p,isSidebarEnable:v})=>{const f=i.zooming,_=i.fullscreen,g=i.pageNavigation,w=i.findInDocument,b=i.print,h=!!s&&!(0,m.shouldShowDocSidebar)(s,o),y=null==d?void 0:d.imageCropRotate,S=v?r.default.createElement(u.SidebarToggleButton,{isSidebarOpen:c,disabled:h,isInMenu:l}):null,E=r.default.createElement(r.default.Fragment,null,w&&r.default.createElement(u.FindInDocumentButton,{isMenuItem:l}),b&&r.default.createElement(u.PrintButton,{isMenuItem:l}));return r.default.createElement(A,null,r.default.createElement(C,null,f&&null!=n&&r.default.createElement(r.default.Fragment,null,r.default.createElement(u.ZoomOutButton,{scaleFactor:n}),r.default.createElement(u.ZoomToFitButton,{scaleFactor:n,fittedScaleFactor:p}),r.default.createElement(u.ZoomInButton,{scaleFactor:n})),_&&r.default.createElement(u.FullScreenButton,null)),y&&r.default.createElement(C,null,r.default.createElement(y,null)),r.default.createElement(C,null,g&&r.default.createElement(u.PageNavigationControls,{filePreviewUi:t,fileRivieraData:a}),l?r.default.createElement(u.OverflowMenu,{intl:e},S,E):S),!l&&r.default.createElement(C,null,E))};F.displayName="ControlsRow";i.ConfigurableToolbar=({previewType:e,fileRivieraData:i,filePreviewUi:t,fileViewerUi:u,fileConfig:g,rootArchiveFileInformation:m,showDocSidebar:S,previewMetadata:C,activePluginInstance:A,plugins:k,snackbarManagerPluginInstance:x,forceHideControlRow:D=!1})=>{var L,M,R,N;const j=(0,a.useIntl)(),{featureConfig:V,fileViewerId:B}=(0,h.useFileViewerContext)(),{rendererWidth:U}=(0,w.useFileViewerRenderContext)(),K=null===(L=(0,b.useCurrentFileInfo)(B))||void 0===L?void 0:L.previewKey,z=(0,b.useCurrentFileMetadata)(K),{videoPlayer:H}=(0,E.useToolbarAction)(),{isShown:q,elementProps:W}=(0,p.useShowAndStayOnHover)(K),G=(0,n.useSelector)(e=>(0,_.isPluginEditMode)(e,B)),Y=(0,v.useIsSnackbarOpen)(!!(null==x?void 0:x.isSnackbarVisible())),Z=(0,n.useSelector)(e=>(0,_.isToolbarRenameActive)(e)),X=(0,n.useSelector)(e=>(0,_.getToolBarOverride)(e,B)),Q=e===P.PreviewType.Video||e===P.PreviewType.Audio,$=u.isFullScreen,J="hidden"===X,ee=(q||"shown"===X||Z||Q&&!$)&&!Y,ie=null==u?void 0:u.isDocSidebarOpen,te=t&&((null===(M=(0,c.filterZoomableFilePreviewUi)(t))||void 0===M?void 0:M.zoomScaleFactor)||(null===(R=(0,c.filterZoomableFilePreviewUi)(t))||void 0===R?void 0:R.fitScaleFactor))||void 0,re=t&&(null===(N=(0,c.filterZoomableFilePreviewUi)(t))||void 0===N?void 0:N.fitScaleFactor)||void 0,ae=G?(0,l.getToolbarConfigForEditMode)(e):(0,l.getToolbarConfigByPreviewType)(e,V,g),ne=!$&&ae.docSidebar,se=ne||ae.fullscreen||ae.pageNavigation||ae.print||ae.zooming&&null!=te,oe=U<=450&&ne&&ae.fullscreen&&ae.pageNavigation&&ae.print&&ae.zooming&&null!=te,le=(0,y.isToolbarInverse)($,e),ce=ie&&ne&&!!S,de=(se||e===P.PreviewType.Loading)&&!D;return r.default.createElement(r.default.Suspense,{fallback:r.default.createElement("div",null)},ae.fileFlipping&&r.default.createElement(d.FlipButtons,{isShown:!J&&q,fileCollectionContext:null==z?void 0:z.file_collection_context,flipperCallbacks:W}),r.default.createElement("div",{className:(0,s.default)(o.toolbarHolder,{[o.withSidebar]:ce}),"data-testid":"fvsdk_floating_toolbar"},r.default.createElement(I.SlideAnimation,{active:J,direction:"bottom",distance:400,initial:"in"},r.default.createElement("div",Object.assign({className:(0,s.default)(o.toolbar,{[o.hidden]:!ee,[o.toolbarAudioVideo]:Q,[o.normal]:!le}),role:"toolbar","aria-hidden":J},W),r.default.createElement(O,{intl:j,allowRename:V.fvsdk_toolbar_rename&&!!(null==z?void 0:z.file_path),rootArchiveFileInformation:m,fileMetadata:z,filePreviewUi:t,showInverse:le,fileViewerId:B,previewKey:K,hasFileCounter:ae.fileFlipping,plugins:k,isEditingFilename:Z}),Q&&H?r.default.createElement(T,{player:H,previewKey:K,previewType:e,fileViewerUi:u,fileViewerId:B,previewMetadata:C,fileRivieraData:i,activePluginInstance:(0,f.isRightRailPlugin)(A)?A:void 0,showInverse:le,isShown:ee,featureConfig:V}):de&&r.default.createElement(F,{filePreviewUi:t,previewType:e,isDocSidebarOpen:ie,fileRivieraData:i,toolbarConfig:ae,scaleFactor:te,fittedScaleFactor:re,plugins:k,useOverflowMenu:oe,rendererWidth:U,isFullScreen:$,isSidebarEnable:ne,intl:j})))))},i.ConfigurableToolbar.displayName="ConfigurableToolbar"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_actions",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";var a,n;Object.defineProperty(i,"__esModule",{value:!0}),i.ToolbarActionWrapper=i.useToolbarAction=i.ToolbarActionProvider=i.ToolbarActionContext=i.DEFAULT_TOOLBAR_ACTION_CONTEXT_VALUE=void 0,r=t.__importDefault(r),(function(e){e.FIND_IN_DOC="onFindInDoc",e.PRINT="onPrint",e.SELECT_VIDEO_QUALITY="onSelectVideoQuality"})(a||(a={})),(function(e){e.VIDEO_PLAYER="videoPlayer"})(n||(n={})),i.DEFAULT_TOOLBAR_ACTION_CONTEXT_VALUE={setters:{},clients:{},callbacks:{}},i.ToolbarActionContext=r.default.createContext(i.DEFAULT_TOOLBAR_ACTION_CONTEXT_VALUE);i.ToolbarActionProvider=e=>{const[t,s]=r.default.useState({}),[o,l]=r.default.useState({}),c=e=>{s(i=>Object.assign(Object.assign({},i),{[a.FIND_IN_DOC]:e}))},d=e=>{s(i=>Object.assign(Object.assign({},i),{[a.PRINT]:e}))},u=e=>{s(i=>Object.assign(Object.assign({},i),{[a.SELECT_VIDEO_QUALITY]:e}))},p=e=>{l(i=>Object.assign(Object.assign({},i),{[n.VIDEO_PLAYER]:e}))},v=r.default.useMemo(()=>({setters:{setFindInDocCallback:c,setPrintCallback:d,setSelectVideoQualityCallback:u,setVideoPlayerClient:p},clients:o,callbacks:t}),[t,o]);return r.default.createElement(i.ToolbarActionContext.Provider,{value:v},e.children)},i.ToolbarActionProvider.displayName="ToolbarActionProvider";i.useToolbarAction=()=>{const{setters:e,clients:t,callbacks:a}=r.default.useContext(i.ToolbarActionContext);return r.default.useMemo(()=>Object.assign(Object.assign(Object.assign({},e),t),a),[e,t,a])};i.ToolbarActionWrapper=e=>{const{onFindInDoc:t,onPrint:a,onSelectVideoQuality:n,videoPlayer:s}=e,{setFindInDocCallback:o,setPrintCallback:l,setSelectVideoQualityCallback:c,setVideoPlayerClient:d}=(0,i.useToolbarAction)();return r.default.useEffect(()=>(t&&(null==o||o(t)),a&&(null==l||l(a)),n&&(null==c||c(n)),s&&(null==d||d(s)),()=>{t&&(null==o||o(void 0)),a&&(null==l||l(void 0)),n&&(null==c||c(void 0)),s&&(null==d||d(void 0))}),[t,a,n,s]),r.default.createElement(r.default.Fragment,null,e.children)},i.ToolbarActionWrapper.displayName="ToolbarActionWrapper"})),define("typescript/libraries/file-viewer/src/toolbar/utils",["require","exports","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.isToolbarInverse=void 0;i.isToolbarInverse=(e,i)=>!e||i===t.PreviewType.Excel})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_buttons",["require","exports","tslib","react","react-intl","react-redux","dig-components/tooltips","dig-components/typography","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/toolbar/utils","typescript/libraries/file-viewer/src/toolbar/toolbar_actions"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OverflowMenu=i.FindInDocumentButton=i.PrintButton=i.SidebarToggleButton=i.PageNavigationControls=i.FullScreenButton=i.ZoomToFitButton=i.ZoomInButton=i.ZoomOutButton=i.ToolbarButton=i.useToolbarButtonConfig=void 0,r=t.__importStar(r),p=t.__importStar(p);function E(){var e;const{fileViewerId:i}=(0,h.useFileViewerContext)(),t=null===(e=(0,m.useCurrentFileInfo)(i))||void 0===e?void 0:e.previewKey,r=(0,n.useSelector)(e=>(0,b.getPreviewMetadata)(e,t)),a=(0,w.resolvePreviewType)(r),s=(0,n.useSelector)(e=>(0,b.getIsFullScreen)(e,i)),o=(0,y.isToolbarInverse)(s,a);return{fileViewerId:i,previewKey:t,previewType:a,showInverse:o,isFullScreen:s}}i.useToolbarButtonConfig=E;i.ToolbarButton=({tooltipText:e,className:i,onClick:t,icon:a,disabled:n,inverseTooltip:o,closeTooltipOnClick:d=!1})=>e?r.createElement(s.Tooltip,{placement:"top",title:e,inverse:o,shouldCloseOnClick:d},r.createElement(l.IconButton,{className:i,variant:"transparent","aria-label":e,disabled:n,onClick:t,style:n?{pointerEvents:"all"}:{},inverse:!0},r.createElement(c.UIIcon,{src:a}))):r.createElement(l.IconButton,{className:i,variant:"transparent","aria-label":e,disabled:n,onClick:t,inverse:!0},r.createElement(c.UIIcon,{src:a})),i.ToolbarButton.displayName="ToolbarButton",i.ToolbarButton.displayName="ToolbarButton";i.ZoomOutButton=({scaleFactor:e})=>{const t=(0,n.useDispatch)(),s=(0,a.useIntl)(),{fileViewerId:o,previewKey:l,showInverse:c}=E(),u=r.useCallback(()=>t((0,f.zoomOut)({fileViewerId:o,previewKey:l,sourceContext:v.UserActionContext.Toolbar})),[o,l,t]);return r.createElement(i.ToolbarButton,{tooltipText:s.formatMessage({id:"QCtVKy",defaultMessage:"Zoom out"}),disabled:e<=.1,onClick:u,icon:d.ZoomOutLine,inverseTooltip:!c})},i.ZoomOutButton.displayName="ZoomOutButton",i.ZoomOutButton.displayName="ZoomOutButton";i.ZoomInButton=({scaleFactor:e})=>{const t=(0,n.useDispatch)(),s=(0,a.useIntl)(),{fileViewerId:o,previewKey:l,showInverse:c}=E(),u=(0,g.useStabilizedCallback)(()=>{t((0,f.zoomIn)({fileViewerId:o,previewKey:l,sourceContext:v.UserActionContext.Toolbar}))});return r.createElement(i.ToolbarButton,{tooltipText:s.formatMessage({id:"sMy5PN",defaultMessage:"Zoom in"}),disabled:e>=10,onClick:u,icon:d.ZoomInLine,inverseTooltip:!c})},i.ZoomInButton.displayName="ZoomInButton",i.ZoomInButton.displayName="ZoomInButton";i.ZoomToFitButton=({scaleFactor:e,fittedScaleFactor:i})=>{const t=(0,n.useDispatch)(),c=(0,a.useIntl)(),{fileViewerId:d,previewKey:u,showInverse:_}=E(),m=(0,g.useStabilizedCallback)(()=>{t((0,f.zoomToggleOriginalOrFit)({fileViewerId:d,previewKey:u,sourceContext:v.UserActionContext.Toolbar}))}),w=i&&e===i?c.formatMessage({id:"0AbCS6",defaultMessage:"View actual size"}):c.formatMessage({id:"OgNBqT",defaultMessage:"Zoom to fit"});return r.createElement(s.Tooltip,{placement:"top",title:w,inverse:!_},r.createElement(l.Button,{variant:"transparent","aria-label":w,className:p.toolbarZoomToFit,onClick:m,hasNoUnderline:!0,inverse:_},r.createElement(o.Text,{color:_?"faint":"standard",inverse:_},e?c.formatNumber(e,{style:"percent",maximumFractionDigits:0}):"")))},i.ZoomToFitButton.displayName="ZoomToFitButton",i.ZoomToFitButton.displayName="ZoomToFitButton";i.FullScreenButton=()=>{const e=(0,n.useDispatch)(),t=(0,a.useIntl)(),{fileViewerId:s,previewKey:o,showInverse:l,isFullScreen:c}=E(),u=(0,g.useStabilizedCallback)(()=>{const i={fileViewerId:s,previewKey:o,sourceContext:v.UserActionContext.Toolbar};e(c?(0,f.exitFullScreen)(i):(0,f.enterFullScreen)(i))});return r.createElement(i.ToolbarButton,{tooltipText:c?t.formatMessage({id:"1pq/ot",defaultMessage:"Exit fullscreen"}):t.formatMessage({id:"lQfB6H",defaultMessage:"Fullscreen"}),closeTooltipOnClick:!0,onClick:u,icon:c?d.FullscreenExitLine:d.FullscreenLine,disabled:!1,inverseTooltip:!l})},i.FullScreenButton.displayName="FullScreenButton",i.FullScreenButton.displayName="FullScreenButton";i.PageNavigationControls=({fileRivieraData:e,filePreviewUi:t})=>{var s,l,c,u;const m=(0,n.useDispatch)(),w=(0,a.useIntl)(),{fileViewerId:b,previewKey:h,showInverse:y}=E(),S={fileViewerId:b,previewKey:h,sourceContext:v.UserActionContext.Toolbar},P=null!==(l=null===(s=(0,_.filterDocFilePreviewUiState)(t))||void 0===s?void 0:s.currentPageIndex)&&void 0!==l?l:0,I=(0,g.useStabilizedCallback)(()=>{m((0,f.pageNavigation)(Object.assign({pageIndex:P-1},S)))}),T=(0,g.useStabilizedCallback)(()=>{m((0,f.pageNavigation)(Object.assign({pageIndex:P+1},S)))}),C=null===(u=null===(c=(0,_.filterDocPreviewRivieraData)(e))||void 0===c?void 0:c.metadata)||void 0===u?void 0:u.page_count;if(null==P||null==C)return null;const A=P+1,O="".padEnd((""+C).length-(""+A).length,"0");return r.createElement(r.Fragment,null,r.createElement(i.ToolbarButton,{disabled:P<1,onClick:I,tooltipText:w.formatMessage({id:"sago3n",defaultMessage:"Page up"}),icon:d.ChevronUpLine,inverseTooltip:!y}),r.createElement(o.Text,{color:y?"faint":"standard",className:p.pageDisplay,inverse:y},r.createElement("span",{className:p.pageDisplayPadding},O),w.formatMessage({id:"t6aTtx",defaultMessage:"{currentPage, number} of {totalPages, number}"},{currentPage:A,totalPages:C})),r.createElement(i.ToolbarButton,{disabled:P>=C-1,onClick:T,tooltipText:w.formatMessage({id:"5Nekbe",defaultMessage:"Page down"}),icon:d.ChevronDownLine,inverseTooltip:!y}))},i.PageNavigationControls.displayName="PageNavigationControls",i.PageNavigationControls.displayName="PageNavigationControls";i.SidebarToggleButton=({isSidebarOpen:e,disabled:t,isInMenu:s})=>{const o=(0,n.useDispatch)(),l=(0,a.useIntl)(),{fileViewerId:p,showInverse:_}=E(),m=(0,g.useStabilizedCallback)(()=>{o(e?(0,f.closeDocSidebar)({fileViewerId:p,sourceContext:v.UserActionContext.Toolbar}):(0,f.openDocSidebar)({fileViewerId:p,sourceContext:v.UserActionContext.Toolbar}))}),w=e?l.formatMessage({id:"ttmV3r",defaultMessage:"Hide sidebar"}):l.formatMessage({id:"NIm51y",defaultMessage:"Show sidebar"}),b=e?d.SidebarHideLine:d.SidebarShowLine;return s?r.createElement(u.Menu.ActionItem,{onClick:m,disabled:t,preferComposition:!0},r.createElement(u.Menu.RowAccessory,null,r.createElement(c.UIIcon,{src:b})),r.createElement(u.Menu.RowTitle,null,w)):r.createElement(i.ToolbarButton,{key:`sidebar-${e}`,tooltipText:w,onClick:m,icon:b,disabled:t,inverseTooltip:!_})},i.SidebarToggleButton.displayName="SidebarToggleButton",i.SidebarToggleButton.displayName="SidebarToggleButton";i.PrintButton=({isMenuItem:e})=>{const t=(0,n.useDispatch)(),s=(0,a.useIntl)(),{showInverse:o,fileViewerId:l,previewKey:p,previewType:_}=E(),{onPrint:m}=(0,S.useToolbarAction)(),w=(0,g.useStabilizedCallback)(()=>{null==m||m(),t((0,f.print)({fileViewerId:l,previewKey:p,previewType:_,sourceContext:v.UserActionContext.Toolbar}))}),b=s.formatMessage({id:"tBZioS",defaultMessage:"Print"});return e?r.createElement(u.Menu.ActionItem,{onClick:w,preferComposition:!0},r.createElement(u.Menu.RowAccessory,null,r.createElement(c.UIIcon,{src:d.PrintLine})),r.createElement(u.Menu.RowTitle,null,b)):r.createElement(i.ToolbarButton,{tooltipText:b,onClick:w,disabled:!1,icon:d.PrintLine,inverseTooltip:!o})},i.PrintButton.displayName="PrintButton",i.PrintButton.displayName="PrintButton";i.FindInDocumentButton=({isMenuItem:e})=>{const t=(0,a.useIntl)(),{showInverse:n}=E(),{onFindInDoc:s}=(0,S.useToolbarAction)(),o=(0,g.useStabilizedCallback)(()=>{null==s||s()}),l=t.formatMessage({id:"M/F/hG",defaultMessage:"Find in document"});return e?r.createElement(u.Menu.ActionItem,{onClick:o,preferComposition:!0},r.createElement(u.Menu.RowAccessory,null,r.createElement(c.UIIcon,{src:d.SearchLine})),r.createElement(u.Menu.RowTitle,null,l)):r.createElement(i.ToolbarButton,{tooltipText:l,onClick:o,disabled:!1,icon:d.SearchLine,inverseTooltip:!n,closeTooltipOnClick:!0})},i.FindInDocumentButton.displayName="FindInDocumentButton",i.FindInDocumentButton.displayName="FindInDocument";i.OverflowMenu=({intl:e,children:i})=>r.createElement(u.Menu.Wrapper,{closeOnSelection:!1},({getContentProps:t,getTriggerProps:a})=>{const n=e.formatMessage({id:"En+hlM",defaultMessage:"More actions"});return r.createElement("div",null,r.createElement(s.Tooltip,{placement:"top",title:n},r.createElement("span",null,r.createElement(l.IconButton,Object.assign({variant:"transparent"},a(),{inverse:!0}),r.createElement(c.UIIcon,{src:d.MoreHorizontalLine})))),r.createElement(u.Menu.Content,Object.assign({},t()),r.createElement(u.Menu.Segment,null,i)))}),i.OverflowMenu.displayName="OverflowMenu"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons",["require","exports","tslib","react","react-redux","react-intl","classnames","dig-components/icons","dig-components/icons/src","dig-components/tooltips","dig-components/buttons","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/toolbar/toolbar_buttons"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FlipButtons=i.filterValidFileFlippingContext=void 0,r=t.__importDefault(r),s=t.__importDefault(s),u=t.__importStar(u);i.filterValidFileFlippingContext=e=>void 0!==e&&e.parent_files_count>=0?e:void 0;i.FlipButtons=({isShown:e,fileCollectionContext:t,flipperCallbacks:o})=>{const c=(0,a.useDispatch)(),d=(0,n.useIntl)(),{fileViewerId:m,previewKey:w,showInverse:b}=(0,_.useToolbarButtonConfig)(),h={fileViewerId:m,previewKey:w,sourceContext:v.UserActionContext.Toolbar},y=(0,f.useStabilizedCallback)(()=>{c((0,p.flipToNextFile)(h))}),S=(0,f.useStabilizedCallback)(()=>{c((0,p.flipToPreviousFile)(h))}),E=d.formatMessage({id:"5h/4QP",defaultMessage:"Next"}),P=d.formatMessage({id:"XlDsZ8",defaultMessage:"Previous"}),I=(0,i.filterValidFileFlippingContext)(t);if(void 0===I)return null;const T=0===I.file_index,C=I.file_index===I.parent_files_count-1;return r.default.createElement(r.default.Fragment,null,r.default.createElement(g,{tooltip:P,onClick:S,className:(0,s.default)(u.toolbarFlipperLeft,{[u.hidden]:!e,[u.isFullScreen]:!b}),icon:l.ChevronLeftLine,isDisabled:T,showInverse:!b,isShown:e,flipperCallbacks:o}),r.default.createElement(g,{tooltip:E,onClick:y,className:(0,s.default)(u.toolbarFlipperRight,{[u.hidden]:!e,[u.isFullScreen]:!b,[u.windowsScrollBar]:window.navigator.platform.match(/win/gi)}),icon:l.ChevronRightLine,isDisabled:C,showInverse:!b,isShown:e,flipperCallbacks:o}))},i.FlipButtons.displayName="FlipButtons",i.FlipButtons.displayName="FlipButtons";const g=({className:e,tooltip:i,onClick:t,icon:a,isDisabled:n,showInverse:l,isShown:p,flipperCallbacks:v})=>r.default.createElement("div",{className:(0,s.default)(u.toolbarFlipper,e,{[u.hidden]:!p})},r.default.createElement(c.Tooltip,{title:i,openDelay:500,shouldCloseOnClick:!0,inverse:!l},r.default.createElement(d.IconButton,Object.assign({variant:"filled",size:"large",onClick:t,"aria-label":i,disabled:n},v),r.default.createElement(o.UIIcon,{src:a}))));g.displayName="FlipButton",g.displayName="FlipButton"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_file_counter",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ToolbarFileCounter=void 0,r=t.__importStar(r);const s=(0,a.defineMessage)({id:"nomoau",defaultMessage:"{file_number} of {file_count}"}),o=(0,a.defineMessage)({id:"LI56s4",defaultMessage:"{file_number} of many"});i.ToolbarFileCounter=({fileCollectionContext:e})=>{const i=(0,a.useIntl)(),t=(0,n.filterValidFileFlippingContext)(e);if(void 0===t||t.parent_files_count>99999)return null;const l=t.file_index+1,c=t.parent_files_count,d=t.parent_files_count<1e3?i.formatMessage(s,{file_number:l,file_count:c}):i.formatMessage(o,{file_number:l});return r.createElement("span",null,d)},i.ToolbarFileCounter.displayName="ToolbarFileCounter"})),define("typescript/libraries/file-viewer/src/preview_content/preview_content",["require","exports","tslib","react","react-intl","react-redux","classnames","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/libraries/file-viewer/src/preview_content/preview_content.module.css","typescript/libraries/file-viewer/src/toolbar/toolbar","typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport","dig-components/progress_indicators","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/preview_content/utils","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/hooks/useFlipOnSwipe","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/utils","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/hooks/selectors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewContent=void 0,r=t.__importDefault(r),s=t.__importDefault(s),o=t.__importStar(o),l=t.__importStar(l);i.PreviewContent=({activePluginInstance:e,plugins:i,snackbarManagerPluginInstance:t,archiveFiles:I,fileConfig:T,fullFilePreviewUi:C,fullRivieraData:A,children:O})=>{var F;const k=(0,a.useIntl)(),{width:x,rendererWidth:D,rendererHeight:L,responsiveSize:M}=(0,p.useFileViewerRenderContext)(),{fileViewerId:R,featureConfig:N}=(0,v.useFileViewerContext)(),j=(0,P.useFileViewerSelector)(R,b.getFileViewerUi),V=(0,P.useFileViewerSelector)(R,b.getIsFullScreen),B=(0,P.useFileViewerSelector)(R,b.getHasBeenFlipped),U=(0,n.useSelector)(b.getIsPreviewLoading),K=(0,P.useFileViewerSelector)(R,b.getCurrentFile),z=null==K?void 0:K.previewKey,H=(0,P.usePreviewKeySelector)(z,b.getPreviewMetadata),q=(0,n.useSelector)(e=>(0,b.getFilePreviewUi)(e,R,z)),W=(0,P.usePreviewKeySelector)(z,b.getFileMetadata),G=(0,P.usePreviewKeySelector)(z,b.getRivieraData),Y=(0,P.useFileViewerSelector)(R,f.isPluginEditMode),Z=null!==(F=null==W?void 0:W.file_name)&&void 0!==F?F:"",X=(0,w.resolveToolbarPreviewType)((0,m.resolvePreviewType)(H),N,W),Q=(0,w.getArchivedFileToolbarConfig)(X,K,q,I,C,A),$=!!(0,n.useSelector)(e=>(0,f.getSelectedHideContentPanePluginId)(e,R)),J=(0,n.useSelector)(e=>(0,b.getFileViewerState)(e,R)),ee=N.preview_content_only,ie=(0,g.shouldShowDocSidebar)(x,X)&&j.isDocSidebarOpen,te=X===y.PreviewType.SsrDoc||X===y.PreviewType.CloudDoc,re=X===y.PreviewType.Audio||X===y.PreviewType.Video,ae=!!(null==J?void 0:J.error),ne=X===y.PreviewType.Archive,se=!!(0,S.getCloudDocExitUrl)(H),oe=X===y.PreviewType.Linkfile,le=!Y&&!(0,_.is_supported_mobile_browser)()&&(0,d.isEligibleToShowSkeletonPreview)(null==H?void 0:H.content)&&!B,ce=!(ee&&re||(0,E.noToolbarShown)(M,N)),de=se||oe||ae,ue=r.default.createElement(u.Spinner,{"aria-valuetext":k.formatMessage({id:"zqXonC",defaultMessage:"Your preview is loading"}),"aria-label":"preview-loading-spinner",inverse:V||Y}),pe=le&&G&&r.default.createElement(d.SkeletonViewport,{width:D,height:L,docSidebarCollapsed:!ie,docMetadata:te?G.metadata:void 0,fileContent:H,fileName:Z,imgSizeOptimizationEnabled:N.img_size_optimization}),{handleTouchStart:ve,handleTouchEnd:fe}=(0,h.useFlipOnSwipe)(R,z,N.mobile_web_preview_flipper);return r.default.createElement("div",{className:(0,s.default)(l.previewContentWrapper,{[l.editMode]:Y}),style:{width:D},onTouchStart:ve,onTouchEnd:fe},r.default.createElement("div",{className:(0,s.default)(l.loadingContent,{[l.hidden]:!U&&!$,[o.isFullScreen]:V})},U?le?pe:ue:null),r.default.createElement("div",{className:(0,s.default)(l.previewContent,{[l.hidden]:U||$})},O),r.default.createElement("div",{className:(0,s.default)({[l.hidden]:$})},ce&&r.default.createElement(c.ConfigurableToolbar,Object.assign({previewType:X,fileRivieraData:G,filePreviewUi:q,fileViewerUi:j,rootArchiveFileInformation:ne&&z?{fileName:Z,previewKey:z}:void 0,activePluginInstance:e,previewMetadata:H,plugins:i,snackbarManagerPluginInstance:t,forceHideControlRow:de,fileConfig:T},Q))))},i.PreviewContent.displayName="PreviewContent"})),define("typescript/libraries/file-viewer/src/preview_content/utils",["require","exports","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.resolveToolbarPreviewType=i.getArchivedFileToolbarConfig=void 0,i.getArchivedFileToolbarConfig=function(e,i,s,o,l,c){if(!(e===t.PreviewType.Archive)||!i)return{};const d=(0,a.getPreviewKeyForNestedArchiveFile)(i.file_id,(0,a.getSubpath)((null==s?void 0:s.currentPath)||[])),u=(0,n.getArchiveFilesPreviewMetadata)(o,d),p=(0,r.resolvePreviewType)(u),v=(0,n.getFilePreviewUiData)(l,d),f=(0,n.getRivieraDataFromSlice)(c,d);return u&&u.content&&v?{previewType:p,previewMetadata:u,filePreviewUi:v,fileRivieraData:f}:{}};i.resolveToolbarPreviewType=(e,i,r)=>{var a;switch(e){case t.PreviewType.SsrDoc:case t.PreviewType.CloudDoc:return(null===(a=null==r?void 0:r.file_name)||void 0===a?void 0:a.endsWith(".gsheet"))?t.PreviewType.RawHTML:e;case t.PreviewType.Excel:return"excel1"===i.excel_support.support?t.PreviewType.HTML:"ms_view_embed"===i.excel_support.embed_support?t.PreviewType.RawHTML:e;default:return e}}})),define("typescript/libraries/file-viewer/src/preview_content/preview_content.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_content/preview_content.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.hidden=i.previewContentWrapper=i.editMode=i.previewContent=i.loadingContent=void 0,i.loadingContent="_loadingContent_axfrr_1",i.previewContent="_previewContent_axfrr_8",i.editMode="_editMode_axfrr_18",i.previewContentWrapper="_previewContentWrapper_axfrr_22",i.hidden="_hidden_axfrr_27";i.default={loadingContent:"_loadingContent_axfrr_1",previewContent:"_previewContent_axfrr_8",editMode:"_editMode_axfrr_18",previewContentWrapper:"_previewContentWrapper_axfrr_22",hidden:"_hidden_axfrr_27"}})),define("typescript/libraries/file-viewer/src/toolbar/toolbar.module.css",["require","exports","css!typescript/libraries/file-viewer/src/toolbar/toolbar.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.qualityBadgeEmbed=i.qualityBadge=i.transcriptLoadingSpinner=i.rightButtonContainer=i.leftButtonContainer=i.timeLine=i.thumbnailImage=i.thumbnailLoadError=i.thumbnailTime=i.commentIconHolder=i.thumbnailHolderComment=i.thumbnailWrapper=i.thumbnailHolder=i.rangeMarker=i.rangeMarkersContainer=i.commentMarker=i.commentMarkersContainer=i.videoQualityLevel=i.toolbarVolumeMenu=i.toolbarVolumeRow=i.toolbarVolumeInput=i.toolbarTimeDisplay=i.disabled=i.hidden=i.pageDisplayPadding=i.pageDisplay=i.toolbarStar=i.toolbarFilename=i.toolbarCounterSection=i.toolbarFilenameSectionTitle=i.toolbarFilenameSection=i.toolbarFilenameRow=i.toolbarZoomToFit=i.windowsScrollBar=i.toolbarFlipperRight=i.toolbarFlipperLeft=i.isFullScreen=i.regularButton=i.toolbarFlipper=i.toolbarSection=i.toolbarVideoControlsRow=i.toolbarAudioVideo=i.toolbarRow=i.normal=i.playbackSpeedMenu=i.toolbar=i.withSidebar=i.toolbarHolder=i.toolbarVerticalPadding=i.toolbarRowHeight=void 0,i.toolbarRowHeight="40px",i.toolbarVerticalPadding="24px",i.toolbarHolder="_toolbar-holder_1c1zh_11",i.withSidebar="_withSidebar_1c1zh_23",i.toolbar="_toolbar_1c1zh_11",i.playbackSpeedMenu="_playbackSpeedMenu_1c1zh_42",i.normal="_normal_1c1zh_46",i.toolbarRow="_toolbar-row_1c1zh_53",i.toolbarAudioVideo="_toolbar-audio-video_1c1zh_62",i.toolbarVideoControlsRow="_toolbar-video-controls-row_1c1zh_65",i.toolbarSection="_toolbar-section_1c1zh_74",i.toolbarFlipper="_toolbar-flipper_1c1zh_96",i.regularButton="_regular-button_1c1zh_111",i.isFullScreen="_isFullScreen_1c1zh_116",i.toolbarFlipperLeft="_toolbar-flipper-left_1c1zh_121",i.toolbarFlipperRight="_toolbar-flipper-right_1c1zh_125",i.windowsScrollBar="_windowsScrollBar_1c1zh_129",i.toolbarZoomToFit="_toolbar-zoom-to-fit_1c1zh_133",i.toolbarFilenameRow="_toolbar-filename-row_1c1zh_172",i.toolbarFilenameSection="_toolbar-filename-section_1c1zh_176",i.toolbarFilenameSectionTitle="_toolbar-filename-section-title_1c1zh_180",i.toolbarCounterSection="_toolbar-counter-section_1c1zh_184",i.toolbarFilename="_toolbar-filename_1c1zh_172",i.toolbarStar="_toolbar-star_1c1zh_198",i.pageDisplay="_page-display_1c1zh_204",i.pageDisplayPadding="_page-display-padding_1c1zh_208",i.hidden="_hidden_1c1zh_213",i.disabled="_disabled_1c1zh_218",i.toolbarTimeDisplay="_toolbar-time-display_1c1zh_227",i.toolbarVolumeInput="_toolbar-volume-input_1c1zh_232",i.toolbarVolumeRow="_toolbar-volume-row_1c1zh_310",i.toolbarVolumeMenu="_toolbar-volume-menu_1c1zh_319",i.videoQualityLevel="_video-quality-level_1c1zh_326",i.commentMarkersContainer="_comment-markers-container_1c1zh_330",i.commentMarker="_comment-marker_1c1zh_330",i.rangeMarkersContainer="_range-markers-container_1c1zh_345",i.rangeMarker="_range-marker_1c1zh_345",i.thumbnailHolder="_thumbnail-holder_1c1zh_361",i.thumbnailWrapper="_thumbnail-wrapper_1c1zh_369",i.thumbnailHolderComment="_thumbnail-holder-comment_1c1zh_369",i.commentIconHolder="_comment-icon-holder_1c1zh_375",i.thumbnailTime="_thumbnail-time_1c1zh_386",i.thumbnailLoadError="_thumbnail-load-error_1c1zh_496",i.thumbnailImage="_thumbnail-image_1c1zh_505",i.timeLine="_time-line_1c1zh_528",i.leftButtonContainer="_left-button-container_1c1zh_564",i.rightButtonContainer="_right-button-container_1c1zh_565",i.transcriptLoadingSpinner="_transcriptLoadingSpinner_1c1zh_578",i.qualityBadge="_quality-badge_1c1zh_584",i.qualityBadgeEmbed="_quality-badge-embed_1c1zh_602";i.default={toolbarRowHeight:"40px",toolbarVerticalPadding:"24px",toolbarHolder:"_toolbar-holder_1c1zh_11",withSidebar:"_withSidebar_1c1zh_23",toolbar:"_toolbar_1c1zh_11",playbackSpeedMenu:"_playbackSpeedMenu_1c1zh_42",normal:"_normal_1c1zh_46",toolbarRow:"_toolbar-row_1c1zh_53",toolbarAudioVideo:"_toolbar-audio-video_1c1zh_62",toolbarVideoControlsRow:"_toolbar-video-controls-row_1c1zh_65",toolbarSection:"_toolbar-section_1c1zh_74",toolbarFlipper:"_toolbar-flipper_1c1zh_96",regularButton:"_regular-button_1c1zh_111",isFullScreen:"_isFullScreen_1c1zh_116",toolbarFlipperLeft:"_toolbar-flipper-left_1c1zh_121",toolbarFlipperRight:"_toolbar-flipper-right_1c1zh_125",windowsScrollBar:"_windowsScrollBar_1c1zh_129",toolbarZoomToFit:"_toolbar-zoom-to-fit_1c1zh_133",toolbarFilenameRow:"_toolbar-filename-row_1c1zh_172",toolbarFilenameSection:"_toolbar-filename-section_1c1zh_176",toolbarFilenameSectionTitle:"_toolbar-filename-section-title_1c1zh_180",toolbarCounterSection:"_toolbar-counter-section_1c1zh_184",toolbarFilename:"_toolbar-filename_1c1zh_172",toolbarStar:"_toolbar-star_1c1zh_198",pageDisplay:"_page-display_1c1zh_204",pageDisplayPadding:"_page-display-padding_1c1zh_208",hidden:"_hidden_1c1zh_213",disabled:"_disabled_1c1zh_218",toolbarTimeDisplay:"_toolbar-time-display_1c1zh_227",toolbarVolumeInput:"_toolbar-volume-input_1c1zh_232",toolbarVolumeRow:"_toolbar-volume-row_1c1zh_310",toolbarVolumeMenu:"_toolbar-volume-menu_1c1zh_319",videoQualityLevel:"_video-quality-level_1c1zh_326",commentMarkersContainer:"_comment-markers-container_1c1zh_330",commentMarker:"_comment-marker_1c1zh_330",rangeMarkersContainer:"_range-markers-container_1c1zh_345",rangeMarker:"_range-marker_1c1zh_345",thumbnailHolder:"_thumbnail-holder_1c1zh_361",thumbnailWrapper:"_thumbnail-wrapper_1c1zh_369",thumbnailHolderComment:"_thumbnail-holder-comment_1c1zh_369",commentIconHolder:"_comment-icon-holder_1c1zh_375",thumbnailTime:"_thumbnail-time_1c1zh_386",thumbnailLoadError:"_thumbnail-load-error_1c1zh_496",thumbnailImage:"_thumbnail-image_1c1zh_505",timeLine:"_time-line_1c1zh_528",leftButtonContainer:"_left-button-container_1c1zh_564",rightButtonContainer:"_right-button-container_1c1zh_565",transcriptLoadingSpinner:"_transcriptLoadingSpinner_1c1zh_578",qualityBadge:"_quality-badge_1c1zh_584",qualityBadgeEmbed:"_quality-badge-embed_1c1zh_602"}})),define("typescript/libraries/file-viewer/src/preview_archive/breadcrumbs",["require","exports","tslib","dig-components/breadcrumb","react","typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.css","typescript/libraries/file-viewer/src/core/data/actions","classnames"],(function(e,i,t,r,a,n,s,o){"use strict";function l(e,i,t,r){return()=>{t&&r((0,s.updateArchiveFileCurrentPath)({currentPath:e,fileViewerId:i,previewKey:t,isDir:!0}))}}Object.defineProperty(i,"__esModule",{value:!0}),i.ArchiveFileBreadcrumbs=void 0,a=t.__importStar(a),n=t.__importStar(n),o=t.__importDefault(o),i.ArchiveFileBreadcrumbs=a.memo(e=>{const{archiveName:i,currentPath:t,fileViewerId:s,previewKey:c,dispatch:d,isMobile:u,showInverse:p=!1}=e,v=a.useCallback(l([],s,c,d),[s,null==c?void 0:c.serialized]),f=(0,o.default)(n.truncateText,{[n.breadCrumbText]:!u,[n.normal]:!p,[n.inverse]:p});return a.createElement(r.Breadcrumb,{isRootOverflow:!1,alwaysShowRoot:!0,size:u?"small":"standard",className:n.archiveFileBreadcrumb},a.createElement(r.Breadcrumb.Link,{href:v,isCurrentPath:0===t.length},a.createElement("div",{className:f},i)),t.map((e,i)=>{const n=l(t.slice(0,i+1),s,c,d);return a.createElement(r.Breadcrumb.Link,{href:n,isCurrentPath:i===t.length-1,key:`${i}-${e}`},a.createElement("div",{className:f},e))}))}),i.ArchiveFileBreadcrumbs.displayName="ArchiveFileBreadcrumbs"})),define("typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.truncateText=i.normal=i.inverse=i.breadCrumbText=i.titlebarV2Breadcrumbs=i.snackBar=i.extractAllButtonBar=i.archiveFileBreadcrumb=i.loadingScreen=i.folderTable=i.emptyFolder=void 0,i.emptyFolder="_emptyFolder_18jw7_1",i.folderTable="_folderTable_18jw7_9",i.loadingScreen="_loadingScreen_18jw7_20",i.archiveFileBreadcrumb="_archiveFileBreadcrumb_18jw7_25",i.extractAllButtonBar="_extractAllButtonBar_18jw7_31",i.snackBar="_snackBar_18jw7_35",i.titlebarV2Breadcrumbs="_titlebarV2Breadcrumbs_18jw7_54",i.breadCrumbText="_breadCrumbText_18jw7_54",i.inverse="_inverse_18jw7_59",i.normal="_normal_18jw7_63",i.truncateText="_truncateText_18jw7_72";i.default={emptyFolder:"_emptyFolder_18jw7_1",folderTable:"_folderTable_18jw7_9",loadingScreen:"_loadingScreen_18jw7_20",archiveFileBreadcrumb:"_archiveFileBreadcrumb_18jw7_25",extractAllButtonBar:"_extractAllButtonBar_18jw7_31",snackBar:"_snackBar_18jw7_35",titlebarV2Breadcrumbs:"_titlebarV2Breadcrumbs_18jw7_54",breadCrumbText:"_breadCrumbText_18jw7_54",inverse:"_inverse_18jw7_59",normal:"_normal_18jw7_63",truncateText:"_truncateText_18jw7_72"}})),define("typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.css",["require","exports","css!typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.metadataText=i.meatballSeparator=i.imageContainer=i.fileIconContainer=i.footer=i.actionRow=i.actions=i.fileName=i.metadata=i.meatballMenuDismiss=i.signInButton=i.meatballMenuContainer=i.meatballMenuOverlay=i.rightButtonsContainer=i.saveToDropboxLogo=i.abTestButton=i.footerContainer=i.mobileFooterHeight=void 0,i.mobileFooterHeight="72px",i.footerContainer="_footerContainer_1wx3r_9",i.abTestButton="_abTestButton_1wx3r_20",i.saveToDropboxLogo="_saveToDropboxLogo_1wx3r_24",i.rightButtonsContainer="_rightButtonsContainer_1wx3r_28",i.meatballMenuOverlay="_meatballMenuOverlay_1wx3r_33",i.meatballMenuContainer="_meatballMenuContainer_1wx3r_42",i.signInButton="_signInButton_1wx3r_53",i.meatballMenuDismiss="_meatballMenuDismiss_1wx3r_67",i.metadata="_metadata_1wx3r_74",i.fileName="_fileName_1wx3r_80",i.actions="_actions_1wx3r_84",i.actionRow="_actionRow_1wx3r_87",i.footer="_footer_1wx3r_9",i.fileIconContainer="_fileIconContainer_1wx3r_121",i.imageContainer="_imageContainer_1wx3r_128",i.meatballSeparator="_meatballSeparator_1wx3r_143",i.metadataText="_metadataText_1wx3r_151";i.default={mobileFooterHeight:"72px",footerContainer:"_footerContainer_1wx3r_9",abTestButton:"_abTestButton_1wx3r_20",saveToDropboxLogo:"_saveToDropboxLogo_1wx3r_24",rightButtonsContainer:"_rightButtonsContainer_1wx3r_28",meatballMenuOverlay:"_meatballMenuOverlay_1wx3r_33",meatballMenuContainer:"_meatballMenuContainer_1wx3r_42",signInButton:"_signInButton_1wx3r_53",meatballMenuDismiss:"_meatballMenuDismiss_1wx3r_67",metadata:"_metadata_1wx3r_74",fileName:"_fileName_1wx3r_80",actions:"_actions_1wx3r_84",actionRow:"_actionRow_1wx3r_87",footer:"_footer_1wx3r_9",fileIconContainer:"_fileIconContainer_1wx3r_121",imageContainer:"_imageContainer_1wx3r_128",meatballSeparator:"_meatballSeparator_1wx3r_143",metadataText:"_metadataText_1wx3r_151"}})),define("typescript/libraries/file-viewer/src/loading_helpers",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.preloadImage=void 0,i.preloadImage=function(e,i){return new Promise((t,r)=>{const a=Date.now(),n=new Image;n.onload=()=>{t({started:a,completed:Date.now()})},n.onerror=()=>{r({started:a,failed:Date.now()})},i&&(i.srcset&&(n.srcset=i.srcset),i.sizes&&(n.sizes=i.sizes)),n.src=e})}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,i,t,r){void 0===r&&(r=t);var a=Object.getOwnPropertyDescriptor(i,t);a&&("get"in a?i.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,a)}:function(e,i,t,r){void 0===r&&(r=t),e[r]=i[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(i,e,t);return __setModuleDefault(i,e),i};define("metaserver/static/js/capture/loadable_preview_recorder",["require","exports","metaserver/static/js/async/loadable"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AsyncPreviewRecorder=void 0,i.AsyncPreviewRecorder=(0,t.Loadable)({loader:()=>new Promise((i,t)=>{e(["metaserver/static/js/capture/previews_recorder"],i,t)}).then(__importStar).then(({PreviewRecorder:e})=>e)})})),define("metaserver/static/js/shared_link_folder/app",["require","exports","tslib","lodash","react","redux","react-redux","metaserver/static/js/loggers/folder_preview_logger","metaserver/static/js/open_in_app/actions","metaserver/static/js/file_viewer/data/actions","metaserver/static/js/file_viewer/data/selectors","metaserver/static/js/file_viewer/location_utils","metaserver/static/js/location/with_location","metaserver/static/js/file_viewer/url_utils","metaserver/static/js/previews/ui/constants","metaserver/static/js/shared_link_folder/data/actions","metaserver/static/js/shared_link_folder/data/store","metaserver/static/js/shared_link_folder/page","metaserver/static/js/clean/viewer","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/core/persistence/storage","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/core/langpack","react-intl","metaserver/static/js/core/i18n","metaserver/static/js/shared_link_folder/utils","metaserver/static/js/shared_link_folder/data/selectors","metaserver/static/js/clean/csrf","metaserver/static/js/sharing/clean/util/link_util/parser","metaserver/static/js/clean/ui/error_boundary","metaserver/static/js/core/exception","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/clean/ui/snackbar_manager","metaserver/static/js/async/loadable","metaserver/static/js/file_viewer/async_controller","metaserver/static/js/edison/ui/spa_product_name","metaserver/static/js/campaigns/emitter"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I,T,C,A,O,F,k,x,D,L,M,R,N){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SharedLinkFolderApp=i._SharedLinkFolderApp=i.AsyncFileCollectionViewer=void 0,r=t.__importStar(r),a=t.__importDefault(a),h=t.__importStar(h),E=t.__importStar(E),O=t.__importStar(O),i.AsyncFileCollectionViewer=(0,L.Loadable)({loader:()=>new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/collection_viewer"],i,t)}).then(t.__importStar).then(({FileCollectionViewer:e})=>e)});const j=e=>({label:e.filename,href:e.href}),V=({children:e})=>{const i=a.default.useRef(null),t=a.default.useRef(null);return a.default.useEffect(()=>{x.Snackbar.manager=x.Snackbar.manager?x.Snackbar.manager:i.current},[]),a.default.createElement("div",{ref:t},e,a.default.createElement(D.SnackbarManager,{ref:i,getParentElement:()=>t.current,useDigSnackbars:!0}))};function B(){let e=h.get_timer();return e.timeToInteractive()&&(e=h.get_timer("shared_link_folder_ajax"),e.initialize({requireTTI:!0,url:"shared_link_folder_ajax"})),e}V.displayName="SnackbarManagerContainer";class U extends a.default.PureComponent{constructor(i){var r;super(i),this.startPreviewFileTiming=()=>{(0,M.startPreviewAjaxTimer)("shared_folder_previews"),(0,R.startNavigation)(),(0,R.setSpaProductName)("shared_folder_previews")},this.handleOpenFile=e=>{this.previewDataPromise?this.previewDataPromise.then(()=>{this.startPreviewFileTiming(),(0,v.openFile)(e)}):(this.startPreviewFileTiming(),(0,v.openFile)(e))},this.handleOpenFolder=e=>{this.previewDataPromise?this.previewDataPromise.then(()=>(0,T.openFolder)(e)):(0,T.openFolder)(e)};const a=w.Viewer.get_viewer(),n=a.active_user||a.work_user||a.personal_user,{folderShareToken:s,folderData:l}=i,c=(0,T.getSecureHashOrSubPath)(s);this.state={folderHierarchyMap:{[c]:l?[l]:[]},pageYOffset:0,previewSourceAction:f.PreviewSourceAction.Visit,user:n},this.folderPreviewSession=(0,o.createSession)({subfolder_nav_tracking:i.subfolderNavTracking,folder_id:null===(r=i.folder)||void 0===r?void 0:r.folder.folder_id}),this.webTimer=B(),this.webTimer.waitForTTI().then(()=>t.__awaiter(this,void 0,void 0,(function*(){yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/collection_viewer"],i,t)}).then(t.__importStar)}))),this.rlkey=s.rlkey}UNSAFE_componentWillMount(){this.webTimer.applicationStart();const{openImmediatelyInApp:e}=this.props;if(e)return this.openImmediatelyInApp()}UNSAFE_componentWillReceiveProps(e){var i,t;!this.props.viewingFilename&&e.viewingFilename&&this.setState({pageYOffset:window.pageYOffset}),this.props.viewingFilename!==e.viewingFilename&&this.setState({previewSourceAction:f.PreviewSourceAction.Click});const r=e.folder?e.folder.folder.ns_id:void 0,a=(0,T.getFolderShareTokenWithRlkey)(e.folderShareToken,this.rlkey),n=(0,T.getSecureHashOrSubPath)(a),s=(0,T.getFolderShareTokenWithRlkey)(this.props.folderShareToken,this.rlkey);n!==(0,T.getSecureHashOrSubPath)(s)?(this.webTimer=B(),this.webTimer.restart(),this.folderPreviewSession=(0,o.createSession)({source_action:f.PreviewSourceAction.Click,subfolder_nav_tracking:e.subfolderNavTracking,has_cached_data:e.folder&&!!e.folder.entries.length,ns_id:r,folder_id:null===(i=e.folder)||void 0===i?void 0:i.folder.folder_id}),this.props.onFolderLoad(a,this.webTimer)):this.props.viewingFilename&&!e.viewingFilename&&(this.folderPreviewSession=(0,o.createSession)({source_action:f.PreviewSourceAction.FileViewerExit,subfolder_nav_tracking:e.subfolderNavTracking,has_cached_data:!0,ns_id:r,folder_id:null===(t=e.folder)||void 0===t?void 0:t.folder.folder_id})),e.folder&&e.folder.folder&&(0,T.setPageTitle)(e.folder.folder.filename)}componentDidMount(){return t.__awaiter(this,void 0,void 0,(function*(){const{onFolderPrefetch:e,prefetchFirstPagePromise:i}=this.props,t=(0,T.getFolderShareTokenWithRlkey)(this.props.folderShareToken,this.rlkey);t&&(this.previewDataPromise=e(t,i)),yield(0,b.waitForTTI)();const a=yield this.readFolderHierarchy();this.setState((e,i)=>{const t=(0,T.getFolderShareTokenWithRlkey)(i.folderShareToken,this.rlkey),n=(0,T.getSecureHashOrSubPath)(t);return{folderHierarchyMap:r.get(a,n)?a:e.folderHierarchyMap}})}))}componentDidUpdate(e){const{viewingFilename:i}=this.props,{pageYOffset:t}=this.state;i!==e.viewingFilename&&(i||window.scrollTo(0,t));const r=(0,T.getFolderShareTokenWithRlkey)(e.folderShareToken,this.rlkey),a=(0,T.getSecureHashOrSubPath)(r),n=(0,T.getFolderShareTokenWithRlkey)(this.props.folderShareToken,this.rlkey),s=(0,T.getSecureHashOrSubPath)(n);a!==s&&(this.setState((e,i)=>{if(!i.folder||!(0,T.shouldUpdateFolderHierarchy)(e.folderHierarchyMap,r,n)){const{folderHierarchyMap:i}=e;return{folderHierarchyMap:i}}const{folder:t}=i.folder;return{folderHierarchyMap:Object.assign(Object.assign({},e.folderHierarchyMap),{[s]:[...e.folderHierarchyMap[a]||{},t]})}},this.writeFolderHierarchy),(0,T.removeRlkeyFromURL)())}getUserStorageKey(){return t.__awaiter(this,void 0,void 0,(function*(){const i=yield new Promise((i,t)=>{e(["sjcl"],i,t)}).then(t.__importStar),r=i.hash.sha256.hash((0,A.readCsrfToken)()||"");return i.codec.base64.fromBits(r)}))}writeFolderHierarchy(){return t.__awaiter(this,void 0,void 0,(function*(){y.SessionStorage.set("shared_folder_hierarchy",{[yield this.getUserStorageKey()]:this.state.folderHierarchyMap})}))}readFolderHierarchy(){return t.__awaiter(this,void 0,void 0,(function*(){return r.get(y.SessionStorage.get("shared_folder_hierarchy"),yield this.getUserStorageKey())}))}openImmediatelyInApp(){const{folder:e}=this.props;if(e)try{e.folder.open_in_app_data&&(0,l.openImmediately)(e.folder.open_in_app_data)}catch(e){}}render(){const{appDownloadInterstitialDismissed:e,brandingInfo:t,file:n,files:s,fileViewOrigin:o,fileViewTarget:l,folder:c,onAppDownloadInterstitialDismissed:d,outOfQuota:u,subfolders:p,viewingFilename:_,encryptionOptions:g,inCopyLinkButtonOOBPreviews:w,isPromptOnSharingPage:b,eflOverquotaVariant:h,addSavePreviewsVariant:y,saveToDropboxRenamingLocationVariant:S,smartFolderPreviewLayoutVariant:E,saveToDropboxOQUpsellVariant:P,controlledAccessSignInUpBannerVariant:I}=this.props,{folderHierarchyMap:C,user:A,previewSourceAction:F}=this.state,k=O.parseLink(window.location.href),x=r.get(C,(0,T.getSecureHashOrSubPath)((0,T.getFolderShareTokenWithRlkey)(this.props.folderShareToken,this.rlkey)),[]).map(j);if((0,N.emitPageLoaded)("preview_page",{}),_&&n){let e=[],r=[],c=[],d=[];return Array.isArray(s)&&s.length?s.forEach(i=>{r.push(i.shareToken),c.push(i.sharedLinkInfo),e.push(i.sharePermission),d.push(i.file)}):(d=[n.file],e=[n.sharePermission],r=[n.shareToken],c=[n.sharedLinkInfo]),a.default.createElement(i.AsyncFileCollectionViewer,{brandingInfo:t,canClose:!0,className:"no-background",file:n.file,files:d,fileViewOrigin:o,fileViewTarget:l,initialPreviewSourceContext:f.PreviewSourceContext.SharedLinkFolder,initialPreviewSourceAction:F,skipOuterRouting:!0,sharedLinkInfos:c,sharePermissions:e,shareTokens:r,titleBarCloseUrl:(0,v.getCurrentFolderHref)(),onCloseViewer:v.closeFile,user:A,encryptionOptions:g,ajaxTimerName:"shared_folder_previews"})}if(!c)return null;const{shareToken:D,sharedLinkInfo:L,folder:M,sharePermission:R,hasMore:B,takedownRequestType:U}=c,K={files:Array.isArray(s)?s.map(e=>e.file):[],folders:Array.isArray(p)?p.map(e=>e.folder):[]};return M.folder_id&&(this.folderPreviewSession.extra.folder_id=M.folder_id),a.default.createElement(V,null,a.default.createElement(m.SharedLinkFolderPage,{appDownloadInterstitialDismissed:e,brandingInfo:t,breadcrumbs:x,contents:K,folder:M,folderPreviewSession:this.folderPreviewSession,folderSharePermission:R,folderShareToken:D,folderSharedLinkInfo:L,hasMore:B,onAppDownloadInterstitialDismissed:d,onFileOpen:this.handleOpenFile,onFolderOpen:this.handleOpenFolder,outOfQuota:u,takedownRequestType:U,user:A,webTimer:this.webTimer,encryptionOptions:g,inCopyLinkButtonOOBPreviews:w,parsedSharedCopyLink:k,subfolderNavTracking:this.props.subfolderNavTracking,isPromptOnSharingPage:b,eflOverquotaVariant:h,addSavePreviewsVariant:y,saveToDropboxRenamingLocationVariant:S,smartFolderPreviewLayoutVariant:E,saveToDropboxOQUpsellVariant:P,controlledAccessSignInUpBannerVariant:I}))}}i._SharedLinkFolderApp=U,U.defaultProps={subfolderNavTracking:!1},U.displayName="SharedLinkFolderApp";const K=(0,s.connect)((function(e,i){let t=(0,d.getAppDownloadInterstitial)(e);void 0===t&&(t=i.appDownloadInterstitialDismissed);const{viewingFilename:r}=i,a=(0,C.getFolderShareTokenWithState)(e,i.folderShareToken),n=(0,T.getSecureHashOrSubPath)(a);return{appDownloadInterstitialDismissed:t,file:(0,C.getSharedFilePackageByFilenameForFolderPath)(e,n,r||""),folder:(0,C.getFolderByPath)(e,n),files:(0,C.getSharedFilePackagesForFolderPath)(e,n),subfolders:(0,C.getSubfoldersForFolderPath)(e,n)}}),(function(e){return(0,n.bindActionCreators)({onAppDownloadInterstitialDismissed:c.dismissAppDownloadInterstitial,onFolderLoad:_.fetchFolder,onFolderPrefetch:_.prefetchFolder},e)}))(U),z=(0,p.withLocation)(K,e=>({folderShareToken:(0,T.getFolderShareTokenFromLocation)(e),viewingFilename:(0,u.getFilenameFromLocation)(e),subfolderNavTracking:"subfolder_nav_tracking"in e.query}));class H extends a.default.Component{constructor(e){super(e),this.store=(0,g.getStoreForSharedLinkFolder)();const i=(0,T.getFolderShareTokenWithRlkey)(this.props.folderShareToken,this.store.rlkey);(0,g.hydrateStore)(this.store,{initialFolder:this.props.folderData,initialPreview:this.props.preview,folderSharedLinkInfo:this.props.folderSharedLinkInfo,folderSharePermission:this.props.folderSharePermission,folderShareToken:i})}render(){return a.default.createElement(P.IntlProvider,{defaultLocale:"en-US",locale:(0,I.localeToBcp47LangTag)(S.USER_LOCALE),messages:E},a.default.createElement(s.Provider,{store:this.store},a.default.createElement(z,Object.assign({},this.props))))}}H.displayName="SharedLinkFolderAppWithProvider";i.SharedLinkFolderApp=e=>a.default.createElement(F.ErrorBoundary,{onCatch:e=>(0,k.reportException)({err:e,tags:["file-viewer-shared-folder"],severity:"critical"})},a.default.createElement(H,Object.assign({},e)))})),define("metaserver/static/js/shared_link_folder/request_access_modal",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/buttons","dig-components/modal","dig-components/text_fields","metaserver/static/js/logging/hive/schemas/sharing-request_access_user_events","metaserver/static/js/logging/telemetry","metaserver/static/js/sharing/api/client","metaserver/static/js/core/browser","metaserver/static/js/core/uri","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/clean/analytics","metaserver/static/js/shared_link/logging_utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RequestAccessModal=i.RequestStates=void 0,r=t.__importDefault(r),u=t.__importStar(u);const g=new c.HiveLogger;var m;(function(e){e[e.ask=0]="ask",e[e.asking=1]="asking",e[e.requestSent=2]="requestSent",e[e.notRequestable=3]="notRequestable"})(m=i.RequestStates||(i.RequestStates={}));i.RequestAccessModal=e=>{const[i,t]=r.default.useState(m.ask),[c,v]=r.default.useState(),[f,_]=r.default.useState(!0),h=()=>{const e=new p.URI({path:"/login",query:{cont:u.get_href().toString()}}).toString(),i=new p.URI({path:"/logout",query:{cont:e.toString()}}).toString();u.redirect(i)},y=()=>{t(m.asking);const i={timestamp:Date.now(),link_type:"scl",content_type:"folder",event_name:"request_access"};g.log(new l.RequestAccessUserEventRow(i)),b(e.user,"REQUEST_ACCESS",e.folder,e.shareToken,e.contentUrl,c),new d.ShareApiClient({userId:e.user.id}).requestAccess({contentUrl:e.contentUrl,customMessage:c}).then(()=>t(m.requestSent)).catch(()=>t(m.notRequestable))},S=()=>{e.closeModal(),b(e.user,"REQUEST_ACCESS_MODAL_CLOSE",e.folder,e.shareToken,e.contentUrl,c),_(!0)};function E(){return r.default.createElement("div",null,r.default.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},r.default.createElement(s.Modal.Title,{id:"request-access"},a.intl.formatMessage({id:"DSiLmo",defaultMessage:"Request access to add this folder"}))),r.default.createElement(s.Modal.Body,{hasVerticalSpacing:!1},a.intl.formatMessage({id:"Z3BAIj",defaultMessage:"Request access so you can add this folder to your account, then start collaborating. You’re signed in as <strong>{user_email}</strong>."},{user_email:null===(t=e.user)||void 0===t?void 0:t.email,strong:e=>r.default.createElement("strong",null,e)}),r.default.createElement(o.TextArea,{size:"standard",className:"request-access-message",placeholder:a.intl.formatMessage({id:"D4LbvC",defaultMessage:"Add a message to the owner (optional)"}),onBlur:e=>{v(e.target.value)}})),r.default.createElement(s.Modal.Footer,null,r.default.createElement(n.Button,{variant:"transparent",onClick:h},a.intl.formatMessage({id:"xg4A4w",defaultMessage:"Sign in to a different account"})),r.default.createElement(n.Button,{variant:"opacity",onClick:S},a.intl.formatMessage({id:"FWU3Lb",defaultMessage:"Cancel"})),r.default.createElement(n.Button,{variant:"primary",onClick:y,isLoading:i===m.asking},a.intl.formatMessage({id:"x3f24M",defaultMessage:"Request access"}))));var t}return r.default.createElement(s.Modal,{open:e.open,isCentered:!0,withCloseButton:"Close",onRequestClose:S,"aria-labelledby":"request-access"},(function(){switch(e.open&&f&&(w(e.user,e.folder,e.shareToken,e.contentUrl),_(!1)),i){case m.ask:case m.asking:return E();case m.requestSent:return r.default.createElement("div",null,r.default.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},r.default.createElement(s.Modal.Title,{id:"request-access-sent"},a.intl.formatMessage({id:"YQ7Gc0",defaultMessage:"Request sent"}))),r.default.createElement(s.Modal.Body,{hasVerticalSpacing:!1},a.intl.formatMessage({id:"t8a87r",defaultMessage:"We’ll let you know when your request is approved."})),r.default.createElement(s.Modal.Footer,null,r.default.createElement(n.Button,{variant:"primary",onClick:S},a.intl.formatMessage({id:"xrUThl",defaultMessage:"OK"}))));case m.notRequestable:return b(e.user,"REQUEST_ACCESS_ERROR",e.folder,e.shareToken,e.contentUrl,c),r.default.createElement("div",null,r.default.createElement(s.Modal.Header,{hasBottomSpacing:"title-standard"},r.default.createElement(s.Modal.Title,{id:"request-access-error"},a.intl.formatMessage({id:"Bivy9B",defaultMessage:"Error"}))),r.default.createElement(s.Modal.Body,{hasVerticalSpacing:!1},a.intl.formatMessage({id:"/tVKqc",defaultMessage:"Sorry, this content couldn’t be requested."})),r.default.createElement(s.Modal.Footer,null,r.default.createElement(n.Button,{variant:"primary",onClick:S},a.intl.formatMessage({id:"xrUThl",defaultMessage:"OK"}))))}})())},i.RequestAccessModal.displayName="RequestAccessModal";const w=(e,i,t,r)=>{const a=f.ShareTibEventLogger.get_scl_extra_for_logging(t,r),n=Object.assign(Object.assign({},a),(0,_.getFolderExtraForLogging)(i));return f.ShareTibEventLogger.log(e.id,"VIEW_REQUEST_ACCESS_MODAL",v.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE,n)},b=(e,i,t,r,a,n)=>{const s=f.ShareTibEventLogger.get_scl_extra_for_logging(r,a),o=Object.assign(Object.assign({has_message:!!n},s),(0,_.getFolderExtraForLogging)(t));return f.ShareTibEventLogger.log(e.id,i,v.SHARE_ACTION_ORIGIN_TYPE.REQUEST_ACCESS_MODAL,o)}})),define("metaserver/static/js/file_viewer/collection_viewer",["require","exports","tslib","lodash","react","react-redux","metaserver/static/js/file_store/utils","metaserver/static/js/previews/data/selectors","metaserver/static/js/file_viewer/data/actions","metaserver/static/js/file_viewer/data/store","metaserver/static/js/integrations/zoom_share_dialog/async_modal","metaserver/static/js/core/uri","metaserver/static/js/clean/history","metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/file_viewer/constants","metaserver/static/js/sync_everything/constants","metaserver/static/js/metrics/index","metaserver/static/js/file_viewer/sdk_file_viewer/preferences_util","typescript/libraries/file-viewer/src/skeleton/preview_skeleton","metaserver/static/js/core/browser_detection","metaserver/static/js/edison/ui/spa_product_name","typescript/libraries/file-viewer/src/logging/performance","metaserver/static/js/previews/ui/constants"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileCollectionViewer=i._FileCollectionViewer=void 0,r=t.__importStar(r),a=t.__importDefault(a),p=t.__importDefault(p);const P=(0,c.getStoreForFileViewer)(),I=(0,m.getMetricsReporter)();function T(e,i,t){const a=(0,s.getFileRevisionId)(e);let n=r.find(i,e=>(0,s.getFileRevisionId)(e)===a);if(!n){const t=e.file_id;n=r.find(i,e=>e.file_id===t)}if(!n&&i.length>0&&void 0!==t){let e=t;return t>=i.length&&(e=i.length>1?i.length-1:0),{newFile:i[e],files:i,newIndex:e}}n||(n=e);const o=i.indexOf(n);return-1===o?{newFile:n,files:[n],newIndex:0}:{newFile:n,files:i,newIndex:o}}function C({file:e,files:i,sharedLinkInfos:t,sharePermissions:r,shareTokens:a,oldIndex:n}){const s=i.filter(e=>!e.is_dir),{newFile:o,newIndex:l}=T(e,s,n);return{collection:{file:o,files:s,sharedLinkInfos:t,sharePermissions:r,shareTokens:a},currentIndex:l}}class A extends a.default.Component{constructor(e){super(e),this.hasFlipped=!1,this.updateFileViewer=()=>{const{file:e}=this.props;this.openFile(e)},this.onFileChanged=(e,i)=>{const t=this.state.collection.files[this.state.currentIndex];if(e.revision_id===t.revision_id&&(0,s.isBrowseFile)(t))if(i){const e=Object.assign(Object.assign({},t),{file_id:i.file_id,revision_id:i.revision_id,fq_path:i.fq_path}),r=this.state.collection.files.map((i,t)=>t===this.state.currentIndex?e:i);this.setState({collection:Object.assign(Object.assign({},this.state.collection),{files:r})})}else{const{newFile:e,newIndex:i}=T(t,this.state.collection.files,this.state.currentIndex);i<this.state.collection.files.length-1?this.setState({collection:Object.assign(Object.assign({},this.state.collection),{file:e}),currentIndex:i}):this.closeViewer()}},this.handleFlipNext=r.throttle(()=>{const{collection:e,currentIndex:i}=this.state;this.props.onFlipNext&&this.props.onFlipNext();const t=i+1===e.files.length?0:i+1;this.hasFlipped=!0,this.switchFile(t)},100),this.handleFlipPrevious=r.throttle(()=>{const{collection:e,currentIndex:i}=this.state;this.props.onFlipPrevious&&this.props.onFlipPrevious();const t=0===i?e.files.length-1:i-1;this.hasFlipped=!0,this.switchFile(t)},100),this.switchFile=e=>{const{collection:i}=this.state,t=i.files[e];this.setState({currentIndex:e},()=>{this.updatePreviewUrl(t),this.openFile(t)})},this.closeViewer=()=>{const{onCloseViewer:e}=this.props;e&&e(),(0,l.closeFile)()},this.state=C(e),S.PreviewsEventLogger.mark(S.PreviewsTimingEvents.COLLECTION_VIEWER_CODE_START)}UNSAFE_componentWillMount(){this.setupPreviewUrl(this.props.file),this.updateFileViewer()}componentDidMount(){const{shouldPresentInZoom:e,user:i,file:t}=this.props;i&&e&&(0,d.asyncShowModal)(i.id,t.file_id,"file-viewer-modal-overlay"),S.PreviewsEventLogger.mark(S.PreviewsTimingEvents.COLLECTION_VIEWER_MOUNT)}UNSAFE_componentWillReceiveProps(e){if((function(e,i){const{file:t,files:r,sharedLinkInfos:a,sharePermissions:n,shareTokens:s}=e;return t!==i.file||r!==i.files||a!==i.sharedLinkInfos||n!==i.sharePermissions||s!==i.shareTokens})(this.props,e)){const i=this.state.currentIndex,t=this.hasFlipped?this.state.collection.files[i]:e.file,r=C(Object.assign(Object.assign({},e),{file:t,oldIndex:i})),a=r.collection.file,n=i!==r.currentIndex,s=t.file_id!==a.file_id,o="fq_path"in t&&"fq_path"in a&&t.fq_path!==a.fq_path;this.setState(r,()=>{(n||s||o)&&(this.updatePreviewUrl(a),this.openFile(a))})}}componentWillUnmount(){const{closeFile:e,onClose:i}=this.props;e(),i&&i(),this.teardownPreviewUrl()}openFile(e){this.props.openFile(e)}setupPreviewUrl(e){this.props.skipOuterRouting||this.setPreviewUrl(e)}updatePreviewUrl(e){this.setPreviewUrl(e,!1),(0,y.setSpaProductName)("preview_file_flip")}teardownPreviewUrl(){this.props.skipOuterRouting||this.setPreviewUrl(null)}setPreviewUrl(e,i=!0){if(this.props.disableRouting)return;const t=u.URI.parse(p.default.get_url()),r=u.URI.encode_parts(t.getPath());let a=t.removeQuery("select").removeQuery("page");if(null==e)a=a.removeQuery("preview"),a=a.removeQuery("t"),a=a.removeQuery("e");else{const i=(0,s.getFilename)(e),t=u.URI.parse(e.href).getQuery();a=a.updateQuery({preview:i,t:null==t?void 0:t.t,e:null==t?void 0:t.e})}const n=a.getQuery();i?p.default.push_state(r,n,{immediatelyRestoreState:!1}):p.default.replace_state(r,n)}renderSDKSurface(){const{fileViewOrigin:e,hidePageChrome:i,transparentBackground:t,forceNoToolbar:n,user:o,browseContext:l,browseExceptions:c,canRestoreRevision:d,onRestoreRevision:u,onFullscreenChange:p,brandingInfo:y,initialPreviewSourceContext:S,shouldFocusApproval:P,shouldFocusComment:T,activeCommentThreadId:C,appDownloadInterstitialDismissed:A,containerId:O,isInsideBackup:F,previewApiDataMap:k,ajaxTimerName:x,updateFiles:D}=this.props,{collection:L,currentIndex:M}=this.state,R=r.get(L.sharedLinkInfos,M),N=r.get(L.sharePermissions,M),j=r.get(L.shareTokens,M),V=r.get(L.files,M),B=null==o||!o.id||(0,w.getRightRailIsCollapsed)(null==o?void 0:o.id),U=null==o||!o.id||(0,w.getDocSidebarIsCollapsed)(null==o?void 0:o.id),K=L.files.map(e=>{var i;const t=(0,s.getFileRevisionId)(e);return null===(i=k[t])||void 0===i?void 0:i.data}),z=D?()=>D(L.files,V,!0):void 0,H=(0,s.getFilename)(V);let q=null!=S?S:E.PreviewSourceContext.Unknown;const W=a.default.createElement(b.Skeleton,{isRightRailCollapsed:B,docSidebarCollapsed:U,preview:V.preview,fileName:H,metricsReporter:I,logPerformanceMark:!0});switch(e){case _.FileViewOriginType.BROWSE:case _.FileViewOriginType.VERSION_HISTORY:case _.FileViewOriginType.HOME:case _.FileViewOriginType.HELLOSIGN:case _.FileViewOriginType.PHOTOS:case _.FileViewOriginType.STARRED:case _.FileViewOriginType.RECENTS:case _.FileViewOriginType.SEARCH:case _.FileViewOriginType.COLLECTIONS:case _.FileViewOriginType.VIDEO_SYNTHESIS:if(!o)throw new Error("User is required to browse files");let r;switch(e){case _.FileViewOriginType.VERSION_HISTORY:r=f.SDKPreviewSurface.VERSION_HISTORY;break;case _.FileViewOriginType.HOME:r=f.SDKPreviewSurface.HOME;break;case _.FileViewOriginType.HELLOSIGN:r=f.SDKPreviewSurface.HELLOSIGN;break;case _.FileViewOriginType.STARRED:r=f.SDKPreviewSurface.STARRED;break;case _.FileViewOriginType.RECENTS:r=f.SDKPreviewSurface.RECENTS;break;case _.FileViewOriginType.SEARCH:r=f.SDKPreviewSurface.SEARCH;break;case _.FileViewOriginType.PHOTOS:r=f.SDKPreviewSurface.PHOTOS;break;case _.FileViewOriginType.COLLECTIONS:r=f.SDKPreviewSurface.COLLECTIONS;break;case _.FileViewOriginType.VIDEO_SYNTHESIS:r=f.SDKPreviewSurface.VIDEO_SYNTHESIS;break;default:r=f.SDKPreviewSurface.BROWSE}return(F||(0,g.isBackupBrowse)())&&(r=f.SDKPreviewSurface.BACKUP,q=E.PreviewSourceContext.Backup),a.default.createElement(a.default.Fragment,null,!(0,h.is_supported_mobile_browser)()&&W,a.default.createElement(v.FileViewer,{file:V,fileIndex:M,previewCollection:K,updateFiles:z,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:j,brandingInfo:y,user:o,onFileChanged:this.onFileChanged,closeFile:this.closeViewer,previewSurface:r,canRestoreRevision:d,onRestoreRevision:u,onFullscreenChange:p,browseContext:l,browseExceptions:c,previewContentOnly:i,canShowFileFlippers:r===f.SDKPreviewSurface.SEARCH||r===f.SDKPreviewSurface.BROWSE||r===f.SDKPreviewSurface.COLLECTIONS||r===f.SDKPreviewSurface.PHOTOS,shouldFocusApproval:P,shouldFocusComment:T,activeCommentThreadId:C,hideOpenInAppInterstitial:!!A,fileViewOrigin:e,sourceContext:q,ajaxTimerName:x}));case _.FileViewOriginType.SHARED_LINK_PAGE:if(!R||!N||!j)throw new Error("Missing required data to view");return a.default.createElement(a.default.Fragment,null,!(0,h.is_supported_mobile_browser)()&&W,a.default.createElement(v.FileViewer,{file:V,fileIndex:M,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:j,brandingInfo:y,closeFile:this.closeViewer,previewSurface:f.SDKPreviewSurface.SHARED_LINK,user:o,canShowFileFlippers:S===E.PreviewSourceContext.SharedLinkFolder||S===E.PreviewSourceContext.SharedLinkCollection,previewContentOnly:i,hideOpenInAppInterstitial:!!A,initialSourceAction:this.props.initialPreviewSourceAction,onFullscreenChange:p,fileViewOrigin:e,sourceContext:q,ajaxTimerName:x}));case _.FileViewOriginType.SHARED_CONTENT_LINK_PAGE:if(!R||!N||!j)throw new Error("Missing required data to view");return a.default.createElement(a.default.Fragment,null,!(0,h.is_supported_mobile_browser)()&&W,a.default.createElement(v.FileViewer,{file:V,fileIndex:M,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:j,brandingInfo:y,closeFile:this.closeViewer,previewSurface:f.SDKPreviewSurface.SHARED_CONTENT_LINK,user:o,canShowFileFlippers:!0,previewContentOnly:i,hideOpenInAppInterstitial:!!A,initialSourceAction:this.props.initialPreviewSourceAction,onFullscreenChange:p,fileViewOrigin:e,sourceContext:q,ajaxTimerName:x}));case _.FileViewOriginType.COMMERCE:case _.FileViewOriginType.TRANSFER:case _.FileViewOriginType.CLIENT_PORTAL:let s;switch(e){case _.FileViewOriginType.TRANSFER:s=f.SDKPreviewSurface.TRANSFER;break;case _.FileViewOriginType.CLIENT_PORTAL:s=f.SDKPreviewSurface.CLIENT_PORTAL;break;default:s=f.SDKPreviewSurface.COMMERCE}return a.default.createElement(v.FileViewer,{file:V,fileIndex:M,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:j,brandingInfo:y,closeFile:this.closeViewer,previewSurface:s,user:o,canShowFileFlippers:!1,previewContentOnly:i,transparentBackground:t,forceNoToolbar:n,hideOpenInAppInterstitial:!!A,containerId:O,initialSourceAction:this.props.initialPreviewSourceAction,onPreviewSessionInitialized:this.props.onPreviewSessionInitialized,onFullscreenChange:p,fileViewOrigin:e,sourceContext:q,ajaxTimerName:x});case _.FileViewOriginType.SHARED_COLLECTION:return a.default.createElement(v.FileViewer,{file:V,fileIndex:M,previewCollection:K,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,user:o,onFileChanged:this.onFileChanged,closeFile:this.closeViewer,previewSurface:f.SDKPreviewSurface.SHARED_COLLECTION,canRestoreRevision:d,onRestoreRevision:u,onFullscreenChange:p,previewContentOnly:i,canShowFileFlippers:!0,hideOpenInAppInterstitial:!!A,fileViewOrigin:e,sourceContext:q,ajaxTimerName:x});default:return(0,m.getMetricsReporter)().createStats({ns:"web_previews",name:"unkown_preview_origin"},{origin:`${e}`}),a.default.createElement(v.FileViewer,{file:V,fileIndex:M,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:j,brandingInfo:y,user:o,closeFile:this.closeViewer,previewSurface:f.SDKPreviewSurface.UNKNOWN,canRestoreRevision:d,onRestoreRevision:u,onFullscreenChange:p,previewContentOnly:i,canShowFileFlippers:!1,hideOpenInAppInterstitial:!!A,fileViewOrigin:e,sourceContext:q,ajaxTimerName:x})}}render(){return a.default.createElement("div",null,this.renderSDKSurface())}}i._FileCollectionViewer=A,A.displayName="_FileCollectionViewer";const O=(0,n.connect)((e,i)=>({previewApiDataMap:(0,o.getApiDataForFiles)(e,i.files)}),{closeFile:l.closeFile,openFile:l.openFile})(A);class F extends a.default.Component{render(){return a.default.createElement(n.Provider,{store:P},a.default.createElement(O,Object.assign({},this.props)))}}i.FileCollectionViewer=F,F.displayName="FileCollectionViewerWithProvider"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/restore_plugin",["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","metaserver/static/js/core/i18n","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeRestoreActionLoader=void 0,r=t.__importDefault(r);i.makeRestoreActionLoader=(e,i,t)=>({actionDefinitions:()=>{if(!i||!t)return{};const d=(0,o.makePluginActionDefinition)({label:s.intl.formatMessage(l.RESTORE_ACTION_STRING),icon:r.default.createElement(n.UIIcon,{src:a.RewindLine}),id:c.RESTORE_ACTION_PLUGIN_ID,action:()=>{i&&t&&(e.logUserAction("restore","overflow_menu"),i())},primary:!0});return{atTopLevelIfSpace:[d],alwaysInOverflow:[[d]]}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/starred_plugin",["require","exports","tslib","react","react-redux","dig-components/menu","dig-components/icons","metaserver/static/js/file_viewer/sdk_file_viewer/hooks","metaserver/static/js/starred/redux/store","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeStarredActionLoader=void 0,r=t.__importDefault(r);const d=e=>{const{message:i,iconSrc:t,handleClick:a,handleKeyPress:l}=(0,o.useStarControl)(e);return r.default.createElement(n.Menu.ActionItem,{onClick:a,onKeyPress:l,withLeftAccessory:r.default.createElement(s.UIIcon,{src:t})},i)};d.displayName="StarOverflowItem",d.displayName="StarOverflowItem";const u=e=>{const i=(0,l.getStoreForStarred)();return r.default.createElement(a.Provider,{store:i},r.default.createElement(d,Object.assign({},e)))};u.displayName="StarOverflowItemWithProvider";i.makeStarredActionLoader=(e,i,t)=>({actionDefinitions:()=>{const{file:a}=e();if(!(0,o.isStarringEnabled)(a))return{};return{alwaysInOverflow:[[{overflowItem:r.default.createElement(u,{getActiveFile:e,user:i,onToggle:()=>{t.logUserAction("star","overflow_menu")}}),id:c.STARRED_ACTION_PLUGIN_ID}]]}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/unzip_plugin",["require","exports","tslib","react","dig-components/icons","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/flows/conversions/actions/unzip","metaserver/static/js/flows/conversions/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeUnzipActionLoader=void 0,r=t.__importDefault(r);i.makeUnzipActionLoader=(e,i,t)=>({actionDefinitions:()=>{const{file:c,sharePermission:d,shareToken:u}=e();return i&&(0,o.canConvertFile)(c,d)&&s.UnzipAction.selector([c])?{atTopLevelIfSpace:[(0,n.makePluginActionDefinition)({label:s.UnzipAction.actionText,icon:r.default.createElement(a.UIIcon,{src:s.UnzipAction.actionIcon}),id:l.UNZIP_ACTION_PLUGIN_ID,action:()=>{t.logUserAction("decompress_file","title_bar_button"),s.UnzipAction.convert([c],i,{shareToken:u,source:"preview"})}})]}:{}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils",["require","exports","metaserver/static/js/clean/filetypes"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getType=i.isCloudDoc=i.isPnmSuppressMoveSelected=i.isPnmLinkNodeSelected=i.isInsideVaultFolder=i.isLiveFile=i.PREVIEWS_SNACKBAR_ID=void 0,i.PREVIEWS_SNACKBAR_ID="preview-action";i.isLiveFile=e=>!("isDeleted"in e&&"is_unmounted"in e)||!e.isDeleted&&!e.is_unmounted;i.isInsideVaultFolder=e=>"is_in_vault_folder"in e&&e.is_in_vault_folder;i.isPnmLinkNodeSelected=e=>{var i;return"per_node_metadata"in e&&!!(null===(i=e.per_node_metadata)||void 0===i?void 0:i.link_node)};i.isPnmSuppressMoveSelected=e=>{var i;return"per_node_metadata"in e&&!!(null===(i=e.per_node_metadata)||void 0===i?void 0:i.suppress_move)};i.isCloudDoc=e=>"is_cloud_doc"in e&&e.is_cloud_doc;i.getType=e=>"type"in e?e.type:t.FileTypes.FILE})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/signatures_dropdown_plugin",["require","exports","tslib","react","metaserver/static/js/stormcrow/gating_factory","dig-components/icons","dig-components/menu","dig-components/buttons","dig-components/icons/src","metaserver/static/js/clean/analytics","metaserver/static/js/core/i18n","metaserver/static/js/integrations/hellosign_deep_integration/self_sign_plugin","metaserver/static/js/integrations/hellosign_deep_integration/send_file_viewer_plugin","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/integrations/hellosign_deep_integration/add_signatures_util"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.logExposure=i.makeSignaturesDropdown=i.SignaturesMenu=void 0,r=t.__importDefault(r);let g=!1;function m({file:e,user:i,logUserAction:t,hideIcons:a}){g||(c.ProEventsLogger.log(`${f.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID.toLowerCase()}_shown`),g=!0);const _="pdf"===(0,v.getExtension)(e),m=r.default.createElement(n.UIIcon,{src:l.SignatureLine,role:"presentation"}),w=r.default.useCallback(e=>{null==e||e.handler()},[]);return r.default.createElement(s.Menu.Wrapper,{shouldPropagateClickOutsideMouseEvents:!0,onSelection:w},({getContentProps:n,getTriggerProps:l,triggerRef:c})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(o.Button,Object.assign({},l(),{variant:"opacity",withDropdownIcon:!0,withIconLeft:a?null:m,"data-uxa-log":"signatures_actionbar_button","data-testid":"add-signatures-menu-button","data-campaigns-element-id":"add-signatures-on-preview"}),d.intl.formatMessage({id:"sKlWAb",defaultMessage:"Add signatures"})),r.default.createElement(s.Menu.Content,Object.assign({},n()),r.default.createElement(s.Menu.Segment,null,(0,p.getOverflowItem)(e,i,t,"file_preview_actionbar_dropdown","file_preview_actionbar_dropdown","send_signatures_on_actionbar_dropdown"),!_&&(0,u.getOverflowItem)(e,i,t,"file_preview_actionbar_dropdown_self_sign","file_preview_actionbar_dropdown_self_sign","self_sign_on_actionbar_dropdown")))))}i.SignaturesMenu=m;i.makeSignaturesDropdown=(e,i,t,a,n)=>({actionDefinitions:()=>(e=>{const s=(0,v.getExtension)(e.file);return{atTopLevelIfSpace:(0,_.isAddSignatureDropdownEnabled)(a,s,n)?[{renderButton:a=>{const n=e.file;return r.default.createElement(m,{file:n,user:i,logUserAction:t.logUserAction,hideIcons:a})},id:f.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID}]:[]}})(e())}),i.logExposure=function(e){(0,a.getGatingClientSingleton)().logExposure({stormcrowVariantInfo:{feature:"bt_signatures_actionbar_dropdown",variant:e}})}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/app_download_interstitial",["require","exports","tslib","react","metaserver/static/js/bug_reporting/routing","metaserver/static/js/file_viewer/app_download_interstitial/app_download_interstitial","metaserver/static/js/file_viewer/constants","metaserver/static/js/clean/analytics","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/file_store/utils","metaserver/static/js/core/browser_detection","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/open_in_app/ui/banner","typescript/libraries/file-viewer/src/file_viewer/context_provider"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OpenInAppHeader=i.FvsdkAppDownloadInterstitial=void 0,r=t.__importDefault(r),d=t.__importStar(d);i.FvsdkAppDownloadInterstitial=e=>{const{file:i,sharedLinkInfo:t,onDismiss:d,openInAppData:u,fileViewerSessionId:p,filePreviewSessionId:v,onAppDownload:f,logUserAction:_,fileViewOrigin:g}=e,m=(0,c.getFilename)(i),w=r.default.useCallback(e=>{o.MobileFilePreviewLogger.log(e,p,v,i.ns_id,i.sjid,{context:s.UserActionContext.AppDownloadInterstitial,location:"file_viewer",origin:g}),null==_||_(e,s.UserActionContext.AppDownloadInterstitial)},[i,v,p,_,g]);r.default.useEffect(()=>{(0,l.mark_time_to_interactive)(),w(s.UserAction.AppDownloadInterstitialView)},[]);const b=r.default.useCallback(()=>{d(),w(s.UserAction.AppDownloadInterstitialContinue)},[d,w]),h=r.default.useCallback(()=>{d(),w(s.UserAction.AppDownloadInterstitialClose)},[d]),y=r.default.useCallback(()=>{w(s.UserAction.AppDownloadInterstitialInstall),null==f||f()},[d,f]);return r.default.createElement(a.RegisterComponentWithBugReporter,{componentId:"web.previews",componentName:"File Preview"},r.default.createElement("div",{"aria-label":m},r.default.createElement(n.AppDownloadInterstitial,{fileOrFolderName:m,open_in_app_data:u,onContinue:b,onAppDownload:y,ownerName:t.ownerName,ownerTeamName:t.ownerTeamName,onClose:h})))},i.FvsdkAppDownloadInterstitial.displayName="FvsdkAppDownloadInterstitial";i.OpenInAppHeader=e=>{const{onHide:i,user:t,activePreviewFile:a}=e,n=(0,v.useFileViewerContext)(),o=n.featureConfig.mobile_web_preview_open_in_app_banner,l=r.default.useCallback(()=>{n.pluginContext.logUserAction(s.UserAction.OpenInApp,s.UserActionContext.OpenInAppBanner)},[]);if(!d.is_mobile_or_tablet()&&(d.iOS||d.is_android()))return null;const{file:c,shareToken:f,sharePermission:_}=a,g=(0,u.getOpenInAppUrls)(c,f,_,t);if(g){const e=!(c&&f&&_);return r.default.createElement("div",{style:{width:"100%"}},r.default.createElement(p.OpenInAppBanner,{urls:g,onClick:l,onClose:i,isMountedFile:e,mwebOpenInAppBannerExp:o}))}return null},i.OpenInAppHeader.displayName="OpenInAppHeader",i.OpenInAppHeader.displayName="OpenInAppHeader"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/capture_recorder",["require","exports","tslib","react","eventemitter3","metaserver/static/js/file_store/utils","metaserver/static/js/filepath/filepath","metaserver/static/js/capture/loadable_preview_recorder","metaserver/static/js/user_metadata/api","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/onboarding/logging/logging"],(function(e,i,t,r,a,n,s,o,l,c,d){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useCaptureRecorder=i.setUserDismissedCaptureExperiment=i.getHasUserPreviouslyDismissedCaptureExperiment=i.captureExpEmitter=i.handleSafariWorkaround=void 0,r=t.__importStar(r),a=t.__importDefault(a);const u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);i.handleSafariWorkaround=()=>t.__awaiter(void 0,void 0,void 0,(function*(){window.captureRecorderActive||u&&(window.safariScreenStream=yield navigator.mediaDevices.getDisplayMedia({video:{cursor:"always"},audio:!0}))}));const p="CAPTURE_PREVIEWS_COMMENTS_TOOLTIP_DISMISSED";function v(e=-1){return t.__awaiter(this,void 0,void 0,(function*(){return(yield(0,l.getUserMetadata)([p],e))[p]||!1}))}function f(e=-1){return t.__awaiter(this,void 0,void 0,(function*(){const i=yield(0,l.setUserMetadata)({[p]:!0},e);return Boolean(i[p])}))}i.captureExpEmitter=new a.default,i.getHasUserPreviouslyDismissedCaptureExperiment=v,i.setUserDismissedCaptureExperiment=f;const _=["ppt","key","pptx"];i.useCaptureRecorder=(e,a,l)=>{const[u,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(),[w,b]=(function(e){const[i,t]=(0,r.useState)(e),a=(0,r.useRef)(i);return(0,r.useEffect)(()=>{a.current=i},[i]),[a,t]})(!0),h=(0,r.useRef)(g),y=(0,r.useRef)(!1),S=(e=>{const i=(0,n.isBrowseFile)(e)?(0,s.file_extension)(e.fq_path):(0,s.file_extension)(e.filename);return _.includes(i)})(a),E=(0,r.useCallback)(e=>t.__awaiter(void 0,void 0,void 0,(function*(){try{e&&(yield(0,i.handleSafariWorkaround)()),p(e)}catch(e){}})),[p]);y.current=S;const P={captureUploadRef:h,emitter:i.captureExpEmitter,hasSeenCaptureExpRef:w,isRecorderShownRef:y,logger:d.OALogger,setRecorder:E,setHasSeenCaptureExp:b,setShowTooltip:()=>{},onDismiss:()=>f(null==e?void 0:e.id)};return(0,r.useEffect)(()=>{(null==e?void 0:e.id)&&v(null==e?void 0:e.id).then(e=>{e||b(!1)})},[e]),(0,r.useEffect)(()=>{g&&i.captureExpEmitter.emit("capture-link",g)},[g]),(0,r.useEffect)(()=>{const e=()=>{m(void 0)};return i.captureExpEmitter.on("reset-capture-value",e),()=>{i.captureExpEmitter.off("reset-capture-value",e)}},[]),(0,r.useEffect)(()=>{h.current=g},[g]),{CaptureRecorder:(0,r.useMemo)(()=>e?l===c.SDKPreviewSurface.INBAND_SHARE?null:r.default.createElement(o.AsyncPreviewRecorder,{user:e,source:"previews",showRecorder:u,setRecorder:E,setCapture:m,captureUpload:g,captureUploadRef:h,onRecordingComplete:()=>f(null==e?void 0:e.id)}):null,[e,u,g,l]),captureState:P}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/lazy_components",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LazyFolderPicker=i.FolderPicker=i.LazyMobileHeader=i.MobileHeader=i.LazyMobileFooter=i.MobileFooter=void 0,r=t.__importStar(r),i.MobileFooter=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{MobileFooter:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/mobile_web/footer"],i,t)}).then(t.__importStar);return{default:i}})));i.LazyMobileFooter=e=>r.createElement(r.Suspense,{fallback:null},r.createElement(i.MobileFooter,Object.assign({},e))),i.LazyMobileFooter.displayName="LazyMobileFooter",i.MobileHeader=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{MobileHeader:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/mobile_web/header"],i,t)}).then(t.__importStar);return{default:i}})));i.LazyMobileHeader=e=>r.createElement(r.Suspense,{fallback:null},r.createElement(i.MobileHeader,Object.assign({},e))),i.LazyMobileHeader.displayName="LazyMobileHeader",i.FolderPicker=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{FolderPicker:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/folder_dialog/folder_picker_dig"],i,t)}).then(t.__importStar);return{default:i}})));i.LazyFolderPicker=e=>r.createElement(r.Suspense,{fallback:null},r.createElement(i.FolderPicker,Object.assign({},e))),i.LazyFolderPicker.displayName="LazyFolderPicker"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/async_plugin_loaders",["require","exports","tslib","typescript/libraries/file-viewer/src/core/types/preview_type","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/extensions/constants"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeVideoEditPluginLoader=i.makeFlowsBoltPluginLoader=i.makeSignaturesDropdownLoader=i.makeStarToolbarButtonLoader=i.makeRestoreActionLoader=i.makeVersionHistoryActionLoader=i.makeUnzipActionLoader=i.makeDocsendAnalyticsAddOnLoader=i.makeStarredActionLoader=i.makeAddToCollectionActionLoader=i.makeTransferActionLoader=i.makeCreateVersionLoader=i.makeRequestApprovalLoader=i.makeGoToFolderActionLoader=i.makeOpenInDesktopActionLoader=i.makeRenameActionLoader=i.makeWaterMarkingActionPluginLoader=i.makePublishPaintedDoorLoader=i.makeOpenInReplayActionLoader=i.makePublishLoader=i.makeOpenDropdownActionLoader=i.makeMoveActionLoader=i.makeDeleteActionLoader=i.makeDownloadActionLoader=i.makeCopyActionLoader=void 0;i.makeCopyActionLoader=(i,r,n,s)=>({pluginId:a.COPY_ACTION_PLUGIN_ID,load:(a,o)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeCopyPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/copy_plugin"],i,t)}).then(t.__importStar);return a(i,r,o,n,s)}))});i.makeDownloadActionLoader=(i,r,n,s,o,l,c,d)=>({pluginId:a.DOWNLOAD_ACTION_PLUGIN_ID,load:(a,u)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeDownloadPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/download_plugin"],i,t)}).then(t.__importStar);return a(i,u,r,n,s,o,l,c,d)}))});i.makeDeleteActionLoader=(i,r,n)=>({pluginId:a.DELETE_ACTION_PLUGIN_ID,load:(a,s)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeDeletePlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/delete_plugin"],i,t)}).then(t.__importStar);return a(i,r,s,n)}))});i.makeMoveActionLoader=(i,r,n,s,o)=>({pluginId:a.MOVE_ACTION_PLUGIN_ID,load:(a,l)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeMovePlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/move_plugin"],i,t)}).then(t.__importStar);return a(i,r,l,n,s,o)}))});i.makeOpenDropdownActionLoader=(i,r)=>({pluginId:a.OPEN_DROPDOWN_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeOpenDropdownAction:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/open_dropdown_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makePublishLoader=(i,r)=>({pluginId:a.PUBLISH_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makePublishPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/publish_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makeOpenInReplayActionLoader=(i,r)=>({pluginId:a.OPEN_IN_REPLAY_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeOpenInReplayPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/open_in_replay_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makePublishPaintedDoorLoader=(i,r)=>({pluginId:a.PUBLISH_PAINTED_DOOR_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makePublishPaintedDoorPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/publish_painted_door_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makeWaterMarkingActionPluginLoader=i=>({pluginId:a.WATERMARKING_ACTION_PLUGIN_ID,load:(r,a)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeWaterMarkingActionPlugin:n}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/watermarking/edit_plugin/action_plugin"],i,t)}).then(t.__importStar);return n(i,r,a)}))});i.makeRenameActionLoader=(i,r,n,s)=>({pluginId:a.RENAME_ACTION_PLUGIN_ID,load:(a,o)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeRenamePlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/rename_plugin"],i,t)}).then(t.__importStar);return a(i,r,o,n,s)}))});i.makeOpenInDesktopActionLoader=(i,r,n)=>({pluginId:a.OPEN_IN_DESKTOP_ACTION_PLUGIN_ID,load:(a,s)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeOpenInDesktopPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/open_in_desktop_plugin"],i,t)}).then(t.__importStar);return a(i,r,s,n)}))});i.makeGoToFolderActionLoader=(i,r)=>({pluginId:a.GO_TO_FOLDER_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeGoToFolderPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/go_to_folder_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makeRequestApprovalLoader=(i,r,s)=>({pluginId:a.REQUEST_APPROVAL_ACTION_PLUGIN_ID,load:(a,o)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{RequestApprovalPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/flows/approval/request_approval_plugin"],i,t)}).then(t.__importStar);return new a(o,r,i,e=>(0,n.SDKPreviewSurfaceToPapType)(s,e))}))});i.makeCreateVersionLoader=(i,r,s)=>({pluginId:a.CREATE_VERSION_ACTION_PLUGIN_ID,load:(a,o)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{CreateVersionPlugin:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/flows/version/create_version_plugin"],i,t)}).then(t.__importStar);return new a(o,r,i,e=>(0,n.SDKPreviewSurfaceToPapType)(s,e))}))});i.makeTransferActionLoader=i=>({pluginId:a.TRANSFER_ACTION_PLUGIN_ID,load:(r,a)=>t.__awaiter(void 0,void 0,void 0,(function*(){const[{makeTransferPlugin:r},{getStore:n},{getActions:o}]=yield Promise.all([new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/transfer_plugin"],i,t)}).then(t.__importStar),new Promise((i,t)=>{e(["metaserver/static/js/extensions/data/store"],i,t)}).then(t.__importStar),new Promise((i,t)=>{e(["metaserver/static/js/extensions/data/selectors"],i,t)}).then(t.__importStar),new Promise((i,t)=>{e(["metaserver/static/js/extensions/constants"],i,t)}).then(t.__importStar)]),l=!!o(n().getState()).find(e=>e.app_id===s.TRANSFER_FP_APP_ID);return r(i,a,l)}))});i.makeAddToCollectionActionLoader=(i,r)=>({pluginId:a.ADD_TO_COLLECTION_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeAddToCollectionActionLoader:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/add_to_collection_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makeStarredActionLoader=(i,r)=>({pluginId:a.STARRED_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeStarredActionLoader:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/starred_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makeDocsendAnalyticsAddOnLoader=(i,r,n)=>({pluginId:a.DOCSEND_ANALYTICS_ADD_ON_ACTION_PLUGIN_ID,load:(a,s)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeAnalyticsAddOn:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/docsend_analytics_add_on_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makeUnzipActionLoader=(i,r)=>({pluginId:a.UNZIP_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeUnzipActionLoader:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/unzip_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makeVersionHistoryActionLoader=(i,r)=>({pluginId:a.VERSION_HISTORY_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeVersionHistoryActionLoader:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/version_history_plugin"],i,t)}).then(t.__importStar);return a(i,r,n)}))});i.makeRestoreActionLoader=(i,r)=>({pluginId:a.RESTORE_ACTION_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeRestoreActionLoader:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/restore_plugin"],i,t)}).then(t.__importStar);return a(n,i,r)}))});i.makeStarToolbarButtonLoader=(i,r)=>({pluginId:a.STAR_TOOLBAR_PLUGIN_ID,load:(a,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeStarToolbarButtonLoader:a}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/star_plugin"],i,t)}).then(t.__importStar);return new(a(i,r))}))});i.makeSignaturesDropdownLoader=(i,r,n,s)=>({pluginId:a.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID,isEnabled:e=>!1!==s,load:(a,s)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{logExposure:a,makeSignaturesDropdown:o}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/signatures_dropdown_plugin"],i,t)}).then(t.__importStar);return a(n),o(i,r,s,n)}))});i.makeFlowsBoltPluginLoader=()=>({pluginId:a.FLOWS_BOLT_PLUGIN_ID,isEnabled:e=>e.getPluginData().previewType===r.PreviewType.Video&&"V1"===e.sdkConfig.video_transcription,load:(i,r)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeFlowsBoltPlugin:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/service_plugins/flows_bolt_plugin"],i,t)}).then(t.__importStar);return i(r)}))});i.makeVideoEditPluginLoader=i=>({pluginId:a.VIDEO_EDIT_PLUGIN_ID,isEnabled:e=>!!i&&e.getPluginData().previewType===r.PreviewType.Video&&(e.sdkConfig.enable_video_crop||e.sdkConfig.enable_video_rotate),load:(i,r)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeVideoEditPlugin:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/video_edit_plugin"],i,t)}).then(t.__importStar);return i(r)}))})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/cloud_docs",["require","exports","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/cloud_docs/shared_components/routing","metaserver/static/js/file_store/utils"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeCloudDocsClient=void 0,i.makeCloudDocsClient=function(e,i,n){return{triggerDynamicRoutingModalCheck:()=>{const s=i();s.file.file_id&&!(function(e){return(null==e?void 0:e.linkType)===t.SharedLinkType.Shmodel})(n)&&(0,r.maybeShowDynamicRoutingModal)(e,s.file,(0,a.getExtension)(s.file))}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/comments",["require","exports","typescript/libraries/file-viewer/src/comments2/plugin/loader/lazy","metaserver/static/js/comments2/client_builder","metaserver/static/js/file_viewer/sdk_file_viewer/experiments"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeComments2MetaserverLoader=void 0,i.makeComments2MetaserverLoader=function(e,i){return(0,t.makeLoader)((0,r.makeComments2Client)(e),{showApproval:!!e&&a.fileViewerFlowExperiments.approvalFlowByUserId[e.id],dragSectionAnnotationEnabled:a.fileViewerFeatureExperiments.dragSectionAnnotation},void 0===e,i)}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/constants",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FVSDK_MOUNT_POINT=void 0,i.FVSDK_MOUNT_POINT="fvsdk-mount-point"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/download_utils",["require","exports","tslib","react","metaserver/static/js/auth/login_or_register/types","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/libraries/file-viewer/src/core/types/auth_modal","metaserver/static/js/action_bar/file_actions/portable/save_as_copy/save_as_copy","metaserver/static/js/file_store/utils","metaserver/static/js/action_bar/file_actions/portable/save_as_copy/snackbars","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/action_bar/file_actions/portable/download","metaserver/static/js/components/ui/modal","metaserver/static/js/core/persistence/storage","metaserver/static/js/share_download/ui/util","metaserver/static/js/campaigns/emitter","metaserver/static/js/campaigns/types"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.downloadActiveFile=i.saveToDropbox=void 0,r=t.__importDefault(r),i.saveToDropbox=function(e,i,t,r,a,u){if(r)if(i("save_to_dropbox"),t)(0,o.portableSaveAsCopy)({fileName:(0,l.getFilename)(e),user:t,shareToken:r},{onNetworkRequest:()=>{(0,c.saveCopySnackBarInProgress)(d.PREVIEWS_SNACKBAR_ID),i("save_to_dropbox_approve")},onModalClose:()=>{i("save_to_dropbox_cancel")}});else{const e=new URL(window.location.href);e.searchParams.set("copy_to_dropbox","true"),window.history.replaceState(e.href,"",e.href),(0,n.showAuthModal)({mode:s.AuthMode.REGISTER,sharedLinkUrl:e.href,kind:s.LoginOrRegisterKind.DOWNLOAD,encryptionOptions:a,loggingExtra:{source:"save_to_dropbox"},signupTag:u})}},i.downloadActiveFile=function(i,n,s,o,c,d,m){if(o!==a.LoginOrRegisterKind.DOWNLOAD||v.LocalStorage.get("has_seen_download_signup_modal")){if((0,u.downloadSingleFile)({href:i.href,source:"PREVIEWS",isFswm:(0,l.isSharedFile)(i)}),!n){!(i.href.indexOf("scl/fi/")>=0)&&m?(0,_.publishEvent)(g.CampaignEvents.DOWNLOAD_BUTTON_CLICKED,{context:{file_extension:(0,l.getExtension)(i),file_name:(0,l.getFilename)(i),file_path:(0,l.isSharedFile)(i)?i.href:void 0}}):(0,f.showPostDownloadSignInModal)({encryptionOptions:s,logUserAction:c,isFolder:!1,shareToken:d,link_url:i.href})}}else{const i=()=>{v.LocalStorage.set("has_seen_download_signup_modal",!0)},n=()=>{v.LocalStorage.set("has_seen_download_signup_modal",!0)};new Promise((i,t)=>{e(["metaserver/static/js/auth/login_or_register/modal"],i,t)}).then(t.__importStar).then(({LoginOrRegisterModal:e})=>{p.Modal.showInstance(r.default.createElement(e,{downloadAction:a.DownloadAction.DIRECT_DOWNLOAD,id:"shared-link-download-signup-modal",initialMode:a.Mode.REGISTER,kind:o,onAuthenticateSuccess:i,onCancel:n,signup_tag:"shmodel_download_register",encryptionOptions:s,loggingExtra:{source:"download_button"}}))})}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/feature_config",["require","exports","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/core/types/preview_type","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/core/browser_detection"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getFeatureConfig=void 0;const o=(e,i)=>{const t="ms_view_embed"===i?{embed_support:"ms_view_embed"}:{embed_support:"unsupported"};let r;switch(e){case"OFF":case"CONTROL":r={support:"excel1"};break;case"P0":r={support:"excel2",phase:0};break;case"P1":r={support:"excel2",phase:1};break;case"P2":r={support:"excel2",phase:2};break;case"P3":r={support:"excel2",phase:3};break;case"P4":r={support:"excel2",phase:4};break;default:r={support:"excel1"}}return Object.assign(Object.assign({},r),t)},l=e=>{let i=e,t=!1;const r=e.split("_");r.length>1&&(i=r[0],t=!0);const a=parseInt(i,10);return isNaN(a)?null:{bandwidth:a,ignoreVideoPlayerSize:t}};i.getFeatureConfig=(e,i,c,d,u,p,v)=>{const f=[t.SDKPreviewSurface.BROWSE,t.SDKPreviewSurface.HOME,t.SDKPreviewSurface.RECENTS,t.SDKPreviewSurface.STARRED,t.SDKPreviewSurface.SEARCH,t.SDKPreviewSurface.INBAND_SHARE,t.SDKPreviewSurface.STANDALONE_PREVIEW],_=[t.SDKPreviewSurface.SHARED_CONTENT_LINK,t.SDKPreviewSurface.SHARED_LINK],g=!!v&&(f.includes(e)||_.includes(e)||e===t.SDKPreviewSurface.VIDEO_SYNTHESIS);return{excel_support:o(n.fileViewerFeatureExperiments.fvsdkExcel2Phase,n.fileViewerFeatureExperiments.fvsdkExcelMsEmbedPhase),annotations:f.includes(e),ax_annotations:n.fileViewerFeatureExperiments.fvsdkAxAnnotations,enable_fullscreen:!0,file_flipping:i,keyboard_shortcuts:!0,titlebar_logo_config:{show_logo:!0,base_url:"www.dropbox.com"},preview_types:{[a.PreviewType.SsrDoc]:Object.assign({},r.DEFAULT_CONFIG.preview_types[a.PreviewType.SsrDoc])},mobile_web:(0,s.is_supported_mobile_browser)(),preview_content_only:c,transparent_background:d,force_no_toolbar:u,show_cloud_doc_preview:p,partial_prewarm_allowed:n.fileViewerFeatureExperiments.partialPrewarmAllowed,enable_fvsdk_dynamic_actions:n.fileViewerFeatureExperiments.enableFvsdkDynamicActions,fvsdk_excel_ms_embed_phase:n.fileViewerFeatureExperiments.fvsdkExcelMsEmbedPhase,tags_section_variant:n.fileViewerFeatureExperiments.tagsSectionVariant,drag_section_annotation:n.fileViewerFeatureExperiments.dragSectionAnnotation,fvsdk_fastforward_rewind:n.fileViewerFeatureExperiments.fvsdkFastforwardRewind,img_size_optimization:n.fileViewerFeatureExperiments.imgSizeOptimization,enable_assigned_tasks_plugin:n.fileViewerFeatureExperiments.enableAssignedTasksPlugin,fvsdk_toolbar_rename:n.fileViewerFeatureExperiments.fvsdkToolbarRename,delete_from_keyboard:n.fileViewerFeatureExperiments.deleteFromKeyboard,initial_video_bandwidth:l(n.fileViewerFeatureExperiments.initialVideoBandwidth),fvsdk_slow_connection_banner:n.fileViewerFeatureExperiments.fvsdkSlowConnectionBanner,enable_video_editing:g&&"ON"===n.fileViewerFeatureExperiments.fvsdkVideoEditing,enable_video_crop:g&&"ON"===n.fileViewerFeatureExperiments.fvsdkVideoCrop,enable_video_rotate:g&&"ON"===n.fileViewerFeatureExperiments.fvsdkVideoRotate,replay_previews_permanent_entrypoint:n.fileViewerFeatureExperiments.replayPreviewsPermanentEntrypoint,video_transcription:n.fileViewerFeatureExperiments.videoTranscription,fvsdk_campaigns_toolkit_publish:n.fileViewerFeatureExperiments.fvsdkCampaignsToolkitPublish,mobile_web_preview_flipper:"ON"===n.fileViewerFeatureExperiments.mobileWebPreviewFlipper,mobile_web_preview_open_in_app_banner:n.fileViewerFeatureExperiments.mobileWebPreviewOpenInAppBanner,pap_logging:"ON"===n.fileViewerFeatureExperiments.papLogging,campaigns_download_sisu:n.fileViewerFeatureExperiments.campaignsDownloadSisu,publish_previews_painted_door_entrypoint:n.fileViewerFeatureExperiments.publishPreviewsPaintedDoorEntrypoint,campaigns_logged_out_sign_up_tooltip:n.fileViewerFeatureExperiments.campaignsLoggedOutSignUpTooltip,logged_out_acquisition_save_as:n.fileViewerFeatureExperiments.loggedOutAcquisitionSaveAs,google_one_tap_variant:n.fileViewerFeatureExperiments.googleOneTapVariant,capture_preview_comment_recording:n.fileViewerFeatureExperiments.capturePreviewCommentRecording,publish_previews_permanent_entrypoint:n.fileViewerFeatureExperiments.publishPreviewsPermanentEntrypoint}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/file_actions",["require","exports","tslib","metaserver/static/js/action_bar/file_actions/portable/delete/delete","metaserver/static/js/action_bar/file_actions/portable/delete/snackbars","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/core/i18n","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/files_view/file_actions/api_v2","metaserver/static/js/action_bar/file_actions/portable/rename/snackbars"],(function(e,i,t,r,a,n,s,o,l,c,d){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeFileActionsClient=void 0,i.makeFileActionsClient=function(e,i,u,p){if(e.fvsdk_toolbar_rename||e.delete_from_keyboard)return{rename:e.fvsdk_toolbar_rename?({newFilename:e,onRenameSuccess:r,onRenameFailed:a})=>t.__awaiter(this,void 0,void 0,(function*(){const{file:t}=u();if(!(0,n.isBrowseFile)(t))return;const o=!e.includes("/");let l;if(o&&((0,d.renameSnackBarInProgress)(s.PREVIEWS_SNACKBAR_ID),l=yield(0,c.renameFile)(t.fq_path,e,i.id,{checkFSWs:!0})),!l||l.isError||"success"!==l.result.entries[0][".tag"])return a(),void(0,d.renameFailedSnackBar)(o?(null==l?void 0:l.isError)?l:(0,c.createUndefinedRpcResult)():Object.assign(Object.assign({},(0,c.createUndefinedRpcResult)()),{error:{".tag":"to",to:{".tag":"malformed_path",malformed_path:{}}}}),t.fq_path,s.PREVIEWS_SNACKBAR_ID);const v=l.result.entries[0].success;p&&v&&"file"===v[".tag"]&&p(t,{fq_path:v.path_display||t.fq_path,revision_id:v.rev,file_id:v.id}),r(),(0,d.renameCompleteSnackBar)(s.PREVIEWS_SNACKBAR_ID)})):void 0,delete:e.delete_from_keyboard?({onDelete:e,onDeleteSuccess:t,onDeleteFailed:c,onDeleteFailedNoPermission:d,onDeleteCancel:v,setDeleteFileModalOpen:f})=>{const{file:_}=u();if(!(0,n.isBrowseFile)(_)||(0,s.isPnmLinkNodeSelected)(_)||!(0,s.isLiveFile)(_))return;if(e(),_.read_only)return l.Snackbar.warn(o.intl.formatMessage({id:"szm+5q",defaultMessage:"You don't have permission to make changes to this file"}),s.PREVIEWS_SNACKBAR_ID,!0),void d();const g={file_id:_.file_id,is_dir:_.is_dir};(0,r.portableDelete)({user:i,filesPath:[g],fq_path:_.fq_path},{onNetworkRequest:()=>(0,a.deleteSnackBarInProgress)(s.PREVIEWS_SNACKBAR_ID),onSuccess:()=>{(0,a.deleteCompleteSnackBar)(s.PREVIEWS_SNACKBAR_ID),p&&p(_),t()},onError:e=>{(0,a.deleteFailedSnackBar)(e,s.PREVIEWS_SNACKBAR_ID),c()},onRequestClose:()=>{v()},setDeleteFileModalOpen:f})}:void 0}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/file_system",["require","exports","metaserver/static/js/share_download/ui/util","metaserver/static/js/file_viewer/sdk_file_viewer/download_utils"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeFileSystemClient=void 0,i.makeFileSystemClient=function(e,i,{allowCopyToDropbox:a,shareToken:n,encryptionOptions:s,sharePermission:o,authModalKind:l}){return{copyToDropbox:!a||o&&!(0,t.isDownloadAllowed)(o)?()=>{}:({logModalConfirm:t,logModalCancel:a})=>{const{file:o}=i();(0,r.saveToDropbox)(o,e=>{"save_to_dropbox_approve"===e?t():"save_to_dropbox_cancel"===e&&a()},e,n,s)},downloadFile:()=>{const{file:t}=i();(0,r.downloadActiveFile)(t,e,s,l,void 0,n)}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer",["require","exports","tslib","react","metaserver/static/js/common/rendering","classnames","react-redux","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/api_v2/noauth_client","metaserver/static/js/file_store/utils","metaserver/static/js/components/ui/css","metaserver/static/js/extensions/data/selectors","metaserver/static/js/extensions/data/helpers","metaserver/static/js/file_viewer/sdk_file_viewer/async_plugin_loaders","metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/crop_rotate_plugin","metaserver/static/js/file_viewer/sdk_file_viewer/comments","metaserver/static/js/browse/models","metaserver/static/js/file_viewer/sdk_file_viewer/file_actions","metaserver/static/js/file_viewer/sdk_file_viewer/file_system","metaserver/static/js/file_viewer/sdk_file_viewer/full_screen","metaserver/static/js/file_viewer/sdk_file_viewer/print","metaserver/static/js/file_viewer/sdk_file_viewer/navigation","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/file_viewer/sdk_file_viewer/pass","metaserver/static/js/clean/web_timing_logger","metaserver/static/js/core/i18n","metaserver/static/js/core/browser","metaserver/static/js/flows/version/experiments","typescript/libraries/file-viewer/src/core/riviera/api","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/logging/video","metaserver/static/js/file_viewer/sdk_file_viewer/url","metaserver/static/js/file_viewer/sdk_file_viewer/cloud_docs","metaserver/static/js/file_viewer/sdk_file_viewer/constants","typescript/libraries/file-viewer/src/core/data/types","typescript/libraries/file-viewer/src/info_blade/loader","metaserver/static/js/file_viewer/sdk_file_viewer/blade_plugins/assigned_tasks_blade/loader","metaserver/static/js/file_viewer/sdk_file_viewer/preview_logger","metaserver/static/js/file_viewer/sdk_file_viewer/feature_config","metaserver/static/js/share_download/ui/util","metaserver/static/js/extensions/cloud_docs_compat","typescript/libraries/file-viewer/src/file_activity_blade/loader","metaserver/static/js/file_viewer/sdk_file_viewer/preferences","metaserver/static/js/previews/ui/sharing_plugin/loader","typescript/libraries/file-viewer/src/watermarking/edit_plugin/loader","metaserver/static/js/integrations/ui/pdf_editor/plugin/loader","metaserver/static/js/integrations/ui/pdf_editor/plugin/show_plugin_util","metaserver/static/js/photo-editor/plugin/loader","metaserver/static/js/photo-editor/plugin/show-edit-plugin","keymaster","metaserver/static/js/loggers/device_type","metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/snackbar_manager_plugin","metaserver/static/js/clean/browse_uri_interface","metaserver/static/js/previews/ui/constants","metaserver/static/js/core/dom","metaserver/static/js/user_survey/user_survey","metaserver/static/js/file_viewer/toggle_browse_elements_util","metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/async_replay_dialog","metaserver/static/js/flows/approval/api","metaserver/static/js/sharing/ui_util","metaserver/static/js/file_viewer/sdk_file_viewer/report_exception","metaserver/static/js/file_viewer/sdk_file_viewer/app_download_interstitial","metaserver/static/js/comments2/util","metaserver/static/js/file_viewer/sdk_file_viewer/app_download_interstitial","typescript/libraries/file-viewer/src/comments2/plugin/types","typescript/libraries/file-viewer/src/core/types/constants","metaserver/static/js/clean/ui/snackbar","metaserver/static/js/clean/ui/snackbar_manager","metaserver/static/js/core/browser_detection","metaserver/static/js/uuid/uuid","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/extensions/data/store","metaserver/static/js/flows/version/async_components","typescript/libraries/file-viewer/src/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/libraries/file-viewer/src/file_viewer/components","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/logging/performance","metaserver/static/js/flows/conversions/async_conversion_plugin","metaserver/static/js/integrations/hellosign_deep_integration/async_send_file_viewer_plugin","metaserver/static/js/integrations/hellosign_deep_integration/async_self_sign_plugin","metaserver/static/js/file_viewer/sdk_file_viewer/lazy_components","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/core/utils/support","metaserver/static/js/file_viewer/sdk_file_viewer/titlebar","typescript/libraries/file-viewer/src/transcript_blade/loader","metaserver/static/js/clean/viewer","metaserver/static/js/folder_dialog/api","metaserver/static/js/campaigns/emitter","metaserver/static/js/filepath/filepath","metaserver/static/js/docsend_analytics_add_on/helpers/utils","metaserver/static/js/integrations/data/selectors","metaserver/static/js/file_viewer/sdk_file_viewer/pap_preview_logger","metaserver/static/js/file_viewer/sdk_file_viewer/capture_recorder"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I,T,C,A,O,F,k,x,D,L,M,R,N,j,V,B,U,K,z,H,q,W,G,Y,Z,X,Q,$,J,ee,ie,te,re,ae,ne,se,oe,le,ce,de,ue,pe,ve,fe,_e,ge,me,we,be,he,ye,Se,Ee,Pe,Ie,Te,Ce,Ae,Oe,Fe,ke,xe,De,Le,Me,Re,Ne,je,Ve){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewer=i._FileViewer=i.isWatermarkingEnabled=void 0,r=t.__importDefault(r),n=t.__importDefault(n),P=t.__importStar(P),T=t.__importStar(T),Z=t.__importDefault(Z),ee=t.__importStar(ee);i.isWatermarkingEnabled=e=>!(!e||!ge.fileViewerConfiguration.watermarkingByUserId[e.id]);const Be=r.default.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{TagsSectionPreview:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/tagging/components/section/tags_section_preview"],i,t)}).then(t.__importStar);return{default:i}}))),Ue=(n,s,d,u,p,O,D,L,V,B,W,Y,Z,ee,te,re,oe,le,ce,de,ue,pe=!1,ve=!1,_e=!1,me=!0,ye=!1,Ee,Ce,Fe,xe,De,Ne)=>{var Ve,Ue;const Ke=V?()=>{V(),(0,S.isAudioPreview)(s().file)?ie.UserSurvey.trackEvent("audio_preview_viewed","previews"):(0,S.isVideoPreview)(s().file)&&ie.UserSurvey.trackEvent("video_preview_viewed","previews")}:void 0;let ze={};const He=Y?new o.DefaultUserApiV2Client(Y):new l.NoAuthApiV2Client,qe=(0,j.getFeatureConfig)(n,ye,pe,ve,_e,me,Y),We=(0,K.makePreferencesClient)(Y);(0,fe.is_supported_mobile_browser)()||ie.UserSurvey.trackEvent("preview_viewed","previews");const Ge=s().file;(0,c.isSharedFile)(Ge)&&setTimeout(()=>{(0,ne.trackReceiverUserLeapEvent)(ne.ReceiverUserLeapEvent.VIEWED_SHARED_FILE)},5e3);const Ye=(e,i)=>({width:(0,Ae.calcContentWidth)(window.innerWidth,e,i,(0,fe.is_supported_mobile_browser)()),height:(0,Ae.calcContentHeight)(window.innerHeight,qe.show_titlebar||!0)});let Ze;const Xe=(0,c.isBrowseFile)(Ge)&&(0,i.isWatermarkingEnabled)(Y);switch(n){case S.SDKPreviewSurface.BROWSE:case S.SDKPreviewSurface.HOME:case S.SDKPreviewSurface.HELLOSIGN:case S.SDKPreviewSurface.SEARCH:case S.SDKPreviewSurface.RECENTS:case S.SDKPreviewSurface.STARRED:case S.SDKPreviewSurface.STANDALONE_PREVIEW:case S.SDKPreviewSurface.PHOTOS:case S.SDKPreviewSurface.VIDEO_SYNTHESIS:case S.SDKPreviewSurface.COLLECTIONS:case S.SDKPreviewSurface.FILE_LOCKING:case S.SDKPreviewSurface.BACKUP:if(!Y)throw new Error("Must be logged in to browse");Ze=(0,m.makeFileActionsClient)(qe,Y,s,Fe),ze={presenceBeaconIOClient:(0,E.getPresenceBeaconIOClient)(Y,s),fileSystemClient:(0,w.makeFileSystemClient)(Y,s,{allowCopyToDropbox:!1,shareToken:u,encryptionOptions:ue,authModalKind:Ce}),fullScreenClient:(0,b.makeFullScreenClient)(oe),printClient:(0,h.makePrintClient)(),navigationClient:(0,y.makeBrowseNavigationClient)(Y,s,Ke,ee,te,re,ce),fileActionsClient:Ze,urlClient:(0,k.makeUrlClient)(Y),preferencesClient:We};break;case S.SDKPreviewSurface.VERSION_HISTORY:if(!Y)throw Error("user required for version history");ze={presenceBeaconIOClient:(0,E.getPresenceBeaconIOClient)(Y,s),fileSystemClient:void 0,fullScreenClient:(0,b.makeFullScreenClient)(oe),printClient:(0,h.makePrintClient)(),navigationClient:(0,y.makeVersionHistoryNavigationClient)(Y,s,Ke,ee,te,re),urlClient:(0,k.makeUrlClient)(Y),preferencesClient:We};break;case S.SDKPreviewSurface.SHARED_LINK:ze={fullScreenClient:(0,b.makeFullScreenClient)(oe),printClient:(0,h.makePrintClient)(),navigationClient:(0,y.makeInbandShareNavigationClient)(Ke,ee,te,re,d),urlClient:(0,k.makeUrlClient)(Y),fileSystemClient:(0,w.makeFileSystemClient)(Y,s,{allowCopyToDropbox:!0,shareToken:u,encryptionOptions:ue,sharePermission:L,authModalKind:Ce}),presenceBeaconIOClient:(0,E.getPresenceBeaconIOClient)(Y,s),preferencesClient:We};break;case S.SDKPreviewSurface.SHARED_LINK_EMBED:case S.SDKPreviewSurface.COMMERCE:case S.SDKPreviewSurface.TRANSFER:ze={fullScreenClient:(0,b.makeFullScreenClient)(oe),printClient:(0,h.makePrintClient)(),urlClient:(0,k.makeUrlClient)(Y),fileSystemClient:(0,w.makeFileSystemClient)(Y,s,{allowCopyToDropbox:!0,shareToken:u,encryptionOptions:ue,sharePermission:L,authModalKind:Ce})};break;case S.SDKPreviewSurface.CLIENT_PORTAL:ze={fullScreenClient:(0,b.makeFullScreenClient)(oe),printClient:(0,h.makePrintClient)(),urlClient:(0,k.makeUrlClient)(Y),fileSystemClient:(0,w.makeFileSystemClient)(Y,s,{allowCopyToDropbox:!0,shareToken:u,encryptionOptions:ue,sharePermission:L,authModalKind:Ce}),navigationClient:(0,y.makeSharedCollectionNavigationClient)(V)};break;case S.SDKPreviewSurface.SHARED_COLLECTION:ze={fullScreenClient:(0,b.makeFullScreenClient)(oe),printClient:(0,h.makePrintClient)(),urlClient:(0,k.makeUrlClient)(Y),fileSystemClient:(0,w.makeFileSystemClient)(Y,s,{allowCopyToDropbox:!0,shareToken:u,encryptionOptions:ue,sharePermission:L,authModalKind:Ce}),navigationClient:(0,y.makeSharedCollectionNavigationClient)(V,ee,te),preferencesClient:{rightRail:{setCollapsedState:()=>{},getCollapsedState:()=>!0,setBladeState:()=>{},getBladeState:()=>{}}}};break;case S.SDKPreviewSurface.SHARED_CONTENT_LINK:case S.SDKPreviewSurface.INBAND_SHARE:ze={presenceBeaconIOClient:(0,E.getPresenceBeaconIOClient)(Y,s),fileSystemClient:(0,w.makeFileSystemClient)(Y,s,{allowCopyToDropbox:!0,shareToken:u,encryptionOptions:ue,sharePermission:L,authModalKind:Ce}),fullScreenClient:(0,b.makeFullScreenClient)(oe),printClient:(0,h.makePrintClient)(),navigationClient:(0,y.makeInbandShareNavigationClient)(Ke,ee,te,re),urlClient:(0,k.makeUrlClient)(Y),preferencesClient:We}}const Qe=Ge.preview?(0,Oe.resolvePreviewType)(Ge.preview):void 0;if(Ge.preview&&Qe&&Qe===Se.PreviewType.Image)if(qe.img_size_optimization){const e=Ye(!(null===(Ve=We.rightRail)||void 0===Ve?void 0:Ve.getCollapsedState())||!1,!1);(0,be.maybePreloadFile)(Ge.preview,e)}else(0,be.maybePreloadFile)(Ge.preview);const $e={logTTI:()=>(e=>{const i=P.get_timer(e);i.markTimeToInteractive(),e&&i.end()})(De),logVideo:(e,i)=>{var t,r;const a=s().file;switch((0,N.logVideo)(e,i),qe.pap_logging&&((0,S.isVideoPreview)(a)?(0,je.logVideoToPap)(e,{previewSurface:n,file:a}):(0,S.isAudioPreview)(a)&&(0,je.logAudioToPap)(e,{previewSurface:n,file:a})),e){case F.VideoPreviewEvent.TimeToLoad:(0,S.isAudioPreview)(a)?(i.video_duration_seconds&&ie.UserSurvey.addAttribute("audioPreviewLength",(0,S.bucketLengthForUserSurvey)(i.video_duration_seconds)),ie.UserSurvey.addAttribute("audioPreviewType",(0,c.getExtension)(a)),ie.UserSurvey.addAttribute("isAudioPreviewFinished","false")):(i.video_duration_seconds&&ie.UserSurvey.addAttribute("videoPreviewLength",(0,S.bucketLengthForUserSurvey)(i.video_duration_seconds)),ie.UserSurvey.addAttribute("videoPreviewType",(0,c.getExtension)(a)),ie.UserSurvey.addAttribute("isVideoPreviewFinished","false"),ie.UserSurvey.addAttribute("videoPreviewResolution","auto"));break;case F.VideoPreviewEvent.ChangeVideoQuality:(null===(t=i.extra)||void 0===t?void 0:t.new_video_quality)&&ie.UserSurvey.addAttribute("videoPreviewResolution",i.extra.new_video_quality);break;case F.VideoPreviewEvent.MediaEnded:(0,S.isAudioPreview)(a)?(ie.UserSurvey.addAttribute("isAudioPreviewFinished","true"),ie.UserSurvey.trackEvent("audio_preview_viewed","previews")):(ie.UserSurvey.addAttribute("isVideoPreviewFinished","true"),ie.UserSurvey.trackEvent("video_preview_viewed","previews"));break;case F.VideoPreviewEvent.VideoPlaybackSmoothness:(null===(r=i.extra)||void 0===r?void 0:r.num_stalls_per_second_playback)&&ie.UserSurvey.addAttribute("videoPreviewNumberOfStallsPerSecondPlayback",i.extra.num_stalls_per_second_playback)}},log:(0,N.makeLogger)(n,Ge,Qe,qe.pap_logging),logDuration:N.logDuration},Je={batteries:{intl:I.intl,coreIOClients:{apiv2ClientBase:He,rivieraIOClient:new A.WebRivieraIOClient},logger:$e,optionalIOClients:Object.assign(Object.assign({},ze),{showAuthModal:d,cloudDocsClient:Y?(0,x.makeCloudDocsClient)(Y,s,u):void 0,reportExceptionClient:(0,se.makeReportExceptionClient)()})},callbacks:{onRenderSucceeded:()=>{var e;if((0,S.cleanupPrerenderPreview)(),qe.fvsdk_campaigns_toolkit_publish){const e="preview_page",i=s().file,t=(0,c.isBrowseFile)(i)?(0,Me.file_extension)(i.fq_path):(0,Me.file_extension)(i.filename);(0,Le.emitPageLoaded)(e,{file_extension:t,file_name:(0,c.getFilename)(i),file_path:(0,c.isSharedFile)(i)?i.href:i.fq_path,file_id:i.file_id,loggedOutSignUpTooltipVariant:qe.campaigns_logged_out_sign_up_tooltip,googleOneTapVariant:qe.google_one_tap_variant})}if(Z)if(qe.img_size_optimization){const i=Ye(!(null===(e=We.rightRail)||void 0===e?void 0:e.getCollapsedState())||!1,!1);(0,be.maybePreloadFiles)(Z,D,i)}else(0,be.maybePreloadFiles)(Z,D);(0,fe.is_supported_mobile_browser)()&&(ie.UserSurvey.trackEvent("mobile_web_preview_viewed","previews"),n===S.SDKPreviewSurface.SHARED_LINK&&ie.UserSurvey.trackEvent("mobile_web_receiver_preview_viewed","previews")),(0,S.isExcelPreview)(s().file)&&(ie.UserSurvey.addAttribute("fvsdk_excel2_phase",ge.fileViewerFeatureExperiments.fvsdkExcel2Phase),ie.UserSurvey.trackEvent("excel_preview_viewed","previews"))},onPreviewSessionInitialized:e=>{le&&le(e)}},initData:{accountId:Y?Y.account_id:void 0,deviceType:(0,X.getDeviceType)()},featureConfig:qe,platformConfig:{osModifierKey:fe.mac?"metaKey":"ctrlKey"},fileViewerId:xe},ei=[],ii=ge.fileViewerFeatureExperiments.tagsSectionVariant,ti=ii&&"ON"===ii;ii&&"OFF"!==ii&&new Promise((i,t)=>{e(["metaserver/static/js/stormcrow/stormcrow_exposure_logger"],i,t)}).then(t.__importStar).then(({StormcrowExposureLogger:e})=>{(new e).logExposure("tags_in_previews",ii)});const ri=n===S.SDKPreviewSurface.INBAND_SHARE&&qe.enable_assigned_tasks_plugin,ai=n!==S.SDKPreviewSurface.CLIENT_PORTAL&&n!==S.SDKPreviewSurface.BACKUP&&n!==S.SDKPreviewSurface.SHARED_COLLECTION,ni=n!==S.SDKPreviewSurface.CLIENT_PORTAL&&n!==S.SDKPreviewSurface.BACKUP&&n!==S.SDKPreviewSurface.SHARED_COLLECTION,si=[S.SDKPreviewSurface.BROWSE,S.SDKPreviewSurface.FILE_LOCKING,S.SDKPreviewSurface.HOME,S.SDKPreviewSurface.RECENTS,S.SDKPreviewSurface.SEARCH,S.SDKPreviewSurface.SHARED_CONTENT_LINK,S.SDKPreviewSurface.SHARED_LINK,S.SDKPreviewSurface.SHARED_LINK_EMBED,S.SDKPreviewSurface.STANDALONE_PREVIEW,S.SDKPreviewSurface.STARRED].includes(n),oi=(0,S.getLinkType)(Ge.href)!==S.LinkType.SHARED_FOLDER&&(0,S.getLinkType)(Ge.href)!==S.LinkType.SCL_FOLDER&&"V1"===qe.logged_out_acquisition_save_as,li=(0,M.makeInfoBladePluginLoader)(Y?String(Y.id):void 0,de,Y&&"MULTI_APPROVER"===ge.fileViewerFlowExperiments.approvalFlowVariantByUserId[Y.id]?e=>(0,ae.getFileApprovalStatus)(Y.id,e):void 0,ti?({pluginContext:e})=>{const i=s().file;return ti&&Y&&(0,c.isBrowseFile)(i)&&i.ns_path?r.default.createElement(a.LazySuspense,{fallback:null},r.default.createElement(Be,{files:[g.File.fromAnyFileObject(i)],user:Y,previewsLogUserAction:e.logUserAction})):null}:void 0,({})=>{const e=s().file;if(Y&&(0,C.isVersioningMVPEnabled)(ge.fileViewerFlowExperiments.versioningFlowVariantByUserId[Y.id])){const i=e=>(0,he.SDKPreviewSurfaceToPapType)(n,e);return r.default.createElement(we.AsyncChangeLogSection,{fileId:e.file_id,user:Y,getPreviewSurface:i})}return null}),ci=si?(0,ke.makeTranscriptPluginLoader)(Y?String(Y.id):void 0):void 0,di=ri?(0,R.makeAssignedTasksBladePluginLoader)(Y):void 0,ui=n===S.SDKPreviewSurface.COLLECTIONS?()=>!(0,c.isSharedFile)(s().file):void 0;O.featureVariant=qe.capture_preview_comment_recording;const pi=ai?Object.assign(Object.assign({},(0,_.makeComments2MetaserverLoader)(Y,O)),{isEnabled:ui}):void 0,vi=Y&&ni?Object.assign(Object.assign({},(0,U.makeFileActivityPluginLoader)(Y,null===(Ue=ze.navigationClient)||void 0===Ue?void 0:Ue.openVersionHistory)),{isEnabled:ui}):void 0,fi=Xe?(0,H.makeWatermarkLoader)($e,({fqPath:e,overwrite:i})=>{i&&n===S.SDKPreviewSurface.BROWSE||(e&&Y?T.replace_location((0,$.preview_uri_for_fq_path)(Y,e,{context:J.PreviewSourceContext.Workflow})):T.reload())}):void 0,_i=n!==S.SDKPreviewSurface.BACKUP&&n!==S.SDKPreviewSurface.SHARED_COLLECTION?(0,z.makeShareMetaserverLoader)(s,n,Y):void 0,gi=n!==S.SDKPreviewSurface.SHARED_COLLECTION?(0,v.makeDownloadActionLoader)(s,n,Y,u,L,ue,Ce,qe.campaigns_download_sisu):void 0,mi=(0,v.makeFlowsBoltPluginLoader)();if(pe||ei.push(li,pi,di,ci,vi,fi,_i,gi,Q.snackbarManagerLoader),oi&&!pe){const e=(0,Pe.makeFileConversionsLoader)(s,Y,ue);ei.push(e)}const wi=(0,v.makeVideoEditPluginLoader)(Y);if(Y){const e=(0,v.makeOpenDropdownActionLoader)(s,Y),i=(0,v.makeMoveActionLoader)(s,Y,null==B?void 0:B.currentFQPath,W),t=(0,v.makeCopyActionLoader)(s,Y,null==B?void 0:B.currentFQPath,W),r=ge.fileViewerFeatureExperiments.docsendAnalyticsAddOn,a=(0,Re.getDocsendAnalyticsAddOnConfig)(Y,r),o=a.workflowMenu.logExposure||a.workflowMenu.showMenuItem,l=(0,v.makeAddToCollectionActionLoader)(s,Y),c=(0,v.makeStarredActionLoader)(s,Y),d=(0,v.makeRenameActionLoader)(s,Y,void 0,Ze),u=(0,v.makeDeleteActionLoader)(s,Y),_=o?(0,v.makeDocsendAnalyticsAddOnLoader)(s,Y,r):void 0,g=(0,v.makeSignaturesDropdownLoader)(s,Y,ge.fileViewerFeatureExperiments.btSignaturesActionbarDropdown,Ne),m=(0,v.makeWaterMarkingActionPluginLoader)(s),w=(0,v.makeOpenInDesktopActionLoader)(s,Y,B),b=(0,v.makeUnzipActionLoader)(s,Y),h=(0,v.makeVersionHistoryActionLoader)(s,Y),y=(0,Pe.makeFileConversionsLoader)(s,Y,ue,ge.fileViewerFeatureExperiments.btSignaturesActionbarDropdown,Ne),E=oi?(0,Pe.makeFileConversionsLoader)(s,Y):void 0,P=Ne?(0,Ie.makeSendForSignatureLoader)(s,Y,ge.fileViewerFeatureExperiments.btSignaturesActionbarDropdown):void 0,I=Ne?(0,Te.makeSelfSignLoader)(s,Y,ge.fileViewerFeatureExperiments.btSignaturesActionbarDropdown):void 0,T=(0,v.makeRestoreActionLoader)(re,Ee),C=(0,v.makeStarToolbarButtonLoader)(s,Y),A=(0,v.makeRequestApprovalLoader)(s,Y,n),O=(0,v.makeCreateVersionLoader)(s,Y,n),F=(0,f.makeCropRotateButtonsLoader)(Y,s,Fe),k=(0,q.makePdfEditorPluginLoader)(s,Y,p,n),x=(0,G.makePhotoEditorPluginLoader)(s,Y,Fe),D="MULTI_APPROVER"===ge.fileViewerFlowExperiments.approvalFlowVariantByUserId[Y.id],L="MVP"===ge.fileViewerFlowExperiments.versioningFlowVariantByUserId[Y.id]&&n===S.SDKPreviewSurface.BROWSE,M=(0,v.makeOpenInReplayActionLoader)(s,Y),R=(0,v.makePublishPaintedDoorLoader)(s,Y),N=(0,v.makePublishLoader)(s,Y),j=qe.enable_fvsdk_dynamic_actions?[(0,v.makeMoveActionLoader)(s,Y,null==B?void 0:B.currentFQPath,W,Fe),t,(0,v.makeRenameActionLoader)(s,Y,Fe,Ze),(0,v.makeDeleteActionLoader)(s,Y,Fe)]:[];switch(n){case S.SDKPreviewSurface.BROWSE:ei.push((0,v.makeGoToFolderActionLoader)(s,Y),e,i,t,d,u,Xe?m:void 0,(0,S.isFvsdkPdfEditorEnabled)()?k:void 0,c,h,b,g,y,P,I,_,C,F,mi,D?A:void 0,L?O:void 0,x,(0,S.isOpenInReplayEnabled)()?M:void 0,(0,S.isPublishPaintedDoorEnabled)()?R:void 0,wi,(0,S.isPublishEnabled)()?N:void 0);break;case S.SDKPreviewSurface.SEARCH:ei.push(e,...j,Xe?m:void 0,(0,S.isFvsdkPdfEditorEnabled)()?k:void 0,c,h,b,g,y,P,I,_,C,F,mi,D?A:void 0,L?O:void 0,x,(0,S.isOpenInReplayEnabled)()?M:void 0,(0,S.isPublishPaintedDoorEnabled)()?R:void 0,wi,(0,S.isPublishEnabled)()?N:void 0);break;case S.SDKPreviewSurface.STANDALONE_PREVIEW:case S.SDKPreviewSurface.FILE_LOCKING:ei.push(e,...j,Xe?m:void 0,(0,S.isFvsdkPdfEditorEnabled)()?k:void 0,c,h,b,g,y,P,I,_,T,C,F,mi,D?A:void 0,L?O:void 0,x,(0,S.isOpenInReplayEnabled)()?M:void 0,(0,S.isPublishPaintedDoorEnabled)()?R:void 0,wi,(0,S.isPublishEnabled)()?N:void 0);break;case S.SDKPreviewSurface.RECENTS:case S.SDKPreviewSurface.STARRED:case S.SDKPreviewSurface.HOME:ei.push(e,...j,Xe?m:void 0,(0,S.isFvsdkPdfEditorEnabled)()?k:void 0,g,c,h,b,y,P,I,_,T,C,F,mi,D?A:void 0,L?O:void 0,x,(0,S.isOpenInReplayEnabled)()?M:void 0,wi);break;case S.SDKPreviewSurface.INBAND_SHARE:case S.SDKPreviewSurface.SHARED_CONTENT_LINK:case S.SDKPreviewSurface.SHARED_LINK:case S.SDKPreviewSurface.HELLOSIGN:case S.SDKPreviewSurface.PHOTOS:ei.push(e,Xe?m:void 0,(0,S.isFvsdkPdfEditorEnabled)()?k:void 0,c,h,b,E,P,I,_,T,C,F,mi,D?A:void 0,L?O:void 0,x,wi);break;case S.SDKPreviewSurface.VERSION_HISTORY:ei.push(T);break;case S.SDKPreviewSurface.VIDEO_SYNTHESIS:case S.SDKPreviewSurface.COLLECTIONS:ei.push(e,h,P,I,_,D?A:void 0,L?O:void 0);break;case S.SDKPreviewSurface.SHARED_LINK_EMBED:case S.SDKPreviewSurface.COMMERCE:case S.SDKPreviewSurface.TRANSFER:case S.SDKPreviewSurface.SHARED_COLLECTION:case S.SDKPreviewSurface.CLIENT_PORTAL:case S.SDKPreviewSurface.UNKNOWN:break;case S.SDKPreviewSurface.BACKUP:ei.push(e,h,w,(0,v.makeTransferActionLoader)(s));break;default:(e=>{throw new Error})()}n!==S.SDKPreviewSurface.BROWSE&&n!==S.SDKPreviewSurface.SEARCH&&n!==S.SDKPreviewSurface.PHOTOS||ei.push(l)}return Object.assign(Object.assign({},Je),{pluginLoaders:ei.filter(e=>null!=e)})},Ke=(e,i,t,r,a)=>{const n=[];if(e){const{canCopyToDropboxRoles:s}=e;if(s.length>0){const s=(0,V.getToDropboxOption)(e,i,t,r,void 0,void 0,void 0,void 0,a);n.push({text:s.text,isDisabled:s.isDisabled,role:s.role})}}return n};i._FileViewer=i=>{const{file:a,sharedLinkInfo:o,sharePermission:l,shareToken:d,brandingInfo:v,user:f,previewSurface:_,encryptionOptions:g,closeFile:m,flipToNextFile:w,flipToPreviousFile:b,previewCollection:y,updateFiles:E,fileIndex:I=0,fileCount:T=1,passSessionId:C,previewContentOnly:A=!1,transparentBackground:F=!1,forceNoToolbar:k=!1,showCloudDocPreview:x=!0,onPreviewSessionInitialized:M,onRestoreRevision:R,onFullscreenChange:N,canRestoreRevision:j,canShowFileFlippers:U,authModalKind:K,containerId:z,onFileChanged:H,fileViewerId:X,sourceContext:Q,ajaxTimerName:$}=i,ie=(({file:e,initialSourceAction:i})=>{const t=r.default.useRef(i===J.PreviewSourceAction.Visit?O.SourceAction.Visit:O.SourceAction.Click),a=r.default.useRef();return r.default.useEffect(()=>{a.current=e},[e]),void 0!==a.current&&e!==a.current&&(t.current=O.SourceAction.Click),t.current})(i),ae={file:a,sharedLinkInfo:o,sharePermission:l,shareToken:d,encryptionOptions:g},ne=r.default.useRef(ae),se=r.default.createRef(),oe=r.default.useCallback(()=>ne.current,[]),fe=(0,s.useSelector)(e=>(0,u.getOpenActionsForFile)(e,a),s.shallowEqual),_e=r.default.useMemo(()=>(0,p.partitionActions)(fe).cloudEditors,[fe]),ge=r.default.useMemo(()=>z&&document.getElementById(z)||void 0,[z]),me=(0,s.useSelector)(e=>(0,Ne.isSendForSignatureEnabled)(e)),[we,be]=r.default.useState(!1),{CaptureRecorder:Se,captureState:Ee}=(0,Ve.useCaptureRecorder)(f,a,_),Pe=i.previewSurface===S.SDKPreviewSurface.BROWSE?i.browseContext:void 0,Ie=i.previewSurface===S.SDKPreviewSurface.BROWSE?i.browseExceptions:void 0,Te=i.previewSurface===S.SDKPreviewSurface.BROWSE?i.shouldFocusApproval:void 0,Ae=i.previewSurface===S.SDKPreviewSurface.BROWSE?i.shouldFocusComment:void 0,Oe="activeCommentThreadId"in i&&i.activeCommentThreadId?i.activeCommentThreadId:void 0,ke=i.previewSurface===S.SDKPreviewSurface.SHARED_LINK||i.previewSurface===S.SDKPreviewSurface.SHARED_CONTENT_LINK?i.copyLinkButtonOOBPreviewsVariant:void 0;r.default.useEffect(()=>{ke&&"OFF"!==ke&&new Promise((i,t)=>{e(["metaserver/static/js/stormcrow/stormcrow_exposure_logger"],i,t)}).then(t.__importStar).then(({StormcrowExposureLogger:e})=>{(new e).logExposure("sharing_copy_link_button_oob_previews",ke)})},[]);const Me=i.previewSurface===S.SDKPreviewSurface.SHARED_LINK||i.previewSurface===S.SDKPreviewSurface.SHARED_CONTENT_LINK||i.previewSurface===S.SDKPreviewSurface.INBAND_SHARE?i.parsedSharedCopyLink:void 0,Re=e=>(0,S.showAuthModal)(Object.assign(Object.assign({},e),{encryptionOptions:g})),je=r.default.useMemo(()=>Ue(_,oe,Re,d,be,Ee,I,l,m,Pe,Ie,f,y,w,b,R,N,M,E,v,g,A,F,k,x,U,j,K,H,X,$,me),[f,_]),Be=r.default.useRef(null),ze=r.default.useMemo(()=>{var e;const i=null===(e=ne.current)||void 0===e?void 0:e.file,t=i&&(0,c.isBrowseFile)(i)&&(0,c.isBrowseFile)(a)&&i.file_id===a.file_id&&i.fq_path===a.fq_path;if(Be.current&&(we||t))return Be.current;ne.current={file:a,sharedLinkInfo:o,sharePermission:l,shareToken:d,encryptionOptions:g};const r=((e,i,t,r,a,n,s,o,l,d)=>{const u=t.map(e=>({displayName:e.description,editorName:"cloud_editor"===e.handler[".tag"]?(0,B.cloudEditorNameToParams)(e.handler.editor_name):"",iconUrl:e.icon.url}));if((0,c.isSharedFile)(i))return{cloud_open_with_buttons:u,download_button:{enable_download_button:!r,enable_open_with_button:!r,can_download:!!a&&(0,V.isDownloadAllowed)(a),copy_targets:Ke(a,n,i,s,d)},enable_print:(0,h.canPrint)(a),enable_open_button:!1,enable_restore_button:l,enable_view_on_dropbox_button:!1,canEdit:!1};{const t=!!o&&!o.isCurrentPathWriteable(),a=!(i.read_only||t||e===S.SDKPreviewSurface.VIDEO_SYNTHESIS);return{cloud_open_with_buttons:u,download_button:{enable_download_button:!r,enable_open_with_button:!r,can_download:!0,copy_targets:[]},enable_print:e!==S.SDKPreviewSurface.COMMERCE,enable_open_button:e!==S.SDKPreviewSurface.VERSION_HISTORY,enable_restore_button:l,enable_view_on_dropbox_button:!1,canEdit:a}}})(_,a,_e,A,l,d,g,Pe,!!j,f);return((e,i,t,r,a,n,s,o,l,d,u,p,v,f)=>{const _=(0,le.parseActiveCommentFromUrl)(),g=(0,S.parseTimeRangeFromUrl)();let m;return(0,he.isEditModeActive)()&&((0,Y.showEditPlugin)(e,l)?m=G.PHOTO_EDITOR_PLUGIN_ID:(0,W.showEditPlugin)(e,l)&&(m=q.PDF_EDITOR_PLUGIN_ID)),{fileInfo:{file_id:e.file_id,sj_id:e.sjid,ns_id:e.ns_id,url:null==o?void 0:o.url},fileMetadata:{file_id:e.file_id,file_name:(0,c.getFilename)(e),file_path:(0,c.isBrowseFile)(e)?e.fq_path:void 0,file_last_modified_date:e.ts?new Date(1e3*e.ts).toISOString():void 0,file_collection_context:{file_index:t,parent_files_count:r}},previewMetadata:e.preview,fileConfig:i,fileSize:e.bytes,supportedPreviewTypes:[...ue.DEFAULT_SUPPORTED_PREVIEW_TYPES,...S.INBAND_SUPPORTED_TYPES],sharedLinkInfo:o&&Object.assign(Object.assign({},o),{hasPublicAudienceOrVisibility:!!o.hasPublicAudienceOrVisibility}),sourceSession:{source_action:n,source_context:a,page_start_ts:performance.timing.navigationStart,was_flipped:s},pluginParams:{shouldFocusApproval:d,shouldFocusComment:u,threadId:p,commentId:_},defaultRightRailPlugin:d||u||p||_?de.COMMENTS_PLUGIN_ID:L.INFO_BLADE_PLUGIN_ID,activeEditPlugin:m,brandingInfo:v,timeRange:g,isLoggedIn:!!f}})(a,r,I,T,Q,ie,!1,o,l,Te,Ae,Oe,v,f)},[a]);Be.current=ze,r.default.useEffect(()=>{if(_!==S.SDKPreviewSurface.VERSION_HISTORY)return(0,te.hideElementsBehindFileViewer)(),te.showElementsBehindFileViewer},[]),r.default.useEffect(()=>{const e=document.title;return()=>{document.title=e}},[]);const He=(0,c.getFilename)(a);r.default.useEffect(()=>{document.title=He},[He]),r.default.useEffect(()=>{const e=pe.Snackbar.manager;pe.Snackbar.manager=se.current;const i=Z.default.getScope();return Z.default.setScope("fvsdk_scope"),ee.scroll_lock_document(),()=>{ee.scroll_unlock_document(),Z.default.setScope(i),pe.Snackbar.manager=e}},[]),r.default.useEffect(()=>()=>{(0,Le.emitRequestBrowseRefreshEvent)()},[]);const qe=r.default.useRef(null),We=r.default.useCallback(e=>{qe.current=e;const i=["dragenter","dragover","dragleave","drop"],t=e=>{e.stopPropagation(),e.preventDefault()};for(const r of i)null==e||e.addEventListener(r,t)},[]),Ge=r.default.useMemo(()=>({onHide:e})=>r.default.createElement(ce.OpenInAppHeader,{activePreviewFile:ae,user:f,onHide:e}),[a,f]),Ye=_===S.SDKPreviewSurface.SHARED_LINK||_===S.SDKPreviewSurface.SHARED_CONTENT_LINK||_===S.SDKPreviewSurface.SHARED_COLLECTION,Ze=r.default.useMemo(()=>r.default.createElement(Ce.LazyMobileFooter,{user:f,isSharedLink:Ye,activePreviewFile:ae,authModalKind:K}),[f,ae]),Xe=r.default.useMemo(()=>r.default.createElement(Ce.LazyMobileHeader,{user:f,isSharedLink:Ye,activePreviewFile:ae,authModalKind:K,browseContext:Pe,onFileChanged:H}),[f,ae]),Qe=r.default.useMemo(()=>{if(f)return({initialPath:e,onFolderSelected:i})=>r.default.createElement(Ce.LazyFolderPicker,{user:f,webTimer:P.get_timer(),onFolderSelected:i,apiClient:{getFolderContents:De.getFolderContentsAPIv2},initialPath:e,rootName:xe.Viewer.get_role_title(f)||"Dropbox",canSelectReadonly:!1,skipFocusOnMount:!0,showFolderSuggestion:!1,showEmptyFolders:!0,size:"small"})},[f]),$e=r.default.useMemo(()=>{let e=!0;return e=(0,c.isSharedFile)(ae.file)?!!l&&l.canViewMetadataRoles.length>0:_!==S.SDKPreviewSurface.VERSION_HISTORY,r.default.createElement(Fe.TitleBarRightSection,{previewSurface:_,user:f,activePreviewFile:ae,copyLinkButtonOOBPreviewsVariant:ke,passSessionId:C,parsedSharedCopyLink:Me,showAuthModal:Re,enablePass:e})},[f,ae,C,Me,ke,ze]);return r.default.createElement("div",{ref:We,className:(0,n.default)("fvsdk-container",{"fvsdk-embed-viewport":!!ge})},r.default.createElement(ve.SnackbarManager,{ref:se,getParentElement:()=>qe.current,useDigSnackbars:!0}),r.default.createElement(ye.FileViewer,Object.assign({},je,{className:D.FVSDK_MOUNT_POINT,id:D.FVSDK_MOUNT_POINT,viewport:ge,initializeOpts:ze,header:Ge,mobileFooter:Ze,mobileHeader:Xe,titlebar:{rightSection:$e},folderPicker:Qe})),r.default.createElement(re.AsyncReplayDialog,{file:a,user:f}),Se)},i._FileViewer.displayName="_FileViewer",i._FileViewer.displayName="_FileViewer";const ze=e=>{const t=r.default.useMemo(()=>_e.UUID.v4({allowInsecure:!0}),[]),a=r.default.useMemo(()=>_e.UUID.v4({allowInsecure:!0}),[]),[n,s]=r.default.useState(!1),o=r.default.useCallback(e=>{(0,N.logInterstitialEventToAmp)(e,"file_viewer")},[]),l=r.default.useCallback(()=>{s(!0)},[s]);return"open_in_app_data"in e.file&&e.file.open_in_app_data&&!n&&!e.hideOpenInAppInterstitial?r.default.createElement(oe.FvsdkAppDownloadInterstitial,{file:e.file,filePreviewSessionId:t,fileViewerSessionId:a,onDismiss:l,openInAppData:e.file.open_in_app_data,sharedLinkInfo:e.sharedLinkInfo,fileViewOrigin:e.fileViewOrigin,logUserAction:o}):r.default.createElement(i._FileViewer,Object.assign({},e,{fileViewerId:a}))};ze.displayName="FileViewerWithInterstitial";const He=(0,me.getStore)(),qe=e=>(Ee.PreviewsEventLogger.mark(Ee.PreviewsTimingEvents.SDK_FILE_VIEWER_CODE_START),r.default.createElement(s.Provider,{store:He},r.default.createElement(ze,Object.assign({},e))));qe.displayName="FileViewerWithProvider",qe.displayName="FileViewerWithProvider";const We=(0,d.requireCssWithComponent)(qe,["/static/typescript/libraries/file-viewer/src/index.web-vfljoiGhs.css","/static/typescript/libraries/comments2/src/index-vfljiK9YC.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css","/static/metaserver/static/css/preview/sdk_file_viewer-vfliwutJI.css","/static/typescript/component_libraries/dig-experimental/src/index.web-vfl_m6TBk.css","/static/typescript/component_libraries/retrieval-components/src/index.web-vflLEz1F-.css","/static/typescript/component_libraries/photos/src/index.web-vfl2_Z5j-.css","/static/metaserver/static/css/dig-illustrations/index.web-vflzrHQEU.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css","/static/metaserver/static/css/font_paper_atlas_grotesk-vflDoDLsu.css"]);i.FileViewer=We,We.displayName="FileViewer"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/full_screen",["require","exports","metaserver/static/js/file_viewer/sdk_file_viewer/full_screen_helpers"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeFullScreenClient=void 0,i.makeFullScreenClient=function(e){return{enterFullScreen:(i,r)=>{r||(0,t.enterFullScreen)({onExitFunction:i}),e&&e(!0)},exitFullScreen:i=>{i||(0,t.exitFullScreenWithoutCallback)(),null==e||e(!1)}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/navigation",["require","exports","metaserver/static/js/previews/util"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeSharedCollectionNavigationClient=i.makeVersionHistoryNavigationClient=i.makeBrowseNavigationClient=i.makeInbandShareNavigationClient=void 0,i.makeInbandShareNavigationClient=function(e,i,t,r,a){return{closeViewer:e?()=>{e()}:void 0,flipToNextFile:i,showAuthModal:a,flipToPreviousFile:t,restorePreviousVersion:r}},i.makeBrowseNavigationClient=function(e,i,r,a,n,s,o){return{closeViewer:r?()=>{r()}:void 0,openVersionHistory:()=>{const r=i();(0,t.redirectToVersionHistory)(r.file,e)},flipToNextFile:a,flipToPreviousFile:n,restorePreviousVersion:s,updateFiles:o?()=>o():void 0}},i.makeVersionHistoryNavigationClient=function(e,i,t,r,a,n){return{closeViewer:t?()=>{t()}:void 0,flipToNextFile:r,flipToPreviousFile:a,restorePreviousVersion:n}},i.makeSharedCollectionNavigationClient=function(e,i,t){return{closeViewer:e?()=>{e()}:void 0,flipToNextFile:i,flipToPreviousFile:t}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/pap_preview_logger",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/logging/video","typescript/libraries/file-viewer/src/core/types/preview_type","metaserver/static/js/file_store/utils"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.logAudioToPap=i.logVideoToPap=i.logToPap=void 0;i.logToPap=(i,a)=>t.__awaiter(void 0,void 0,void 0,(function*(){var o,l,c;const{logEvent:d}=yield new Promise((i,t)=>{e(["metaserver/static/js/pap/analytics_client"],i,t)}).then(t.__importStar),{pap_events:u}=yield new Promise((i,t)=>{e(["metaserver/static/js/dropbox/proto/pap_events/previews/preview_file"],i,t)}).then(t.__importStar),p=e=>{switch(e){case"docx":return u.previews.Preview_File.FileType.DOCX_FILE_TYPE;case"pdf":return u.previews.Preview_File.FileType.PDF_FILE_TYPE;case"xls":return u.previews.Preview_File.FileType.XLS_FILE_TYPE;case"jpg":return u.previews.Preview_File.FileType.JPG_FILE_TYPE;case"png":return u.previews.Preview_File.FileType.PNG_FILE_TYPE;case"heic":return u.previews.Preview_File.FileType.HEIC_FILE_TYPE;case"mp4":return u.previews.Preview_File.FileType.MP4_FILE_TYPE;case"mov":return u.previews.Preview_File.FileType.MOV_FILE_TYPE;case"txt":return u.previews.Preview_File.FileType.TXT_FILE_TYPE;case"mp3":return u.previews.Preview_File.FileType.MP3_FILE_TYPE;case"m4a":return u.previews.Preview_File.FileType.M4A_FILE_TYPE;case"webp":return u.previews.Preview_File.FileType.WEBP_FILE_TYPE;case"xlsx":return u.previews.Preview_File.FileType.XLSX_FILE_TYPE;case"pages":return u.previews.Preview_File.FileType.PAGES_FILE_TYPE;case"zip":return u.previews.Preview_File.FileType.ZIP_FILE_TYPE;case"gif":return u.previews.Preview_File.FileType.GIF_FILE_TYPE;case"url":return u.previews.Preview_File.FileType.URL_FILE_TYPE;case"numbers":return u.previews.Preview_File.FileType.NUMBERS_FILE_TYPE;case"wav":return u.previews.Preview_File.FileType.WAV_FILE_TYPE;case"epub":return u.previews.Preview_File.FileType.EPUB_FILE_TYPE;case"dng":return u.previews.Preview_File.FileType.DNG_FILE_TYPE;case"opus":return u.previews.Preview_File.FileType.OPUS_FILE_TYPE;case"cr2":return u.previews.Preview_File.FileType.CR2_FILE_TYPE;case"arw":return u.previews.Preview_File.FileType.ARW_FILE_TYPE;case"pptx":return u.previews.Preview_File.FileType.PPTX_FILE_TYPE;case"psd":return u.previews.Preview_File.FileType.PSD_FILE_TYPE;case"doc":return u.previews.Preview_File.FileType.DOC_FILE_TYPE;case"amr":return u.previews.Preview_File.FileType.AMR_FILE_TYPE;case"csv":return u.previews.Preview_File.FileType.CSV_FILE_TYPE;case"clip":return u.previews.Preview_File.FileType.CLIP_FILE_TYPE;case"nef":return u.previews.Preview_File.FileType.NEF_FILE_TYPE;case"kdbx":return u.previews.Preview_File.FileType.KDBX_FILE_TYPE;case"tiff":return u.previews.Preview_File.FileType.TIFF_FILE_TYPE;case"svg":return u.previews.Preview_File.FileType.SVG_FILE_TYPE;case"apk":return u.previews.Preview_File.FileType.APK_FILE_TYPE;case"key":return u.previews.Preview_File.FileType.KEY_FILE_TYPE;case"gpx":return u.previews.Preview_File.FileType.GPX_FILE_TYPE;case"aac":return u.previews.Preview_File.FileType.AAC_FILE_TYPE;case"procreate":return u.previews.Preview_File.FileType.PROCREATE_FILE_TYPE;case"webm":return u.previews.Preview_File.FileType.WEBM_FILE_TYPE;case"torrent":return u.previews.Preview_File.FileType.TORRENT_FILE_TYPE;case"ipv":return u.previews.Preview_File.FileType.IPV_FILE_TYPE;case"cr3":return u.previews.Preview_File.FileType.CR3_FILE_TYPE;case"html":return u.previews.Preview_File.FileType.HTML_FILE_TYPE;case"xml":return u.previews.Preview_File.FileType.XML_FILE_TYPE;case"vcf":return u.previews.Preview_File.FileType.VCF_FILE_TYPE;case"rar":return u.previews.Preview_File.FileType.RAR_FILE_TYPE;case"pvt":return u.previews.Preview_File.FileType.PVT_FILE_TYPE;case"odt":return u.previews.Preview_File.FileType.ODT_FILE_TYPE;case"md":return u.previews.Preview_File.FileType.MD_FILE_TYPE;default:return u.previews.Preview_File.FileType.UNKNOWN_FILE_TYPE}},v=e=>{switch(e){case n.PreviewType.Image:return u.previews.Preview_File.PreviewType.IMAGE_PREVIEW_TYPE;case n.PreviewType.Doc:case n.PreviewType.SsrDoc:return u.previews.Preview_File.PreviewType.DOC_PREVIEW_TYPE;case n.PreviewType.Video:return u.previews.Preview_File.PreviewType.VIDEO_PREVIEW_TYPE;case n.PreviewType.Audio:return u.previews.Preview_File.PreviewType.AUDIO_PREVIEW_TYPE;case n.PreviewType.Archive:return u.previews.Preview_File.PreviewType.ARCHIVE_PREVIEW_TYPE;case n.PreviewType.CloudDoc:return u.previews.Preview_File.PreviewType.CLOUD_DOC_PREVIEW_TYPE;case n.PreviewType.Error:return u.previews.Preview_File.PreviewType.ERROR_PREVIEW_TYPE;case n.PreviewType.Linkfile:return u.previews.Preview_File.PreviewType.LINKFILE_PREVIEW_TYPE;case n.PreviewType.Excel:return u.previews.Preview_File.PreviewType.EXCEL_PREVIEW_TYPE;case n.PreviewType.HTML:case n.PreviewType.RawHTML:return u.previews.Preview_File.PreviewType.HTML_PREVIEW_TYPE;default:return u.previews.Preview_File.PreviewType.UNKNOWN_PREVIEW_TYPE}};switch(i){case r.SessionEventType.FilePreviewAttemptStarted:d(u.previews.Preview_File.create({eventState:u.EventState.START,actionScreen:a.previewSurface,previewType:v(a.previewType),fileType:p(a.file?(0,s.getExtension)(a.file):void 0),fileSize:null===(o=a.file)||void 0===o?void 0:o.bytes}));break;case r.SessionEventType.FilePreviewRenderSucceeded:d(u.previews.Preview_File.create({eventState:u.EventState.SUCCESS,actionScreen:a.previewSurface,previewType:v(a.previewType),fileType:p(a.file?(0,s.getExtension)(a.file):void 0),fileSize:null===(l=a.file)||void 0===l?void 0:l.bytes}));break;case r.SessionEventType.FilePreviewRenderFailed:d(u.previews.Preview_File.create({eventState:u.EventState.FAILED,actionScreen:a.previewSurface,previewType:v(a.previewType),fileType:p(a.file?(0,s.getExtension)(a.file):void 0),fileSize:null===(c=a.file)||void 0===c?void 0:c.bytes}))}}));i.logVideoToPap=(i,r)=>t.__awaiter(void 0,void 0,void 0,(function*(){var n,o;const{logEvent:l}=yield new Promise((i,t)=>{e(["metaserver/static/js/pap/analytics_client"],i,t)}).then(t.__importStar),{pap_events:c}=yield new Promise((i,t)=>{e(["metaserver/static/js/dropbox/proto/pap_events/previews_video/play_video"],i,t)}).then(t.__importStar),d=e=>{switch(e){case"mov":return c.previews_video.Play_Video.FileType.MOV_FILE_TYPE;case"mp4":return c.previews_video.Play_Video.FileType.MP4_FILE_TYPE;case"webm":return c.previews_video.Play_Video.FileType.WEBM_FILE_TYPE;default:return c.previews_video.Play_Video.FileType.UNKNOWN_FILE_TYPE}};switch(i){case a.VideoPreviewEvent.VideoStartsPlaying:l(c.previews_video.Play_Video.create({eventState:c.EventState.SUCCESS,actionScreen:r.previewSurface,fileType:d(r.file?(0,s.getExtension)(r.file):void 0),fileSize:null===(n=r.file)||void 0===n?void 0:n.bytes}));break;case a.VideoPreviewEvent.MediaError:l(c.previews_video.Play_Video.create({eventState:c.EventState.FAILED,actionScreen:r.previewSurface,fileType:d(r.file?(0,s.getExtension)(r.file):void 0),fileSize:null===(o=r.file)||void 0===o?void 0:o.bytes}))}}));i.logAudioToPap=(i,r)=>t.__awaiter(void 0,void 0,void 0,(function*(){var n,o;const{logEvent:l}=yield new Promise((i,t)=>{e(["metaserver/static/js/pap/analytics_client"],i,t)}).then(t.__importStar),{pap_events:c}=yield new Promise((i,t)=>{e(["metaserver/static/js/dropbox/proto/pap_events/previews_audio/play_audio"],i,t)}).then(t.__importStar),d=e=>{switch(e){case"aac":return c.previews_audio.Play_Audio.FileType.AAC_FILE_TYPE;case"m4a":return c.previews_audio.Play_Audio.FileType.M4A_FILE_TYPE;case"mp3":return c.previews_audio.Play_Audio.FileType.MP3_FILE_TYPE;case"wav":return c.previews_audio.Play_Audio.FileType.WAV_FILE_TYPE;default:return c.previews_audio.Play_Audio.FileType.UNKNOWN_FILE_TYPE}};switch(i){case a.VideoPreviewEvent.VideoStartsPlaying:l(c.previews_audio.Play_Audio.create({eventState:c.EventState.SUCCESS,actionScreen:r.previewSurface,fileType:d(r.file?(0,s.getExtension)(r.file):void 0),fileSize:null===(n=r.file)||void 0===n?void 0:n.bytes}));break;case a.VideoPreviewEvent.MediaError:l(c.previews_audio.Play_Audio.create({eventState:c.EventState.FAILED,actionScreen:r.previewSurface,fileType:d(r.file?(0,s.getExtension)(r.file):void 0),fileSize:null===(o=r.file)||void 0===o?void 0:o.bytes}))}}))})),define("metaserver/static/js/file_viewer/sdk_file_viewer/preferences",["require","exports","metaserver/static/js/file_viewer/sdk_file_viewer/preferences_util","metaserver/static/js/account_page/widgets/account_preferences/api"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePreferencesClient=void 0,i.makePreferencesClient=function(e){return e?(function(e){return{rightRail:{setCollapsedState:({isCollapsed:i})=>{(0,t.setRightRailIsCollapsed)(e.id,i)},getCollapsedState:()=>(0,t.getRightRailIsCollapsed)(e.id),setBladeState:({bladeId:i})=>{(0,t.setRightRailBlade)(e.id,i)},getBladeState:()=>(0,t.getRightRailBlade)(e.id)},docSidebar:{setCollapsedState:({isCollapsed:i})=>{(0,t.setDocSidebarIsCollapsed)(e.id,i)},getCollapsedState:()=>(0,t.getDocSidebarIsCollapsed)(e.id)},video:{getVolumeState:()=>(0,t.getVolumeState)(e.id),setVolumeState:i=>(0,t.setVolumeState)(e.id,i),getMutedState:()=>(0,t.getMutedState)(e.id),setMuteState:i=>(0,t.setMutedState)(e.id,i)},accountPageUserRelatedPreference:{setOptInToVideoTranscript:()=>(0,r.updateUserRelatedPreference)(e.id,"previews_transcription",!0)}}})(e):{rightRail:{setCollapsedState:()=>{},getCollapsedState:()=>!0,setBladeState:()=>{},getBladeState:()=>{}},docSidebar:{setCollapsedState:({})=>{},getCollapsedState:()=>!0}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/preview_logger",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery","metaserver/static/js/perf_tools/web_timing_utils","metaserver/static/js/metrics/index","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/shared/apex-metrics/src/index","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/edison/edison","metaserver/static/js/file_viewer/sdk_file_viewer/pap_preview_logger","metaserver/static/js/user_survey/user_survey"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.logInterstitialEventToAmp=i.logDuration=i.logVideo=i.makeLogger=i.logEvent=void 0,r=t.__importStar(r),l=t.__importStar(l);const v=[s.SessionEventType.FilePreviewSupportConfirmed,s.SessionEventType.FilePreviewSupportDenied,s.SessionEventType.FilePreviewDownloadAttempted,s.SessionEventType.FilePreviewDownloadSucceeded,s.SessionEventType.FilePreviewDownloadFailed,s.SessionEventType.FilePreviewRenderSucceeded,s.SessionEventType.FilePreviewRenderFailed,s.SessionEventType.FilePreviewSessionEnded],f=e=>Object.assign(Object.assign(Object.assign({device_type:e.device_type},e.extra.source_context&&{source_context:e.extra.source_context}),e.extra.preview_type&&{preview_type:e.extra.preview_type}),e.extra.action&&{action:e.extra.action}),_=(e,t)=>{(0,n.getMetricsReporter)().createStats({ns:"web_previews",name:e},Object.assign(Object.assign({},f(t)),{deployment:l.YAPS_DEPLOYMENT,is_edison:d.Edison.initialized().toString()})).record(1),v.includes(e)&&((e,i)=>{const t=i.extra.file_preview_timeline?JSON.parse(i.extra.file_preview_timeline):{};if(s.SessionEventType.FilePreviewAttemptStarted in t&&e in t){const r=t[e]-t[s.SessionEventType.FilePreviewAttemptStarted];r>0&&(0,n.getMetricsReporter)().createStats({ns:"web_previews",name:"time_from_attempt_ms"},Object.assign(Object.assign({},f(i)),{event_name:e,deployment:l.YAPS_DEPLOYMENT,is_edison:d.Edison.initialized().toString()})).recordDuration(r,o.TimeUnit.MILLISECONDS)}})(e,t),((e,t)=>{if(e===s.SessionEventType.FilePreviewAttemptStarted&&t.extra.source_action===s.SourceAction.Visit&&window.performance){const e=Date.now()-window.performance.timing.navigationStart;e>0&&(0,i.logDuration)({eventName:"time_to_preview_attempt_from_load_ms",durationInMs:e,session:t})}})(e,t)};i.logEvent=(e,i)=>{const t=i.extra.file_preview_timeline?JSON.stringify(Object.assign({},...Object.entries(JSON.parse(i.extra.file_preview_timeline)).map(([e,i])=>({[e+"_ts"]:i})))):void 0,a={is_edison:d.Edison.initialized().toString()},n={device_type:i.device_type,event_name:e,extra:JSON.stringify(Object.assign(Object.assign(Object.assign({},a),i.extra),{request_id:c.REQUEST_ID})),file_viewer_session_id:i.file_viewer_session_id,file_preview_session_id:i.file_preview_session_id,file_ns_id:i.ns_id,file_sjid:i.sj_id,file_preview_timeline:t,file_preview_size:i.file_preview_size};r.SilentBackgroundBeaconRequest({url:"/log/file_preview",data:n}),_(e,i),(e=>{e.event===s.BackgroundEvent.EditVideoSaveSucceeded&&p.UserSurvey.trackEvent("save_video_edit","previews")})(i.extra)};i.makeLogger=(e,t,r,a)=>(n,s)=>{(0,i.logEvent)(n,s),a&&(0,u.logToPap)(n,{previewSurface:e,previewType:r,file:t})};i.logVideo=(e,i)=>{const{file_preview_session_id:t,video_format:n,video_duration_seconds:s,video_truncated:o,ns_id:l,sj_id:c,extra:d}=i,u={event_name:e,client_timestamp_ms:a.WebTimingUtil.getNow(),file_preview_session_id:t,video_format:n,video_duration_seconds:s,video_truncated:o,ns_id:l,sj_id:c,extra:JSON.stringify(d)};r.SilentBackgroundBeaconRequest({url:"/log/video_preview",data:u})};i.logDuration=({eventName:e,durationInMs:i,session:t,tags:s={},shouldLogToHive:l})=>{const c=d.Edison.initialized();if((0,n.getMetricsReporter)().createStats({ns:"web_previews",name:e},Object.assign(Object.assign(Object.assign({},s),t&&f(t)),{is_edison:c.toString()})).recordDuration(i,o.TimeUnit.MILLISECONDS),l){const n={event_name:e,duration:i.toString(),is_edison:c.toString()};if(t){const e={event_name:"user_timing",device_type:t.device_type,client_timestamp_ms:a.WebTimingUtil.getNow(),file_preview_session_id:t.file_preview_session_id,file_viewer_session_id:t.file_viewer_session_id,file_preview_size:t.file_preview_size,file_ns_id:t.ns_id,file_sjid:t.sj_id,extra:JSON.stringify(Object.assign(Object.assign({},t.extra),n))};r.SilentBackgroundBeaconRequest({url:"/log/file_preview",data:e})}}};i.logInterstitialEventToAmp=(e,i)=>{(0,n.getMetricsReporter)().createStats({ns:"web_previews",name:e},{source:i,is_edison:d.Edison.initialized().toString()}).record(1)}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/print",["require","exports","tslib","typescript/libraries/file-viewer/src/core/types/preview_type","metaserver/static/js/clean/referrer_cleansing_redirect","metaserver/static/js/core/i18n"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.canPrint=i.makePrintClient=void 0,a=t.__importStar(a),i.makePrintClient=function(){return{print:(e,i)=>{var t;i===r.PreviewType.SsrDoc?(t=e,a.safe_open_tab_and_redirect(t)):i===r.PreviewType.Image&&(function(e){const i=window.open("about:blank");if(!i)throw new Error(n.intl.formatMessage({id:"X9xK6f",defaultMessage:"Could not open new window"}));window.setTimeout(()=>{const t=i.document.createElement("style");t.innerHTML="\n      @page { margin: 0;}\n      img { max-width: 100%; max-height: 100%}\n    ",i.document.head.appendChild(t);const r=i.document.createElement("img");r.src=e,r.onload=()=>{i.print()},r.onerror=()=>{i.close()},i.document.body.appendChild(r)},50)})(e)}}},i.canPrint=function(e){return!(e&&e.canPrintRoles&&0===e.canPrintRoles.length)}}));__createBinding=this&&this.__createBinding||(Object.create?function(e,i,t,r){void 0===r&&(r=t);var a=Object.getOwnPropertyDescriptor(i,t);a&&("get"in a?i.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,a)}:function(e,i,t,r){void 0===r&&(r=t),e[r]=i[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(i,e,t);return __setModuleDefault(i,e),i};define("metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/async_replay_dialog",["require","exports","metaserver/static/js/async/loadable"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AsyncReplayDialog=void 0,i.AsyncReplayDialog=(0,t.Loadable)({loader:()=>new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog"],i,t)}).then(__importStar).then(({ReplayDialog:e})=>e)})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog",["require","exports","tslib","react","dig-components/typography","metaserver/static/js/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog","metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog_api","metaserver/static/js/file_store/utils","metaserver/static/js/browse/constants","metaserver/static/js/campaigns/campaign_events_api"],(function(e,i,t,r,a,n,s,o,l,c,d,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ReplayDialog=void 0,r=t.__importStar(r);const p=({user:e,file:i})=>{const[s,p]=r.useState(!1),[v,f]=r.useState(void 0);r.useEffect(()=>{t.__awaiter(void 0,void 0,void 0,(function*(){var t,r;if(e&&i&&(0,c.isBrowseFile)(i)){const a=null===(t=d.ExtensionCategories[(0,c.getExtension)(i)])||void 0===t?void 0:t.toLowerCase();if("video"!==a&&"audio"!==a&&"image"!==a)return;const n=yield(0,l.shouldShowReplayDialog)(e,a);p(!!n.show_entrypoint&&n.show_entrypoint),(null===(r=n.campaign_context)||void 0===r?void 0:r.campaign_impression_id)&&f((0,u.createMegaphoneCampaignImpressionContext)(n.campaign_context.campaign_impression_id,n.campaign_context.campaign_id?`${n.campaign_context.campaign_id}`:void 0,n.campaign_context.campaign_variant_id?`${n.campaign_context.campaign_variant_id}`:void 0))}}))},[]),r.useEffect(()=>{e&&s&&((0,l.logReplayDialogAction)(e,"impression",0),v&&(0,u.logCampaignImpression)(v))},[s]);const _=i?`https://replay.dropbox.com/project/creating/${i.file_id}?creationSource=dropbox_previews_prompt`:"https://replay.dropbox.com/?login=true";return s?r.createElement(o.UpsellDialog,{afterAccept:()=>{e&&(0,l.logReplayDialogAction)(e,"acknowledgement",0),v&&(0,u.logCampaignClick)(v)},afterDecline:()=>{e&&(0,l.logReplayDialogAction)(e,"dismissal",0),v&&(0,u.logCampaignDismissed)(v)},uxaPrefix:"replay-fvsdk-prompt",titleText:i&&(0,c.isBrowseFile)(i)&&"IMAGE"===d.ExtensionCategories[(0,c.getExtension)(i)]?n.intl.formatMessage({id:"i7h3zo",defaultMessage:"Fast-track Image reviews with Dropbox Replay, now in Beta"}):i&&(0,c.isBrowseFile)(i)&&"AUDIO"===d.ExtensionCategories[(0,c.getExtension)(i)]?n.intl.formatMessage({id:"7iOXVy",defaultMessage:"Make audio production with remote teams easier"}):n.intl.formatMessage({id:"vL51vF",defaultMessage:"Fast-track video reviews with Dropbox Replay, now in beta"}),bodyContent:(()=>{const e=i&&(0,c.isBrowseFile)(i)&&"IMAGE"===d.ExtensionCategories[(0,c.getExtension)(i)]?r.createElement(a.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},n.intl.formatMessage({id:"S6nX63",defaultMessage:"Get to your final image faster on one platform"})):i&&(0,c.isBrowseFile)(i)&&"AUDIO"===d.ExtensionCategories[(0,c.getExtension)(i)]?r.createElement(a.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},n.intl.formatMessage({id:"o8puBZ",defaultMessage:"Try Dropbox Replay, an easier way to collaborate on audio:"})):r.createElement(a.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},n.intl.formatMessage({id:"abiqtR",defaultMessage:"Streamline your approval process:"}));return r.createElement(r.Fragment,null,e,r.createElement(a.Text,{className:"replay-dialog-subtext",tagName:"div"},r.createElement("ul",{className:"replay-dialog-list",style:{paddingInlineStart:"20px"}},i&&(0,c.isBrowseFile)(i)&&"IMAGE"===d.ExtensionCategories[(0,c.getExtension)(i)]?r.createElement(r.Fragment,null,r.createElement("li",null,n.intl.formatMessage({id:"54U/Hq",defaultMessage:"Manage multiple versions of your images"})),r.createElement("li",null,n.intl.formatMessage({id:"VGKyQp",defaultMessage:"Collect feedback from multiple stakeholders"})),r.createElement("li",null,n.intl.formatMessage({id:"inGOLO",defaultMessage:"Streamline your approval process"}))):i&&(0,c.isBrowseFile)(i)&&"AUDIO"===d.ExtensionCategories[(0,c.getExtension)(i)]?r.createElement(r.Fragment,null,r.createElement("li",null,n.intl.formatMessage({id:"nV0yPL",defaultMessage:"Provide time-code accurate comments on audio tracks"})),r.createElement("li",null,n.intl.formatMessage({id:"FkLJx9",defaultMessage:"Collect feedback from multiple collaborators in one place"})),r.createElement("li",null,n.intl.formatMessage({id:"lWK8l2",defaultMessage:"Streamline the approval process"}))):r.createElement(r.Fragment,null,r.createElement("li",null,n.intl.formatMessage({id:"CNEbQT",defaultMessage:"Share video with HD-quality playback"})),r.createElement("li",null,n.intl.formatMessage({id:"TgIEQQ",defaultMessage:"See frame-accurate comments in one place"})),r.createElement("li",null,n.intl.formatMessage({id:"7NNqco",defaultMessage:"Seamlessly connect tools like Adobe Premiere Pro"}))))))})(),acceptText:n.intl.formatMessage({id:"lwBIQ/",defaultMessage:"Open with Replay"}),declineText:n.intl.formatMessage({id:"t97mKK",defaultMessage:"Not now"}),redirectUrl:_}):null};p.displayName="UnstyledReplayDialog",i.ReplayDialog=(0,s.requireCssWithComponent)(p,["/static/metaserver/static/css/file_viewer/upsell_dialog-vflLk_tpf.css"])})),define("metaserver/static/js/file_viewer/sdk_file_viewer/report_exception",["require","exports","tslib","metaserver/static/js/core/exception"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeReportExceptionClient=void 0,r=t.__importStar(r),i.makeReportExceptionClient=function(){return{reportException:(e,i,t)=>r.reportException({err:e,severity:t?"critical":"non-critical",tags:["file-viewer",i]})}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/snackbar_manager_plugin",["require","exports","metaserver/static/js/clean/ui/snackbar"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.snackbarManagerLoader=i.SNACKBAR_MANAGER_PLUGIN_ID=void 0,i.SNACKBAR_MANAGER_PLUGIN_ID="SNACKBAR_MANAGER",i.snackbarManagerLoader={pluginId:i.SNACKBAR_MANAGER_PLUGIN_ID,load:(e,i)=>Promise.resolve({isSnackbarVisible:()=>{var e;return!!(null===(e=t.Snackbar.manager)||void 0===e?void 0:e.state.displayedSnackbar)},lifecycle:{}})}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/star_plugin",["require","exports","tslib","react","react-redux","dig-components/buttons","dig-components/tooltips","dig-components/icons","metaserver/static/js/file_viewer/sdk_file_viewer/hooks","metaserver/static/js/starred/redux/store"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeStarToolbarButtonLoader=void 0,r=t.__importDefault(r);const d=e=>{var{className:i}=e,a=t.__rest(e,["className"]);const{message:c,iconSrc:d,handleClick:u}=(0,l.useStarControl)(a),{file:p}=a.getActiveFile();return(0,l.isStarringEnabled)(p)?r.default.createElement(s.Tooltip,{title:c,shouldCloseOnClick:!0},r.default.createElement(n.IconButton,{variant:"transparent",onClick:u,className:i,"aria-label":c,inverse:!0},r.default.createElement(o.UIIcon,{src:d}))):null};d.displayName="_StarButton";const u=e=>{const i=(0,c.getStoreForStarred)();return r.default.createElement(a.Provider,{store:i},r.default.createElement(d,Object.assign({},e)))};u.displayName="StarButton",u.displayName="StarButton";i.makeStarToolbarButtonLoader=(e,i)=>class{constructor(){this.identifier="star",this.lifecycle={},this.toolbarUI=({className:t})=>r.default.createElement(u,{getActiveFile:e,user:i,className:t})}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/crop_rotate_plugin",["require","exports","tslib","metaserver/static/js/photos/ui/preview_crop_and_rotate/show-crop-rotate-plugin","metaserver/static/js/file_store/utils"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeCropRotateButtonsLoader=i.CROP_ROTATE_TOOLBAR_PLUGIN_ID=void 0,i.CROP_ROTATE_TOOLBAR_PLUGIN_ID="CROP_ROTATE_BUTTON";i.makeCropRotateButtonsLoader=(n,s,o)=>({pluginId:i.CROP_ROTATE_TOOLBAR_PLUGIN_ID,isEnabled:()=>{const{file:e,sharePermission:i}=s(),t=(0,a.getExtension)(e);return(0,r.showCropRotatePlugin)(t,e,i)},load:(r,a)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{loadCropRotatePlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/photos/ui/preview_crop_and_rotate/crop_rotate_exports"],i,t)}).then(t.__importStar);return r(i.CROP_ROTATE_TOOLBAR_PLUGIN_ID,n,a,s,o)}))})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/url",["require","exports","tslib","metaserver/static/js/clean/history","metaserver/static/js/core/browser","metaserver/static/js/core/uri","metaserver/static/js/clean/browse_uri_interface","metaserver/static/js/clean/referrer_cleansing_redirect"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeUrlClient=void 0,r=t.__importDefault(r),a=t.__importStar(a),o=t.__importStar(o),i.makeUrlClient=function(e){return{getQueryStringParameter(e){const i=a.get_uri().getQuery();return e in i?i[e]:null},getAllQueryStringParameters:()=>r.default.get_uri().getQuery(),setQueryStringParameter(e,i){const t=r.default.get_uri();null!==i?t.updateQuery(e,i):t.removeQuery(e),r.default.push_state(t.getPath(),t.getQuery())},onQueryStringParameterChange(e,i){const t=`/${a.get_uri().getPath().split("/")[1]}`,n=(t,r)=>{let a=null;if(e in r){const i=r[e];a=i instanceof Array?i.length?i[0]:null:null!=i?i:null}i(e,a)};return r.default.add_callback(t,n,!0),()=>r.default.remove_callback(t,n)},openFile(i,t){if(t){const t=(0,s.preview_uri_for_fq_path)(e,i);a.replace_location(t)}else{const t=(0,s.get_browse_root)(e)+n.URI.encode_parts(i);a.replace_location(t)}},redirect(e,i){i?o.safe_open_tab_and_redirect(e):o.redirect(e)},reload(){a.reload()},replaceState(e){const i=r.default.get_uri();r.default.replace_state(i.getPath(),e)}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/add_to_collection_plugin",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/icons","metaserver/static/js/action_bar/file_actions/portable/utils","dig-components/icons/src","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeAddToCollectionActionLoader=void 0,r=t.__importDefault(r);i.makeAddToCollectionActionLoader=(i,p,v)=>({actionDefinitions:()=>{const{file:p}=i();return(0,c.isLiveFile)(p)&&l.fileViewerFeatureExperiments.enableAddToCollection?{alwaysInOverflow:[[(0,s.makePluginActionDefinition)({label:a.intl.formatMessage(d.ADD_TO_COLLECTION_STRING),icon:r.default.createElement(n.UIIcon,{src:o.AddToCollectionLine}),id:u.ADD_TO_COLLECTION_ACTION_PLUGIN_ID,action:()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{showCollectionSaverModal:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/collections/components/saver_modal/index"],i,t)}).then(t.__importStar);v.logUserAction("add_to_collection","title_bar_button"),i({fileIds:[p.file_id],surface:"preview"})}))})]]}:{}}})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,i,t,r){void 0===r&&(r=t);var a=Object.getOwnPropertyDescriptor(i,t);a&&("get"in a?i.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return i[t]}}),Object.defineProperty(e,r,a)}:function(e,i,t,r){void 0===r&&(r=t),e[r]=i[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(i,e,t);return __setModuleDefault(i,e),i};define("metaserver/static/js/file_viewer/share_helpers",["require","exports","metaserver/static/js/file_store/utils"],(function(e,i,t){"use strict";function r(e,i,r){const a={filename:(0,t.getFilename)(e),isFolder:!1,nsId:e.ns_id,origin:r,sjid:e.sjid,url:i||void 0,fqPath:""};return(0,t.isBrowseFile)(e)&&(a.fqPath=e.fq_path),null!=e.file_id&&(a.fileId=e.file_id),a}Object.defineProperty(i,"__esModule",{value:!0}),i.share=i.getDataForContentInfo=void 0,i.getDataForContentInfo=r,i.share=function(i,t,a,n){new Promise((i,t)=>{e(["metaserver/static/js/sharing/share_modal_util"],i,t)}).then(__importStar).then(e=>{const s=r(i,a,n.origin);e.showShareModal(t,s,n)})}})),define("metaserver/static/js/integrations/ui/pdf_editor/plugin/loader",["require","exports","tslib","metaserver/static/js/integrations/ui/pdf_editor/plugin/show_plugin_util","metaserver/static/js/file_viewer/sdk_file_viewer/experiments"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePdfEditorPluginLoader=i.PDF_EDITOR_PLUGIN_ID=void 0,i.PDF_EDITOR_PLUGIN_ID="pdf_edit_plugin",i.makePdfEditorPluginLoader=function(s,o,l,c){return{pluginId:i.PDF_EDITOR_PLUGIN_ID,isEnabled:()=>{const{file:e,sharePermission:i}=s();return(0,r.showEditPlugin)(e,i)},load:(i,r)=>t.__awaiter(this,void 0,void 0,(function*(){const{PdfEditorPluginBase:d,generateNonceSubdomain:u}=yield new Promise((i,t)=>{e(["metaserver/static/js/integrations/ui/pdf_editor/plugin/plugin_entry"],i,t)}).then(t.__importStar),p=yield u();if(a.fileViewerFlowExperiments.approvalPdfEditingToastByUserId[o.id]){const{showPdfEditingToast:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/flows/approval/pdf_editing_toast"],i,t)}).then(t.__importStar);i(o,s().file,c,r)}return new d(i,r,p,s,o,l,n)}))}};const n=e=>{e.logUserAction("open_with_pdf_editor","title_bar_main")}})),define("metaserver/static/js/photo-editor/plugin/loader",["require","exports","tslib","metaserver/static/js/photo-editor/plugin/show-edit-plugin"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePhotoEditorPluginLoader=i.PHOTO_EDITOR_PLUGIN_ID=void 0,i.PHOTO_EDITOR_PLUGIN_ID="photo_edit_plugin",i.makePhotoEditorPluginLoader=function(n,s,o){return{pluginId:i.PHOTO_EDITOR_PLUGIN_ID,isEnabled:()=>{const{file:e,sharePermission:i}=n();return(0,r.showEditPlugin)(e,i)},load:(i,r)=>t.__awaiter(this,void 0,void 0,(function*(){const{PhotoEditorPluginBase:l}=yield new Promise((i,t)=>{e(["metaserver/static/js/photo-editor/plugin/plugin"],i,t)}).then(t.__importStar);return new l(i,r,n,s,(...e)=>null==o?void 0:o(...e),a)}))}};const a=e=>{e.logUserAction("open_with_image_editor","title_bar_main")}})),define("metaserver/static/js/photo-editor/plugin/show-edit-plugin",["require","exports","metaserver/static/js/file_store/utils","metaserver/static/js/core/browser_detection"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.showEditPlugin=i.VALID_PHOTO_FILE_EXTENSIONS=void 0,i.VALID_PHOTO_FILE_EXTENSIONS=new Set(["jpg","jpeg","png"]),i.showEditPlugin=function(e,a){return!!e&&((!a||0!==a.canDownloadRoles.length)&&(!!i.VALID_PHOTO_FILE_EXTENSIONS.has((0,t.getExtension)(e))&&!(0,r.is_mobile_or_tablet)(navigator.userAgent)))}})),define("metaserver/static/js/photos/ui/preview_crop_and_rotate/show-crop-rotate-plugin",["require","exports","metaserver/static/js/file_store/utils","metaserver/static/js/core/browser_detection","typescript/component_libraries/photos/src/preview-photo-editor/types"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.showCropRotatePlugin=void 0;i.showCropRotatePlugin=(e,i,n)=>!(!i||!(0,t.isBrowseFile)(i))&&((!n||0!==n.canDownloadRoles.length)&&((!i||-1!==a.imageTypeAllowed.indexOf(e))&&(!i.read_only&&!(0,r.is_mobile_or_tablet)(navigator.userAgent))))})),define("metaserver/static/js/previews/ui/sharing_plugin/copy_file_link_button",["require","exports","tslib","react","metaserver/static/js/clean/analytics","metaserver/static/js/core/browser_detection","metaserver/static/js/sharing/views/share_modal_evolution/utils/logging","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","typescript/component_libraries/spectrum-sharing/src/utils/logging","metaserver/static/js/previews/ui/sharing_plugin/copy_link_button","metaserver/static/js/sharing/clean/util/link_util/parser"],(function(e,i,t,r,a,n,s,o,l,c,d){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CopyFileLinkButton=void 0,r=t.__importDefault(r);const u=(e,i,t,r,l)=>{const c=o.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE,u=(0,n.get_browser_info)(),p=Object.assign(Object.assign({},t&&(0,s.buildExtraFromLinkMetadata)(t)),{file_id:i}),v=l.doesContainShmodelLink?a.ShareTibEventLogger.get_shmodel_extra_for_logging(void 0,(0,d.getCleanedSharingUrl)(l)):a.ShareTibEventLogger.get_scl_extra_for_logging(void 0,(0,d.getCleanedSharingUrl)(l)),f=Object.assign(Object.assign(Object.assign({},p),{browser:u.browser,browser_version:u.version,created_new_link:!1}),v);r?a.ShareTibEventLogger.log(r,e,c,f):a.ShareTibEventLogger.log_unauth(e,c,f)};i.CopyFileLinkButton=e=>{var{file_id:i,link_metadata:a}=e,n=t.__rest(e,["file_id","link_metadata"]);return r.default.createElement(c.CopyLinkButton,Object.assign({},n,{logSuccess:()=>{var e;return u(l.TiburonEventName.CopySharedLink,i,a,null===(e=null==n?void 0:n.user)||void 0===e?void 0:e.id,n.parsedLink)},logFailure:()=>{var e;return u(l.TiburonEventName.CopySharedLinkFailure,i,a,null===(e=null==n?void 0:n.user)||void 0===e?void 0:e.id,n.parsedLink)}}))},i.CopyFileLinkButton.displayName="CopyFileLinkButton"})),define("typescript/libraries/file-viewer/src/app",["require","exports","tslib","react","classnames","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/app.module.css","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/renderer","react-intl","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","dig-components/layer","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/titlebar/title_bar","typescript/libraries/file-viewer/src/right_rail/right_rail","typescript/libraries/file-viewer/src/utils","typescript/libraries/file-viewer/src/preview_content/preview_content","typescript/libraries/file-viewer/src/right_rail/edit_plugin_sidebar","typescript/libraries/file-viewer/src/preview_error/error_boundary","typescript/libraries/file-viewer/src/plugins/edit_fullscreen_plugin_action","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/utils/sizing_utils","react-redux","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/logging/timing","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","ts-key-enum","typescript/libraries/file-viewer/src/keyboard/keyboard_provider","typescript/libraries/file-viewer/src/preview_error/preview_error","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I,T,C,A,O,F,k,x,D,L,M,R,N,j,V){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AppWithProvider=i.App=void 0,r=t.__importStar(r),a=t.__importDefault(a),l=t.__importStar(l);const B=r.memo(e=>{const{id:i,previewKey:t,isDeleteEnabled:a,isFileFlippingEnabled:n,isPreviewZoomed:o,enableFullscreen:l,dispatch:d,fileIndex:u,collectionFileCount:p}=e,v=(0,C.useSelector)(e=>e.isDeleteFileModalOpen),f=l?(0,D.getKeyboardBinding)({callback:()=>d((0,s.enterFullScreen)({previewKey:t,fileViewerId:i,sourceContext:c.UserActionContext.Keyboard})),key:"f"}):null,_=(0,D.getKeyboardBinding)({key:M.Key.Escape,callback:()=>{d((0,s.closeViewer)({previewKey:t,fileViewerId:i,sourceContext:c.UserActionContext.Keyboard}))}}),g=t&&(0,D.getDeleteFileBindings)(e=>{d((0,s.deleteFile)({previewKey:t,fileViewerId:i,sourceContext:c.UserActionContext.Keyboard,key:e===M.Key.Delete?"delete":"backspace"}))}),m=(0,D.getFileFlippingBindings)({dispatch:d,previewKey:t,fileViewerId:i,requireCommandKey:o,fileIndex:u,collectionFileCount:p}),w=[];return f&&w.push(f),n&&!v&&(w.push(...m),w.push(_)),a&&!v&&g&&w.push(...g),r.createElement(L.KeyboardBindingConnector,{name:"app",keyboardBindings:w})});B.displayName="AppKeyboardBindings";i.App=e=>{var i;const{activePluginInstance:t,config:n,fileViewerUiData:o,dispatch:u,fileInfo:v,fileMetadata:f,fileConfig:_,filePreviewUiData:g,id:E,previewMetadata:k,loggingSession:D,pluginQueryBus:L,shouldShowRightRail:M,shouldShowTitlebar:R,viewport:j,pluginProps:U,rightRailPluginInstances:K,pluginNavigation:z,archiveFiles:H,fullFilePreviewUi:q,fullRivieraData:W,isFullScreen:G,isPreviewZoomed:Y,pluginInstances:Z,onMount:X,onDestroy:Q,onTtiMarked:$,callbacks:J,rootInfo:ee,enabledEditPluginFullscreenActionDefinitions:ie,header:te,mobileFooter:re,mobileHeader:ae,folderPicker:ne,titlebar:se,isEditingVideo:oe}=e,le=D.file_preview_session_id,ce=!!(0,C.useSelector)(e=>(0,A.getSelectedHideContentPanePluginId)(e,E)),de=r.useCallback(()=>u((0,s.setPreviewLoadingAction)({isPreviewLoading:!1})),[u]),ue=r.useCallback(()=>{u((0,P.logSessionEvent)({event:c.SessionEventType.FilePreviewRenderSucceeded,fileViewerId:E,previewSessionId:le})),de(),(null==J?void 0:J.onRenderSucceeded)&&J.onRenderSucceeded()},[J,E,le,u,de]),pe=r.useCallback(()=>{u((0,P.logSessionEvent)({event:c.SessionEventType.FilePreviewRenderFailed,fileViewerId:E,previewSessionId:le})),de()},[de,E,le,u]),{onLogTTI:ve}=(0,O.useTimingLogging)(E),fe=r.useCallback(()=>{ve(),null==$||$()},[ve,$]);r.useEffect(()=>{F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_APP_MOUNT)},[]),r.useEffect(()=>{X&&X();const e=document.getSelection();return e&&e.removeAllRanges(),()=>{Q&&Q()}},[Q,X]);const _e=G||oe,ge=n.mobile_web,me=null!==(i=null==f?void 0:f.file_name)&&void 0!==i?i:"",we=n.transparent_background,be=n.preview_content_only,he=Object.values(Z),ye=(0,b.extractToolbarComponents)(he),Se=(0,b.extractSnackbarManagerFromPlugins)(Z),Ee=r.useMemo(()=>(0,b.extractActionDefinitionsFromPlugins)(he),[null==v?void 0:v.previewKey]),Pe=(0,b.extractActionsFromPlugins)(Ee,ie),Ie=t&&(0,p.isEditPluginOverlayInstance)(t);if(t&&(0,p.isEditPluginFullscreenInstance)(t)){if(U){const e=t.fullscreenLayer;return r.createElement("div",{className:l.editPluginFullscreenContainer},r.createElement(e,Object.assign({},U)))}return null}return r.createElement(r.Fragment,null,r.createElement(d.Preview,{className:(0,a.default)(l.containerV2,{[l.transparentBackground]:we}),viewport:j},({width:i,height:a})=>{var s,c;const P=(0,b.calcResponsiveSize)(i),C=t&&(0,p.isEditPluginOverlayInstance)(t)&&t.editUI.Sidebar,A=(0,T.calcContentWidth)(i,!!C||!!(null==o?void 0:o.isRightRailOpen),M&&!_e,ge),O=(0,T.calcContentHeight)(a,!G&&R),F=(0,I.resolvePreviewType)(k)===V.PreviewType.Archive?{canExtract:!0,rootInfo:ee,filePreviewUiData:g}:{canExtract:!1},D=R&&(ge?ae:r.createElement(m.TitleBar,Object.assign({actions:Pe},se))),j={fileViewerId:E,width:A,height:O,onRenderSucceeded:ue,onRenderFailed:pe,onInteractive:fe,config:n,activePluginInstance:t,pluginProps:U,pluginQueryBus:L,extractConfig:F,fileConfig:_,toolbarPlugins:ye,snackbarManagerPluginInstance:Se,responsiveSize:P,header:te,folderPicker:ne,onSetPreviewLoaded:de},Z=(()=>{switch(null==v?void 0:v.bootstrap.state){default:case"initializing":return null;case"ready":return r.createElement(d.PreviewRenderer,Object.assign({},j,{previewKey:v.previewKey}));case"errored":return r.createElement(N.PreviewBootstrapError,Object.assign({error:v.bootstrap.error},j,{previewKey:v.previewKey}))}})();let X;return M&&(X=C?r.createElement(y.EditPluginSidebar,{fileViewerId:E,pluginNavigation:z,pluginQueryBus:L,Sidebar:C}):r.createElement(w.PreviewRightRail,{fileName:me,fileViewerId:E,pluginInstances:K,pluginNavigation:z,pluginQueryBus:L,height:O})),r.createElement(x.FileViewerRenderContextProvider,{value:{width:i,height:a,rendererWidth:A,rendererHeight:O,responsiveSize:P}},r.createElement("div",{style:G?{display:"none"}:{}},D),r.createElement("div",{className:l.contentContainer},r.createElement(h.PreviewContent,{activePluginInstance:t,plugins:ye,snackbarManagerPluginInstance:Se,archiveFiles:H,fullFilePreviewUi:q,fullRivieraData:W,fileConfig:_},r.createElement(S.ErrorBoundary,Object.assign({},e,{activePluginInstance:t,previewKey:null==v?void 0:v.previewKey,key:null==v?void 0:v.previewKey.serialized,fileViewerId:E,onRenderSucceeded:ue,fileConfig:_,onRenderFailed:pe,width:A,height:O,onInteractive:fe,onSetPreviewLoaded:de}),Z)),r.createElement("div",{style:_e?{display:"none"}:{}},X),r.createElement(B,{id:E,previewKey:null==v?void 0:v.previewKey,enableFullscreen:n.enable_fullscreen,isDeleteEnabled:!Ie&&!ce,isFileFlippingEnabled:null!=f&&!!f.file_collection_context&&!Ie&&!ce,isPreviewZoomed:Y,dispatch:u,fileIndex:(null===(s=null==f?void 0:f.file_collection_context)||void 0===s?void 0:s.file_index)||0,collectionFileCount:(null===(c=null==f?void 0:f.file_collection_context)||void 0===c?void 0:c.parent_files_count)||0})),!be&&ge?r.createElement("div",{style:G?{display:"none"}:{}},re):null)}))},i.App.displayName="App";const U=(0,n.connect)((function(e,i){const{config:t,id:r,pluginNavigation:a,pluginQueryBus:n,rightRailPluginInstances:s}=i,l=(0,o.getCurrentFile)(e,r),c=null==l?void 0:l.previewKey,d=(0,o.getPreviewMetadata)(e,c),u=(0,v.getActivePluginId)(e,r);let f;if(null==u)f=null;else{const e=i.pluginInstances[u];f=e&&((0,p.parseEditOverlayPlugin)(e)||(0,p.parseFullscreenEditPlugin)(e)||(0,p.parseRightRailPlugin)(e))}const m=(0,_.makePluginProps)(e,r,(0,g.getPluginData)(e,{fileViewerId:r,navigation:a}),n),w=(0,o.getIsFullScreen)(e,r),b=(0,o.getIsEditingVideo)(e,r),h=Object.keys(s).length>0&&!t.preview_content_only&&!t.mobile_web,y=t.show_titlebar&&!(0,p.isEditPluginOverlayInstance)(f)&&!t.preview_content_only,S=(0,E.getEditPluginFullscreenActionDefinitions)(i.pluginInstances,r);return{activePluginInstance:f,fileViewerUiData:e.fileViewerUi[r],fileInfo:l,fileMetadata:(0,o.getFileMetadata)(e,c),filePreviewUiData:(0,o.getFilePreviewUi)(e,r,c),isPreviewZoomed:(0,o.isPreviewZoomed)(e,r),loggingSession:e.loggingSession[r],pluginProps:m,previewMetadata:d,shouldShowRightRail:h,shouldShowTitlebar:y,rootInfo:e.rootInfo,archiveFiles:e.archiveFiles,fullFilePreviewUi:e.filePreviewUi[r]||{},fullRivieraData:e.rivieraData||{},isFullScreen:w,enabledEditPluginFullscreenActionDefinitions:S,isEditingVideo:b}}),(function(e){return{dispatch:e}}))(i.App);i.AppWithProvider=e=>{const{store:i,intl:a,batteries:s,platformConfig:o,pluginContext:l,isLoggedIn:c}=e,d=t.__rest(e,["store","intl","batteries","platformConfig","pluginContext","isLoggedIn"]),{id:p,config:v,canCloseViewer:_,pluginNavigation:g}=e,m=r.useMemo(()=>({batteries:s,fileViewerId:p,featureConfig:v,platformConfig:o,pluginContext:l,canCloseViewer:_,pluginNavigation:g,isLoggedIn:c}),[s,p,v,o,l,_,g,c]);return r.createElement(n.Provider,{store:i},r.createElement(u.RawIntlProvider,{value:a},r.createElement(k.FileViewerContextProvider,{value:m},r.createElement(j.ToolbarActionProvider,null,r.createElement(R.KeyboardBindingProvider,{disableBindings:!v.keyboard_shortcuts||v.preview_content_only,osModifierKey:o.osModifierKey},r.createElement(f.LayerContext.Provider,{value:{zIndex:501}},r.createElement(U,Object.assign({intl:a},d))))))))},i.AppWithProvider.displayName="AppWithProvider"})),define("typescript/libraries/file-viewer/src/constants",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TITLE_BAR_TEST_ID=void 0,i.TITLE_BAR_TEST_ID="fv-sdk-title-bar"})),define("typescript/libraries/file-viewer/src/comments2/plugin/loader/lazy",["require","exports","tslib","typescript/libraries/file-viewer/src/comments2/plugin/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeLoader=void 0,i.makeLoader=function(i,a={},n,s){const o=(()=>{let r=null;return()=>t.__awaiter(this,void 0,void 0,(function*(){if(null==r){const{makeLoader:o}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/comments2/plugin/loader/eager"],i,t)}).then(t.__importStar);r=o(i,n,a,s)}return r}))})();return{pluginId:r.COMMENTS_PLUGIN_ID,load:(e,i)=>t.__awaiter(this,void 0,void 0,(function*(){return(yield o()).load(e,i)}))}}})),define("typescript/libraries/file-viewer/src/comments2/plugin/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.COMMENTS_PLUGIN_ID=void 0,i.COMMENTS_PLUGIN_ID="comments"})),define("typescript/libraries/file-viewer/src/core/data/store_utils",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.observeStore=void 0,i.observeStore=function(e,i,t,r){let a=r;const n=()=>{const r=i(e.getState());r!==a&&(t(a,r),a=r)},s=e.subscribe(n);return n(),s}})),define("typescript/libraries/file-viewer/src/core/middlewares/cloud_docs",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return()=>i=>r=>(r.type===t.Action.TriggerDynamicRoutingModalCheck&&e.triggerDynamicRoutingModalCheck(),i(r))}})),define("typescript/libraries/file-viewer/src/core/middlewares/file_actions",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({dispatch:i})=>s=>o=>t.__awaiter(this,void 0,void 0,(function*(){const t=s(o);if(o.type===r.Action.Rename&&e.rename){const{newFilename:t}=o.payload,r=()=>{i((0,a.logUserActionEvent)({userAction:n.UserAction.RenameSuccess,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},s=()=>{i((0,a.logUserActionEvent)({userAction:n.UserAction.RenameFailed,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))};e.rename({newFilename:t,onRenameSuccess:r,onRenameFailed:s})}else if(o.type===r.Action.Delete&&e.delete){const t=()=>{i((0,a.logUserActionEvent)({userAction:n.UserAction.Delete,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext,extra:{key:o.payload.key}}))},s=()=>{i((0,a.logUserActionEvent)({userAction:n.UserAction.DeleteSuccess,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},l=()=>{i((0,a.logUserActionEvent)({userAction:n.UserAction.DeleteFailed,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},c=()=>{i((0,a.logUserActionEvent)({userAction:n.UserAction.DeleteFailedNoPermission,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},d=()=>{i((0,a.logUserActionEvent)({userAction:n.UserAction.DeleteCancel,fileViewerId:o.payload.fileViewerId,actionContext:o.payload.sourceContext}))},u=e=>{i((0,r.setDeleteFileModalOpen)({isOpen:e}))};e.delete({onDelete:t,onDeleteSuccess:s,onDeleteFailed:l,onDeleteFailedNoPermission:c,onDeleteCancel:d,setDeleteFileModalOpen:u})}return t}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/file_system",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({dispatch:i})=>n=>s=>(s.type===t.Action.DownloadFile?e.downloadFile():s.type===t.Action.CopyToDropbox&&e.copyToDropbox({role:s.payload.role,logModalConfirm:()=>{i((0,r.logUserActionEvent)({userAction:a.UserAction.SaveToDropboxApprove,fileViewerId:s.payload.fileViewerId,actionContext:a.UserActionContext.RightRail}))},logModalCancel:()=>{i((0,r.logUserActionEvent)({userAction:a.UserAction.SaveToDropboxCancel,fileViewerId:s.payload.fileViewerId,actionContext:a.UserActionContext.RightRail}))}}),n(s))}})),define("typescript/libraries/file-viewer/src/core/middlewares/full_screen",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({dispatch:i})=>n=>s=>t.__awaiter(this,void 0,void 0,(function*(){const t=n(s);if(s.type===r.Action.EnterFullScreen){const{fileViewerId:t,previewKey:n}=s.payload,o=()=>{i((0,r.exitFullScreen)(Object.assign(Object.assign({},s.payload),{skipAction:!0})))};e.enterFullScreen(o,!!s.payload.skipAction),i((0,r.zoomToggleOriginalOrFit)({fileViewerId:t,previewKey:n,sourceContext:a.UserActionContext.Toolbar,fitOnly:!0,skipLogging:!0}))}else s.type===r.Action.ExitFullScreen&&e.exitFullScreen(!!s.payload.skipAction);return t}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/preferences",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/types"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.preferencesMiddleware=void 0,i.preferencesMiddleware=function(e){return({dispatch:i})=>s=>o=>t.__awaiter(this,void 0,void 0,(function*(){var t,l,c,d,u,p,v,f;switch(o.type){case r.Action.OpenRightRail:null===(t=e.rightRail)||void 0===t||t.setCollapsedState({isCollapsed:!1});break;case r.Action.CloseRightRail:null===(l=e.rightRail)||void 0===l||l.setCollapsedState({isCollapsed:!0});break;case r.Action.SetActiveRightRailPlugin:o.payload.pluginId&&o.payload.sourceContext===a.UserActionContext.RightRail&&(null===(c=e.rightRail)||void 0===c||c.setBladeState({bladeId:o.payload.pluginId}));break;case r.Action.InitializeRightRail:if(e.rightRail&&!o.payload.forceOpen){const t=e.rightRail.getCollapsedState(),a=e.rightRail.getBladeState();a!==n.TRANSCRIPT_BLADE_PLUGIN_ID&&i((0,r.setActiveRightRailPlugin)(Object.assign(Object.assign({},o.payload),{pluginId:a,skipLogging:!0}))),i(t?(0,r.closeRightRail)(Object.assign(Object.assign({},o.payload),{skipLogging:!0})):(0,r.openRightRail)(Object.assign(Object.assign({},o.payload),{skipLogging:!0})))}else i((0,r.openRightRail)(Object.assign(Object.assign({},o.payload),{skipLogging:!0})));break;case r.Action.OpenDocSidebar:null===(d=e.docSidebar)||void 0===d||d.setCollapsedState({isCollapsed:!1});break;case r.Action.CloseDocSidebar:null===(u=e.docSidebar)||void 0===u||u.setCollapsedState({isCollapsed:!0});break;case r.Action.InitializeDocSidebar:if(e.docSidebar){const t=e.docSidebar.getCollapsedState()?r.closeDocSidebar:r.openDocSidebar;i(t(Object.assign(Object.assign({},o.payload),{skipLogging:!0})))}else i((0,r.closeDocSidebar)(Object.assign(Object.assign({},o.payload),{skipLogging:!0})));break;case r.Action.InitializeVolumeAndMuted:e.video&&(i((0,r.setVolume)(Object.assign(Object.assign({},o.payload),{volume:e.video.getVolumeState(),skipLogging:!0}))),i((0,r.setMuted)(Object.assign(Object.assign({},o.payload),{muted:e.video.getMutedState(),skipLogging:!0}))));break;case r.Action.SetVolume:null===(p=e.video)||void 0===p||p.setVolumeState(o.payload.volume);break;case r.Action.SetMuted:null===(v=e.video)||void 0===v||v.setMuteState(o.payload.muted);break;case r.Action.SetOptInToVideoTranscript:try{yield null===(f=e.accountPageUserRelatedPreference)||void 0===f?void 0:f.setOptInToVideoTranscript(),o.payload.onSuccess()}catch(e){}}return s(o)}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/print",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({getState:i})=>n=>s=>t.__awaiter(this,void 0,void 0,(function*(){const t=n(s);if(s.type===r.Action.Print){const{fileViewerId:t,previewType:r}=s.payload,n=(0,a.getPrintUrl)(i(),t);e.print(n,r)}return t}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/report_exception",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.reportExceptionMiddleware=void 0,i.reportExceptionMiddleware=function(e){return()=>i=>a=>t.__awaiter(this,void 0,void 0,(function*(){if(a.type===r.Action.ReportException){const i=a.payload.fileType||"unknown";e.reportException(a.payload.error,i,a.payload.isCritical)}return i(a)}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/url",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0;function r(e){return null===e?[]:e.split("/").slice(1)}i.middleware=function(e){return({dispatch:i})=>a=>n=>{switch(n.type){case t.Action.UpdateArchiveFileCurrentPath:n.payload.fromUrlChanged||e.setQueryStringParameter("file_subpath",0===(s=n.payload.currentPath).length?null:`/${s.join("/")}`);break;case t.Action.SetupArchiveFileCurrentPath:const o=(function(e,i,a){return(n,s)=>{"file_subpath"===n&&a((0,t.updateArchiveFileCurrentPath)({currentPath:r(s),fileViewerId:e,previewKey:i,fromUrlChanged:!0}))}})(n.payload.fileViewerId,n.payload.previewKey,i);e.onQueryStringParameterChange("file_subpath",o);const l=e.getQueryStringParameter("file_subpath");return a((0,t.updateArchiveFileCurrentPath)({currentPath:r(l),fileViewerId:n.payload.fileViewerId,previewKey:n.payload.previewKey}));case t.Action.OpenFileURL:e.openFile(n.payload.fqPath);break;case t.Action.CloseViewer:e.setQueryStringParameter("file_subpath",null);break;case t.Action.Redirect:e.redirect(n.payload.href,n.payload.newTab);break;case t.Action.InitializeFileViewer:null!==e.getQueryStringParameter("unfurl")&&e.setQueryStringParameter("unfurl",null)}var s;return a(n)}}})),define("typescript/libraries/file-viewer/src/file_activity_blade/loader",["require","exports","tslib","typescript/libraries/file-viewer/src/file_activity_blade/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeFileActivityPluginLoader=void 0,i.makeFileActivityPluginLoader=function(i,a){return{pluginId:r.FILE_ACTIVITY_PLUGIN_ID,load:(r,n)=>t.__awaiter(this,void 0,void 0,(function*(){const{makeStore:s}=yield new Promise((i,t)=>{e(["typescript/component_libraries/files_components/src/blades/file_activity/index"],i,t)}).then(t.__importStar),{FileActivityPluginBase:o}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/file_activity_blade/file_activity_blade_plugin"],i,t)}).then(t.__importStar),l=s({apiV2Client:r.apiv2ClientBase});return new o(r,l,i,n,a)}))}}})),define("typescript/libraries/file-viewer/src/file_activity_blade/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FILE_ACTIVITY_PLUGIN_ID=void 0,i.FILE_ACTIVITY_PLUGIN_ID="file_activity"})),define("typescript/libraries/file-viewer/src/info_blade/info_blade_plugin",["require","exports","tslib","react","typescript/component_libraries/files_components/src/blades/info_blade/index","typescript/component_libraries/files_components/src/blades/info_blade/metadata/metadata_row","react-redux","typescript/component_libraries/pro-ui/src/components/branding/branding_block/optional_branding_block","typescript/libraries/file-viewer/src/utils","typescript/component_libraries/flows/src/components/approval-forms/approval_metadata","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/comments2/plugin/types","typescript/libraries/file-viewer/src/core/data/types","react-intl","dig-components/typography"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.InfoBladePluginBase=void 0,r=t.__importStar(r);i.InfoBladePluginBase=class{constructor(e,i,t,_,g,m,w,b){this.layerUI={},this.rightRailUI={Sidebar:e=>{const i=e.file,t=(0,v.useIntl)(),_=(0,r.useMemo)(()=>{const{fqPath:e,name:t,lastModifiedDate:r,size:a}=i;return{fqPath:e,size:a,name:t,lastModifiedMs:r?new Date(r).getTime():void 0}},[i]),g=(0,r.useMemo)(()=>({enabled:!0,openPath:e.navigation.navigateToPath}),[e.navigation.navigateToPath]),m=(0,r.useMemo)(()=>{if("loaded"===e.account.state&&e.account.data)return(0,l.getRootName)(e.account.data)},[e.account]),w=(0,r.useCallback)(e=>{this.context.logUserAction(e?"click_show_all_metadata":"click_hide_all_metadata","right_sidebar")},[]),b=(0,r.useCallback)(()=>{this.context.logUserAction("right_rail_approval_status_click","right_sidebar",{file_id:i.fileId})},[i]);return r.default.createElement(s.Provider,{store:this.store},r.default.createElement(a.InfoBlade,{intl:this.platform.intl,id:p.INFO_BLADE_PLUGIN_ID},r.default.createElement(o.OptionalBrandingBlock,{sharedLinkInfo:e.sharedLinkInfo,brandingInfo:this.brandingInfo}),this.tagSection&&r.default.createElement(this.tagSection,{pluginContext:this.context}),r.default.createElement(f.Text,{variant:"paragraph",size:"small",isBold:!0},t.formatMessage({id:"bNnicH",defaultMessage:"Properties"})),r.default.createElement(a.BasicFileMetadata,{file:_,pathBar:g,accountRootName:m}),r.default.createElement(a.SharedLinkMetadata,Object.assign({},e.sharedLinkInfo)),r.default.createElement(a.UploadMetadata,{fileId:i.fileId,sharedLinkURL:e.file.url}),this.getApprovalStatus&&r.default.createElement(c.ApprovalMetadata,{fileId:i.fileId,getApprovalStatus:this.getApprovalStatus,onClick:()=>{b(),this.context.getPluginData().navigation.openRightRailPlugin(d.UserActionContext.ApprovalStatus,u.COMMENTS_PLUGIN_ID)},InfoBladeRowComponent:n.InfoBladeMetadataRow}),this.userId&&r.default.createElement(a.FileContentMetadata,{fileId:i.fileId,userId:this.userId,sharedLinkURL:e.file.url,onShowMore:w}),this.changeLogSection&&r.default.createElement(this.changeLogSection,{pluginContext:this.context})))},Control:()=>r.default.createElement(a.InfoBladeCollapsedBladeButton,{intl:this.platform.intl,id:p.INFO_BLADE_PLUGIN_ID})},this.lifecycle={},this.platform=e,this.store=i,this.userId=_,this.brandingInfo=g,this.context=t,this.getApprovalStatus=m,this.tagSection=w,this.changeLogSection=b}}})),define("typescript/libraries/file-viewer/src/info_blade/loader",["require","exports","tslib","typescript/component_libraries/files_components/src/blades/info_blade/index","typescript/libraries/file-viewer/src/info_blade/info_blade_plugin","typescript/libraries/file-viewer/src/core/data/types"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeInfoBladePluginLoader=void 0,i.makeInfoBladePluginLoader=function(e,i,s,o,l){return{pluginId:n.INFO_BLADE_PLUGIN_ID,load:(n,c)=>t.__awaiter(this,void 0,void 0,(function*(){const t=(0,r.makeStore)({apiV2ClientBase:n.apiv2ClientBase});return new a.InfoBladePluginBase(n,t,c,e,i,s,o,l)}))}}})),define("typescript/libraries/file-viewer/src/transcript_blade/transcript_blade_plugin",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/data/types","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_blade","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/transcript_blade/utils","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_settings_modal","typescript/component_libraries/files_components/src/right-rail/context","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/transcript_blade/hooks","typescript/libraries/file-viewer/src/transcript_blade/constants","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_progress_bar","typescript/libraries/file-viewer/src/core/riviera/types"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TranscriptBladePluginBase=void 0;const _=(r=t.__importDefault(r)).default.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{TranscriptBladeContent:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/transcript_blade/components/transcript_blade_content"],i,t)}).then(t.__importStar);return{default:i}})));i.TranscriptBladePluginBase=class{constructor(e,i,g){this.layerUI={},this.rightRailUI={Sidebar:({previewType:e,ui:i})=>{var g,m;const[w,b]=r.default.useState(!0),h=this.context.getPluginData(),y=this.context.sdkConfig,S=h.previewType===s.PreviewType.Video,E=S?h.file:null,P=null===(g=null==h?void 0:h.file)||void 0===g?void 0:g.fileId,I=null==E?void 0:E.transcript,T="loaded"===(null==I?void 0:I.state)?null===(m=null==I?void 0:I.data)||void 0===m?void 0:m.segments:void 0,C=(0,o.getTranscriptPermission)(null==h?void 0:h.previewData),{videoPlayer:A}=(0,d.useToolbarAction)(),[O,F]=r.default.useState(!1),{expandedBlade:k}=r.default.useContext(c.RightRailContext),x=k===a.TRANSCRIPT_BLADE_PLUGIN_ID,D=S&&(0,o.shouldShowTranscriptUi)(I,C,y.video_transcription),L=(0,u.useDuration)(A);r.default.useEffect(()=>{S&&L&&L>p.MAX_TRANSCRIPT_VIDEO_DURATION_S&&h.navigation.setTranscriptError("too_long")},[L,S,h.navigation]),r.default.useEffect(()=>{S&&"ineligible"===(null==C?void 0:C[".tag"])&&"errored"===(null==I?void 0:I.state)&&I.error.statusCode===f.RivieraStatus.NotFound&&h.navigation.setTranscriptError("insufficient_permissions")},[S,C,h.navigation,I]),r.default.useEffect(()=>{const t=e===s.PreviewType.Video&&i.hasShownTranscriptSettingModal;x&&(0,o.shouldShowOptInModal)(C,I,t)&&F(!0)},[x,C,e,I,i]),r.default.useEffect(()=>{const e=(0,o.shouldGenerateTranscript)(C,I);D&&x&&e&&this.userId&&P&&(function(e,i){t.__awaiter(this,void 0,void 0,(function*(){S&&(yield h.navigation.generateTranscript(e,i))}))})(this.userId,P)},[P,x,S,C,h.navigation,D,I]),r.default.useEffect(()=>{D&&x&&this.context.logUserAction("open_transcript","right_sidebar",{transcript_opt_in:"opted_in"===(null==C?void 0:C[".tag"])?"true":"false"})},[x,C,D]);const M=r.default.useCallback(e=>{"toggle_transcript_details"===e?b(e=>!e):"copy_transcript"===e&&((0,o.writeTranscriptToClipboard)(T),this.context.logUserAction("copy_transcript_click","right_sidebar"))},[T]),R=r.default.useCallback(()=>{F(!1)},[]);return D&&C?r.default.createElement(r.default.Fragment,null,r.default.createElement(n.TranscriptBlade,{intl:this.platform.intl,id:a.TRANSCRIPT_BLADE_PLUGIN_ID,onMenuSelection:M,transcript:I,showTranscriptionDetails:w},r.default.createElement(r.default.Suspense,{fallback:r.default.createElement(v.TranscriptProgressBar,{showLoadingMessage:!1})},r.default.createElement(_,{transcript:I,showTranscriptionDetails:w,permission:C,logUserAction:this.context.logUserAction,setIsTranscriptShowing:h.navigation.setIsTranscriptShowing}))),O&&x&&r.default.createElement(l.TranscriptSettingsModal,{intl:this.platform.intl,pluginNavigation:h.navigation,source:"right_sidebar",onClose:R,logUserAction:this.context.logUserAction})):null},Control:()=>{const e=this.context.getPluginData(),i=e.previewType===s.PreviewType.Video,t=i?e.file:null,l=null==t?void 0:t.transcript,c=this.context.sdkConfig,d=(0,o.getTranscriptPermission)(null==e?void 0:e.previewData);return i&&(0,o.shouldShowTranscriptUi)(l,d,c.video_transcription)?r.default.createElement(n.TranscriptBladeCollapsedBladeButton,{intl:this.platform.intl,id:a.TRANSCRIPT_BLADE_PLUGIN_ID}):null}},this.lifecycle={},this.platform=e,this.context=i,this.userId=g}}})),define("typescript/libraries/file-viewer/src/transcript_blade/loader",["require","exports","tslib","typescript/libraries/file-viewer/src/transcript_blade/transcript_blade_plugin","typescript/libraries/file-viewer/src/core/data/types"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeTranscriptPluginLoader=void 0,i.makeTranscriptPluginLoader=function(e){return{pluginId:a.TRANSCRIPT_BLADE_PLUGIN_ID,load:(i,a)=>t.__awaiter(this,void 0,void 0,(function*(){return new r.TranscriptBladePluginBase(i,a,e)}))}}})),define("typescript/libraries/file-viewer/src/transcript_blade/utils",["require","exports","typescript/libraries/file-viewer/src/core/riviera/types","lodash"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.shouldShowOptInModal=i.shouldGenerateTranscript=i.shouldEnableClosedCaptionsButton=i.getTranscriptPermission=i.shouldShowTranscriptUi=i.getIsTranscriptNonempty=i.writeTranscriptToClipboard=void 0;i.writeTranscriptToClipboard=(e,i=!1)=>{if(!e||0===e.length)return void console.error("Failed to copy transcript");const t=(0,r.flatten)(e.map(({text:e,startTime:t})=>i?[t,e]:[e])).join("\r\n");navigator.clipboard.writeText(t)};i.getIsTranscriptNonempty=e=>{var i;return"loaded"===(null==e?void 0:e.state)&&!!(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.segments)&&e.data.segments.length>0},i.shouldShowTranscriptUi=function(e,i,t){var r,a;return!!i&&(!!("loaded"===(null==e?void 0:e.state)&&(null==e?void 0:e.data)&&(null===(a=null===(r=e.data)||void 0===r?void 0:r.segments)||void 0===a?void 0:a.length)>0)||("ineligible"===i[".tag"]||"V1"===t)&&!("ineligible"===i[".tag"]&&!e))};i.getTranscriptPermission=e=>{var i;return"video"===(null===(i=null==e?void 0:e.content)||void 0===i?void 0:i[".tag"])?e.content.transcript_permission:{".tag":"ineligible"}};i.shouldEnableClosedCaptionsButton=(e,r,a)=>{var n,s;return!!e&&(!!(0,i.shouldShowOptInModal)(e,r,a)||!!r&&(("errored"!==r.state||r.error.statusCode===t.RivieraStatus.NotFound)&&("loaded"!==r.state||0!==(null===(s=null===(n=r.data)||void 0===n?void 0:n.segments)||void 0===s?void 0:s.length))))};const a=e=>!!e&&("pending"!==e.state&&"loaded"!==e.state&&("errored"!==e.state||e.error.statusCode===t.RivieraStatus.NotFound));i.shouldGenerateTranscript=(e,i)=>"opted_in"===(null==e?void 0:e[".tag"])&&a(i);i.shouldShowOptInModal=(e,i,t)=>"opted_out"===(null==e?void 0:e[".tag"])&&(!t&&(!i||a(i)))})),define("typescript/libraries/file-viewer/src/transcript_blade/constants",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.RESUME_AUTO_SCROLL_BUTTON_PLACEHOLDER_HEIGHT=i.ESTIMATE_SEGMENT_ITEM_HEIGHT=i.MAX_TRANSCRIPT_VIDEO_DURATION_S=i.DEFAULT_VIRTUAL_LIST_HEIGHT=i.AUTO_SCROLL_PAUSE_THRESHOLD=i.COPIED_BUTTON_DISPLAY_THRESHOLD=i.LOADING_TEXT_DISPLAY_THRESHOLD=void 0,i.LOADING_TEXT_DISPLAY_THRESHOLD=1e4,i.COPIED_BUTTON_DISPLAY_THRESHOLD=3e3,i.AUTO_SCROLL_PAUSE_THRESHOLD=1e4,i.DEFAULT_VIRTUAL_LIST_HEIGHT=1e3,i.MAX_TRANSCRIPT_VIDEO_DURATION_S=480,i.ESTIMATE_SEGMENT_ITEM_HEIGHT=132,i.RESUME_AUTO_SCROLL_BUTTON_PLACEHOLDER_HEIGHT=40})),define("typescript/libraries/file-viewer/src/transcript_blade/hooks",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useDuration=void 0,r=t.__importDefault(r),i.useDuration=function(e){const i=e&&e.readyState()>0?e.duration():void 0,[t,a]=r.default.useState(i);return r.default.useEffect(()=>{if(e){const i=()=>a(e.duration());return e.on("loadedmetadata",i),e.on("durationchange",i),()=>{e.off("loadedmetadata",i),e.off("durationchange",i)}}},[e]),t}})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_blade",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","typescript/component_libraries/files_components/src/right-rail/right_rail","react-intl","dig-components/badges","dig-components/menu","dig-components/buttons","typescript/component_libraries/files_components/src/right-rail/context","typescript/libraries/file-viewer/src/transcript_blade/transcript_blade.module.css","typescript/libraries/file-viewer/src/transcript_blade/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TranscriptBladeCollapsedBladeButton=i.TranscriptBlade=void 0,r=t.__importStar(r),p=t.__importDefault(p),i.TranscriptBlade=r.memo(({id:e,intl:i,transcript:t,onMenuSelection:f,showTranscriptionDetails:_,children:g})=>{const{expandedBlade:m}=r.useContext(u.RightRailContext),w=m===e,b=(0,v.getIsTranscriptNonempty)(t),h=r.createElement(r.Fragment,null,i.formatMessage({id:"+7+KXv",defaultMessage:"Transcript"}),r.createElement(l.AccessoryBadge,{className:p.default.transcriptHeaderBetaBadge},i.formatMessage({id:"XdjMGi",defaultMessage:"Beta"}))),y=w&&b?r.createElement("div",{className:p.default.transcriptHeaderOptionMenuWrapper},r.createElement(c.Menu.Wrapper,{onSelection:f,shouldPropagateClickOutsideMouseEvents:!0},({getContentProps:e,getTriggerProps:t})=>r.createElement(r.Fragment,null,r.createElement(d.IconButton,Object.assign({},t(),{variant:"transparent",size:"small","data-testid":"transcript-settings-menu"}),r.createElement(a.UIIcon,{src:n.MoreHorizontalLine,size:"small"})),r.createElement(c.Menu.Content,Object.assign({id:"parent"},e()),r.createElement(c.Menu.Segment,null,r.createElement(c.Menu.ActionItem,{key:"toggle_transcript_details",value:"toggle_transcript_details"},_?i.formatMessage({id:"6YJBBm",defaultMessage:"Hide transcript details"}):i.formatMessage({id:"T6egx/",defaultMessage:"Show transcript details"})),r.createElement(c.Menu.ActionItem,{key:"copy_transcript",value:"copy_transcript"},i.formatMessage({id:"L//QR/",defaultMessage:"Copy transcript"}))))))):null;return r.createElement(o.RawIntlProvider,{value:i},r.createElement(s.RightRail.Blade,{id:e,withIcon:r.createElement(a.UIIcon,{src:n.KeyboardLine}),withTitle:h,withTitleRightAccessory:y,bladePanelClassname:p.default.transcriptBlade},g))}),i.TranscriptBlade.displayName="TranscriptBlade",i.TranscriptBladeCollapsedBladeButton=r.memo(({id:e,intl:i})=>r.createElement(o.RawIntlProvider,{value:i},r.createElement(s.RightRail.CollapsedBladeIcon,{withIcon:r.createElement(a.UIIcon,{src:n.KeyboardLine,"aria-label":i.formatMessage({id:"qtZ4fj",defaultMessage:"Open transcript panel"})}),id:e,tooltip:i.formatMessage({id:"+VVWXN",defaultMessage:"Transcript"})}))),i.TranscriptBladeCollapsedBladeButton.displayName="TranscriptBladeCollapsedBladeButton"})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_blade_content",["require","exports","tslib","react","react-intl","dig-components/typography","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment_list","typescript/libraries/file-viewer/src/core/resizer","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_search","typescript/libraries/file-viewer/src/transcript_blade/constants","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/file-viewer/src/transcript_blade/transcript_blade.module.css","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_progress_bar"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TranscriptBladeContent=void 0,r=t.__importDefault(r),p=t.__importDefault(p);const f=r.default.memo(({error:e,logUserAction:i})=>{const t=(0,a.useIntl)();let s;switch(r.default.useEffect(()=>{i("transcript_load_failure","right_sidebar",{transcript_error:e.transcriptError,riviera_code:String(e.statusCode)})},[e,i]),e.transcriptError){case"too_long":s=t.formatMessage({id:"On86TV",defaultMessage:"Transcript is unavailable because the video is longer than eight minutes."});break;case"no_speech":s=t.formatMessage({id:"AYFmtq",defaultMessage:"Transcript is unavailable because no speech was detected."});break;case"insufficient_permissions":s=t.formatMessage({id:"XwB1fY",defaultMessage:"Ask the person who uploaded this file to transcribe it."});break;default:s=t.formatMessage({id:"x6EnGY",defaultMessage:"There was an error loading the transcript."})}return r.default.createElement("div",{className:p.default.transcriptErrorInfo,"data-testid":"transcript-blade-error"},r.default.createElement(n.Text,{variant:"label",size:"standard",color:"standard"},s))});f.displayName="TranscriptErrorInfo";i.TranscriptBladeContent=({transcript:e,permission:i,showTranscriptionDetails:t,logUserAction:a,setIsTranscriptShowing:n})=>{var _;const[g,m]=r.default.useState(),[w,b]=r.default.useState(),[h,y]=r.default.useState(),S=r.default.useRef(null),E=r.default.useCallback(({height:e})=>{y(e)},[]),P=r.default.useRef(!1),I=r.default.useCallback(e=>{P.current||(a("transcript_search_attempt","right_sidebar"),P.current=!0),m(e),b(null!=e?0:void 0)},[P,a]),T=r.default.useCallback((e,i)=>b(t=>{if(null==t||null==i)return 0;const r=t+e;return r>=i?0:r<0?i-1:r}),[]);r.default.useEffect(()=>{S.current&&y(S.current.getBoundingClientRect().height||d.DEFAULT_VIRTUAL_LIST_HEIGHT)},[]);let C=null;return C="pending"!==(null==e?void 0:e.state)&&h?"errored"===(null==e?void 0:e.state)&&e.error.statusCode!==u.RivieraStatus.NotFound?r.default.createElement(f,{error:e.error,logUserAction:a}):"loaded"===(null==e?void 0:e.state)&&(null===(_=e.data)||void 0===_?void 0:_.segments)&&e.data.segments.length>0?r.default.createElement(r.default.Fragment,null,r.default.createElement(c.TranscriptSearch,{onSearch:I,transcript:e,currentMatch:w,updateCurrentMatch:T}),r.default.createElement(o.TranscriptSegmentList,{segments:e.data.segments,showTranscriptionDetails:t,permission:i,logUserAction:a,listHeight:h-Number(p.default.transcriptSearchHeight),searchResult:g,currentMatch:w,setIsTranscriptShowing:n})):r.default.createElement(s.TranscriptSettingInfo,{logUserAction:a}):r.default.createElement(v.TranscriptProgressBar,null),r.default.createElement(l.Resizer,{elementRef:S,onResize:E},r.default.createElement("div",{className:p.default.transcriptBladeContentWrapper,ref:S},C))},i.TranscriptBladeContent.displayName="TranscriptBladeContent"})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_progress_bar",["require","exports","tslib","react","react-intl","dig-components/progress_indicators","dig-components/typography","typescript/libraries/file-viewer/src/transcript_blade/constants","typescript/libraries/file-viewer/src/transcript_blade/transcript_blade.module.css"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TranscriptProgressBar=void 0,r=t.__importDefault(r),l=t.__importDefault(l),i.TranscriptProgressBar=r.default.memo(({showLoadingMessage:e=!0})=>{const i=(0,a.useIntl)(),[t,c]=r.default.useState(!1),d=r.default.useRef(null);return r.default.useEffect(()=>{if(e)return d.current=window.setTimeout(()=>{c(!0),d.current=null},o.LOADING_TEXT_DISPLAY_THRESHOLD),()=>{null!=d.current&&window.clearTimeout(d.current)}},[e]),r.default.createElement("div",{className:l.default.transcriptLoadingScreen},r.default.createElement(n.ProgressBar,{className:l.default.transcriptProgressBar,value:0,in:!0,isIndeterminate:!0}),t&&r.default.createElement(s.Text,{variant:"label",size:"small",color:"standard"},i.formatMessage({id:"BY163J",defaultMessage:"Depending on the length of the video, this may take a moment."})))}),i.TranscriptProgressBar.displayName="TranscriptProgressBar"})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment_list",["require","exports","tslib","react","react-intl","dig-components/buttons","classnames","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","react-window","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/toolbar/toolbar_actions","typescript/libraries/file-viewer/src/transcript_blade/constants","lodash","typescript/libraries/file-viewer/src/preview_audio_video/helper/utils","typescript/libraries/file-viewer/src/keyboard/bindings","ts-key-enum","typescript/libraries/file-viewer/src/transcript_blade/transcript_blade.module.css"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TranscriptSegmentList=void 0,r=t.__importDefault(r),s=t.__importDefault(s),m=t.__importDefault(m);i.TranscriptSegmentList=({segments:e,listHeight:i,showTranscriptionDetails:t,permission:w,logUserAction:b,searchResult:h,currentMatch:y,setIsTranscriptShowing:S})=>{const{videoPlayer:E}=(0,u.useToolbarAction)(),[P,I]=r.default.useState(0),[T,C]=r.default.useState(null),[A,O]=r.default.useState(!0),F=r.default.useRef(),k=r.default.useRef(!1),x=r.default.useRef(null),D=r.default.useRef(null),L=r.default.useRef({}),M="ineligible"!==w[".tag"],R=r.default.useMemo(()=>{if(null==h)return null;const e=new Map;return h.forEach((i,t)=>{i.forEach(({hitNumber:i})=>{e.set(i,t)})}),e},[h]),N=r.default.useCallback((e,i)=>{var t;L.current=Object.assign(Object.assign({},L.current),{[e]:i}),null===(t=D.current)||void 0===t||t.resetAfterIndex(e,!0)},[]),j=r.default.useCallback(e=>L.current[e]||Number(m.default.minSegmentHeight),[]),V=r.default.useCallback(()=>{O(!1),null!=F.current&&window.clearTimeout(F.current),F.current=window.setTimeout(()=>{O(!0),F.current=void 0},p.AUTO_SCROLL_PAUSE_THRESHOLD)},[P]),B=r.default.useCallback(()=>{var i;if(!E||h)return;const t=E.currentTime(),r=(0,v.findLastIndex)(e,({startTime:e})=>Math.floor(t)>=Math.floor(e)),a=Math.max(0,r);P!==a&&(I(a),A&&(null===(i=D.current)||void 0===i||i.scrollToItem(a,"start")))},[e,E,P,A,h]),U=r.default.useCallback(i=>{E&&P!==i&&(E.currentTime(e[i].startTime),I(i),b("transcript_click_position","right_sidebar"))},[E,e,P,b]),K=(0,d.useStabilizedCallback)(()=>{null!=E&&B()}),z=r.default.useCallback(({scrollUpdateWasRequested:e})=>{k.current?e||V():k.current=!0},[]),H=r.default.useCallback(i=>{if(V(),i.key===g.Key.ArrowUp){if(0===T)return;C(e=>{var i;const t=(null==e?P:e)-1;return null===(i=D.current)||void 0===i||i.scrollToItem(t),t})}else if(i.key===g.Key.ArrowDown){if(null!=T&&T>=e.length-1)return;C(e=>{var i;const t=(null==e?P:e)+1;return null===(i=D.current)||void 0===i||i.scrollToItem(t),t})}},[T,e,P]),q=r.default.useCallback(({visibleStartIndex:e,visibleStopIndex:i})=>{null!=T&&(T<e||T>i)&&C(null)},[T]);r.default.useEffect(()=>{E&&E.paused()||B()},[E,e,B]),r.default.useEffect(()=>{var e;if(null==y||null==R)return;const i=R.get(y);null!=i&&(null===(e=D.current)||void 0===e||e.scrollToItem(i))},[y,R]),r.default.useEffect(()=>{x.current&&x.current.focus()},[]),r.default.useEffect(()=>(S(!0),b("transcript_load_success","right_sidebar",{transcript_opt_in:"opted_in"===w[".tag"]?"true":"false"}),()=>{S(!1)}),[S,b,w]),r.default.useEffect(()=>{if(E)return(0,f.setupVideoJsEvents)(E,{timeupdate:K,seeked:K})},[K,E]),r.default.useEffect(()=>()=>{null!=F.current&&window.clearTimeout(F.current)},[]);const W=r.default.useMemo(()=>e=>r.default.createElement("div",Object.assign({},e,{role:"list"})),[]),G=r.default.useMemo(()=>({activeSegmentIndex:P,showTranscriptionDetails:t,shouldShowSettingsInfo:M,segments:e,onSegmentClick:U,setSegmentHeight:N,logUserAction:b,cursor:T,searchResult:h,currentMatch:y}),[e,P,t,M,U,N,b,T,h,y]),Y=r.default.useMemo(()=>[(0,_.getKeyboardBinding)({key:g.Key.ArrowUp,callback:H}),(0,_.getKeyboardBinding)({key:g.Key.ArrowDown,callback:H})],[H]),Z=(0,a.useIntl)(),X=r.default.useCallback(()=>{var e;null===(e=D.current)||void 0===e||e.scrollToItem(P,"start"),O(!0)},[P]);return r.default.createElement(r.default.Fragment,null,r.default.createElement(l.KeyboardBindingConnector,{keyboardBindings:Y,name:"video_transcription",scope:!0}),r.default.createElement("div",{className:m.default.transcriptSegmentListContentWrapper,ref:x,tabIndex:-1},r.default.createElement(c.VariableSizeList,{ref:D,height:i,width:"100%",itemCount:e.length,itemSize:j,innerElementType:W,onScroll:z,itemData:G,estimatedItemSize:p.ESTIMATE_SEGMENT_ITEM_HEIGHT,onItemsRendered:q},o.TranscriptSegment),r.default.createElement(n.Button,{variant:"primary",className:(0,s.default)(m.default.resumeAutoScrollButton,{[m.default.showing]:!A}),onClick:X},Z.formatMessage({id:"5KYEh4",defaultMessage:"Resume auto-scroll"}))))},i.TranscriptSegmentList.displayName="TranscriptSegmentList"})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_segment",["require","exports","tslib","react","react-intl","dig-components/buttons","dig-components/tooltips","dig-components/icons","dig-components/icons/src","dig-components/typography","typescript/libraries/file-viewer/src/transcript_blade/components/transcript_search","typescript/libraries/file-viewer/src/core/utils/time_utils","classnames","typescript/libraries/file-viewer/src/transcript_blade/utils","ts-key-enum","typescript/libraries/file-viewer/src/transcript_blade/constants","react-window","typescript/libraries/file-viewer/src/transcript_blade/transcript_segment.module.css"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TranscriptSegment=i.TranscriptSettingInfo=void 0,r=t.__importDefault(r),p=t.__importDefault(p),m=t.__importDefault(m),i.TranscriptSettingInfo=r.default.memo(({logUserAction:e})=>{const i=(0,a.useIntl)(),t=r.default.useCallback(()=>{e("transcript_settings_click","right_sidebar")},[e]);return r.default.createElement("div",{className:m.default.transcriptSettingInfoWrapper},r.default.createElement(c.Text,{variant:"label",size:"small",color:"faint",className:m.default.transcriptSettingInfoText,"data-testid":"transcript-settings-text"},i.formatMessage({id:"Qu3LbO",defaultMessage:"To edit Transcript preferences, go to <a>Settings</a>"},{a:e=>r.default.createElement(c.Link,{onClick:t,href:"/account/general"},e)})))}),i.TranscriptSettingInfo.displayName="TranscriptSettingInfo",i.TranscriptSegment=r.default.memo(({index:e,style:t,data:g})=>{var w;const b=(0,a.useIntl)(),{activeSegmentIndex:h,showTranscriptionDetails:y,shouldShowSettingsInfo:S,segments:E,onSegmentClick:P,setSegmentHeight:I,logUserAction:T,cursor:C,searchResult:A,currentMatch:O}=g,F=E[e],{text:k,startTime:x}=F,D=e===h,L=null!==(w=null==A?void 0:A.get(e))&&void 0!==w?w:null,[M,R]=r.default.useState(!1),N=r.default.useRef(),j=r.default.useRef(null);r.default.useEffect(()=>{var i;C===e&&(null===(i=j.current)||void 0===i||i.focus())},[C,e]),r.default.useEffect(()=>{if(j.current){const i=null!=E&&e===E.length-1,t=j.current.getBoundingClientRect().height;let r=0;i&&(r+=S?Number(m.default.settingInfoSectionHeight):0,r+=_.RESUME_AUTO_SCROLL_BUTTON_PLACEHOLDER_HEIGHT),I(e,t+r)}},[e,E,I,S,y]),r.default.useEffect(()=>()=>{null!=N.current&&window.clearTimeout(N.current)},[]);const V=r.default.useCallback(e=>{var i;null==e||e.stopPropagation(),(0,v.writeTranscriptToClipboard)([F]),R(!0),T("transcript_copy_text_click","right_sidebar"),N.current=window.setTimeout(()=>{R(!1)},_.COPIED_BUTTON_DISPLAY_THRESHOLD),null===(i=j.current)||void 0===i||i.focus()},[F,T]),B=r.default.useCallback(e=>{e.stopPropagation(),e.key===f.Key.Enter&&V()},[]),U=r.default.useCallback(()=>P(e),[e,P]),K=r.default.useCallback(i=>{i.key===f.Key.Enter&&P(e)},[e,P]),z=b.formatMessage({id:"asLrlY",defaultMessage:"Copy text"}),H=M?r.default.createElement(n.Button,{className:m.default.copyButton,variant:"opacity",size:"small",withIconLeft:r.default.createElement(o.UIIcon,{src:l.CheckmarkLine,role:"presentation"})},b.formatMessage({id:"yarRfu",defaultMessage:"Copied"})):r.default.createElement(s.Tooltip,{placement:"left",title:z},r.default.createElement(n.IconButton,{variant:"transparent",onClick:V,onKeyPress:B,className:m.default.copyButton,"aria-label":z},r.default.createElement(o.UIIcon,{src:l.CopyLine,size:"small"})));return r.default.createElement("div",{key:e,style:t,role:"listitem"},r.default.createElement("div",{className:(0,p.default)(m.default.transcriptSegment,{[m.default.activeSegment]:D}),ref:j,onClick:U,onKeyPress:K,"aria-current":!!D&&"time",tabIndex:-1},y&&r.default.createElement("div",{className:m.default.transcriptSegmentHeader},r.default.createElement(c.Text,{className:m.default.transcriptSegmentTimestamp,size:"small",color:D?"inherit":"faint",role:"button"},(0,u.formatTime)(x,null)),H),r.default.createElement(d.HighlightableText,{isActive:D,highlights:L,currentMatch:O},k)),e===E.length-1&&r.default.createElement(i.TranscriptSettingInfo,{logUserAction:T}))},g.areEqual),i.TranscriptSegment.displayName="TranscriptSegment"})),define("typescript/libraries/file-viewer/src/transcript_blade/components/transcript_settings_modal",["require","exports","tslib","react","dig-components/buttons","dig-components/modal","dig-components/typography"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TranscriptSettingsModal=void 0,r=t.__importStar(r),i.TranscriptSettingsModal=r.memo(({intl:e,pluginNavigation:i,onClose:o,source:l,logUserAction:c})=>{const d=r.useCallback(()=>t.__awaiter(void 0,void 0,void 0,(function*(){null==i||i.setOptInToVideoTranscript(),c("transcript_opt_in_allow",l),o()})),[i,c,l,o]),u=r.useCallback(()=>{c("transcript_opt_in_cancel",l),o()},[c,o,l]);return r.useEffect(()=>{null==i||i.setHasShownTranscriptSettingModal(),c("transcript_opt_in_shown",l)},[c,i,l]),r.createElement(n.Modal,{open:!0,isCentered:!0,withCloseButton:e.formatMessage({id:"AeW0AX",defaultMessage:"Close"}),onRequestClose:u},r.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard"},r.createElement(n.Modal.Title,null,"right_sidebar"===l?e.formatMessage({id:"O+lgqO",defaultMessage:"View transcripts of all your videos in one place."}):e.formatMessage({id:"TN7E34",defaultMessage:"Follow along with all of your videos with closed captions."}))),r.createElement(n.Modal.Body,null,r.createElement(s.Text,null,e.formatMessage({id:"e6nprz",defaultMessage:"This feature is powered by Amazon Transcribe. Your data will be sent to Amazon Web Services for transcription and closed captioning. <a>Learn More</a>"},{a:e=>r.createElement(s.Link,{href:"https://help.dropbox.com/view-edit/transcript-closed-captions"},e)}))),r.createElement(n.Modal.Footer,null,r.createElement(a.Button,{variant:"opacity",onClick:u,autoFocus:!0},e.formatMessage({id:"4JpPox",defaultMessage:"Cancel"})),r.createElement(a.Button,{onClick:d,variant:"primary"},e.formatMessage({id:"glzssT",defaultMessage:"Allow"}))))}),i.TranscriptSettingsModal.displayName="TranscriptSettingsModal"})),define("typescript/libraries/file-viewer/src/assigned_tasks_blade/assigned_tasks_blade_plugin",["require","exports","tslib","react","react-redux","@reduxjs/toolkit","typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/collapsed_assigned_tasks_blade","typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/types","typescript/libraries/file-viewer/src/assigned_tasks_blade/types","dig-components/progress_indicators","typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/data/types","typescript/libraries/file-viewer/src/core/data/types","typescript/libraries/file-viewer/src/core/logging/constants","typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/data/slices"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AssignedTasksBladePlugin=void 0;const f=(r=t.__importStar(r)).default.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{AssignedTasksBlade:i}=yield new Promise((i,t)=>{e(["typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/assigned_tasks_blade"],i,t)}).then(t.__importStar);return{default:i}})));f.displayName="LazyAssignedTasksBlade";const _=()=>r.default.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},r.default.createElement(c.Spinner,{size:"standard"}));_.displayName="LoadingIndicator";const g=e=>r.default.createElement(r.default.Suspense,{fallback:r.default.createElement(_,null)},r.default.createElement(f,Object.assign({},e)));g.displayName="AsyncAssignedTasksBlade";i.AssignedTasksBladePlugin=class{constructor({platform:e,store:i,context:c,log:d,reportException:reportException,userId:f,userEmail:_}){var m;this.layerUI={},this.rightRailUI={Sidebar:e=>{const i=e.navigation,t=(0,r.useCallback)(()=>i.openRightRailPlugin(p.UserActionContext.RightRail,l.ASSIGNED_TASKS_BLADE_PLUGIN_ID),[i]),n=(0,r.useCallback)(()=>i.openRightRailPlugin(p.UserActionContext.RightRail,u.INFO_BLADE_PLUGIN_ID),[i]);return w(this.store)?r.default.createElement(a.Provider,{store:this.store},r.default.createElement(g,{id:l.ASSIGNED_TASKS_BLADE_PLUGIN_ID,intl:this.platform.intl,openAssignedTasksBladePlugin:t,openInfoBladePlugin:n,updateSharingTask:this.updateSharingTask,trackTooltipTourView:this.trackTooltipTourView,isLQA:this.isLQA,log:this.log,reportException:this.reportException})):null},Control:e=>{const i=e.navigation,t=(0,r.useCallback)(()=>i.openRightRail(p.UserActionContext.Toolbar),[i]);return w(this.store)?r.default.createElement(a.Provider,{store:this.store},r.default.createElement(s.CollapsedAssignedTasksBladeButton,{id:l.ASSIGNED_TASKS_BLADE_PLUGIN_ID,intl:this.platform.intl,openRightRail:t,log:this.log})):null}},this.getAssignedTasksState=()=>t.__awaiter(this,void 0,void 0,(function*(){var e,i;try{const t=this.platform.apiv2ClientBase,r=yield this.store.dispatch((0,v.getSharingTasks)({apiv2ClientBase:t,fileId:this.fileId,userId:this.userId})),a=(0,n.unwrapResult)(r),s=a.variant;s&&"OFF"!==s&&this.log(o.AssignedTasksBladeEvent.GetSharingTasksSuccess,{variant:s,tasks:null===(e=a.sharing_tasks)||void 0===e?void 0:e.map(({task:e})=>e?e[".tag"]:"other").join(),note_length:null===(i=a.note)||void 0===i?void 0:i.length,has_seen_tooltip_tour:a.has_seen_previews_tooltip_tour})}catch(e){this.log(o.AssignedTasksBladeEvent.GetSharingTasksError,{error:String(e),error_message:null==e?void 0:e.message,error_tag:(null==e?void 0:e.error)&&e.error[".tag"]||"undefined_error"}),this.reportException(e,"")}})),this.updateSharingTask=(e,i)=>t.__awaiter(this,void 0,void 0,(function*(){try{const t=this.platform.apiv2ClientBase,r=yield this.store.dispatch((0,v.updateSharingTask)({apiv2ClientBase:t,fileId:this.fileId,task:e,isCompleted:i,userId:this.userId}));(0,n.unwrapResult)(r)}catch(e){this.log(o.AssignedTasksBladeEvent.UpdateSharingTaskError,{error_message:null==e?void 0:e.message,error_tag:(null==e?void 0:e.error)&&e.error[".tag"]||"undefined_error"})}})),this.trackTooltipTourView=()=>{const e=this.platform.apiv2ClientBase,i={project:"sharing_activation",action:"seen_previews_tooltip_tour"},t={subjectUserId:this.userId};e.ns("growth").rpc("track_user_action",i,t).catch(e=>{this.log(o.AssignedTasksBladeEvent.TrackUserActionError,{error_message:null==e?void 0:e.message,error_tag:(null==e?void 0:e.error)&&e.error[".tag"]||"undefined_error"})})},this.lifecycle={previewDidInitialize:()=>{this.getAssignedTasksState()},previewDidError:()=>{this.getAssignedTasksState()}},this.platform=e,this.store=i,this.fileId=null===(m=c.getPluginData().file)||void 0===m?void 0:m.fileId,this.log=d,this.reportException=reportException,this.userId=f,this.isLQA=!!_&&(_.startsWith("lqa")&&_.endsWith("@dbx51.com"))}};const m=e=>{const i=e.getState()[d.ASSIGNED_TASKS_BLADE_NAMESPACE_KEY];return["V1","V2"].includes(i.variant)},w=e=>{const[i,t]=(0,r.useState)(m(e));return(0,r.useEffect)(()=>e.subscribe(()=>{t(m(e))}),[]),i}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/blade_plugins/assigned_tasks_blade/loader",["require","exports","tslib","typescript/libraries/file-viewer/src/assigned_tasks_blade/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeAssignedTasksBladePluginLoader=void 0,i.makeAssignedTasksBladePluginLoader=function(i){return{pluginId:r.ASSIGNED_TASKS_BLADE_PLUGIN_ID,load:(r,a)=>t.__awaiter(this,void 0,void 0,(function*(){const{makeStore:n}=yield new Promise((i,t)=>{e(["typescript/component_libraries/files_components/src/blades/assigned_tasks_blade/data/store"],i,t)}).then(t.__importStar),{AssignedTasksBladePlugin:s}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/assigned_tasks_blade/assigned_tasks_blade_plugin"],i,t)}).then(t.__importStar),{logRRCTiburonEvent:o,reportRRCException:l}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/blade_plugins/assigned_tasks_blade/logger"],i,t)}).then(t.__importStar),c=n(),d=null==i?void 0:i.id,u=null==i?void 0:i.email,p=o(d,a.getPluginData().file);return new s({platform:r,store:c,context:a,log:p,reportException:l,userId:d,userEmail:u})}))}}})),define("typescript/libraries/file-viewer/src/assigned_tasks_blade/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ASSIGNED_TASKS_BLADE_PLUGIN_ID=void 0,i.ASSIGNED_TASKS_BLADE_PLUGIN_ID="assigned_tasks_blade"})),define("typescript/libraries/file-viewer/src/mobile_web/footer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.css"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Footer=void 0,r=t.__importDefault(r),a=t.__importStar(a);i.Footer=({leftButton:e,middleButton:i,rightButton:t})=>r.default.createElement("div",{className:a.footerContainer},e,r.default.createElement("div",{className:a.rightButtonsContainer},r.default.createElement("div",{className:a.abTestButton},i),t)),i.Footer.displayName="Footer"})),define("typescript/libraries/file-viewer/src/mobile_web/meatball_menu",["require","exports","tslib","dig-components/icons/src","dig-components/icons","react","react-intl","typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.css","classnames","dig-components/buttons","dig-components/typography","typescript/libraries/file-viewer/src/core/i18n","typescript/component_libraries/files_components/src/icons/file_icon","typescript/libraries/file-viewer/src/core/utils/functions","dig-components/truncate"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MeatballMenu=void 0,n=t.__importDefault(n),o=t.__importStar(o),l=t.__importDefault(l);i.MeatballMenu=e=>{const{sharedLinkInfo:i,fileMetadata:t,isVisible:_,onDismiss:g,menuActions:m,onSignUp:w,onManageCookies:b}=e,h=(0,s.useIntl)(),y=(null==t?void 0:t.size)?(0,u.formatBytes)(t.size,h):0,S=(null==i?void 0:i.ownerName)||h.formatMessage({id:"BgdVC1",defaultMessage:"you"});return _?n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{onClick:g,className:o.meatballMenuOverlay}),n.default.createElement("div",{className:o.meatballMenuContainer},n.default.createElement("div",null,n.default.createElement(c.IconButton,{onClick:g,className:o.meatballMenuDismiss,variant:"transparent"},n.default.createElement(a.UIIcon,{src:r.CloseLine})),n.default.createElement("div",{className:o.metadata},n.default.createElement("div",{className:o.fileIconContainer},n.default.createElement(p.FileIcon,{file:(0,v.mapMetadataToFile)(t)||{uniqueKey:"",title:"",isFolder:!1}})),n.default.createElement("div",{className:o.metadataText},n.default.createElement(d.Text,{className:o.fileName,variant:"label",size:"standard",tagName:"p",isBold:!0},n.default.createElement(f.Truncate,{maxWidth:188},null==t?void 0:t.file_name)),n.default.createElement(d.Text,{color:"faint"},h.formatMessage({id:"lFMuH3",defaultMessage:"{formatted_size}, file owner: {owner}"},{formatted_size:y,owner:S})))),n.default.createElement("div",{className:o.actions},m.map(e=>n.default.createElement("div",{key:null==e?void 0:e.type.displayName,className:(0,l.default)({[o.actionRow]:!(null==e?void 0:e.props.placeholder)})},e))),w&&n.default.createElement("div",{className:o.signInButton},n.default.createElement(c.Button,{onClick:w,variant:"opacity"},n.default.createElement(a.UIIcon,{src:r.PersonCircleLine}),n.default.createElement("span",null,h.formatMessage({id:"FFqlH9",defaultMessage:"Sign up"})))),n.default.createElement("div",{className:o.footer},n.default.createElement("span",{onClick:b},h.formatMessage({id:"FqzxYC",defaultMessage:"Cookie preferences"})),n.default.createElement(a.UIIcon,{className:o.meatballSeparator,size:"small",src:r.CircleSmallFilledFill}),n.default.createElement("a",{href:"https://dropbox.com/privacy"},h.formatMessage({id:"4gi6Mt",defaultMessage:"Privacy and legal"})))))):null},i.MeatballMenu.displayName="MeatballMenu"})),define("typescript/libraries/file-viewer/src/mobile_web/mobile_title_bar",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css","classnames","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","dig-components/icons","dig-components/buttons","dig-components/icons/src","react-redux","typescript/libraries/file-viewer/src/titlebar/close_button","typescript/libraries/file-viewer/src/titlebar/title","typescript/libraries/file-viewer/src/mobile_web/meatball_menu","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/constants","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/render_context"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MobileTitleBar=i.TITLE_BAR_BACK_AND_HELP_ICONS=void 0,r=t.__importStar(r),n=t.__importStar(n),s=t.__importDefault(s),i.TITLE_BAR_BACK_AND_HELP_ICONS=146,i.MobileTitleBar=r.memo(e=>{var i;const{sharedLinkInfo:t,menuActions:S,onSignUp:E,onManageCookies:P}=e;(0,w.useMarkTimingEventOnMount)(w.PreviewsTimingEvents.FVSDK_TITLE_BAR_MOUNT);const{responsiveSize:I,width:T}=(0,y.useFileViewerRenderContext)(),C=(0,u.useDispatch)(),A=(0,a.useIntl)(),{fileViewerId:O,canCloseViewer:F,featureConfig:k}=(0,b.useFileViewerContext)(),x=k.titlebar_logo_config.base_url,D=null===(i=(0,h.useCurrentFileInfo)(O))||void 0===i?void 0:i.previewKey,L=(0,h.useCurrentFileMetadata)(D),[M,R]=r.useState(!1),N=r.useCallback(()=>{R(!0),C((0,_.logUserActionEvent)({userAction:g.UserAction.OpenMobileMenu,actionContext:g.UserActionContext.MobileWebMeatball,fileViewerId:O}))},[]),j=r.useCallback(()=>{R(!1),C((0,_.logUserActionEvent)({userAction:g.UserAction.CloseMobileMenu,actionContext:g.UserActionContext.MobileWebMeatball,fileViewerId:O}))},[]),V=I===o.ResponsiveSize.MOBILE,B=T-62-64-32;return r.createElement(r.Fragment,null,r.createElement("header",{className:(0,s.default)(n.titleBar,n.mobileTitleBar),"data-testid":m.TITLE_BAR_TEST_ID},r.createElement(p.CloseButton,{previewKey:D,fileViewerId:O,baseUrl:x,canCloseViewer:F}),r.createElement(v.Title,{previewKey:D,fileViewerId:O,width:B,isMobileSize:V}),r.createElement("span",{className:n.mobileMeatball},r.createElement(c.IconButton,{variant:"transparent",onClick:N,"aria-label":A.formatMessage({id:"pExfXj",defaultMessage:"Actions"})},r.createElement(l.UIIcon,{src:d.MoreHorizontalLine})))),r.createElement(f.MeatballMenu,{isVisible:M,menuActions:S,onSignUp:E,fileViewerId:O,fileMetadata:L,onDismiss:j,sharedLinkInfo:t,onManageCookies:P}))}),i.MobileTitleBar.displayName="MobileTitleBar",i.MobileTitleBar.displayName="MobileTitleBar"})),define("typescript/libraries/file-viewer/src/core/middlewares/beacon_middleware",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.beaconMiddleware=void 0,i.beaconMiddleware=function(e){return({})=>i=>a=>t.__awaiter(this,void 0,void 0,(function*(){const t=i(a);return a.type===r.Action.SubscribePresence?e.subscribe(a.payload.fileId):a.type===r.Action.UnsubscribePresence&&e.unsubscribe(a.payload),t}))}})),define("typescript/libraries/file-viewer/src/pass/lifecycle",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.teardownPASSPresence=i.initializePASSPresence=void 0,i.initializePASSPresence=function(e,i){e.dispatch((0,t.subscribePresence)({fileId:i}))},i.teardownPASSPresence=function(e,i){e.dispatch((0,t.unsubscribePresence)(i))}})),define("typescript/libraries/file-viewer/src/plugins/context",["require","exports","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/navigation"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePluginContext=void 0,i.makePluginContext=function({store:e,sdkConfig:i,fileViewerId:s,reinitializeFileViewer:o,exitPluginEditMode:l,hideContentPane:c,updatePreviewMetadata:d,setPluginActivationParams:u}){const p=(0,n.makeNavigation)({store:e,fileViewerId:s,reinitializeFileViewer:o,exitPluginEditMode:l,hideContentPane:c,updatePreviewMetadata:d,setPluginActivationParams:u});return{fileViewerId:s,getFilePreviewSessionId:()=>e.getState().loggingSession[s].file_preview_session_id,getFileViewerSessionId:()=>e.getState().loggingSession[s].file_viewer_session_id,logUserAction:(i,a,n)=>{e.dispatch((0,t.logPreviewEvent)({event:r.EventType.UserAction,fileViewerId:s,extra:Object.assign(Object.assign({action:i},a?{context:a}:{}),n||{})}))},sdkConfig:i,getPluginData:()=>{const i=e.getState();return(0,a.getPluginData)(i,{fileViewerId:s,navigation:p})}}}})),define("typescript/libraries/file-viewer/src/plugins/data",["require","exports","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/plugins/selectors/file","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getPluginData=void 0,i.getPluginData=function(e,i){const{fileViewerId:s,navigation:o}=i,l=(0,t.getCurrentFile)(e,s),c=l?e.previewData[l.previewKey.serialized]:void 0,d=(0,t.getLoadableCurrentUser)(e),u={navigation:o,sharedLinkInfo:(0,t.getSharedLinkInfo)(e,s),account:d,previewData:c},p=(0,a.getCurrentBaseFile)(e,s);if(!p)return Object.assign({previewType:n.PreviewType.Loading,file:null},u);const v=(0,a.getCurrentCommonFile)(e,p);if("errored"===(null==l?void 0:l.bootstrap.state))return Object.assign({previewType:n.PreviewType.Error,file:v},u);if(!c)return Object.assign({previewType:n.PreviewType.Loading,file:v},u);const f=(0,r.resolvePreviewType)(c);switch(f){case n.PreviewType.Image:const i=(0,a.getCurrentImageFile)(e,p,s);if(i)return Object.assign({previewType:f,file:i},u);break;case n.PreviewType.SsrDoc:case n.PreviewType.CloudDoc:const t=(0,a.getCurrentDocFile)(e,p,s);if(t)return Object.assign({previewType:f,file:t},u);break;case n.PreviewType.Audio:case n.PreviewType.Video:const r=(0,a.getCurrentAudioVideoFile)(e,p);if(r)return Object.assign({previewType:f,file:r},u);break;case n.PreviewType.Archive:const o=(0,a.getCurrentArchiveFile)(e,p);if(o)return Object.assign({previewType:f,file:o},u);break;case n.PreviewType.Error:case n.PreviewType.Loading:return Object.assign({previewType:f,file:null},u);default:return Object.assign({previewType:f,file:v},u)}return Object.assign({previewType:n.PreviewType.Other,file:v},u)}})),define("typescript/libraries/file-viewer/src/plugins/edit_fullscreen_plugin_action",["require","exports","tslib","reselect","typescript/libraries/file-viewer/src/plugins/types","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","dig-components/menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","dig-components/icons","dig-components/buttons","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getEditPluginFullscreenActionDefinitions=void 0,n=t.__importStar(n);const v=(e,i)=>(0,o.setActiveEditPlugin)({fileViewerId:e,pluginId:i,sourceContext:p.UserActionContext.Toolbar}),f=n.default.memo(({icon:e,label:i,pluginId:t,fileViewerId:r,callback:a})=>{const o=(0,s.useDispatch)(),d=(0,n.useCallback)(()=>{o(v(r,t)),null==a||a()},[r,t,o]);return n.default.createElement(l.Menu.ActionItem,{value:{nodeType:"dropdown",actionType:c.ActionBarActionTypes.CUSTOM_ACTION,id:t,menuItem:{handler:d}},withLeftAccessory:e,disabled:!1},i)});f.displayName="EditFullscreenOverflowItem";const _=n.default.memo(({icon:e,label:i,pluginId:t,fileViewerId:r,hideIcons:a,callback:o})=>{const l=(0,s.useDispatch)(),c=(0,n.useCallback)(()=>{l(v(r,t)),null==o||o()},[r,t,l]);return n.default.createElement(u.Button,{variant:"opacity",onClick:c,withIconLeft:a?null:e,disabled:!1,"data-campaigns-element-id":"action-bar-edit-button","data-tooltip":"action-bar-edit-button"},i)});_.displayName="EditFullscreenRenderButton";i.getEditPluginFullscreenActionDefinitions=(0,r.defaultMemoize)((e,i)=>(({editFullscreenPlugins:e,fileViewerId:i})=>Object.entries(e).map(([e,t])=>{const r=n.default.createElement(d.UIIcon,{src:t.buttonIcon});return{overflowItem:n.default.createElement(f,{icon:r,label:t.buttonText,pluginId:e,fileViewerId:i,callback:t.onActivate}),renderButton:a=>n.default.createElement(_,{hideIcons:a,icon:r,label:t.buttonText,pluginId:e,fileViewerId:i,callback:t.onActivate}),id:"FULLSCREEN_ACTION"}}))({editFullscreenPlugins:Object.entries(e).reduce((e,[i,t])=>(0,a.isEditPluginFullscreenInstance)(t)?Object.assign(Object.assign({},e),{[i]:t}):e,{}),fileViewerId:i}))})),define("typescript/libraries/file-viewer/src/plugins/navigation",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/plugins/selectors/file","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/transcript_blade/utils","typescript/libraries/file-viewer/src/core/riviera/types"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeNavigation=void 0;i.makeNavigation=({store:i,fileViewerId:d,reinitializeFileViewer:u,exitPluginEditMode:p,hideContentPane:v,updatePreviewMetadata:f,setPluginActivationParams:_,showAuthModal:g,canCloseViewer:m})=>({fileFlipping:{flipToNextFile(e){const t=(0,n.getCurrentPreviewKey)(i.getState(),d);null!=t&&i.dispatch((0,a.flipToNextFile)({fileViewerId:d,previewKey:t,sourceContext:e}))},flipToPreviousFile(e){const t=(0,n.getCurrentPreviewKey)(i.getState(),d);null!=t&&i.dispatch((0,a.flipToNextFile)({fileViewerId:d,previewKey:t,sourceContext:e}))}},navigateToPage(e,t){const s=(0,n.getCurrentPreviewKey)(i.getState(),d);null!=s&&(i.dispatch((0,a.updateDocCurrentPageIndex)({fileViewerId:d,previewKey:s,pageIndex:e,sourceContext:t})),i.dispatch((0,a.pageNavigation)({fileViewerId:d,previewKey:s,sourceContext:r.UserActionContext.RightRail,pageIndex:e})))},closeRightRail(e){i.dispatch((0,a.closeRightRail)({fileViewerId:d,sourceContext:e}))},openRightRail(e){i.dispatch((0,a.openRightRail)({fileViewerId:d,sourceContext:e}))},getActiveRightRailPluginId:()=>(0,s.getSelectedRightRailPluginId)(i.getState(),d),openUrl({url:e,fallbackUrl:t}){i.dispatch((0,a.openUrl)({url:e,fallbackUrl:t}))},reinitializeFileViewer(e){u(e)},exitEditMode(){p()},setActiveEditPlugin(e,t,r){r&&_(r),i.dispatch((0,a.setActiveEditPlugin)({fileViewerId:d,pluginId:e,sourceContext:t}))},hideContentPane(e){v(e)},updatePreviewMetadata(e,i){f(e,i)},startToolbarRename(){i.dispatch((0,a.setToolbarRenameActive)({isActive:!0}))},setDeleteFileModalOpen(e){i.dispatch((0,a.setDeleteFileModalOpen)({isOpen:e}))},seek(e){i.dispatch((0,a.requestVideoSeek)({time:e}))},seekRelative(e){i.dispatch((0,a.requestVideoSeekRelative)({delta:e}))},pause(){i.dispatch((0,a.requestVideoPause)())},generateTranscript(r,s){return t.__awaiter(this,void 0,void 0,(function*(){const c=(0,n.getCurrentPreviewKey)(i.getState(),d);if(!c)return!1;const u=(0,o.getPreviewMetadata)(i.getState(),c),p=(0,l.getTranscriptPermission)(u),v=(0,o.getVideoTranscriptData)(i.getState(),c);if(!(0,l.shouldGenerateTranscript)(p,v))return!1;i.dispatch((0,a.startTranscriptGenerating)({previewKey:c}));const{submitFileWorkflowAction:f}=yield new Promise((i,t)=>{e(["typescript/libraries/api_v2/redux/flows"],i,t)}).then(t.__importStar);return i.dispatch(f({arg:{template:{sequence:[{workflow_action:{".tag":"transcribe_media"}}]},file_ids:[s]}},{subjectUserId:r})),!0}))},fetchCachedTranscript(){var e;const t=(0,n.getCurrentPreviewKey)(i.getState(),d);if(!t)return;const r=(0,o.getPreviewMetadata)(i.getState(),t);"video"===(null===(e=null==r?void 0:r.content)||void 0===e?void 0:e[".tag"])&&r.content.transcript_url&&i.dispatch((0,a.fetchTranscriptData)({url:r.content.transcript_url,previewKey:t}))},setOptInToVideoTranscript(){return t.__awaiter(this,void 0,void 0,(function*(){i.dispatch((0,a.setOptInToVideoTranscript)({fileViewerId:d,onSuccess:u}))}))},setTranscriptError(e){const t=(0,n.getCurrentPreviewKey)(i.getState(),d);if(!t)return;const r=new c.TranscriptRivieraError(e);i.dispatch((0,a.setTranscriptError)({previewKey:t},r))},openVideoEditor(){i.dispatch((0,a.editVideoAction)({fileViewerId:d,sourceContext:r.UserActionContext.TitleBarMain}))},toggleVideoFrameSteppers(e){i.dispatch((0,a.toggleVideoFrameSteppers)({fileViewerId:d,enabled:e}))},overrideFloatingToolbar(e,t){i.dispatch((0,a.overrideFloatingToolbar)({fileViewerId:d,state:t,pluginId:e}))},navigateToPath(e){i.dispatch((0,a.openFileURL)({fqPath:e}))},showAuthModal:g,canCloseViewer:m,openRightRailPlugin(e,t){null!=(0,n.getCurrentPreviewKey)(i.getState(),d)&&(i.dispatch((0,a.openRightRail)({fileViewerId:d,sourceContext:e})),i.dispatch((0,a.setActiveRightRailPlugin)({fileViewerId:d,sourceContext:e,pluginId:t})))},setHasShownTranscriptSettingModal(){const e=(0,n.getCurrentPreviewKey)(i.getState(),d);e&&i.dispatch((0,a.setHasShownTranscriptSettingModal)({fileViewerId:d,previewKey:e}))},setIsTranscriptShowing(e){const t=(0,n.getCurrentPreviewKey)(i.getState(),d);t&&i.dispatch((0,a.setIsTranscriptShowing)({fileViewerId:d,previewKey:t,showing:e}))}})})),define("typescript/libraries/file-viewer/src/plugins/props",["require","exports","typescript/libraries/file-viewer/src/plugins/selectors/ui","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePluginControlProps=i.makePluginProps=void 0,i.makePluginProps=function(e,i,a,n){if(!a||!n)return null;switch(a.previewType){case r.PreviewType.CloudDoc:case r.PreviewType.SsrDoc:return(function(e,i,r,a){const n=(0,t.getDocUiProps)(i,e);return null!=r.file&&null!=n?Object.assign(Object.assign({},r),{file:r.file,ui:n,queries:a.getHandlers()}):null})(i,e,a,n);case r.PreviewType.Image:return(function(e,i,r){const a=(0,t.getImageUiProps)(i,e);return null!=r.file&&null!=a?Object.assign(Object.assign({},r),{file:r.file,ui:a,queries:{}}):null})(i,e,a);case r.PreviewType.Audio:case r.PreviewType.Video:return(function(e,i,r,a){const n=(0,t.getAudioVideoUiProps)(i,e);return null!=r.file&&null!=n?Object.assign(Object.assign({},r),{file:r.file,ui:n,queries:a.getHandlers()}):null})(i,e,a,n);case r.PreviewType.Archive:return(function(e,i,r){const a=(0,t.getArchiveUiProps)(i,e);return null!=r.file&&null!=a?Object.assign(Object.assign({},r),{file:r.file,ui:a,queries:{}}):null})(i,e,a);case r.PreviewType.Loading:case r.PreviewType.Error:return(function(e,i,r){const a=(0,t.getUnsupportedFileUiProps)(i,e);return null!=r.file?Object.assign(Object.assign({},r),{file:r.file,ui:a,queries:{}}):null})(i,e,a);default:return(function(e,i,r){const a=(0,t.getUnsupportedFileUiProps)(i,e);return null!=r.file&&null!=a?Object.assign(Object.assign({},r),{file:r.file,ui:a,queries:{}}):null})(i,e,a)}},i.makePluginControlProps=function(e,i,r,a){if(!r||!a)return;const n=(0,t.getControlUiProps)(e,i,r.previewType);return Object.assign(Object.assign({},r),{ui:n,queries:a.getHandlers()})}})),define("typescript/libraries/file-viewer/src/plugins/queries",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PluginQueryBus=void 0;i.PluginQueryBus=class{constructor(e){this.handlerChain=[],this.defaultHandlers=e,this.resolvedHandlers=this.resolveHandlers()}getHandlers(){return this.resolvedHandlers}handleQuery(e,i){this.handlerChain.push([e,i]),this.resolvedHandlers=this.resolveHandlers()}unhandleQuery(e,i){const t=this.handlerChain.findIndex(([t,r])=>t===e&&r===i);if(null==t)throw new Error("Attempted to unregister query handlers that are not registered");this.handlerChain.splice(t),this.resolvedHandlers=this.resolveHandlers()}resolveHandlers(){return this.handlerChain.reduce((e,[i,t])=>Object.assign(Object.assign({},e),{[i]:t}),this.defaultHandlers)}}})),define("typescript/libraries/file-viewer/src/plugins/selectors/file",["require","exports","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/utils"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getCurrentPreviewKey=i.getCurrentFileId=i.getCurrentCommonFile=i.getCurrentArchiveFile=i.getCurrentAudioVideoFile=i.getCurrentDocFile=i.getCurrentImageFile=i.getCurrentBaseFile=void 0;class a extends Error{constructor(e,i){super(`Expected ${e} to be of type ${i}, but it is not`)}}i.getCurrentBaseFile=(e,i)=>{const{currentFileInfo:t,fileMetadata:r}=e,a=t[i];if(null==a)return null;const{file_id:n,ns_id:s,sj_id:o,url:l}=a;if(null==n||null==s||null==o)return null;const c=r[a.previewKey.serialized];if(null==c)return null;const{file_name:d,file_path:u,file_last_modified_date:p,size:v}=c;return{fileId:n,lastModifiedDate:p,name:d,nsId:s,fqPath:u,sjId:o,url:l,size:v,previewKey:a.previewKey}};i.getCurrentImageFile=(e,i,a)=>{var n;const s=e.previewData[i.previewKey.serialized],o=null===(n=(0,t.getFileContentMetadata)(e,i.previewKey))||void 0===n?void 0:n.metadata,l="image"===(null==o?void 0:o[".tag"])?o:null,c=(0,r.filterDimensionsFilePreviewUiState)((0,t.getFilePreviewUi)(e,a,i.previewKey));return Object.assign(Object.assign({},i),{dimensions:(null==s?void 0:s.dimensions)||(null==c?void 0:c.dimensions),contentMetadata:l})};i.getCurrentDocFile=(e,i,n)=>{var s;const o=e.rivieraData[i.previewKey.serialized];if(null==o||0===Object.getOwnPropertyNames(o).length)return null;if(!("pages"in o))throw new a("rivieraData","DocPreviewMetadata");const l=null===(s=(0,t.getFileContentMetadata)(e,i.previewKey))||void 0===s?void 0:s.metadata,c="ms_office"===(null==l?void 0:l[".tag"])||"pdf"===(null==l?void 0:l[".tag"])?l:null,d=(0,t.getFilePreviewUi)(e,n,i.previewKey),u=(0,r.filterDocFilePreviewUiState)(d);return Object.assign(Object.assign({},i),{pages:o.pages.map(({dimension:[e,i],pageIndex:t})=>({pageIndex:t,dimensions:{width:e,height:i}})),contentMetadata:c,isPasswordProtected:!!(null==u?void 0:u.isPasswordProtected)})};i.getCurrentAudioVideoFile=(e,i)=>{var r;const a=null===(r=(0,t.getFileContentMetadata)(e,i.previewKey))||void 0===r?void 0:r.metadata,n="audio"===(null==a?void 0:a[".tag"])||"video"===(null==a?void 0:a[".tag"])?a:null,s=(0,t.getVideoTranscriptData)(e,i.previewKey),o=(0,t.getVideoClosedCaptionsData)(e,i.previewKey);return Object.assign(Object.assign({},i),{contentMetadata:n,transcript:s,closedCaptions:o})};i.getCurrentArchiveFile=(e,i)=>Object.assign(Object.assign({},i),{contentMetadata:null});i.getCurrentCommonFile=(e,i)=>Object.assign(Object.assign({},i),{contentMetadata:null});i.getCurrentFileId=(e,i)=>{const r=(0,t.getCurrentFile)(e,i);if(null!=r)return r.file_id};i.getCurrentPreviewKey=(e,i)=>{const r=(0,t.getCurrentFile)(e,i);if(null!=r)return r.previewKey}})),define("typescript/libraries/file-viewer/src/plugins/selectors/ui",["require","exports","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t,r,a){"use strict";function n(e,i){var t,a;const n=null===(t=(function(e,i){return(0,r.getCurrentFile)(e,i)||null})(e,i))||void 0===t?void 0:t.previewKey;return e.filePreviewUi[i]&&n?null===(a=e.filePreviewUi[i])||void 0===a?void 0:a[n.serialized]:void 0}function s(e,i){return{isRightRailVisible:!!(0,r.isRightRailOpen)(e,i)}}function o(e,i){const a=n(e,i);if(null==a)return null;const s=(0,t.filterZoomableFilePreviewUi)(a);return null==s?null:{scaleFactor:(0,r.getCurrentScaleFactorFromFilePreviewUi)(s)}}function l(e,i){var r,a;const l=s(e,i);if(null==l)return null;const c=o(e,i);if(null==c)return null;const d=n(e,i);if(null==d)return null;const u=null!==(a=null===(r=(0,t.filterDocFilePreviewUiState)(d))||void 0===r?void 0:r.currentPageIndex)&&void 0!==a?a:null;if(null==u)return null;const p=e.fileViewerUi[i],v=!!p&&p.isDocSidebarOpen;return Object.assign(Object.assign(Object.assign({},l),c),{currentPageIndex:u,isNavBarVisible:v})}function c(e,i){const t=s(e,i);if(null==t)return null;const r=o(e,i);return null==r?null:Object.assign(Object.assign({},t),r)}function d(e,i){return s(e,i)}function u(e,i){return{isRightRailVisible:!!(0,r.isRightRailOpen)(e,i)}}Object.defineProperty(i,"__esModule",{value:!0}),i.getControlUiProps=i.getUnsupportedFileUiProps=i.getArchiveUiProps=i.getAudioVideoUiProps=i.getImageUiProps=i.getDocUiProps=void 0,i.getDocUiProps=l,i.getImageUiProps=c,i.getAudioVideoUiProps=function(e,i){const r=s(e,i);if(null==r)return null;const a=n(e,i);if(null==a)return null;const o=(0,t.filterAudioVideoFilePreviewUiState)(a);if(null==o)return null;const{currentTimestamp:l,isPlaying:c,hasShownTranscriptSettingModal:d}=o;return Object.assign(Object.assign({},r),{currentTimestamp:l,isPlaying:c,hasShownTranscriptSettingModal:d})},i.getArchiveUiProps=function(e,i){return s(e,i)},i.getUnsupportedFileUiProps=d,i.getControlUiProps=function(e,i,t){switch(t){case a.PreviewType.SsrDoc:case a.PreviewType.CloudDoc:{const t=l(e,i);return null!=t?t:u(e,i)}case a.PreviewType.Image:{const t=c(e,i);return null!=t?t:u(e,i)}default:{const t=d(e,i);return null!=t?t:u(e,i)}}}})),define("typescript/libraries/file-viewer/src/preview_archive/utils",["require","exports","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/api_v2/redux/previews","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getArchiveFiles=i.getFiles=i.transformArchiveEntriesToFiles=i.queryStringValueToArchiveCurrentPath=i.archiveCurrentPathToQueryStringValue=void 0,i.archiveCurrentPathToQueryStringValue=function(e){return 0===e.length?null:`/${e.join("/")}`},i.queryStringValueToArchiveCurrentPath=function(e){return null===e?[]:e.split("/").slice(1)},i.transformArchiveEntriesToFiles=function(e,i,t,r,n){return e.map(e=>({uniqueKey:e.name,title:e.name,isFolder:!!e.isDir,extension:e.name.split(".").pop(),sizeInBytes:e.size,performOpenAction:()=>{i((0,a.updateArchiveFileCurrentPath)({currentPath:[...t,e.name],fileViewerId:r,previewKey:n,isDir:!!e.isDir}))}}))},i.getFiles=function(e){return e.filter(e=>!e.isDir)},i.getArchiveFiles=function(e,i,a,n,s){if(!i.length)return;const o={file_id:a.file_id,ns_id:a.ns_id,sj_id:a.sj_id,url:a.url},l=a.file_id,c=i.map(i=>(0,t.getSubpath)([...e,i.name]));n(s?(0,r.getArchiveFilesAction)({arg:{root_file_info:o,subpaths:c}},{rootFileId:l}):(0,r.loggedOutGetArchiveFilesAction)({arg:{root_file_info:o,subpaths:c}},{rootFileId:l}))}})),define("typescript/libraries/file-viewer/src/preview_error/error_boundary",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/preview_error/preview_error"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ErrorBoundary=void 0,r=t.__importDefault(r);class c extends r.default.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){var i,t;this.props.reportException({error:e,fileType:(null===(t=null===(i=this.props.previewMetadata)||void 0===i?void 0:i.content)||void 0===t?void 0:t[".tag"])||"other",isCritical:!0})}render(){return this.state.hasError?r.default.createElement(l.PreviewRenderError,Object.assign({},this.props,{error:new o.FVError(o.FVErrorCode.Unknown)})):this.props.children}}c.displayName="UnconnectedErrorBoundary";const d={reportException:n.reportException};i.ErrorBoundary=(0,a.connect)((e,i)=>({previewMetadata:(0,s.getPreviewMetadata)(e,i.previewKey)}),d)(c)})),define("typescript/libraries/file-viewer/src/core/middlewares/tab_selection_handler",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.tabSelectionHandler=void 0;i.tabSelectionHandler=({dispatch:e,getState:i})=>s=>o=>{if(s(o),o.type!==t.Action.SwitchWorkbookTab)return;const{previewKey:l,fileViewerId:c,tabIndex:d}=o.payload;if((0,a.isNestedArchiveFilePreviewKey)(l))return;const u=i(),p=(0,n.getPreviewMetadata)(u,l),v=(0,n.getRivieraData)(u,l);if(null==p||!(0,r.isExcelApiV2MetadataContent)(p.content))return;if(null==v||!(0,r.isExcelPreviewRivieraData)(v))return;const{workbook_data_url_tmpl:f}=p.content;if(null!=v.sheets){const i=v.sheets[d];null!=i&&"errored"!==i.state||e((0,t.fetchExcelSheetLayoutData)({previewKey:l,fileViewerId:c,sheetIndex:d,workbookDataUrlTmpl:f}))}}})),define("typescript/libraries/file-viewer/src/renderer",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/app.module.css","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/utils","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n,s,o,l,c,d,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewRenderer=i.LoadingPlaceholder=i.PreviewError=i.Preview=void 0,r=t.__importStar(r),a=t.__importDefault(a),n=t.__importStar(n);i.Preview=e=>{var i,t;const{children:s,className:o}=e,l=e.__window||"undefined"!=typeof window?window:void 0,c=e.viewport||("undefined"!=typeof document?document.documentElement:void 0),[d,u]=r.useState({width:null!==(i=null==c?void 0:c.clientWidth)&&void 0!==i?i:0,height:null!==(t=null==c?void 0:c.clientHeight)&&void 0!==t?t:0}),p=r.useCallback(()=>{c&&u({width:c.clientWidth,height:c.clientHeight})},[]);return r.useEffect(()=>{p()},[]),r.useEffect(()=>{if(l)return l.addEventListener("resize",p),()=>l.removeEventListener("resize",p)},[p]),r.createElement("div",{className:(0,a.default)(n.container,o),style:d,id:"fvsdk-container"},null==s?void 0:s(d))},i.Preview.displayName="Preview",i.PreviewError=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewRenderError:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_error/preview_error"],i,t)}).then(t.__importStar);return{default:i}})));i.LoadingPlaceholder=()=>null,i.LoadingPlaceholder.displayName="LoadingPlaceholder";const p=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewImage:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_image/preview_image"],i,t)}).then(t.__importStar);return{default:i}}))),v=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewAudioVideo:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_audio_video/preview_video"],i,t)}).then(t.__importStar);return{default:i}}))),f=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewDoc:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_doc/renderer/preview_doc"],i,t)}).then(t.__importStar);return{default:i}}))),_=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewCloudDoc:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_cloud_doc/preview_cloud_doc"],i,t)}).then(t.__importStar);return{default:i}}))),g=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewExcelViewOnlyEmbed:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_excel/ms_embed/view_only_embed"],i,t)}).then(t.__importStar);return{default:i}}))),m=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewExcel:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_excel/renderer"],i,t)}).then(t.__importStar);return{default:i}}))),w=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewHTML:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_html/preview_html"],i,t)}).then(t.__importStar);return{default:i}}))),b=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewArchive:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_archive/preview_archive"],i,t)}).then(t.__importStar);return{default:i}}))),h=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewLinkfile:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_linkfile/preview_linkfile"],i,t)}).then(t.__importStar);return{default:i}})));i.PreviewRenderer=e=>{var{pluginProps:a}=e,n=t.__rest(e,["pluginProps"]);const y=(0,d.usePreviewKeySelector)(n.previewKey,u.getFileMetadata),S=(0,d.usePreviewKeySelector)(n.previewKey,u.getPreviewMetadata),E=(0,l.resolvePreviewType)(S),P=n.previewKey;return r.createElement(r.Suspense,{fallback:r.createElement(i.LoadingPlaceholder,null)},(()=>{var e;switch(E){case s.PreviewType.Image:return r.createElement(p,Object.assign({},n,{pluginProps:a,key:P.serialized}));case s.PreviewType.SsrDoc:case s.PreviewType.CloudDoc:return(0,c.getCloudDocExitUrl)(S)?r.createElement(_,Object.assign({},n,{pluginProps:a,key:P.serialized})):(null===(e=null==y?void 0:y.file_name)||void 0===e?void 0:e.endsWith(".gsheet"))?r.createElement(w,Object.assign({},n,{pluginProps:a,isRawHtml:!0,key:P.serialized})):r.createElement(f,Object.assign({},n,{pluginProps:a,key:P.serialized}));case s.PreviewType.Video:case s.PreviewType.Audio:return r.createElement(v,Object.assign({},n,{isAudio:E===s.PreviewType.Audio,pluginProps:a,key:P.serialized}));case s.PreviewType.Excel:if("ms_view_embed"===n.config.excel_support.embed_support)return r.createElement(g,Object.assign({},n,{pluginProps:a,key:P.serialized}));if("excel1"===n.config.excel_support.support)return r.createElement(w,Object.assign({},n,{pluginProps:a,isRawHtml:!1,key:P.serialized}));if("excel2"===n.config.excel_support.support)return r.createElement(m,Object.assign({},n,{pluginProps:a,key:P.serialized}));break;case s.PreviewType.HTML:case s.PreviewType.RawHTML:return r.createElement(w,Object.assign({},n,{pluginProps:a,isRawHtml:E===s.PreviewType.RawHTML,key:P.serialized}));case s.PreviewType.Archive:return r.createElement(b,Object.assign({},n,{pluginProps:a,key:P.serialized}));case s.PreviewType.Linkfile:return r.createElement(h,Object.assign({},n,{pluginProps:a,key:P.serialized}))}return r.createElement(i.PreviewError,Object.assign({error:new o.FVError(o.FVErrorCode.UnsupportedPreviewType)},n))})())},i.PreviewRenderer.displayName="PreviewRenderer",i.PreviewRenderer.displayName="PreviewRenderer"})),define("typescript/libraries/file-viewer/src/render_context",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewerRenderContextProvider=i.useFileViewerRenderContext=void 0;const a=(r=t.__importStar(r)).createContext(null);a.displayName="FileViewerRenderContext";i.useFileViewerRenderContext=()=>r.useContext(a),i.FileViewerRenderContextProvider=a.Provider})),define("typescript/libraries/file-viewer/src/right_rail/edit_plugin_sidebar",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/right_rail/right_rail.module.css"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.EditPluginSidebar=void 0,r=t.__importDefault(r),o=t.__importStar(o);i.EditPluginSidebar=({Sidebar:e,fileViewerId:i,pluginNavigation:t,pluginQueryBus:l})=>{const c=(0,a.useSelector)(e=>(0,n.getPluginData)(e,{fileViewerId:i,navigation:t})),d=(0,a.useSelector)(e=>(0,s.makePluginProps)(e,i,c,l));return d?r.default.createElement("div",{className:o.editPluginContainer},r.default.createElement(e,Object.assign({},d))):null},i.EditPluginSidebar.displayName="EditPluginSidebar"})),define("typescript/libraries/file-viewer/src/titlebar/help_menu",["require","exports","tslib","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/menu","react","react-intl"],(function(e,i,t,r,a,n,s,o,l){"use strict";var c;Object.defineProperty(i,"__esModule",{value:!0}),i.HelpMenu=void 0,o=t.__importDefault(o),(function(e){e[e.HELP=0]="HELP",e[e.REPORT=1]="REPORT",e[e.PRIVACY=2]="PRIVACY",e[e.COOKIES=3]="COOKIES"})(c||(c={})),i.HelpMenu=o.default.memo(()=>{const e=(0,l.useIntl)(),i=document.getElementById("consent-iframe"),t=e.formatMessage({id:"yXlaNs",defaultMessage:"Help"});return o.default.createElement(s.Menu.Wrapper,{onSelection:e=>{var t;const r=window.location&&encodeURIComponent(window.location.href),a={[c.HELP]:"https://help.dropbox.com/",[c.REPORT]:`/report_abuse?ssu=${r}`,[c.PRIVACY]:"/privacy"};if(e===c.COOKIES)return null===(t=i.contentWindow)||void 0===t?void 0:t.postMessage({message_type:"OPEN_OPTIONS_DIALOG"},"https://consent.dropbox.com/");const n=a[e];window.open(n)}},({getTriggerProps:l,getContentProps:d})=>o.default.createElement(o.default.Fragment,null,o.default.createElement(r.IconButton,Object.assign({},l(),{variant:"transparent","aria-label":t}),o.default.createElement(n.UIIcon,{src:a.HelpLine})),o.default.createElement(s.Menu.Content,Object.assign({},d()),o.default.createElement(s.Menu.Segment,null,o.default.createElement(s.Menu.ActionItem,{value:c.HELP,key:c.HELP},e.formatMessage({id:"AIqtl8",defaultMessage:"Help center"})),o.default.createElement(s.Menu.ActionItem,{value:c.PRIVACY,key:c.PRIVACY},e.formatMessage({id:"dCY8w0",defaultMessage:"Privacy and legal"})),i&&o.default.createElement(s.Menu.ActionItem,{value:c.COOKIES,key:c.COOKIES},e.formatMessage({id:"jnuJZG",defaultMessage:"Cookie & CCPA preferences"})),o.default.createElement(s.Menu.ActionItem,{value:c.REPORT,key:c.REPORT},e.formatMessage({id:"ivV9/Z",defaultMessage:"Report an issue"}))))))}),i.HelpMenu.displayName="HelpMenu",i.HelpMenu.displayName="HelpMenu"})),define("typescript/libraries/file-viewer/src/utils",["require","exports","tslib","react-intl","react","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/plugins/types","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/loading_helpers","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getCloudDocExitUrl=i.maybePreloadFile=i.maybePreloadFiles=i.calcResponsiveSize=i.getRootName=i.extractSnackbarManagerFromPlugins=i.extractToolbarComponents=i.extractActionDefinitionsFromPlugins=i.extractActionsFromPlugins=i.CategoryButton=i.GENERIC_CATEGORY_PLUGIN_ID=void 0,a=t.__importStar(a),i.GENERIC_CATEGORY_PLUGIN_ID="GENERIC_CATEGORY_PLUGIN_ID";const m=e=>({actionType:c.ActionBarActionTypes.CUSTOM_ACTION,id:e.id,text:(0,r.defineMessage)({id:"C2s323",defaultMessage:"Blank"}),icon:a.default.createElement("div",null),isEnabled:!0,renderButton:e.renderButton,overflowItem:e.overflowItem,placement:e.placement}),w=(e,i)=>{const{alwaysAtTopLevel:t,atTopLevelIfSpace:r,alwaysInOverflow:a}=i,n=(e=[],i=[])=>[...e,...i];return{alwaysAtTopLevel:n(e.alwaysAtTopLevel,null==t?void 0:t.map(m)),atTopLevelIfSpace:n(e.atTopLevelIfSpace,null==r?void 0:r.map(m)),alwaysInOverflow:((e=[],i=[])=>{var t,r;const a=[];for(let n=0;n<e.length||n<i.length;n++)a[n]=[...null!==(t=e[n])&&void 0!==t?t:[],...null!==(r=i[n])&&void 0!==r?r:[]];return a})(e.alwaysInOverflow,null==a?void 0:a.map(e=>e.map(m)))}},b=(e,i)=>Object.assign(Object.assign({},e),{[i.identifier]:i.toolbarUI}),h={workflows:(0,r.defineMessage)({id:"6BWuNX",defaultMessage:"Workflows"})},y={workflows:l.MemberTransferLine};i.CategoryButton=({category:e,children:i,hideIcons:t})=>{const l=(0,r.useIntl)(),c=h[e],d=y[e],u=(0,a.useCallback)(e=>{null==e||e.handler()},[]);return a.default.createElement(n.Menu.Wrapper,{onSelection:u},({getTriggerProps:r,getContentProps:u})=>a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Button,Object.assign({},r(),{variant:"opacity",withIconLeft:t?null:a.default.createElement(o.UIIcon,{src:d}),withDropdownIcon:!0,className:e+"-menu-button","data-testid":e+"-menu-button"}),l.formatMessage(c)),a.default.createElement(n.Menu.Content,Object.assign({},u()),a.default.createElement(n.Menu.Segment,null,i))))},i.CategoryButton.displayName="CategoryButton";const S=({category:e,children:i})=>{const t=(0,r.useIntl)(),s=h[e],l=y[e];return a.default.createElement(n.Menu.Submenu,{withTriggerContent:t.formatMessage(s),withLeftAccessory:a.default.createElement(o.UIIcon,{src:l})},a.default.createElement(n.Menu.Segment,null,i))};S.displayName="CategorySubmenu";const E=(e,t,r)=>{var n,s,o,l;const c=[];if(e.workflows&&e.workflows.length>0){const t=((e,t)=>{const r=t.map(e=>e.overflowItem?a.default.createElement(a.default.Fragment,{key:e.id},e.overflowItem):null).filter(e=>null!==e);if(0===r.length)return;const n=a.default.createElement(S,{category:e},r);return m({id:i.GENERIC_CATEGORY_PLUGIN_ID,renderButton:t=>a.default.createElement(i.CategoryButton,{category:e,hideIcons:t},r),overflowItem:n})})("workflows",e.workflows);void 0!==t&&c.push(t)}const d=t.map(m),u=(null!==(n=r.atTopLevelIfSpace)&&void 0!==n?n:[]).length,p=null!==(l=null===(o=null!==(s=r.alwaysInOverflow)&&void 0!==s?s:[])||void 0===o?void 0:o[0])&&void 0!==l?l:[],v=p.slice(0,u),f=p.slice(u),_=[...v,...d,...c,...f],g=[],w=[],b=[...r.atTopLevelIfSpace||[],...d];for(const e of b)"RightOfCategoryButtons"===e.placement?g.push(e):w.push(e);const h=[...w,...c,...g];return Object.assign(Object.assign({},r),{atTopLevelIfSpace:h,alwaysInOverflow:[_]})};i.extractActionsFromPlugins=function(e,i){const t=e.reduce(w,{}),r=e.reduce((e,i)=>((e,i)=>{var t,r;const a=e;let n;for(n in i){const s=null!==(t=e[n])&&void 0!==t?t:[],o=null!==(r=i[n])&&void 0!==r?r:[];a[n]=[...s,...o]}return a})(e,i.categories||{}),{});return E(r,i,t)},i.extractActionDefinitionsFromPlugins=function(e){return e.filter(e=>(0,d.isActionBarPlugin)(e)).map(e=>e.actionDefinitions())},i.extractToolbarComponents=function(e){return e.filter(e=>(0,d.isToolbarPlugin)(e)).reduce(b,{})},i.extractSnackbarManagerFromPlugins=function(e){return Object.values(e).find(d.isSnackbarManagerPlugin)};i.getRootName=function(e){return"work"===e.role&&e.team?e.team.name:e.is_paired?"Personal":"Dropbox"};function P(e,i){const t=(0,v.resolvePreviewType)(e),r=e.content;if(!r)return Promise.resolve();if(t===g.PreviewType.Image&&"image"===r[".tag"]){if(!r.default_src)return Promise.resolve();if(r.src_set&&e.dimensions&&i){const{sizeScale:t}=(0,_.getApproximateImageDisplaySize)(e.dimensions,i);return(0,f.preloadImage)(r.default_src,{srcset:r.src_set,sizes:`${t}vw`})}return(0,f.preloadImage)(r.default_src,{srcset:r.src_set})}return Promise.resolve()}i.calcResponsiveSize=function(e){return(0,p.is_mobile_or_tablet)()?e>1026?u.ResponsiveSize.DESKTOP:e<=736?u.ResponsiveSize.MOBILE:u.ResponsiveSize.TABLET:e>736?u.ResponsiveSize.DESKTOP:e<=428?u.ResponsiveSize.MOBILE:u.ResponsiveSize.TABLET},i.maybePreloadFiles=function(e,i,t){const r=[];if(0===e.length)return Promise.all(r);const a=[];return[1,2,3,4,5,6,-1,-2].forEach((function(t){const r=(i+t+e.length)%e.length;-1===a.indexOf(r)&&a.push(r)})),a.forEach((function(i){if(e.length>i&&i>0){const a=e[i];a&&r.push(P(a,t))}})),Promise.all(r)},i.maybePreloadFile=P;i.getCloudDocExitUrl=e=>{var i,t;const r=(0,v.resolvePreviewType)(e);if((r===g.PreviewType.SsrDoc||r===g.PreviewType.CloudDoc)&&"cloud_doc"===(null===(i=null==e?void 0:e.content)||void 0===i?void 0:i[".tag"])&&(null===(t=null==e?void 0:e.content)||void 0===t?void 0:t.exit_url))return e.content.exit_url}})),define("typescript/libraries/file-viewer/src/watermarking/edit_plugin/loader",["require","exports","tslib","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/watermarking/utils"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeWatermarkLoader=i.WATER_MARKING_PLUGIN_ID=void 0,i.WATER_MARKING_PLUGIN_ID="water_marking";i.makeWatermarkLoader=(n,s)=>({pluginId:i.WATER_MARKING_PLUGIN_ID,isEnabled:e=>{const i=e.getPluginData().file;return!!i&&(0,a.isSupportedPreviewType)((0,r.getFileExtension)(i.name))},load:(i,r)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeStore:a}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/watermarking/plugin/redux/store"],i,t)}).then(t.__importStar),{WatermarkingPlugin:o}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/watermarking/edit_plugin/plugin"],i,t)}).then(t.__importStar),l=a({platformAdapter:i,logger:n,onWatermarkingSuccessHandler:s});return new o(i,r,l)}))})})),define("typescript/libraries/file-viewer/src/watermarking/utils",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.isSupportedPreviewType=void 0;const t=[".pdf",".jpg",".jpeg",".png",".bmp"];i.isSupportedPreviewType=e=>t.includes(e)})),define("typescript/libraries/file-viewer/src/titlebar/title_bar",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css","classnames","typescript/component_libraries/retrieval-components/src/simple-action-bar/index","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/titlebar/help_menu","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/titlebar/close_button","typescript/libraries/file-viewer/src/titlebar/title","typescript/libraries/file-viewer/src/constants","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/ui/animations","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TitleBar=i.TITLE_BAR_BACK_AND_HELP_ICONS=void 0,r=t.__importStar(r),n=t.__importStar(n),s=t.__importDefault(s),i.TITLE_BAR_BACK_AND_HELP_ICONS=146;const b={handleAction:e=>{var i,t;e.type!==l.ActionBarActionTypes.OPEN&&e.type!==l.ActionBarActionTypes.CUSTOM_ACTION||null===(t=null===(i=e.menuItem)||void 0===i?void 0:i.handler)||void 0===t||t.call(i)}};i.TitleBar=r.memo(e=>{(0,d.useMarkTimingEventOnMount)(d.PreviewsTimingEvents.FVSDK_TITLE_BAR_MOUNT);const{actions:t,waffle:h,actionBar:y,rightSection:S}=e,E=(0,a.useIntl)(),{fileViewerId:P,canCloseViewer:I,featureConfig:T}=(0,_.useFileViewerContext)(),{responsiveSize:C,width:A}=(0,g.useFileViewerRenderContext)(),O=T.titlebar_logo_config.base_url,F=(0,f.useCurrentPreviewKey)(P),k=C===l.ResponsiveSize.MOBILE,x=r.useRef(null),D=(0,f.useFileViewerSelector)(P,w.getIsEditingVideo),L=r.createElement(u.CloseButton,{previewKey:F,fileViewerId:P,baseUrl:O,canCloseViewer:I});let M;M=h?I?[L,h]:[h]:[L];const R=!k&&S?[r.createElement("div",{className:n.spacer,key:"spacer"}),S]:[];return void 0===t&&void 0===y?r.createElement("header",{className:n.titleBar}):r.createElement(r.Fragment,null,r.createElement("header",{className:(0,s.default)(n.titleBar),"data-testid":v.TITLE_BAR_TEST_ID},...M,null!=k?k:r.createElement(p.Title,{previewKey:F,fileViewerId:P,width:A-i.TITLE_BAR_BACK_AND_HELP_ICONS,isMobileSize:k}),y||t&&r.createElement(o.ActionBar,{intl:E,actionHandler:b,actions:t,responsive:!0,responsiveSize:C,className:k?n.actionBarMobile:n.actionBar,fixedWidth:k?40:void 0}),...R,r.createElement("div",{className:n.helpButton},r.createElement(c.HelpMenu,null))),r.createElement(m.OverlayAnimation,{nodeRef:x,active:D,mount:!0},r.createElement("div",{ref:x,className:(0,s.default)(n.overlay)})))}),i.TitleBar.displayName="TitleBar",i.TitleBar.displayName="TitleBar"})),define("typescript/libraries/file-viewer/src/titlebar/close_button",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css","dig-components/icons","dig-components/buttons","dig-components/icons/src","react-intl","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/titlebar/titlebar_logo"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CloseButton=void 0,r=t.__importStar(r),s=t.__importStar(s),i.CloseButton=r.memo(e=>{const{fileViewerId:i,previewKey:t,canCloseViewer:v,baseUrl:f}=e,_=(0,a.useDispatch)(),g=(0,d.useIntl)(),m=()=>{_((0,n.closeViewer)({fileViewerId:i,previewKey:t,sourceContext:u.UserActionContext.TitleBarMain}))};return v?r.createElement("span",{className:s.closeButton},r.createElement(l.IconButton,{onClick:m,variant:"transparent"},r.createElement(o.UIIcon,{"aria-label":g.formatMessage({id:"IDlWPW",defaultMessage:"Back"}),src:c.ChevronLeftLine}))):r.createElement(p.Logo,{previewKey:t,fileViewerId:i,dispatch:_,baseUrl:f})}),i.CloseButton.displayName="CloseButton",i.CloseButton.displayName="CloseButton"})),define("typescript/libraries/file-viewer/src/titlebar/title",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/titlebar/title_bar.module.css","dig-components/truncate","typescript/libraries/file-viewer/src/preview_archive/breadcrumbs","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Title=void 0,r=t.__importStar(r),n=t.__importStar(n),i.Title=r.memo(e=>{const{fileViewerId:i,previewKey:t,isMobileSize:c,width:d}=e,u=(0,a.useDispatch)(),p=(0,a.useSelector)(e=>(0,l.getFileMetadata)(e,t)),v=(0,a.useSelector)(e=>(0,l.getFilePreviewUi)(e,i,t));if(!p)return null;const f=null==v?void 0:v.currentPath,_=p.file_name||"";return r.createElement("div",{className:n.title,style:{maxWidth:d}},f&&f.length>0?r.createElement(o.ArchiveFileBreadcrumbs,{archiveName:_,currentPath:f,fileViewerId:i,previewKey:t,dispatch:u,isMobile:c}):r.createElement(s.Truncate,{location:.5},_))}),i.Title.displayName="Title",i.Title.displayName="Title"})),define("typescript/libraries/file-viewer/src/file_viewer/bootstrap",["require","exports","redux","typescript/libraries/file-viewer/src/core/data/reducer","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/api_v2/redux/previews","typescript/libraries/file-viewer/src/core/middlewares/riviera_data","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/core/middlewares/analytics","typescript/libraries/file-viewer/src/core/middlewares/ui_action_redispatcher","typescript/libraries/api_v2/redux/files","typescript/libraries/api_v2/redux/users","typescript/libraries/file-viewer/src/core/middlewares/file_system","typescript/libraries/file-viewer/src/core/middlewares/file_actions","typescript/libraries/file-viewer/src/core/middlewares/full_screen","typescript/libraries/file-viewer/src/core/middlewares/navigation","typescript/libraries/file-viewer/src/core/middlewares/print","typescript/libraries/file-viewer/src/core/middlewares/url","typescript/libraries/file-viewer/src/core/middlewares/cloud_docs","typescript/libraries/api_v2/redux/cloud_docs","typescript/libraries/api_v2/redux/seen_state","typescript/libraries/api_v2/redux/flows","typescript/libraries/api_v2/redux/sharing","typescript/libraries/file-viewer/src/file_viewer/file_viewer","typescript/libraries/file-viewer/src/file_viewer/types","typescript/libraries/file-viewer/src/core/middlewares/beacon_middleware","typescript/libraries/file-viewer/src/core/middlewares/tab_selection_handler","typescript/libraries/file-viewer/src/core/middlewares/preferences","typescript/libraries/file-viewer/src/core/middlewares/report_exception"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I,T,C,A){"use strict";function O(e){const i="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?(0,t.compose)((0,t.applyMiddleware)(...e),window.__REDUX_DEVTOOLS_EXTENSION__({name:"File Viewer SDK"})):(0,t.applyMiddleware)(...e);return(0,t.createStore)((0,t.combineReducers)(r.reducers),{},i)}Object.defineProperty(i,"__esModule",{value:!0}),i.createFileViewerFactory=i.createSDKStore=void 0,i.createSDKStore=O,i.createFileViewerFactory=function(e){var i,t;const{batteries:r,callbacks:F,featureConfig:k,initData:x,platformConfig:D,pluginLoaders:L}=e,{accountId:M,deviceType:R}=x||{},{optionalIOClients:N,coreIOClients:j,logger:V,intl:B}=r,{apiv2ClientBase:U}=j,{fileSystemClient:K,fileActionsClient:z,fullScreenClient:H,navigationClient:q,presenceBeaconIOClient:W,printClient:G,urlClient:Y,preferencesClient:Z,cloudDocsClient:X,reportExceptionClient:Q}=N,$=O([...q?[(0,_.middleware)(q)]:[],s.rivieraDataMiddleware,(0,n.middleware)(U.ns("previews")),(0,d.middleware)(U.ns("files")),(0,u.middleware)(U.ns("users")),c.uiActionRedispatcher,...Y?[(0,m.middleware)(Y)]:[],...W?[(0,I.beaconMiddleware)(W)]:[],(0,S.middleware)(U.ns("sharing")),...(null==k?void 0:k.excel_support)?[T.tabSelectionHandler]:[],...K?[(0,p.middleware)(K)]:[],...z?[(0,v.middleware)(z)]:[],...H?[(0,f.middleware)(H)]:[],...G?[(0,g.middleware)(G)]:[],(0,h.middleware)(U.ns("seen_state")),(0,y.middleware)(U.ns("flows")),...Z?[(0,C.preferencesMiddleware)(Z)]:[],...X?[(0,w.middleware)(X)]:[],..."ms_view_embed"===(null===(i=null==k?void 0:k.excel_support)||void 0===i?void 0:i.embed_support)?[(0,b.middleware)(U.ns("cloud_docs"))]:[],...Q?[(0,A.reportExceptionMiddleware)(Q)]:[],...V?[(0,l.analyticsMiddleware)(V)]:[]]);let J=o.DEFAULT_CONFIG;k&&(J=Object.assign(Object.assign({},J),k));const ee={callbacks:F,intl:B,store:$,accountId:M,showAuthModal:r.optionalIOClients.showAuthModal,canCloseViewer:!!(null===(t=r.optionalIOClients.navigationClient)||void 0===t?void 0:t.closeViewer),deviceType:R||a.DeviceType.desktop,config:J,platformConfig:Object.assign(Object.assign({},P.defaultPlatformConfig),D)},ie=null==L?void 0:L.filter(e=>null!=e);return{createFileViewer:()=>new E.SDKFileViewer(ee,U,ie,r)}}})),define("typescript/libraries/file-viewer/src/file_viewer/components",["require","exports","tslib","react","typescript/libraries/file-viewer/src/file_viewer/bootstrap","typescript/libraries/file-viewer/src/app"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewer=i.FileViewerInstance=i.FileViewerSDKContextProvider=i.FileViewerSDKContext=void 0,r=t.__importStar(r);i.FileViewerSDKContext=r.createContext(null);i.FileViewerSDKContextProvider=e=>{const{initData:t,featureConfig:n,children:s}=e,o=null==t?void 0:t.accountId,l=r.useMemo(()=>(0,a.createFileViewerFactory)(e),[n,o]);return r.createElement(i.FileViewerSDKContext.Provider,{value:l},s)},i.FileViewerSDKContextProvider.displayName="FileViewerSDKContextProvider";i.FileViewerInstance=e=>{const{initializeOpts:a,className:s,id:o,viewport:l,header:c,mobileFooter:d,mobileHeader:u,titlebar:p,folderPicker:v}=e,f=r.useContext(i.FileViewerSDKContext);if(!f)throw new Error("File Viewer SDK Context must be provided");const _=r.useMemo(()=>f.createFileViewer(),[f]);r.useEffect(()=>()=>{_.cleanup()},[_]);const[g,m]=r.useState(null),w=r.useRef(null);r.useEffect(()=>{a&&t.__awaiter(void 0,void 0,void 0,(function*(){yield _.initialize(a),m(_.getAppProps())}))},[a]);const b={header:c,mobileFooter:d,mobileHeader:u,titlebar:p,folderPicker:v};return r.createElement("div",{className:s||"fvsdk-mount-point",id:o||"fvsdk-mount-point",ref:w},g&&r.createElement(n.AppWithProvider,Object.assign({},g,b,{viewport:l})))},i.FileViewerInstance.displayName="FileViewerInstance",i.FileViewerInstance.displayName="FileViewerInstance";i.FileViewer=e=>{const{initializeOpts:a,className:n,id:s,viewport:o,header:l,mobileFooter:c,mobileHeader:d,titlebar:u,folderPicker:p}=e,v=t.__rest(e,["initializeOpts","className","id","viewport","header","mobileFooter","mobileHeader","titlebar","folderPicker"]),f={initializeOpts:a,className:n,id:s,viewport:o,header:l,mobileFooter:c,mobileHeader:d,titlebar:u,folderPicker:p};return r.createElement(i.FileViewerSDKContextProvider,Object.assign({},v),r.createElement(i.FileViewerInstance,Object.assign({},f)))},i.FileViewer.displayName="FileViewer",i.FileViewer.displayName="FileViewer"})),define("typescript/libraries/file-viewer/src/core/middlewares/analytics",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/logging/session","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/utils/extension_constants","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/paths","lodash","typescript/libraries/file-viewer/src/core/utils/errors","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/types/errors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";function f(e){return Object.keys(e).reduce((i,t)=>{const r=e[t];return"string"==typeof r||"number"==typeof r?i[t]=String(r):"boolean"==typeof r?i[t]=String(+r):"object"==typeof r&&r&&(i[t]=JSON.stringify(r)),i},{})}function _(e){return Object.assign(Object.assign({},e),{file_extension:(0,o.getWhitelistedFileExtension)(e.file_extension||""),extra:f(e.extra)})}Object.defineProperty(i,"__esModule",{value:!0}),i.analyticsMiddleware=i.MAPPED_USER_ACTIONS=i.serializeSession=void 0,d=t.__importDefault(d),i.serializeSession=_;const g={[s.Action.ZoomIn]:a.UserAction.ZoomIn,[s.Action.ZoomOut]:a.UserAction.ZoomOut,[s.Action.CloseDocSidebar]:a.UserAction.CloseDocSidebar,[s.Action.OpenDocSidebar]:a.UserAction.OpenDocSidebar,[s.Action.ZoomToggleOriginalOrFit]:a.UserAction.ZoomToggleOriginalOrFit,[s.Action.UpdateDocCurrentPageIndex]:a.UserAction.PageJump,[s.Action.PageDown]:a.UserAction.PageDown,[s.Action.PageUp]:a.UserAction.PageUp,[s.Action.Share]:a.UserAction.Share,[s.Action.Restore]:a.UserAction.Restore,[s.Action.OpenWith]:a.UserAction.OpenWith,[s.Action.OpenWebPreview]:a.UserAction.OpenWebPreview,[s.Action.FlipToNextFile]:a.UserAction.FlipNext,[s.Action.FlipToPreviousFile]:a.UserAction.FlipPrevious,[s.Action.CloseViewer]:a.UserAction.CloseViewer,[s.Action.OpenFullscreenPreview]:a.UserAction.OpenFullscreenPreview,[s.Action.OpenVersionHistory]:a.UserAction.OpenVersionHistory,[s.Action.OpenRightRail]:a.UserAction.ToggleSidebarOn,[s.Action.CloseRightRail]:a.UserAction.ToggleSidebarOff,[s.Action.SwitchWorkbookTab]:a.UserAction.SwitchWorkbookTab,[s.Action.CopyToDropbox]:a.UserAction.SaveToDropbox,[s.Action.DownloadFile]:a.UserAction.Download,[s.Action.Print]:a.UserAction.Print,[s.Action.EnterFullScreen]:a.UserAction.ToggleFullscreenOn,[s.Action.ExitFullScreen]:a.UserAction.ToggleFullscreenOff,[s.Action.ClickDropboxLogo]:a.UserAction.ClickDropboxLogo,[s.Action.SetActiveRightRailPlugin]:a.UserAction.SidebarPaneSelected};let m;i.MAPPED_USER_ACTIONS=(0,d.default)(g);i.analyticsMiddleware=function(e){return({getState:t,dispatch:d})=>w=>b=>{var h;switch(b.type){case r.Action.LogSessionEvent:try{return w(((e,i,t)=>{const{payload:{event:a,fileViewerId:s,previewSessionId:o,extra:l}}=t;let c=i.loggingSession[s];return o===c.file_preview_session_id&&(c=(0,n.recordEvent)(i.loggingSession[s],a,l),e.log(a,_(c)),c=(0,n.updateSessionLastEvent)(c,a)),(0,r.updateSession)(c)})(e,t(),b))}catch(e){return e instanceof Error&&(d((0,s.reportException)({error:e,fileType:(null===(h=t().loggingSession[b.payload.fileViewerId])||void 0===h?void 0:h.extra.preview_type)||"other",isCritical:!(0,u.isFVError)(e)||e.type!==v.FVErrorCode.InvalidLoggingOrder})),console.warn(e.message)),w(b)}case r.Action.Log:return w(((e,i,t)=>{const{payload:a}=t,{event:n,fileViewerId:s}=a,o=i.loggingSession[s];return e.log(n,_(Object.assign(Object.assign({},o),{extra:Object.assign(Object.assign({},(null==o?void 0:o.extra.source_context)&&{source_context:o.extra.source_context}),a.extra)}))),(0,r.updateSession)(o)})(e,t(),b));case r.Action.LogVideo:return void 0!==e.logVideo?w(((e,i,t)=>{const{payload:a}=t,{eventName:n,fileViewerId:s,previewSessionId:o}=a,l=i.loggingSession[s],c=l.file_preview_session_id;return void 0!==e.logVideo&&o===c&&e.logVideo(n,((e,i,t)=>{const{previewSessionId:r,videoFormat:a,videoDuration:n,videoTruncated:s,extra:o}=e;return{file_preview_session_id:r,video_format:a,video_duration_seconds:n,video_truncated:s,ns_id:i,sj_id:t,extra:o}})(a,l.ns_id,l.sj_id)),(0,r.updateSession)(l)})(e,t(),b)):w(b);case r.Action.LogUserAction:return w(((e,t,r)=>{const{payload:n}=r,{userAction:s,actionContext:o,fileViewerId:l}=n,c=t.loggingSession[l];return s in i.MAPPED_USER_ACTIONS?console.warn(`WARNING: ${s} is automatically logged when it's in USER_ACTION_MAP. No need to call logUserAction for it.`):e.log(a.EventType.UserAction,_(Object.assign(Object.assign({},c),{extra:Object.assign(Object.assign(Object.assign({},(null==c?void 0:c.extra.source_context)&&{source_context:c.extra.source_context}),n.extra),{action:s,context:o})}))),r})(e,t(),b));case r.Action.LogBackgroundEvent:return w(((e,i,t)=>{const{payload:r}=t,{event:n,fileViewerId:s}=r,o=i.loggingSession[s];return e.log(a.EventType.Background,_(Object.assign(Object.assign({},o),{extra:Object.assign(Object.assign(Object.assign({},(null==o?void 0:o.extra.source_context)&&{source_context:o.extra.source_context}),r.extra),{event:n})}))),t})(e,t(),b));case r.Action.LogTTI:return w(((e,i,t)=>{let a=null;return a=(0,n.markTTI)(i.loggingSession[t.payload]),e.logTTI(),(0,r.updateSession)(a)})(e,t(),b));case s.Action.ExcelSheetRenderFailed:case s.Action.ExcelSheetRenderSucceeded:case s.Action.FetchExcelSheetLayoutData:case s.Action.FetchExcelSheetLayoutDataResult:return w(((e,i,t)=>{const{fileViewerId:r,sheetIndex:n}=t.payload,o=i.loggingSession[r],l=_(Object.assign(Object.assign({},o),{extra:f({tab_index:n,ts:Date.now()})}));switch(t.type){case s.Action.FetchExcelSheetLayoutData:e.log(a.EventType.ExcelSheetDownloadAttempted,l);break;case s.Action.FetchExcelSheetLayoutDataResult:null!=t.error?e.log(a.EventType.ExcelSheetDownloadFailed,l):e.log(a.EventType.ExcelSheetDownloadSucceeded,l);break;case s.Action.ExcelSheetRenderFailed:e.log(a.EventType.ExcelSheetRenderFailed,l);break;case s.Action.ExcelSheetRenderSucceeded:e.log(a.EventType.ExcelSheetRenderSucceeded,l)}return t})(e,t(),b));case s.Action.UpdateArchiveFileCurrentPath:return w(((e,i,t)=>{const{fileViewerId:r,currentPath:n,isDir:s}=t.payload;if(void 0!==s){const t=i.loggingSession[r],l=_(Object.assign(Object.assign({},t),{extra:f({action:a.UserAction.ArchiveNavigation,context:a.UserActionContext.PreviewContentMain,isDir:String(s),extension:s?"":(0,o.getWhitelistedFileExtension)((0,c.getFileExtension)(n[n.length-1]))})}));e.log(a.EventType.UserAction,l)}return t})(e,t(),b));case r.Action.LogDuration:return w(((e,i,t)=>{var r;const{eventName:a,duration:n,fileViewerId:s,tags:o,shouldLogToHive:l}=t.payload,c=i.loggingSession[s];return null===(r=e.logDuration)||void 0===r||r.call(e,{eventName:a,durationInMs:n,session:c?_(c):void 0,tags:o,shouldLogToHive:l}),t})(e,t(),b));case s.Action.SetupGetPlayDurationSeconds:return void(m=b.payload.getPlayDurationSeconds)}return b.type in g&&!b.payload.skipLogging?w(((e,i,t)=>{const{fileViewerId:r,sourceContext:n}=t.payload,{loggingSession:o}=i,c=o[r],d=(0,l.isRightRailOpen)(i,r);let u={context:n,action:g[t.type],right_sidebar_state:d?"opened":"collapsed"};if(t.type===s.Action.SwitchWorkbookTab)u.tab_index=t.payload.tabIndex;else if(t.type===s.Action.SetActiveRightRailPlugin)u.selected_pane=t.payload.pluginId;else if(t.type===s.Action.CloseViewer){const e=(0,l.getCurrentFilePreviewUI)(i,r);if(e&&(0,p.filterAudioVideoFilePreviewUiState)(e)&&m){const e=m();u=Object.assign(Object.assign({},u),e)}const t=(0,l.getCurrentRivieraData)(i,r);(0,p.isAudioVideoPreviewRivieraData)(t)&&"loaded"===t.transcriptLocale.state&&(u.transcript_locale=t.transcriptLocale.data)}return e.log(a.EventType.UserAction,_(Object.assign(Object.assign({},c),{extra:f(u)}))),t})(e,t(),b)):w(b)}}})),define("typescript/libraries/file-viewer/src/core/middlewares/riviera_data",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/riviera/api","typescript/libraries/file-viewer/src/core/utils/invariant","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/riviera/transcript"],(function(e,i,t,r,a,n,s,o,l,c,d,u){"use strict";function p(e){const{previewKey:i,fileViewerId:t}=e.payload;return{previewKey:i,fileViewerId:t}}Object.defineProperty(i,"__esModule",{value:!0}),i.rivieraDataMiddleware=void 0;i.rivieraDataMiddleware=({getState:e,dispatch:i})=>v=>f=>t.__awaiter(void 0,void 0,void 0,(function*(){var t,_,g,m,w,b,h;const y=e();switch(f.type){case r.Action.FetchRivieraData:{const{fileViewerId:e,previewKey:t,config:a}=f.payload,l=(0,c.getRivieraData)(y,t);if(l&&Object.keys(l).length)return;const d=(0,c.getPreviewMetadata)(y,t);if(!d||!d.content)throw new s.FVError(s.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `content` from preview data api payload");const u=[];switch(d.content[".tag"]){case"ssr_doc":case"cloud_doc":const{text_url_tmpl:l,image_url_tmpl:c}=d.content,p="cloud_doc"===d.content[".tag"]?d.content.exit_url:void 0;if((0,n.invariant)(!("cloud_doc"!==d.content[".tag"]&&!l&&!c),s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),!p&&null!=l&&null!=c){const[n,s]=(0,o.calculatePageRange)(0,a.partial_prewarm_allowed),c=i((0,r.fetchPageDataWithMetadata)({fileViewerId:e,previewKey:t,textUrlTmpl:l,startPage:n,endPage:s}));u.push(c)}break;case"video":{const{metadata_url:e}=d.content;e&&i((0,r.fetchMediaMetadata)({metadataUrl:e,previewKey:t}));const{transcript_url:a}=d.content;a&&i((0,r.fetchTranscriptData)({url:a,previewKey:t}));break}case"audio":{const e=d.content.waveform_url;e&&i((0,r.fetchWaveformData)({url:e,previewKey:t}));break}case"linkfile":{const e=d.content.url,a=d.content.authenticated;e&&i((0,r.fetchLinkfileData)({url:e,authenticated:!!a,previewKey:t}));break}case"excel":{if("excel2"!==a.excel_support.support)break;const{content:{workbook_data_url_tmpl:o}}=d;(0,n.invariant)(!!o,s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),null!=o&&u.push(i((0,r.fetchExcelSheetLayoutData)({fileViewerId:e,previewKey:t,sheetIndex:0,workbookDataUrlTmpl:o})));break}case"archive":(0,n.invariant)(!!d.preview_url,s.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),d.preview_url&&(i((0,r.fetchArchiveTopLevelData)({fileViewerId:e,previewKey:t,contentUrl:d.preview_url})),u.push(i((0,r.setupArchiveFileCurrentPath)({fileViewerId:e,previewKey:t}))))}return yield Promise.all(u)}case r.Action.FetchPageDataWithMetadata:{const{textUrlTmpl:e,startPage:i,endPage:t}=f.payload,{previewKey:n,fileViewerId:s}=p(f),o=(0,c.getPreviewMetadata)(y,n),l=(0,c.getRivieraData)(y,n),d=yield a.rivieraClient.fetchPageDataWithMetadata(e,i,t,o,l);return v((0,r.fetchPageDataWithMetadataResult)({fileViewerId:s,previewKey:n,data:d.data},d.error))}case r.Action.FetchMediaMetadata:{const e=f.payload.previewKey;if((0,d.isNestedArchiveFilePreviewKey)(e))return v(f);const i=yield a.rivieraClient.fetchMediaMetadata(f.payload.metadataUrl);return v((0,r.fetchMediaMetadataResult)({data:{is_truncated:null===(t=i.data)||void 0===t?void 0:t.is_truncated},previewKey:e},i.error))}case r.Action.FetchWaveformData:{const e=f.payload.previewKey;if((0,d.isNestedArchiveFilePreviewKey)(e))return v(f);const i=yield a.rivieraClient.fetchWaveformData(f.payload.url);return v((0,r.fetchWaveformDataResult)({data:{waveformHeights:null===(_=i.data)||void 0===_?void 0:_.waveformHeights},previewKey:e},i.error))}case r.Action.FetchTranscriptData:{const e=f.payload.previewKey;if((0,d.isNestedArchiveFilePreviewKey)(e))return v(f);const i=yield a.rivieraClient.fetchTranscriptData(f.payload.url);(0,n.invariant)(!!y.previewData[e.serialized],s.FVErrorCode.InvalidFileInfo,`Preview Data for ${e.serialized} should have been available`);const t=i.data?(0,u.chunkTranscript)(i.data,u.CHUNK_TRANSCRIPT_OPTIONS_VERBOSE):{transcript:void 0,segments:[]},o=i.data?(0,u.chunkTranscript)(i.data,u.CHUNK_TRANSCRIPT_OPTIONS_CHOPPY):{transcript:void 0,segments:[]};return v((0,r.fetchTranscriptDataResult)({chunkedTranscript:t,chunkedClosedCaptioning:o,previewKey:e,transcriptLocale:null!==(m=null===(g=i.data)||void 0===g?void 0:g.transcriptLocale)&&void 0!==m?m:""},i.error))}case r.Action.FetchLinkfileData:{const e=f.payload.previewKey,i=yield a.rivieraClient.fetchLinkfileData(f.payload.url,f.payload.authenticated);return v((0,r.fetchLinkfileDataResult)({data:{uri:null===(w=i.data)||void 0===w?void 0:w.uri},previewKey:e},i.error))}case r.Action.RefreshBlob:{const{previewKey:e,fileViewerId:t}=p(f),d=(0,c.getPreviewMetadata)(y,e);try{const u=yield a.rivieraClient.refreshDocBlob(f.payload.refreshUrl,f.payload.password);if(v((0,r.refreshBlobSuccessAction)({previewKey:e,preview:u})),(0,n.invariant)(!!d,s.FVErrorCode.InvalidFileInfo,`Preview Data for ${e.serialized} should have been available`),f.payload.password)return i((0,r.fetchPageDataWithMetadata)({fileViewerId:t,previewKey:e,textUrlTmpl:u.text_url_tmpl}));const p=(0,c.getFilePreviewUi)(y,f.payload.fileViewerId,e),_=null!==(h=null===(b=(0,l.filterDocFilePreviewUiState)(p))||void 0===b?void 0:b.currentPageIndex)&&void 0!==h?h:0,g=(0,o.calculatePageRange)(_);return i((0,r.fetchPageDataWithMetadata)({fileViewerId:t,previewKey:e,textUrlTmpl:u.text_url_tmpl,startPage:g[0],endPage:g[1]}))}catch(i){return v((0,r.fetchPageDataWithMetadataResult)({fileViewerId:t,previewKey:e,data:void 0},i))}}case r.Action.FetchExcelSheetLayoutData:{const{previewKey:e,fileViewerId:t}=p(f);v(f);const{sheetIndex:n,workbookDataUrlTmpl:s}=f.payload,o=yield a.rivieraClient.fetchExcelWorkbookLayoutData(s,n);return i((0,r.fetchExcelSheetLayoutDataResult)({fileViewerId:t,previewKey:e,sheetIndex:n,data:o.data},o.error))}case r.Action.FetchArchiveTopLevelData:{const{previewKey:e,fileViewerId:t}=p(f);v(f);const{contentUrl:o}=f.payload,l=yield a.rivieraClient.fetchArchiveTopLevelData(o);return(0,n.invariant)(!!l,s.FVErrorCode.MalformedRivieraData,"Response from riviera archive has no data"),i((0,r.fetchArchiveTopLevelDataResult)({fileViewerId:t,previewKey:e,data:l.data},l.error))}}return v(f)}))})),define("typescript/libraries/file-viewer/src/core/riviera/transcript",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.chunkTranscript=i.CHUNK_TRANSCRIPT_OPTIONS_CHOPPY=i.CHUNK_TRANSCRIPT_OPTIONS_VERBOSE=void 0,i.CHUNK_TRANSCRIPT_OPTIONS_VERBOSE={maxDuration:10,maxCharacters:500,minCharacters:0},i.CHUNK_TRANSCRIPT_OPTIONS_CHOPPY={silenceLength:.25,maxCharacters:50,minCharacters:0};const t=[".",",","?","!",";",":"],r=[".",",","?","!",";",":"];i.chunkTranscript=function(e,i){let a=0,n=0,s="",o=[],l=0;const c=(function(e){const i=[],t={transcript:e.transcript,segments:i};if(!(null==e?void 0:e.segments))return t;const r=e.segments[0];i.push({startTime:r.startTime||0,endTime:r.endTime||0,text:r.text});for(let t=1;t<e.segments.length;t++){const r=e.segments[t],a=e.segments[t-1];r.startTime=Math.max(r.startTime||0,a.endTime||0),r.endTime=Math.max(r.endTime||0,r.startTime),i.push({startTime:r.startTime,endTime:r.endTime,text:r.text})}return t})(e),d={transcript:c.transcript,segments:[]},u=()=>{o.length>0&&(s=o.reduce((e,i)=>e.length<=0||r.includes(i.text)?`${e}${i.text}`:`${e} ${i.text}`,""),s.length>0&&d.segments.push({startTime:a,endTime:n,text:s}),o=[],l=0)};return c.segments.forEach((e,r,s)=>{const c=()=>{u(),a=e.startTime,n=e.endTime,l=e.text.length+1,o.push(e)};if(0===o.length)return void c();const d=o[o.length-1],p=t.includes(d.text[d.text.length-1]),v=!i.maxDuration||n-a>=i.maxDuration;(i.silenceLength&&e.startTime-n>=i.silenceLength||l+e.text.length>=i.maxCharacters||v&&p&&l>=i.minCharacters)&&!t.includes(s[r].text)?c():(o.push(e),n=e.endTime,l+=e.text.length+1)}),o.length>0&&u(),d}})),define("typescript/libraries/file-viewer/src/core/middlewares/ui_action_redispatcher",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.uiActionRedispatcher=void 0;i.uiActionRedispatcher=({getState:e})=>i=>s=>{var o;const l=e(),{filePreviewUi:c,rivieraData:d}=l,{previewKey:u,fileViewerId:p}=s.payload;if(!u)return i(s);const v=(0,n.getPreviewMetadata)(l,u),f=d[u.serialized];if(!c[p]||!v||!v.content)return i(s);if(!(null===(o=c[p])||void 0===o?void 0:o[u.serialized]))return i(s);switch(s.type){case t.Action.ZoomIn:return i((0,t.zoomIn)(Object.assign(Object.assign({},s.payload),{previewType:"ssr_doc"===v.content[".tag"]?r.PreviewType.SsrDoc:r.PreviewType.Image})));case t.Action.ZoomOut:return i((0,t.zoomOut)(Object.assign(Object.assign({},s.payload),{previewType:"ssr_doc"===v.content[".tag"]?r.PreviewType.SsrDoc:r.PreviewType.Image})));case t.Action.UpdateDocCurrentPageIndex:{const e=(0,a.filterDocPreviewRivieraData)(f);if((v.content[".tag"]===r.PreviewType.SsrDoc||v.content[".tag"]===r.PreviewType.CloudDoc)&&(null==e?void 0:e.metadata))return i((0,t.updateDocCurrentPageIndex)(Object.assign(Object.assign({},s.payload),{pageCount:e.metadata.page_count})));break}case t.Action.PageDown:{const e=(0,a.filterDocPreviewRivieraData)(f);if((v.content[".tag"]===r.PreviewType.SsrDoc||v.content[".tag"]===r.PreviewType.CloudDoc)&&(null==e?void 0:e.metadata))return i((0,t.pageDown)(Object.assign(Object.assign({},s.payload),{pageCount:e.metadata.page_count})));break}}return i(s)}})),define("typescript/libraries/file-viewer/src/core/data/reducer",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/api_v2/redux/users","typescript/libraries/api_v2/redux/files","typescript/libraries/api_v2/redux/previews","typescript/libraries/api_v2/redux/flows","typescript/libraries/file-viewer/src/core/data/types","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/api_v2/redux/cloud_docs","typescript/libraries/file-viewer/src/core/logging/session","typescript/libraries/file-viewer/src/core/utils/uuid","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/types/constants","typescript/libraries/file-viewer/src/core/utils/extension_constants","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/riviera/transform","lodash","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/utils/errors","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/loadable","typescript/libraries/file-viewer/src/core/data/reducer_constants"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.reducers=i.usersReducer=i.currentFileInfoReducer=i.loggingSessionReducer=void 0;function P(e,i){if(1===i||!e)return 1;let t=Math.round(e*i/f.ZOOM_PERCENT_DELTA)*f.ZOOM_PERCENT_DELTA;return Math.abs(t-e)<f.ZOOM_PERCENT_DELTA&&(t+=i>1?f.ZOOM_PERCENT_DELTA:-f.ZOOM_PERCENT_DELTA),Math.min(Math.max(t,f.MIN_IMG_SCALE_FACTOR),f.MAX_IMG_SCALE_FACTOR)}function I(e,i){return Math.max(Math.min(e*i,f.MAX_DOC_SCALE_FACTOR),f.MIN_DOC_SCALE_FACTOR)}const T=(e,i)=>{switch(e){case v.PreviewType.Image:return E.DEFAULT_IMAGE_PREVIEW_UI;case v.PreviewType.SsrDoc:return E.DEFAULT_DOC_PREVIEW_UI;case v.PreviewType.Excel:return E.DEFAULT_EXCEL_PREVIEW_UI;case v.PreviewType.Archive:return E.DEFAULT_ARCHIVE_PREVIEW_UI;case v.PreviewType.Audio:case v.PreviewType.Video:return E.DEFAULT_AUDIO_VIDEO_PREVIEW_UI;case v.PreviewType.CloudDoc:return i&&E.CLOUD_DOC_PREVIEWABLE_AS_PDF_EXTS.includes(i)?E.DEFAULT_DOC_PREVIEW_UI:E.DEFAULT_FILE_PREVIEW_UI;default:return E.DEFAULT_FILE_PREVIEW_UI}};i.loggingSessionReducer=(e=E.DEFAULT_STATE.loggingSession,i)=>{if(i.type===t.Action.InitializeFilePreviewSession){const{fileViewerId:t,sourceSession:r}=i.payload;return Object.assign(Object.assign({},e),{[t]:(0,d.createFilePreviewSession)({file_viewer_session_id:i.payload.fileViewerId,file_preview_session_id:(0,u.v4)(),file_id:i.payload.fileId,sj_id:i.payload.sjId,ns_id:i.payload.nsId,device_type:i.payload.deviceType,file_extension:(0,_.getWhitelistedFileExtension)(i.payload.fileExtension),extra:r})})}if(i.type===p.Action.UpdateSession)return Object.assign(Object.assign({},e),{[i.payload.file_viewer_session_id]:i.payload});if(i.type===t.Action.InitializeFilePreview){const{payload:{fileViewerId:t,fileInfo:r,previewType:a}}=i;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{file_id:r.file_id,ns_id:r.ns_id,extra:Object.assign(Object.assign({},e[t].extra),{preview_type:a})})})}return e};i.currentFileInfoReducer=(e=E.DEFAULT_STATE.currentFileInfo,i)=>{var r;switch(i.type){case t.Action.SetCurrentFilePreview:const{previewKey:a,fileInfo:s}=i.payload,o=null!==(r=s.file_id)&&void 0!==r?r:"fakeFileId";return Object.assign(Object.assign({},e),{[i.payload.fileViewerId]:Object.assign(Object.assign({fileId:o,previewKey:a},i.payload.fileInfo),{bootstrap:{state:"initializing"}})});case n.Action.GetPreviewDataBatchResult:if(i.payload.result){const t={},r=i.meta.previewKey;for(const a of Object.keys(e)){const n=e[a];for(const e of i.payload.result.results)if((null==n?void 0:n.previewKey)===r){const i=e.file;t[a]=Object.assign(Object.assign({},i),{bootstrap:{state:"initializing"},previewKey:r})}}if(Object.keys(t).length>0)return Object.assign(Object.assign({},e),t)}return e;case t.Action.SetBootstrappedFile:{const t=e[i.payload.fileViewerId];if((null==t?void 0:t.previewKey.serialized)===i.payload.previewKey.serialized)return Object.assign(Object.assign({},e),{[i.payload.fileViewerId]:Object.assign(Object.assign({},t),{bootstrap:{state:"ready"}})});break}case t.Action.SetErroredFile:{const t=e[i.payload.fileViewerId];if((null==t?void 0:t.previewKey.serialized)===i.payload.previewKey.serialized)return Object.assign(Object.assign({},e),{[i.payload.fileViewerId]:Object.assign(Object.assign({},t),{bootstrap:{state:"errored",error:i.payload.error}})});break}}return e};i.usersReducer=(e=E.DEFAULT_STATE.users,i)=>i.type===r.Action.GetAccountBatchResult&&i.payload.result?Object.assign(Object.assign({},e),i.payload.result.reduce((e,i)=>(e[i.account_id]=i,e),{})):e;i.reducers={previewData:(e=E.DEFAULT_STATE.previewData,i)=>{let r;switch(i.type){case t.Action.InitializeFilePreview:return r=i.payload.fileInfo.previewKey.serialized,e[r]?e:Object.assign(Object.assign({},e),{[r]:{}});case t.Action.SetPreviewMetadata:return r=i.payload.previewKey.serialized,Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},e[r]),i.payload)});case n.Action.GetPreviewDataBatchResult:{if(!i.payload||!i.payload.result)return e;const t=i.payload.result.results,r=i.meta.previewKey;return Object.assign(Object.assign({},e),t.reduce((e,t)=>{var a;if(null==t.file.file_id){if(null===(a=i.payload.arg)||void 0===a||!a.files||1!==i.payload.arg.files.length)throw Error("Invalid response: file_id must be present in FileInfo for get_preview_data_batch");t.file.file_id=i.payload.arg.files[0].file_id}return t.preview&&(e[r.serialized]=t.preview),null!=t.err&&(null==e[r.serialized]&&(e[r.serialized]={}),e[r.serialized]=Object.assign(Object.assign({},e[r.serialized]),{error:new y.FVError((0,h.getFvErrorCodeFromPreviewDataApi)(t.err),`Got error from preview api: ${t.err[".tag"]}`)})),e},{}))}case t.Action.RefreshBlobSuccess:{if(!i.payload)return e;const{previewKey:t,preview:r}=i.payload;if((0,b.isNestedArchiveFilePreviewKey)(t))return e;const a=t.serialized,n=e[a]?e[a].content:{};return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},e[a]),{content:Object.assign(Object.assign({},n),r)})})}}return e},archiveFiles:(e=E.DEFAULT_STATE.archiveFiles,i)=>{switch(i.type){case n.Action.GetArchiveFilesResult:case n.Action.LoggedOutGetArchiveFilesResult:{const t=i.meta.rootFileId,r=(0,w.cloneDeep)(e);if(null==r[t]&&(r[t]={}),!i.payload||!i.payload.result)return r;for(const e of i.payload.result.archive_files)e.preview&&(r[t][e.subpath]=e.preview);return r}}return e},fileMetadata:(e=E.DEFAULT_STATE.fileMetadata,i)=>{const{payload:r}=i;if(!r)return e;if(i.type===t.Action.InitializeFilePreview){const t=i.payload.fileInfo.file_id,r=i.payload.fileInfo.previewKey.serialized;return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},e[r]),{file_id:t,file_name:i.payload.fileName,size:i.payload.fileInfo.size,timeRange:i.payload.timeRange})})}if(i.type===t.Action.SetFileMetadata){const t=i.payload.previewKey.serialized;return Object.assign(Object.assign({},e),{[t]:i.payload})}return e},rivieraData:(e=E.DEFAULT_STATE.rivieraData,i)=>{const{payload:r,error:a}=i;if(!r)return e;switch(i.type){case t.Action.InitializeFilePreview:{const t=i.payload.fileInfo.previewKey.serialized;return e[t]?e:Object.assign(Object.assign({},e),{[t]:{}})}case t.Action.FetchPhotoMetadataResult:return Object.assign(Object.assign({},e),{[i.payload.previewKey.serialized]:{originalWidth:i.payload.originalWidth,originalHeight:i.payload.originalHeight}});case t.Action.FetchPageDataWithMetadataResult:{const t=i.payload.previewKey.serialized,{pages:r}=e[t]||E.DEFAULT_DOC_PREVIEW_METADATA;if(a)return r&&r.length?e:Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},E.DEFAULT_DOC_PREVIEW_METADATA),{error:a})});if(i.payload&&i.payload.data){const{data:{metadata:a,pages:n}}=i.payload;if(!a)return e;let s=r||new Array(a.page_count);return Array.isArray(n)&&n.length&&(s=[...s],n.forEach(e=>s[e.pageIndex]=Object.assign(Object.assign({},s[e.pageIndex]),e))),Object.assign(Object.assign({},e),{[t]:{metadata:a,pages:s}})}break}case t.Action.FetchExcelSheetLayoutData:{const t=i.payload.previewKey.serialized,r=e[t];if(null!=r&&"workbook"in r){if(!(0,g.isExcelPreviewRivieraData)(r))break;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{sheets:Object.assign(Object.assign({},r.sheets),{[i.payload.sheetIndex]:(0,S.makePendingLoadableData)()})})})}return Object.assign(Object.assign({},e),{[t]:{sheets:{[i.payload.sheetIndex]:(0,S.makePendingLoadableData)()},workbook:(0,S.makePendingLoadableData)()}})}case t.Action.FetchExcelSheetLayoutDataResult:{const t=i.payload.previewKey.serialized,{sheetIndex:r,data:a}=i.payload,n=e[t],s=(0,g.isExcelPreviewRivieraData)(n)?n.sheets:{};if(a)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},n),{sheets:Object.assign(Object.assign({},s),{[r]:(0,S.makeFulfilledLoadableData)(a.sheets[r])}),workbook:(0,m.transformExcelResponseToWorkbookMetadata)(a)})});if(i.error){const a=(0,g.isExcelPreviewRivieraData)(n)&&"loaded"===n.workbook.state?n.workbook:(0,S.makeRejectedLoadableData)(i.error);return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},n),{sheets:Object.assign(Object.assign({},s),{[r]:(0,S.makeRejectedLoadableData)(i.error)}),workbook:a})})}break}case t.Action.FetchArchiveTopLevelData:{const t=i.payload.previewKey.serialized,r=e[t];if(null!=r&&"rootEntry"in r){const i=(0,g.filterArchivePreviewRivieraData)(r);if(!i)throw Error(`fetching archive top level data but ${t} has non archive data already: ${r}`);return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},i),{rootEntry:(0,S.makePendingLoadableData)()})})}return Object.assign(Object.assign({},e),{[t]:{rootEntry:(0,S.makePendingLoadableData)()}})}case t.Action.FetchArchiveTopLevelDataResult:{const t=i.payload.previewKey.serialized,{data:r}=i.payload,a=e[t];if(r)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},a),{rootEntry:(0,m.transformArchiveTreeResponseToArchiveRootEntry)(r)})});if(i.error){const r=(0,g.filterArchivePreviewRivieraData)(a),n="loaded"===(null==r?void 0:r.rootEntry.state)?r.rootEntry:(0,S.makeRejectedLoadableData)(i.error);return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},a),{rootEntry:n})})}break}case t.Action.FetchMediaMetadata:{const t=i.payload.previewKey.serialized,r=e[t];return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{isTruncated:(0,S.makePendingLoadableData)()})})}case t.Action.FetchMediaMetadataResult:{const t=i.payload.previewKey.serialized,r=e[t],{is_truncated:a}=i.payload.data;if("boolean"==typeof a)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{isTruncated:(0,S.makeFulfilledLoadableData)(a)})});if(i.error)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{isTruncated:(0,S.makeRejectedLoadableData)(i.error)})});break}case t.Action.FetchWaveformData:{const t=i.payload.previewKey.serialized,r=e[t];return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{waveformData:(0,S.makePendingLoadableData)()})})}case t.Action.FetchWaveformDataResult:{const t=i.payload.previewKey.serialized,r=e[t],a=i.payload.data.waveformHeights;if(a)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{waveformData:(0,S.makeFulfilledLoadableData)(a)})});if(i.error)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{waveformData:(0,S.makeRejectedLoadableData)(i.error)})});break}case t.Action.FetchTranscriptData:{const t=i.payload.previewKey.serialized,r=e[t];return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{transcript:(0,S.makePendingLoadableData)(),closedCaptions:(0,S.makePendingLoadableData)(),transcriptLocale:(0,S.makePendingLoadableData)()})})}case t.Action.FetchTranscriptDataResult:{const t=i.payload.previewKey.serialized,r=e[t],a=i.payload.chunkedTranscript,n=i.payload.chunkedClosedCaptioning;if(a.transcript||n.transcript)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{transcript:(0,S.makeFulfilledLoadableData)(a),closedCaptions:(0,S.makeFulfilledLoadableData)(n),transcriptLocale:(0,S.makeFulfilledLoadableData)(i.payload.transcriptLocale)})});if(i.error)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{transcript:(0,S.makeRejectedLoadableData)(i.error),closedCaptions:(0,S.makeRejectedLoadableData)(i.error),transcriptLocale:(0,S.makeRejectedLoadableData)(i.error)})});break}case t.Action.StartTranscriptGenerating:{const t=i.payload.previewKey.serialized,r=e[t];return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{transcript:(0,S.makePendingLoadableData)(),closedCaptions:(0,S.makePendingLoadableData)(),transcriptLocale:(0,S.makePendingLoadableData)()})})}case t.Action.SetTranscriptError:{const t=i.payload.previewKey.serialized,r=e[t],a=i.error;if(a)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{transcript:(0,S.makeRejectedLoadableData)(a),closedCaptions:(0,S.makeRejectedLoadableData)(a),transcriptLocale:(0,S.makeRejectedLoadableData)(a)})});break}case t.Action.FetchLinkfileData:{const t=i.payload.previewKey.serialized,r=e[t];return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{linkfileData:(0,S.makePendingLoadableData)()})})}case t.Action.FetchLinkfileDataResult:{const t=i.payload.previewKey.serialized,r=e[t],a=i.payload.data.uri;if(a)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{linkfileData:(0,S.makeFulfilledLoadableData)(a)})});if(i.error)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},r),{linkfileData:(0,S.makeRejectedLoadableData)(i.error)})})}}return e},cloudDocsData:(e=E.DEFAULT_STATE.cloudDocsData,i)=>{const{payload:t,type:r,error:a}=i;if(r===c.Action.GetCloudEditorUrlResult){if(a)return Object.assign(Object.assign({},e),{[i.payload.arg.file_id]:(0,S.makeRejectedLoadableData)(a)});if(null==t?void 0:t.result)return Object.assign(Object.assign({},e),{[i.payload.arg.file_id]:(0,S.makeFulfilledLoadableData)(t.result)})}return e},filePreviewUi:(e=E.DEFAULT_STATE.filePreviewUi,i)=>{var r,a,n,o,c,d,u,p,_;if(!i.payload)return e;if(i.type===t.Action.InitializeFileViewer)return Object.assign(Object.assign({},e),{[i.payload.fileViewerId]:{}});let m;if(i.type===t.Action.InitializeFilePreview)m=i.payload.fileInfo.previewKey.serialized;else if(i.type===s.Action.UnzipResult){m=i.meta.previewKey.serialized}else{if(!i.payload.previewKey)return e;m=i.payload.previewKey.serialized}const b=i.type===s.Action.UnzipResult?i.meta.fileViewerId:i.payload.fileViewerId,h=e[b]||{},y=h[m]||{},C=(0,g.filterZoomableFilePreviewUi)(y);switch(i.type){case t.Action.InitializeFilePreview:{const{previewType:t,fileExtension:r}=i.payload,a=T(t,r);return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},a),y)})})}case t.Action.InitializeNestedArchiveFilePreview:{const{previewType:t,currentPath:r}=i.payload,a=T(t);return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign(Object.assign({},a),{currentPath:r}),y)})})}case t.Action.FetchPageDataWithMetadataResult:if(i.payload.data&&i.payload.data.metadata)return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{isDocSidebarOpen:!1})})});if((null===(r=i.error)||void 0===r?void 0:r.statusCode)===l.RivieraStatus.PasswordProtected)return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{isPasswordProtected:!0})})});break;case t.Action.PageNavigation:{const{sourceContext:t,pageIndex:r,centerOnYOffset:a}=i.payload;return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{pageNavigation:{sourceContext:t,pageIndex:r,centerOnYOffset:a}})})})}case t.Action.ResolvePageNavigation:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{pageNavigation:void 0})})});case t.Action.UpdateDocCurrentPageIndex:const{pageCount:E}=i.payload;let{pageIndex:A}=i.payload;return A<0?A=0:E&&A>=E-1&&(A=E-1),Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{currentPageIndex:A})})});case t.Action.PageUp:{const i=null!==(n=null===(a=(0,g.filterDocFilePreviewUiState)(y))||void 0===a?void 0:a.currentPageIndex)&&void 0!==n?n:null;if(i)return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{currentPageIndex:Math.max(i-1,0)})})});break}case t.Action.PageDown:{const t=null!==(c=null===(o=(0,g.filterDocFilePreviewUiState)(y))||void 0===o?void 0:o.currentPageIndex)&&void 0!==c?c:null;if(t)return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{currentPageIndex:Math.min(t+1,i.payload.pageCount||1)})})});break}case t.Action.ZoomIn:{if(null==C)return e;const t=null!==(d=C.zoomScaleFactor)&&void 0!==d?d:C.fitScaleFactor;return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{zoomScaleFactor:i.payload.previewType===v.PreviewType.SsrDoc?I(t,f.DOC_ZOOM_MULTIPLIER):P(t,f.IMG_ZOOM_MULTIPLIER)})})})}case t.Action.ZoomOut:{if(null==C)return e;const t=null!==(u=C.zoomScaleFactor)&&void 0!==u?u:C.fitScaleFactor;return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{zoomScaleFactor:i.payload.previewType===v.PreviewType.SsrDoc?I(t,1/f.DOC_ZOOM_MULTIPLIER):P(t,1/f.IMG_ZOOM_MULTIPLIER)})})})}case t.Action.ZoomToggleOriginalOrFit:{if(null==C)return e;const t=null!==(p=C.zoomScaleFactor)&&void 0!==p?p:C.fitScaleFactor,r=t===C.fitScaleFactor?1:void 0,a=(null==C?void 0:C.storedFitScaleFactor)&&1===t?null==C?void 0:C.storedFitScaleFactor:void 0,n=i.payload.fitOnly?void 0:a||r;return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{zoomScaleFactor:n})})})}case t.Action.UpdateFitScaleFactor:{if(null==C)return e;const{fitScaleFactor:t}=C;return t===i.payload.fitScaleFactor?e:Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{storedFitScaleFactor:i.payload.storedFitScaleFactor,fitScaleFactor:i.payload.fitScaleFactor})})})}case t.Action.UpdateDimensions:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{dimensions:i.payload.dimensions})})});case t.Action.SwitchWorkbookTab:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{currentTabIndex:i.payload.tabIndex})})});case t.Action.UpdateArchiveFileCurrentPath:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{currentPath:i.payload.currentPath})})});case t.Action.UpdateArchiveExtractAllSnackbarState:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{extractAllSnackbarState:i.payload.extractAllSnackbarState})})});case s.Action.UnzipResult:let O;return O=(null===(_=i.payload.result)||void 0===_?void 0:_.path)?(0,S.makeFulfilledLoadableData)(i.payload.result.path):(0,S.makeRejectedLoadableData)(i.error||new Error),Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{extractAllSnackbarState:O})})});case t.Action.UpdateAudioVideoPlaybackState:const F=(0,w.pick)(i.payload,"currentTimestamp","isPlaying");return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),F)})});case t.Action.SetHasShownTranscriptSettingModal:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{hasShownTranscriptSettingModal:!0})})});case t.Action.SetIsClosedCaptionShowing:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{isClosedCaptionShowing:i.payload.showing})})});case t.Action.SetIsTranscriptShowing:return Object.assign(Object.assign({},e),{[b]:Object.assign(Object.assign({},h),{[m]:Object.assign(Object.assign({},y),{isTranscriptShowing:i.payload.showing})})})}return e},fileViewerUi:(e=E.DEFAULT_STATE.fileViewerUi,i)=>{if(!i.payload)return e;const{fileViewerId:r}=i.payload,a=e[r]||{};switch(i.type){case t.Action.InitializeFileViewer:return Object.assign(Object.assign({},e),{[r]:E.DEFAULT_FILE_VIEWER_UI});case t.Action.OpenRightRail:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isRightRailOpen:!0})});case t.Action.CloseRightRail:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isRightRailOpen:!1})});case t.Action.OpenDocSidebar:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isDocSidebarOpen:!0})});case t.Action.CloseDocSidebar:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isDocSidebarOpen:!1})});case t.Action.EnterFullScreen:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isFullScreen:!0})});case t.Action.ExitFullScreen:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{isFullScreen:!1})});case t.Action.ToggleVideoFrameSteppers:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{showVideoFrameSteppers:i.payload.enabled})});case t.Action.FlipToNextFile:case t.Action.FlipToPreviousFile:return Object.assign(Object.assign({},e),{[r]:Object.assign(Object.assign({},a),{hasBeenFlipped:!0})});case t.Action.SetActiveRightRailPlugin:{const{fileViewerId:t,pluginId:r}=i.payload;return null==r?e:Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},a),{isRightRailOpen:!0})})}case t.Action.EditVideo:{const{fileViewerId:t}=i.payload;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},a),{isEditingVideo:!0})})}case t.Action.CancelEditingVideo:{const{fileViewerId:t}=i.payload;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},a),{isEditingVideo:!1})})}default:return e}},loggingSession:i.loggingSessionReducer,currentFileInfo:i.currentFileInfoReducer,users:i.usersReducer,fetchingUser:(e=E.DEFAULT_STATE.fetchingUser,i)=>i.type!==r.Action.GetCurrentAccountResult&&e,currentUser:(e=E.DEFAULT_STATE.currentUser,i)=>i.type===r.Action.GetCurrentAccountResult&&i.payload.result?i.payload.result:e,fileContentMetadata:(e=E.DEFAULT_STATE.fileContentMetadata,i)=>{if(i.type===a.Action.GetFileContentMetadataResult&&i.payload.result){const t=(e=>{if(!e.meta)throw new Error(`missing meta argument to action ${e.type}`);return e.meta})(i).previewKey;return Object.assign(Object.assign({},e),{[t.serialized]:i.payload.result})}return e},plugins:(e=E.DEFAULT_STATE.plugins,i)=>{if(i.type===t.Action.InitializeFileViewer){const{fileViewerId:t}=i.payload;return Object.assign(Object.assign({},e),{[t]:{activeRightRailPluginId:void 0,activeEditPluginId:void 0,hideContentPanePluginId:void 0}})}if(i.type===t.Action.SetActiveRightRailPlugin){const{fileViewerId:t,pluginId:r}=i.payload;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{activeRightRailPluginId:r})})}if(i.type===t.Action.FlipToNextFile||i.type===t.Action.FlipToPreviousFile){const{fileViewerId:t}=i.payload;if(e[t].activeRightRailPluginId===o.TRANSCRIPT_BLADE_PLUGIN_ID)return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{activeRightRailPluginId:o.INFO_BLADE_PLUGIN_ID})})}if(i.type===t.Action.SetActiveEditPlugin){const{fileViewerId:t,pluginId:r}=i.payload;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{activeEditPluginId:r})})}if(i.type===t.Action.HideContentPane){const{fileViewerId:t,pluginId:r}=i.payload;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{hideContentPanePluginId:r})})}return e},sharedLinkInfo:(e=E.DEFAULT_STATE.sharedLinkInfo,i)=>{const{payload:r,type:a}=i;if(a===t.Action.SetSharedLinkInfo){const i=r.previewKey.serialized;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),r)})}return e},videoRequests:(e=E.DEFAULT_STATE.videoRequests,i)=>{switch(i.type){case t.Action.RequestVideoSeek:return[...e,{videoRequestType:"seek",time:i.payload.time}];case t.Action.RequestVideoSeekRelative:return[...e,{videoRequestType:"seekRelative",delta:i.payload.delta}];case t.Action.RequestVideoPause:return[...e,{videoRequestType:"pause"}];case t.Action.ClearVideoRequests:return[];default:return e}},rootInfo:(e=E.DEFAULT_STATE.rootInfo,i)=>{var t;switch(i.type){case r.Action.GetRootInfoResult:return null!==(t=i.payload.result)&&void 0!==t?t:null;default:return e}},toolbar:(e=E.DEFAULT_STATE.toolbar,i)=>{switch(i.type){case t.Action.OverrideFloatingToolbar:{const{state:t,internal:r,pluginId:a}=i.payload;return Object.assign(Object.assign({},e),{override:t,overridePluginId:r?"fvsdk":a})}default:return e}},volume:(e=E.DEFAULT_STATE.volume,i)=>{switch(i.type){case t.Action.SetVolume:return Object.assign(Object.assign({},e),{volume:i.payload.volume});case t.Action.SetMuted:return Object.assign(Object.assign({},e),{muted:i.payload.muted});default:return e}},isPreviewLoading:(e=E.DEFAULT_STATE.isPreviewLoading,i)=>{switch(i.type){case t.Action.SetPreviewLoadingAction:return i.payload.isPreviewLoading;default:return e}},brandingInfo:(e=E.DEFAULT_STATE.brandingInfo,i)=>{const{payload:r,type:a}=i;if(a===t.Action.SetBrandingInfo){const i=r.previewKey.serialized;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e),r)})}return e},fileViewerState:(e=E.DEFAULT_STATE.fileViewerState,i)=>{const{payload:r,type:a}=i;switch(a){case t.Action.SetFileViewerError:const{error:i,fileViewerId:a}=r;return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},e[a]),{error:i})});default:return e}},isDeleteFileModalOpen:(e=E.DEFAULT_STATE.isDeleteFileModalOpen,i)=>{switch(i.type){case t.Action.SetDeleteFileModalOpen:return i.payload.isOpen;default:return e}},isToolbarRenameActive:(e=E.DEFAULT_STATE.isToolbarRenameActive,i)=>{switch(i.type){case t.Action.SetToolbarRenameActive:return i.payload.isActive;default:return e}}}})),define("typescript/libraries/file-viewer/src/core/data/reducer_constants",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_DOC_PREVIEW_METADATA=i.CLOUD_DOC_PREVIEWABLE_AS_PDF_EXTS=i.DEFAULT_FILE_VIEWER_UI=i.DEFAULT_AUDIO_VIDEO_PREVIEW_UI=i.DEFAULT_ARCHIVE_PREVIEW_UI=i.DEFAULT_EXCEL_PREVIEW_UI=i.DEFAULT_DOC_PREVIEW_UI=i.DEFAULT_IMAGE_PREVIEW_UI=i.DEFAULT_FILE_PREVIEW_UI=i.DEFAULT_STATE=void 0,i.DEFAULT_STATE={previewData:{},archiveFiles:{},fileMetadata:{},rivieraData:{},cloudDocsData:{},filePreviewUi:{},fileViewerUi:{},currentFileInfo:{},loggingSession:{},users:{},currentUser:null,fetchingUser:!0,fileContentMetadata:{},plugins:{},sharedLinkInfo:{},videoRequests:[],rootInfo:null,toolbar:{override:void 0,overridePluginId:void 0},volume:{volume:1,muted:!1},isPreviewLoading:!1,brandingInfo:{},fileViewerState:{},isDeleteFileModalOpen:!1,isToolbarRenameActive:!1},i.DEFAULT_FILE_PREVIEW_UI={currentPath:void 0},i.DEFAULT_IMAGE_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{fitScaleFactor:0}),i.DEFAULT_DOC_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{currentPageIndex:0,fitScaleFactor:0,isPasswordProtected:!1}),i.DEFAULT_EXCEL_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{currentTabIndex:0,fitScaleFactor:0}),i.DEFAULT_ARCHIVE_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{currentPath:[],extractAllSnackbarState:null}),i.DEFAULT_AUDIO_VIDEO_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{currentTimestamp:0,isPlaying:!1,hasShownTranscriptSettingModal:!1,isTranscriptShowing:!1,isClosedCaptionShowing:!1}),i.DEFAULT_FILE_VIEWER_UI={isDocSidebarOpen:!1,showVideoFrameSteppers:!1,isFullScreen:!1,hasBeenFlipped:!1,isRightRailOpen:!1,isEditingVideo:!1},i.CLOUD_DOC_PREVIEWABLE_AS_PDF_EXTS=[".gdoc",".gslides",".paper",".papert",".binder"],i.DEFAULT_DOC_PREVIEW_METADATA={metadata:{page_count:0,dimensions:[[0,0,0]]},pages:[]}})),define("typescript/libraries/file-viewer/src/core/riviera/transform",["require","exports","typescript/libraries/file-viewer/src/core/utils/loadable","typescript/libraries/file-viewer/src/core/urls"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transformArchiveTreeResponseToArchiveRootEntry=i.transformExcelResponseToSheetMetadata=i.transformExcelResponseToWorkbookMetadata=i.processTextAndUrl=void 0;function a(e,i,t){return t&&t[0]?(0,r.imageUrl)(e,i,0,t[0]):(0,r.imageUrl)(e,i,0)}function n(e){var i;return{name:e.name,size:void 0!==e.size?Number(e.size):void 0,isDir:e.isDir,children:null===(i=e.children)||void 0===i?void 0:i.map(n)}}i.processTextAndUrl=function(e,i=[],t,n,s,o){const l=(function(e,i=[],t,n,s){const o=i.reduce((e,[i,t,r])=>{for(let a=0;a<r;a++)e.push([i,t]);return e},[]);return[...Array(t)].map((i,t)=>({pageIndex:t,dimension:o[t],thumbnailUrl:a(e,t,s),imgUrls:{"1x":(0,r.imageUrl)(e,t,0),"4x":(0,r.imageUrl)(e,t,400),srcset:(0,r.generateSrcset)(e,t,s)},textboxes:n?n[t].textboxes:[],links:[]}))})(e,i,t,s,o);return(function(e){const{text:i}=e;if(!i||!i.pages)return[];const{links:t,pages:r}=i,a=(i.fonts||[]).reduce((e,i)=>(e[i.f]=(function(e){const i=e.n.lastIndexOf(",");return{fontFamily:`"${i>-1?e.n.substr(0,i):e.n}", ${1&e.f?"monospace":"serif"}`,isBold:(e.f&1<<18)>0,isItalic:(64&e.f)>0}})(i),e),{});return Object.keys(r).map(e=>({pageIndex:+e,textboxes:(r[e]||[]).map(e=>Object.assign(Object.assign({},e),{font:a[e.f]})),links:t&&t[e]||[]}))})(n).forEach(e=>{const{pageIndex:i}=e;i<l.length&&(l[i]=Object.assign(Object.assign({},l[i]),e))}),l},i.transformExcelResponseToWorkbookMetadata=function(e){return(0,t.makeFulfilledLoadableData)({name:e.workbook_name,sheetOverview:e.sheets.reduce((e,i)=>Object.assign(Object.assign({},e),{[i.idx]:{hidden:i.hidden,name:i.name}}),{})})},i.transformExcelResponseToSheetMetadata=function(e){return e.sheets.reduce((e,i)=>"dimensions"in i?Object.assign(Object.assign({},e),{[i.idx]:(0,t.makeFulfilledLoadableData)(i)}):e,{})},i.transformArchiveTreeResponseToArchiveRootEntry=function(e){return(0,t.makeFulfilledLoadableData)(Object.assign(Object.assign({},n(e)),{isPasswordProtected:!!e.isEncrypted}))}})),define("typescript/libraries/file-viewer/src/core/utils/errors",["require","exports","typescript/libraries/file-viewer/src/core/types/errors"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getFvErrorCodeFromPreviewDataApi=i.isFVError=void 0,i.isFVError=function(e){return e instanceof t.FVError},i.getFvErrorCodeFromPreviewDataApi=function(e){switch(e[".tag"]){case"unsupported_file_error":return t.FVErrorCode.UnsupportedPreviewType;case"content_not_uploaded":return t.FVErrorCode.FileUploading;default:return t.FVErrorCode.PreviewsDataApiFailure}}})),define("typescript/libraries/file-viewer/src/core/types/errors",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FVError=i.FVErrorCode=void 0,(function(e){e[e.PreviewsDataApiFailure=0]="PreviewsDataApiFailure",e[e.MalformedPreviewsDataApiResponse=1]="MalformedPreviewsDataApiResponse",e[e.RivieraDataFetchFailure=2]="RivieraDataFetchFailure",e[e.MalformedRivieraData=3]="MalformedRivieraData",e[e.FileTooLarge=4]="FileTooLarge",e[e.UnsupportedPreviewType=5]="UnsupportedPreviewType",e[e.NoExtension=6]="NoExtension",e[e.PasswordProtected=7]="PasswordProtected",e[e.FileUploading=8]="FileUploading",e[e.Unknown=9]="Unknown",e[e.FileSwitched=10]="FileSwitched",e[e.InvalidFileInfo=11]="InvalidFileInfo",e[e.InvalidLoggingOrder=12]="InvalidLoggingOrder",e[e.InvalidLoggingSession=13]="InvalidLoggingSession",e[e.UserOffline=14]="UserOffline",e[e.MissingContentMetadata=15]="MissingContentMetadata"})(i.FVErrorCode||(i.FVErrorCode={}));class t extends Error{constructor(e,i){super(i),Object.setPrototypeOf(this,t.prototype),this.type=e}}i.FVError=t})),define("typescript/libraries/file-viewer/src/core/types/plugins/lifecycle",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})})),define("typescript/libraries/file-viewer/src/core/utils/extension_constants",["require","exports","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/file_extension/extension_constants"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getWhitelistedFileExtension=i.brandWhitelistedFileExtension=i.resolvePreviewTypeFromExtension=i.LOGGING_ALLOWED_EXTS_SET=i.DOC_EXTS=i.IMAGE_EXTS=void 0;function a(e){return e}i.IMAGE_EXTS=r.PHOTO_EXTS.concat([".xd"]),i.DOC_EXTS=r.PDF_EXTS.concat(r.DOCUMENT_EXTS,r.PRESENTATION_EXTS,r.WORDPROC_EXTS),i.LOGGING_ALLOWED_EXTS_SET=new Set(r.LOGGING_ALLOWED_EXTS),i.resolvePreviewTypeFromExtension=function(e){return e=e.toLowerCase(),r.MSOFFICE_EXCEL_EXTS.includes(e)?t.PreviewType.Excel:i.DOC_EXTS.includes(e)?t.PreviewType.SsrDoc:i.IMAGE_EXTS.includes(e)?t.PreviewType.Image:r.TRANSCODE_VIDEO_EXTS.includes(e)?t.PreviewType.Video:r.AUDIO_EXTS.includes(e)?t.PreviewType.Audio:r.LINK_FILE_EXTS.includes(e)?t.PreviewType.Linkfile:r.HTMLIFIED_PREVIEW_EXTS.includes(e)?t.PreviewType.HTML:r.CLOUD_DOC_EXTS.includes(e)?t.PreviewType.CloudDoc:t.PreviewType.Other},i.brandWhitelistedFileExtension=a,i.getWhitelistedFileExtension=function(e){return i.LOGGING_ALLOWED_EXTS_SET.has(e)?e:r.LOGGING_UNALLOWED_EXT_PLACEHOLDER}})),define("typescript/libraries/file-viewer/src/core/i18n",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.formatBytes=void 0,i.formatBytes=function(e,i){const t={minimumFractionDigits:0,maximumFractionDigits:2};return e<1024?i.formatMessage({id:"JPwjIB",defaultMessage:"{value, plural, one {# byte} other {# bytes}}"},{value:i.formatNumber(e,t)}):e<921600?i.formatMessage({id:"rNMBTS",defaultMessage:"{value} KB"},{value:i.formatNumber(e/1024,t)}):e<943718400?i.formatMessage({id:"mDrYnG",defaultMessage:"{value} MB"},{value:i.formatNumber(e/1048576,t)}):e<900*1024**3?i.formatMessage({id:"g+xqHV",defaultMessage:"{value} GB"},{value:i.formatNumber(e/1024**3,t)}):i.formatMessage({id:"7XWgdi",defaultMessage:"{value} TB"},{value:i.formatNumber(e/1024**4,t)})}})),define("typescript/libraries/file-viewer/src/core/utils/invariant",["require","exports","typescript/libraries/file-viewer/src/core/types/errors"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.invariant=void 0,i.invariant=function(e,i=t.FVErrorCode.Unknown,r){if(!e){let e;throw e=void 0===r?new t.FVError(i,"An error occurred for unknown reason"):new t.FVError(i,r),e.framesToPop=1,e}return e}})),define("typescript/libraries/file-viewer/src/core/logging/actions",["require","exports"],(function(e,i){"use strict";var t;Object.defineProperty(i,"__esModule",{value:!0}),i.logDuration=i.updateSession=i.logTTI=i.logVideoEvent=i.logBackgroundEvent=i.logUserActionEvent=i.logPreviewEvent=i.logSessionEvent=i.Action=void 0,(function(e){e.UpdateSession="@@previews/updateSession",e.Log="@@previews/log",e.LogUserAction="@@previews/LogUserAction",e.LogBackgroundEvent="@@previews/LogBackgroundEvent",e.LogSessionEvent="@@previews/logSessionEvent",e.LogTTI="@@previews/logTTI",e.LogVideo="@@previews/logVideo",e.LogDuration="@@previews/logDuration",e.UpdateFitScaleFactor="UpdateFitScaleFactor"})(t=i.Action||(i.Action={})),i.logSessionEvent=function(e){return{type:t.LogSessionEvent,payload:e}},i.logPreviewEvent=function(e){return{type:t.Log,payload:e}},i.logUserActionEvent=function(e){return{type:t.LogUserAction,payload:e}},i.logBackgroundEvent=function(e){return{type:t.LogBackgroundEvent,payload:e}},i.logVideoEvent=function(e){return{type:t.LogVideo,payload:e}},i.logTTI=function(e){return{type:t.LogTTI,payload:e}},i.updateSession=function(e){return{type:t.UpdateSession,payload:e}},i.logDuration=function(e){return{type:t.LogDuration,payload:e}}})),define("typescript/libraries/file-viewer/src/core/logging/session",["require","exports","typescript/libraries/file-viewer/src/core/utils/uuid","typescript/libraries/file-viewer/src/core/utils/invariant","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/core/utils/extension_constants","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.markTTI=i.recordExtra=i.updateSessionLastEvent=i.recordEvent=i.createFilePreviewSession=void 0,i.createFilePreviewSession=function(e){const{file_viewer_session_id:i=(0,t.v4)(),file_preview_session_id:r=(0,t.v4)(),file_id:a="",sj_id:o,ns_id:l,file_extension:c=(0,n.getWhitelistedFileExtension)(""),device_type:d=s.DeviceType.desktop,extra:u={}}=e||{};return{file_viewer_session_id:i,file_preview_session_id:r,file_id:a,sj_id:o,ns_id:l,file_extension:c,device_type:d,extra:Object.assign(Object.assign({},u),{source_action:u.source_action||s.SourceAction.Visit,source_context:u.source_context||s.SourceContext.FileViewer,was_flipped:u.was_flipped||!1,file_preview_timeline:{}})}},i.recordEvent=function(e,i,t){const{extra:{last_event:n}}=e;switch((0,r.invariant)(n!==i,a.FVErrorCode.InvalidLoggingOrder,`Cannot log duplicate event ${i}`),i){case s.SessionEventType.FilePreviewSupportConfirmed:case s.SessionEventType.FilePreviewSupportDenied:(0,r.invariant)(n===s.SessionEventType.FilePreviewAttemptStarted,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewAttemptStarted}' but was '${n}'`);break;case s.SessionEventType.FilePreviewDownloadAttempted:(0,r.invariant)(n===s.SessionEventType.FilePreviewSupportConfirmed,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewSupportConfirmed}' but was '${n}'`);break;case s.SessionEventType.FilePreviewDownloadFailed:case s.SessionEventType.FilePreviewDownloadSucceeded:(0,r.invariant)(n===s.SessionEventType.FilePreviewDownloadAttempted,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewDownloadAttempted}' but was '${n}'`);break;case s.SessionEventType.FilePreviewRenderSucceeded:case s.SessionEventType.FilePreviewRenderFailed:(0,r.invariant)(n===s.SessionEventType.FilePreviewDownloadSucceeded||n===s.SessionEventType.FilePreviewDownloadAttempted,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewDownloadSucceeded}' but was '${n}'`);break;case s.SessionEventType.FilePreviewGetApp:(0,r.invariant)(n!==s.SessionEventType.FilePreviewSessionEnded,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order. Preview session has already ended`)}return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign(Object.assign({},e.extra),{file_preview_timeline:Object.assign(Object.assign({},e.extra.file_preview_timeline),{[i]:Date.now()})}),t||{})})},i.updateSessionLastEvent=function(e,i){return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign({},e.extra),{last_event:i})})},i.recordExtra=function(e,i){return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign({},e.extra),i)})},i.markTTI=function(e){const i=Object.assign({},e.extra);if(i.time_to_primary_mark)return e;switch(i.primary_mark_ts||(i.primary_mark_ts=Date.now()),i.source_action){case s.SourceAction.Visit:(0,r.invariant)(!!i.page_start_ts,a.FVErrorCode.InvalidLoggingSession,"Cannot calculate 1st page TTI without page_start_ts"),i.time_to_primary_mark=i.primary_mark_ts-i.page_start_ts;break;case s.SourceAction.Click:(0,r.invariant)(i.file_preview_timeline&&!!i.file_preview_timeline.preview_attempted,a.FVErrorCode.InvalidLoggingSession,"Cannot calculate subsequent page TTI without preview_attempted timestamp"),i.time_to_primary_mark=i.primary_mark_ts-i.file_preview_timeline.preview_attempted}return Object.assign(Object.assign({},e),{extra:i})}})),define("typescript/libraries/file-viewer/src/core/logging/video",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VideoPreviewEvent=void 0,(function(e){e.PlayerRendered="player_rendered",e.FirstClickPlay="first_click_play",e.MediaError="media_error",e.ChangePlaybackRate="change_playback_rate",e.ChangeVideoQuality="change_video_quality",e.ClosePreview="close_preview",e.TimeToBuffer="time_to_buffer",e.TimeToLoad="time_to_load",e.SeekVideo="seek_video",e.VideoStartsPlaying="video_starts_playing",e.VideoResumesPlaying="video_resumes_playing",e.VideoStalled="video_stalled",e.VideoPaused="video_paused",e.ScrubberThumbnailsLoaded="scrubber_thumbnails_loaded",e.ScrubberThumbnailsFailed="scrubber_thumbnails_failed",e.AudioWaveformLoaded="audio_waveform_loaded",e.AudioWaveformFailed="audio_waveform_failed",e.MediaEnded="media_ended",e.VideoPlaybackSmoothness="video_playback_smoothness",e.SlowConnectionBannerShown="slow_connection_banner_shown"})(i.VideoPreviewEvent||(i.VideoPreviewEvent={}))})),define("typescript/libraries/file-viewer/src/core/middlewares/navigation",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({getState:i})=>a=>n=>{var s,o,l,c,d,u;switch(n.type){case t.Action.Share:return null===(s=e.openShareModal)||void 0===s||s.call(e),a(n);case t.Action.OpenWith:return null===(o=e.openDefaultNativeApp)||void 0===o||o.call(e),a(n);case t.Action.OpenWebPreview:return null===(l=e.openWebPreview)||void 0===l||l.call(e),a(n);case t.Action.OpenVersionHistory:return e.openVersionHistory(),a(n);case t.Action.Restore:return e.restorePreviousVersion(),a(n);case t.Action.OpenFullscreenPreview:return e.openFullScreenPreview&&e.openFullScreenPreview(),a(n);case t.Action.OpenUrl:const{url:p,fallbackUrl:v}=n.payload;return e.openUrl&&e.openUrl(p,v),a(n);case t.Action.CloseViewer:const f=(0,r.getCurrentFilePreviewUI)(i(),n.payload.fileViewerId),_=n.payload.previewKey;if(_&&(null===(c=null==f?void 0:f.currentPath)||void 0===c?void 0:c.length)){const e=f.currentPath.slice(0,-1);return a((0,t.updateArchiveFileCurrentPath)(Object.assign(Object.assign({},n.payload),{previewKey:_,currentPath:e,fromUrlChanged:!1,isDir:!0})))}return e.closeViewer&&e.closeViewer(),a(n);case t.Action.ShowAuthModal:const{encryptionOptions:g,sharedLinkUrl:m,kind:w,mode:b,loggingExtra:h}=n.payload;return e.showAuthModal&&e.showAuthModal({encryptionOptions:g,sharedLinkUrl:m,kind:w,mode:b,loggingExtra:h}),a(n);case t.Action.FlipToNextFile:return null===(d=e.flipToNextFile)||void 0===d||d.call(e),a(n);case t.Action.FlipToPreviousFile:return null===(u=e.flipToPreviousFile)||void 0===u||u.call(e),a(n);case t.Action.UpdateFiles:return e.updateFiles&&e.updateFiles(),a(n);default:return a(n)}}}})),define("typescript/libraries/file-viewer/src/core/utils/uuid",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.v4=void 0;const t=(()=>{let e,i;const t=[];for(e=0,i=e;e<=255;e++,i=e)t.push((i+256).toString(16).substr(1));return t})();function r(e){return e.map(e=>t[e]).join("")}i.v4=function(){const e=(function(){const e=new Uint8Array(16);return window.crypto.getRandomValues(e),e})();e[6]=15&e[6]|64,e[8]=63&e[8]|128;const i=Array.prototype.slice.call(e);return[i.slice(0,4),i.slice(4,6),i.slice(6,8),i.slice(8,10),i.slice(10,16)].map(r).join("-")}})),define("typescript/libraries/file-viewer/src/file_viewer/file_viewer",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/utils/uuid","typescript/libraries/file-viewer/src/core/config","typescript/libraries/api_v2/redux/previews","typescript/libraries/api_v2/redux/users","typescript/libraries/file-viewer/src/core/utils/invariant","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/utils/errors","typescript/libraries/file-viewer/src/core/riviera/types","typescript/libraries/file-viewer/src/core/types/constants","typescript/libraries/api_v2/redux/seen_state","typescript/libraries/file-viewer/src/pass/lifecycle","typescript/libraries/api_v2/redux/files","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/file_viewer/plugin_manager","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/core/types/errors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SDKFileViewer=void 0;i.SDKFileViewer=class{constructor(e,i,T=[],C){this.mounted=!1,this.sessionActive=!1,this.initializeOpts=void 0,this.loadPreviewMetadata=e=>t.__awaiter(this,void 0,void 0,(function*(){const e=this.store,i=this.fileViewerId,t=(0,y.getCurrentFile)(e.getState(),i);if(!t)return;const{file_id:a,url:n,previewKey:s}=t,{config:o}=this.platformProps;e.dispatch((0,b.getFileContentMetadataAction)({arg:{file_path_or_id:a,url:n}},{previewKey:s})),yield Promise.all([e.dispatch((0,r.fetchRivieraData)({fileViewerId:this.fileViewerId,previewKey:s,config:o}))])})),this.resolveFilePreview=(e,i,r)=>t.__awaiter(this,void 0,void 0,(function*(){var t;let a;(0,l.invariant)(!(!e.url&&!e.file_id),I.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data");const n=null!==(t=e.url)&&void 0!==t?t:r;a=n?{url:n,file_id:e.file_id}:e.ns_id&&e.sj_id?{ns_id:e.ns_id,sj_id:e.sj_id}:{file_id:e.file_id},yield this.store.dispatch((0,s.getPreviewDataBatchAction)({arg:{files:[a],include_dimensions:!0},params:{}},{previewKey:i}))})),this.hasFileFlipped=e=>{const i=(0,y.getCurrentFile)(this.store.getState(),this.fileViewerId);return(null==i?void 0:i.previewKey.serialized)!==e.serialized},this.reinitialize=e=>t.__awaiter(this,void 0,void 0,(function*(){if(!this.initializeOpts)throw new Error("Reinitialize called before initialization");let i;this.store.dispatch((0,r.updateFiles)({})),i=(null==e?void 0:e.fileInfo)?e.fileInfo:this.initializeOpts.fileInfo.file_id?{file_id:this.initializeOpts.fileInfo.file_id}:this.initializeOpts.fileInfo;const t=Object.assign(Object.assign(Object.assign({},this.initializeOpts),e),{fileInfo:i,forceReloadPreviewMetadata:!0});return this.initialize(t)})),this.initialize=e=>t.__awaiter(this,void 0,void 0,(function*(){var i;const{fileMetadata:t,fileSize:a,fileInfo:s,previewMetadata:o,sourceSession:b,defaultRightRailPlugin:E,activeEditPlugin:T,pluginParams:C={},supportedPreviewTypes:A=g.DEFAULT_SUPPORTED_PREVIEW_TYPES,sharedLinkInfo:O,brandingInfo:F,timeRange:k,forceReloadPreviewMetadata:x}=e;this.initializeOpts=e,P.PreviewsEventLogger.mark(P.PreviewsTimingEvents.FVSDK_INITIALIZE_START);const{file_name:D}=t,L=s.file_id,M=s.sj_id,R=s.ns_id,N=s.url,j=(0,h.getPreviewKey)(L,R,M,N),{store:V,config:B,deviceType:U,accountId:K,callbacks:z}=this.platformProps,H=this.fileViewerId,q=(0,u.getFileExtension)(D),W=(0,y.getCurrentFile)(V.getState(),H);W&&this.mounted&&(yield this.doTeardown(),b.was_flipped=!0),this.store.dispatch((0,r.setCurrentFilePreview)({fileViewerId:this.fileViewerId,fileInfo:s,previewKey:j})),V.dispatch((0,r.setFileMetadata)(Object.assign(Object.assign({},t),{size:a,previewKey:j,timeRange:k}))),o&&V.dispatch((0,r.setPreviewMetadata)(Object.assign(Object.assign({},o),{previewKey:j}))),this.sessionActive=!0,V.dispatch((0,r.initializeFilePreviewSession)({fileViewerId:H,fileId:L,sjId:M,nsId:R,deviceType:U,fileExtension:q,sourceSession:b})),V.dispatch((0,r.setPreviewLoadingAction)({isPreviewLoading:!0}));const G=V.getState().loggingSession[this.fileViewerId].file_preview_session_id;z&&z.onPreviewSessionInitialized&&z.onPreviewSessionInitialized(G),V.dispatch((0,p.logSessionEvent)({event:v.SessionEventType.FilePreviewAttemptStarted,fileViewerId:H,previewSessionId:G}));const Y=performance.now();try{(0,l.invariant)(!!q,I.FVErrorCode.NoExtension,"Missing file extension"),(0,l.invariant)(!!s.url||!!s.file_id,I.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data");try{const e=(0,y.getPreviewMetadata)(V.getState(),j);if(!x&&e&&s.file_id||(yield this.resolveFilePreview(s,j,null==O?void 0:O.url)),!navigator.onLine)throw new I.FVError(I.FVErrorCode.UserOffline,"There is a network connectivity issue")}catch(e){throw(0,f.isFVError)(e)?e:new I.FVError(I.FVErrorCode.PreviewsDataApiFailure,e.message)}if(this.hasFileFlipped(j))return;const e=(0,y.getCurrentFile)(V.getState(),H);if(!e)return;const{file_id:i,ns_id:t,sj_id:o}=e;O&&V.dispatch((0,r.setSharedLinkInfo)(Object.assign(Object.assign({},O),{previewKey:j}))),F&&V.dispatch((0,r.setBrandingInfo)(Object.assign(Object.assign({},F),{previewKey:j})));const u=performance.now();if(V.dispatch((0,p.logDuration)({eventName:"fetch_preview_data_ms",duration:u-Y,fileViewerId:H})),P.PreviewsEventLogger.mark(P.PreviewsTimingEvents.FVSDK_GET_PREVIEW_METADATA),(0,l.invariant)(!!i,I.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `file_id` in `file_info`"),null==W){const e={fileViewerId:this.fileViewerId,previewKey:j,sourceContext:v.UserActionContext.Initialization};V.dispatch((0,r.initializeDocSidebar)({fileViewerId:this.fileViewerId,sourceContext:v.UserActionContext.Initialization})),V.dispatch((0,r.initializeVolumeAndMuted)(e))}const g=(0,y.getPreviewMetadata)(V.getState(),j);if(!g)throw new Error("PreviewMetadata must be defined during initialization.");const b=(0,d.resolvePreviewType)(g);if(V.dispatch((0,r.initializeFilePreview)({fileViewerId:H,fileInfo:{file_id:i,size:a,ns_id:t,sj_id:o,previewKey:j},fileExtension:q,fileName:D,previewType:b,timeRange:k})),null==g?void 0:g.error)throw g.error;if((0,l.invariant)(b!==c.PreviewType.Error,I.FVErrorCode.MalformedPreviewsDataApiResponse,"Preview Type got resolved to PreviewType.Error, possibly because of missing `content`"),(0,l.invariant)(A.includes(b),I.FVErrorCode.UnsupportedPreviewType,"Unsupported preview type"),(0,l.invariant)((0,n.fileSizeSupported)(D,a,b,B),I.FVErrorCode.FileTooLarge,"Unsupported file size"),V.dispatch((0,p.logSessionEvent)({event:v.SessionEventType.FilePreviewSupportConfirmed,fileViewerId:H,previewSessionId:G,extra:{preview_type:b}})),V.dispatch((0,p.logSessionEvent)({event:v.SessionEventType.FilePreviewDownloadAttempted,fileViewerId:H,previewSessionId:G,extra:{preview_type:b}})),P.PreviewsEventLogger.mark(P.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA_START_START),yield this.loadPreviewMetadata(s).catch(e=>{throw(0,f.isFVError)(e)?e:new I.FVError(I.FVErrorCode.RivieraDataFetchFailure,e.message)}),P.PreviewsEventLogger.mark(P.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA),this.hasFileFlipped(j))return;const h=V.getState().rivieraData[j.serialized];let E;if(h&&(E=h.error,E&&(null==E?void 0:E.statusCode)!==_.RivieraStatus.PasswordProtected)){if(null==(null==E?void 0:E.statusCode)||!navigator.onLine)throw new I.FVError(I.FVErrorCode.UserOffline,"There is a network connectivity issue");throw new I.FVError(I.FVErrorCode.RivieraDataFetchFailure,`Riviera Failure, status code "${E.statusCode}"`)}if(V.dispatch((0,p.logSessionEvent)({event:v.SessionEventType.FilePreviewDownloadSucceeded,fileViewerId:H,previewSessionId:G,extra:{preview_type:b}})),V.dispatch((0,r.setBootstrappedFile)({fileViewerId:H,previewKey:j})),B.log_views_to_pass){const e={file_views:[{file_info:{file_identifier:i,shared_link_details:O?{url:O.url}:void 0},platform_type:{".tag":(0,S.is_android)()&&(0,S.is_supported_mobile_browser)()?"mobile_android":S.iphone?"mobile_ios":"web"}}]};K?V.dispatch((0,m.logFileViewAction)({arg:e})):V.dispatch((0,m.loggedOutLogFileViewAction)({arg:e}))}try{(0,w.initializePASSPresence)(V,i),yield this.pluginManager.loadPlugins(),this.pluginManager.setActiveEditPlugin(j,T),this.pluginManager.triggerPluginsPreviewDidInitialize(C),P.PreviewsEventLogger.mark(P.PreviewsTimingEvents.FVSDK_PLUGINS_INITIALIZED)}catch(e){V.dispatch((0,p.logSessionEvent)({event:v.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:G,extra:{e:e}}))}this.pluginManager.subscribeToPluginActivation(G)}catch(e){switch((0,f.isFVError)(e)||(e=new I.FVError(I.FVErrorCode.Unknown)),e.type){case I.FVErrorCode.PreviewsDataApiFailure:case I.FVErrorCode.NoExtension:case I.FVErrorCode.InvalidFileInfo:case I.FVErrorCode.UnsupportedPreviewType:case I.FVErrorCode.MalformedPreviewsDataApiResponse:case I.FVErrorCode.FileTooLarge:V.dispatch((0,p.logSessionEvent)({event:v.SessionEventType.FilePreviewSupportDenied,fileViewerId:this.fileViewerId,previewSessionId:G,extra:{error_code:I.FVErrorCode[e.type]}}));break;default:V.dispatch((0,p.logSessionEvent)({event:v.SessionEventType.FilePreviewDownloadFailed,fileViewerId:this.fileViewerId,previewSessionId:G,extra:{error_code:I.FVErrorCode[e.type]}}))}const t=null===(i=(0,y.getCurrentFile)(V.getState(),H))||void 0===i?void 0:i.previewKey;if(!t)return;V.dispatch((0,r.setErroredFile)({fileViewerId:H,previewKey:t,error:e})),V.dispatch((0,r.setPreviewLoadingAction)({isPreviewLoading:!1})),yield this.pluginManager.loadPlugins(),this.pluginManager.setActiveEditPlugin(t,void 0),this.pluginManager.triggerPluginsPreviewDidError(e)}this.pluginManager.setDefaultRightRailPlugin(j,E),null==W&&V.dispatch((0,r.initializeRightRail)({fileViewerId:this.fileViewerId,sourceContext:v.UserActionContext.Initialization,forceOpen:Boolean(C.shouldFocusApproval)})),P.PreviewsEventLogger.mark(P.PreviewsTimingEvents.FVSDK_INITIALIZE_COMPLETE)})),this.getAppProps=()=>{if(!this.initializeOpts)throw new Error("File Viewer not initialized");const{store:e,intl:i,config:t,platformConfig:r,callbacks:a,canCloseViewer:s}=this.platformProps,{pluginInstances:o,rightRailPluginInstances:l}=this.pluginManager.getPluginInstances(),c=this.pluginManager.queryBus,d=this.pluginManager.navigation,u=this.pluginManager.context,p=this.pluginManager.triggerPluginsPreviewDidMarkTti,v=this.handleAppDestroy,f=this.handleAppMount,_=this.sdkBatteries,g=Object.assign(Object.assign({},n.DEFAULT_FILE_CONFIG),this.initializeOpts.fileConfig||{});return{store:e,intl:i,id:this.fileViewerId,callbacks:a,config:t,canCloseViewer:s,pluginInstances:o,rightRailPluginInstances:l,pluginQueryBus:c,pluginNavigation:d,pluginContext:u,onTtiMarked:p,onDestroy:v,onMount:f,batteries:_,platformConfig:r,fileConfig:g,isLoggedIn:this.initializeOpts.isLoggedIn}},this.doTeardown=()=>t.__awaiter(this,void 0,void 0,(function*(){this.endSession(),yield this.pluginManager.doTeardown()})),this.endSession=()=>{if(this.sessionActive){this.sessionActive=!1;const{store:e}=this.platformProps,i=e.getState().loggingSession[this.fileViewerId].file_preview_session_id,t=(0,y.getCurrentFile)(e.getState(),this.fileViewerId),r=P.PreviewsEventLogger.getEventTimelineWithStartTime();e.dispatch((0,p.logSessionEvent)({event:v.SessionEventType.FilePreviewSessionEnded,fileViewerId:this.fileViewerId,previewSessionId:i,extra:Object.keys(r).length?{timeline:JSON.stringify(r)}:void 0})),(null==t?void 0:t.file_id)&&(0,w.teardownPASSPresence)(e,t.file_id)}P.PreviewsEventLogger.endCurrentSession()},this.handleAppDestroy=()=>t.__awaiter(this,void 0,void 0,(function*(){this.mounted=!1,yield this.doTeardown()})),this.handleAppMount=()=>{this.mounted=!0},this.cleanup=()=>{window.removeEventListener("beforeunload",this.endSession)};const A=(0,a.v4)();this.fileViewerId=A,this.platformProps=e,this.apiv2ClientBase=i,this.sdkBatteries=C;const{store:O,deviceType:F=v.DeviceType.desktop}=e;this.store=O,this.pluginManager=new E.PluginManager(e,i,T,A,this.reinitialize),this.pluginManager.loadPlugins(),O.dispatch((0,r.initializeFileViewer)({fileViewerId:A,deviceType:F})),O.dispatch((0,o.getCurrentAccountAction)({arg:void 0,params:{}})),O.dispatch((0,o.getRootInfoAction)({arg:void 0})),window.addEventListener("beforeunload",this.endSession,{once:!0}),P.PreviewsEventLogger.mark(P.PreviewsTimingEvents.FVSDK_CONSTRUCTOR)}}})),define("typescript/libraries/file-viewer/src/file_viewer/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defaultPlatformConfig=void 0,i.defaultPlatformConfig={osModifierKey:"ctrlKey"}})),define("typescript/libraries/file-viewer/src/file_viewer/plugin_manager",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/queries","typescript/libraries/file-viewer/src/plugins/context","typescript/libraries/file-viewer/src/plugins/navigation","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/store_utils","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PluginManager=void 0;i.PluginManager=class{constructor(e,i,u,p,v){this.instances={},this.rightRailInstances={},this.loadPlugins=()=>t.__awaiter(this,void 0,void 0,(function*(){const e={},i={};this.instances=e,this.rightRailInstances=i,(yield Promise.all(this.wrappedPluginLoaders.map(e=>e.load()))).forEach(t=>{if(t){const[r,a]=t;e[r]=a,(0,s.isRightRailPlugin)(a)&&(i[r]=a)}})})),this.wrapPluginLoader=e=>{const i=e.pluginId,{intl:r}=this.platformProps,n={intl:r,apiv2ClientBase:this.apiv2ClientBase};let s=null,o=null;const l=()=>t.__awaiter(this,void 0,void 0,(function*(){if(s)return[i,s];const t=performance.now();return s=yield e.load(n,this.context),this.store.dispatch((0,a.logDuration)({eventName:"plugin_load_ms",duration:performance.now()-t,fileViewerId:this.fileViewerId,tags:{pluginName:i}})),[i,s]}));return{load:()=>e.isEnabled&&!e.isEnabled(this.context)?Promise.resolve(null):(o||(o=l()),o)}},this.exitPluginEditMode=()=>t.__awaiter(this,void 0,void 0,(function*(){this.store.dispatch((0,r.setActiveEditPlugin)({fileViewerId:this.fileViewerId,sourceContext:n.UserActionContext.RightRail,pluginId:void 0}))})),this.hideContentPane=e=>{this.store.dispatch((0,r.hideContentPane)({fileViewerId:this.fileViewerId,sourceContext:n.UserActionContext.Toolbar,pluginId:e}))},this.updatePreviewMetadata=(e,i)=>{const t=e.file_id,a=e.sj_id,n=e.ns_id,s=e.url,o=(0,d.getPreviewKey)(t,n,a,s);i&&o&&this.store.dispatch((0,r.setPreviewMetadata)(Object.assign(Object.assign({},i),{previewKey:o})))},this.setPluginActivationParams=e=>{this.pluginActivationParams=e},this.clearPluginActivationParams=()=>{this.pluginActivationParams=void 0},this.triggerPluginsPreviewDidRender=()=>t.__awaiter(this,void 0,void 0,(function*(){var e,i;for(const t of Object.values(this.instances))null===(i=null===(e=t.lifecycle)||void 0===e?void 0:e.previewDidRender)||void 0===i||i.call(e)})),this.triggerPluginsPreviewDidMarkTti=()=>t.__awaiter(this,void 0,void 0,(function*(){var e,i;for(const t of Object.values(this.instances))null===(i=null===(e=null==t?void 0:t.lifecycle)||void 0===e?void 0:e.previewDidMarkTTI)||void 0===i||i.call(e)})),this.reinitializeFileViewer=e=>t.__awaiter(this,void 0,void 0,(function*(){this.reinitialize(e)})),this.getPluginInstances=()=>({pluginInstances:this.instances,rightRailPluginInstances:this.rightRailInstances}),this.doTeardown=()=>t.__awaiter(this,void 0,void 0,(function*(){const e=this.store.getState().loggingSession[this.fileViewerId].file_preview_session_id;try{this.triggerPluginDidDeactivateForCurrent()}catch(i){this.store.dispatch((0,a.logSessionEvent)({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:i}}))}this.unsubscribeFromPluginActivation&&this.unsubscribeFromPluginActivation();try{yield this.triggerPluginsPreviewWillTeardown()}catch(i){this.store.dispatch((0,a.logSessionEvent)({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:i}}))}})),this.fileViewerId=p,this.platformProps=e,this.apiv2ClientBase=i,this.reinitialize=v;const{store:f,config:_,showAuthModal:g,canCloseViewer:m}=e;this.store=f,this.navigation=(0,c.makeNavigation)({store:f,fileViewerId:p,reinitializeFileViewer:this.reinitializeFileViewer,exitPluginEditMode:this.exitPluginEditMode,hideContentPane:this.hideContentPane,updatePreviewMetadata:this.updatePreviewMetadata,setPluginActivationParams:this.setPluginActivationParams,showAuthModal:g,canCloseViewer:m}),this.context=(0,l.makePluginContext)({store:this.store,sdkConfig:_,fileViewerId:this.fileViewerId,reinitializeFileViewer:this.reinitializeFileViewer,exitPluginEditMode:this.exitPluginEditMode,hideContentPane:this.hideContentPane,updatePreviewMetadata:this.updatePreviewMetadata,setPluginActivationParams:this.setPluginActivationParams}),this.wrappedPluginLoaders=u.map(this.wrapPluginLoader),this.queryBus=new o.PluginQueryBus({getPageForSelection:()=>{}})}getPluginByName(e){return e&&this.instances&&this.instances[e]?this.instances[e]:null}getActivePluginInstance(){const e=(0,p.getActivePluginId)(this.store.getState(),this.fileViewerId);return this.getPluginByName(e)}setDefaultRightRailPlugin(e,i){var a;return t.__awaiter(this,void 0,void 0,(function*(){if(this.defaultPlugin=i,(0,p.getSelectedRightRailPluginId)(this.store.getState(),this.fileViewerId))return;const e=this.rightRailInstances?Object.keys(this.rightRailInstances)[0]:void 0;this.store.dispatch((0,r.setActiveRightRailPlugin)({fileViewerId:this.fileViewerId,sourceContext:n.UserActionContext.Initialization,pluginId:null!==(a=this.defaultPlugin)&&void 0!==a?a:e,skipLogging:!0}))}))}setActiveEditPlugin(e,i){return t.__awaiter(this,void 0,void 0,(function*(){this.store.dispatch((0,r.setActiveEditPlugin)({fileViewerId:this.fileViewerId,sourceContext:n.UserActionContext.Initialization,pluginId:i}))}))}triggerPluginDidDeactivateForCurrent(){const e=this.getActivePluginInstance();e&&e.lifecycle&&e.lifecycle.pluginDidDeactivate&&e.lifecycle.pluginDidDeactivate()}subscribeToPluginActivation(e){return t.__awaiter(this,void 0,void 0,(function*(){const i=this.fileViewerId;this.unsubscribeFromPluginActivation=(0,u.observeStore)(this.store,e=>(0,p.getActivePluginId)(e,i),(i,t)=>{const r=this.getPluginByName(i);if(r&&r.lifecycle&&r.lifecycle.pluginDidDeactivate)try{r.lifecycle.pluginDidDeactivate()}catch(i){this.store.dispatch((0,a.logSessionEvent)({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:i}}))}const s=this.getPluginByName(t);if(s&&r!==s&&s.lifecycle&&s.lifecycle.pluginDidActivate){try{s.lifecycle.pluginDidActivate(this.pluginActivationParams)}catch(i){this.store.dispatch((0,a.logSessionEvent)({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:i}}))}this.clearPluginActivationParams()}})}))}triggerPluginsPreviewDidInitialize(e){var i,t;for(const r of Object.values(this.instances))null===(t=null===(i=r.lifecycle)||void 0===i?void 0:i.previewDidInitialize)||void 0===t||t.call(i,e)}triggerPluginsPreviewWillTeardown(){var e,i;for(const t of Object.values(this.instances))null===(i=null===(e=t.lifecycle)||void 0===e?void 0:e.previewWillTeardown)||void 0===i||i.call(e)}triggerPluginsPreviewDidError(e){var i,t;for(const r of Object.values(this.instances))null===(t=null===(i=r.lifecycle)||void 0===i?void 0:i.previewDidError)||void 0===t||t.call(i,e)}}})),define("typescript/libraries/file-viewer/src/preview_archive/archive_snack_bar",["require","exports","tslib","react","react-intl","dig-components/snackbar","dig-components/progress_indicators","dig-components/icons","dig-components/icons/src","dig-components/buttons","typescript/libraries/file-viewer/src/preview_archive/preview_archive.module.css","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/hooks/use_toolbar_override","react-redux"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ArchiveSnackBar=void 0,r=t.__importStar(r),d=t.__importStar(d);i.ArchiveSnackBar=e=>{const i=e.filePreviewUiData.extractAllSnackbarState,t=(0,a.useIntl)(),f=(0,v.useDispatch)(),{fileViewerId:_,previewKey:g}=e,m=r.useCallback(()=>f((0,u.updateArchiveExtractAllSnackbarState)({extractAllSnackbarState:null,fileViewerId:_,previewKey:g})),[f,_,g]);if((0,p.useOverrideToolbar)(_,i?"hidden":void 0),!i)return null;let w;if("pending"===i.state)w=r.createElement(n.Snackbar,{open:!0,timeout:0},r.createElement(s.Spinner,{"aria-valuetext":"Loading",size:"small",inverse:!0}),r.createElement(n.Snackbar.Message,null,t.formatMessage({id:"Cdmrh0",defaultMessage:"Extracting files..."})));else if("loaded"===i.state){const e=()=>{f((0,u.openFileURL)({fqPath:i.data}))};w=r.createElement(n.Snackbar,{open:!0,timeout:0},r.createElement(o.UIIcon,{src:l.CheckmarkCircleLine}),r.createElement(n.Snackbar.Message,null,t.formatMessage({id:"Qs0be2",defaultMessage:"Files extracted to {folder} in your main Dropbox folder"},{folder:i.data})),r.createElement(n.Snackbar.Actions,null,r.createElement(c.Button,{variant:"transparent",inverse:!0,onClick:e},t.formatMessage({id:"SliIKT",defaultMessage:"Open"})),r.createElement(c.Button,{variant:"transparent",inverse:!0,onClick:m},t.formatMessage({id:"1dhg8/",defaultMessage:"Close"}))))}else w=r.createElement(n.Snackbar,{open:!0,timeout:0},r.createElement(o.UIIcon,{src:l.FailLine}),r.createElement(n.Snackbar.Message,null,t.formatMessage({id:"Jh3TK7",defaultMessage:"Couldn't extract files"})),r.createElement(n.Snackbar.Actions,null,r.createElement(c.Button,{variant:"transparent",inverse:!0,onClick:m},t.formatMessage({id:"1dhg8/",defaultMessage:"Close"}))));return r.createElement("div",{className:d.snackBar},w)}})),define("typescript/libraries/file-viewer/src/right_rail/right_rail",["require","exports","tslib","react","typescript/component_libraries/files_components/src/right-rail/right_rail","react-redux","typescript/libraries/file-viewer/src/right_rail/right_rail.module.css","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/ui/animations","typescript/libraries/file-viewer/src/hooks/selectors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewRightRail=i.NOOP=void 0,r=t.__importStar(r),s=t.__importStar(s);i.NOOP=()=>{},i.PreviewRightRail=r.default.memo(({fileViewerId:e,fileName:t,pluginInstances:g,pluginNavigation:m,pluginQueryBus:w,height:b})=>{const h=(0,n.useDispatch)();(0,p.useMarkTimingEventOnMount)(p.PreviewsTimingEvents.FVSDK_RIGHT_RAIL_MOUNT);const y=(0,_.useFileViewerSelector)(e,d.isRightRailOpen),S=(0,n.useSelector)(i=>m&&(0,o.getPluginData)(i,{fileViewerId:e,navigation:m})),E=(0,n.useSelector)(i=>(0,l.makePluginProps)(i,e,S,w)),P=(0,n.useSelector)(i=>(0,l.makePluginControlProps)(i,e,S,w)),I=r.default.useRef(null),T=(0,_.useFileViewerSelector)(e,d.getIsEditingVideo),C=e=>{var i;return void 0===e[1].rightRailUI.isBladeSupported||!E||E&&E.file&&(null===(i=e[1].rightRailUI)||void 0===i?void 0:i.isBladeSupported(E.file))},A=(0,n.useSelector)(i=>{var t;const r=(0,c.getSelectedRightRailPluginId)(i,e),a=g&&Object.entries(g).find(e=>e[0]===r);if(a&&!C(a)){const i=Object.entries(g).filter(C),t=null==i?void 0:i[0];t&&h((0,u.setActiveRightRailPlugin)({fileViewerId:e,sourceContext:v.UserActionContext.Default,pluginId:t[0]}))}return r||g&&(null===(t=Object.keys(g))||void 0===t?void 0:t[0])}),O=r.default.useCallback(i=>{i===A&&y||h((0,u.setActiveRightRailPlugin)({pluginId:i,fileViewerId:e,sourceContext:v.UserActionContext.RightRail}))},[h,e,A,y]),F=r.default.useCallback(()=>{const i={fileViewerId:e,sourceContext:v.UserActionContext.RightRail};h((0,u.openRightRail)(i))},[h,e]),k=(0,r.useCallback)(()=>{h((0,u.closeRightRail)({fileViewerId:e,sourceContext:v.UserActionContext.RightRail}))},[h,e]),x=r.default.useCallback(e=>{O(e),F()},[O,F]);if(!E||!A)return null;const D=g&&Object.entries(g).map(([e,{rightRailUI:{Sidebar:i}}])=>r.default.createElement(i,Object.assign({},E,{key:`plugin-sidebar-${e}`}))),L=P&&g&&Object.entries(g).map(([e,{rightRailUI:{Control:t}}])=>r.default.createElement(t,Object.assign({},P,{isSelectedPlugin:e===A,onClick:i.NOOP,key:`plugin-control-${e}`})));return void 0===y?null:void 0===D||void 0===L?r.default.createElement("div",{style:{height:b},className:s.previewRightRailWrapper},r.default.createElement("div",{className:y?s.skeletonExpanded:s.skeletonCollapsed})):r.default.createElement("div",{style:{height:b},className:s.previewRightRailWrapper,"data-testid":"fv-sdk-right-rail"},r.default.createElement(a.RightRail.RightRailWrapper,{isExpanded:y,withTitle:t,onCollapse:k,expandedBlade:A,className:s.rightRailContainer,onExpandBlade:y?O:x,onExpand:F,expandedChildren:D,collapsedChildren:L}),r.default.createElement(f.OverlayAnimation,{nodeRef:I,active:T,mount:!0},r.default.createElement("div",{ref:I,className:s.overlay})))}),i.PreviewRightRail.displayName="PreviewRightRail",i.PreviewRightRail.displayName="PreviewRightRail"})),define("typescript/libraries/file-viewer/src/right_rail/download_dropdown",["require","exports","tslib","react","dig-components/buttons","dig-components/menu","dig-components/tooltips","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/utils/loadable","react-intl","react-redux"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DownloadDropdown=i.normalize=void 0,r=t.__importStar(r);function f(e){return e?("/"!==e.charAt(0)&&(e=`/${e}`),"/"===e.charAt(e.length-1)?e.substr(0,e.length-1):e):""}i.normalize=f;i.DownloadDropdown=({fileViewerId:i,fileId:g,previewKey:m,canDownload:w,copyTargets:b,useTextButton:h,extractConfig:y,useOutlineButton:S})=>{var E,P;const I=(0,p.useIntl)(),T=(0,v.useDispatch)(),C=()=>{T((0,d.downloadFile)({previewKey:m,fileViewerId:i,sourceContext:c.UserActionContext.RightRail}))},A=e=>()=>{T((0,d.copyToDropbox)({previewKey:m,fileViewerId:i,sourceContext:c.UserActionContext.RightRail,role:e}))},O=I.formatMessage({id:"Mran8D",defaultMessage:"Download"}),F=()=>t.__awaiter(void 0,void 0,void 0,(function*(){T((0,d.updateArchiveExtractAllSnackbarState)({extractAllSnackbarState:(0,u.makePendingLoadableData)(),fileViewerId:i,previewKey:m}));const{unzipAction:r}=yield new Promise((i,t)=>{e(["typescript/libraries/api_v2/redux/flows"],i,t)}).then(t.__importStar);T(r({arg:{file:{identifier:{file_id:g,".tag":"file_id"}}}},{previewKey:m,fileViewerId:i}))})),k=y.canExtract&&w?(e=>{let i;switch(null==e?void 0:e[".tag"]){case"cdm_team":const t=(function(e,i){const t=(e=f(e)).split("/").pop();return t||(i||"Dropbox")})(e.home_path);i=t.length>12?I.formatMessage({id:"TAv+z6",defaultMessage:"Extract to my member folder"}):I.formatMessage({id:"53+pL4",defaultMessage:"Extract to {cdm_tmf_name} folder"},{cdm_tmf_name:t});break;case"not_on_cdm_team":default:i=I.formatMessage({id:"v021UF",defaultMessage:"Extract to my Dropbox"})}return{text:i,value:F,disabled:!1,key:"decompress"}})(y.rootInfo):void 0,x=[w?{text:O,value:C,disabled:!1,key:"download"}:void 0,...b.map(({text:e,isDisabled:i,role:t})=>({text:e,value:A(t),disabled:i,key:e})),k].filter(Boolean);if(1===x.length)return r.createElement(a.Button,{onClick:null===(E=x[0])||void 0===E?void 0:E.value,variant:"outline"},null===(P=x[0])||void 0===P?void 0:P.text);const D=x.map(e=>e?r.createElement(n.Menu.ActionItem,{id:"download-menu-item",key:e.key,value:e.value,disabled:e.disabled},e.text):null);return h?r.createElement(a.SplitButton,{variant:S?"outline":"primary",renderMenu:_(D,I.formatMessage({id:"zeKy1a",defaultMessage:"More download options"})),onClick:C},O):r.createElement(n.Menu.Wrapper,{key:"download-dropdown-menu",onSelection:e=>{e()}},({getContentProps:e,getTriggerProps:i,triggerRef:t})=>r.createElement(r.Fragment,null,r.createElement(s.Tooltip,{placement:"left",title:O,triggerRef:t},r.createElement(a.IconButton,Object.assign({},i(),{variant:"transparent","aria-label":O}),r.createElement(o.UIIcon,{src:l.DownloadLine}))),r.createElement(n.Menu.Content,Object.assign({},e()),r.createElement(n.Menu.Segment,null,D))))},i.DownloadDropdown.displayName="DownloadDropdown";const _=(e,i)=>({buttonProps:t})=>r.createElement(n.Menu.Wrapper,{key:"download-dropdown-menu",onSelection:e=>{e()}},({getContentProps:s,getTriggerProps:o})=>r.createElement(r.Fragment,null,r.createElement(a.Button,Object.assign({},o(),t,{"aria-label":i})),r.createElement(n.Menu.Content,Object.assign({},s()),r.createElement(n.Menu.Segment,null,e))));i.DownloadDropdown.displayName="DownloadDropdown"})),define("metaserver/static/js/logging/hive/schemas/web-file_previews",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.WebFilePreviewsLoggingRow=void 0;i.WebFilePreviewsLoggingRow=class{constructor(e){this.category="web-file_previews",this.active_user_id=null,this.anon_ip=null,this.authed_user_ids=null,this.identity_gid=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_agent=null,this.user_id=null,this.device_type=e.device_type,this.event_name=e.event_name,this.extra=e.extra,this.file_extension=e.file_extension,this.file_last_edit_ts=e.file_last_edit_ts,this.file_obj_id=e.file_obj_id,this.file_preview_session_id=e.file_preview_session_id,this.file_preview_size=e.file_preview_size,this.file_sf_status=e.file_sf_status,this.file_size=e.file_size,this.file_viewer_session_id=e.file_viewer_session_id,this.is_starred=e.is_starred,this.ns_id=e.ns_id,this.sj_id=e.sj_id,this.x_dropbox_path=e.x_dropbox_path,this.timestamp=Date.now()/1e3|0,Object.seal(this)}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/pass",["require","exports","metaserver/static/js/pass/beacon_presence_helpers","metaserver/static/js/pass/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getPresenceBeaconIOClient=void 0,i.getPresenceBeaconIOClient=function(e,i){return{subscribe(a){var n;const s=i(),o=(null==s?void 0:s.file.file_id)===a?null===(n=null==s?void 0:s.sharedLinkInfo)||void 0===n?void 0:n.url:void 0;t.BeaconPresenceHelpers.transmitBeaconData({prevBeaconFileData:null,beaconFileData:new r.BeaconFileData(a,o),user:null!=e?e:null,passSessionId:void 0})},unsubscribe(a){var n;const s=i(),o=(null==s?void 0:s.file.file_id)===a?null===(n=null==s?void 0:s.sharedLinkInfo)||void 0===n?void 0:n.url:void 0;t.BeaconPresenceHelpers.shutdown({beaconFileData:new r.BeaconFileData(a,o),user:null!=e?e:null,async:!0})}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/hooks",["require","exports","tslib","react","react-redux","@reduxjs/toolkit","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/home/resource_id_types","metaserver/static/js/starred/browse_exports","metaserver/static/js/core/i18n","dig-components/icons/src","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/file_store/utils","metaserver/static/js/starred/redux/selectors","metaserver/static/js/starred/redux/slice","metaserver/static/js/starred/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.isStarringEnabled=i.useStarControl=void 0,i.useStarControl=function({getActiveFile:e,onToggle:i}){const{file:p}=e(),v=(0,a.useDispatch)(),m=(0,a.useSelector)(e=>(0,f.getIsStarred)(e,p.file_id));(0,r.useEffect)(()=>{v((0,_.fetchMissingStarredStatuses)([{id:p.file_id,type:o.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}]))},[p]);const w=(0,r.useCallback)(()=>t.__awaiter(this,void 0,void 0,(function*(){null==i||i();const e=yield v((0,_.updateStarredStatus)({id:p.file_id,newStatus:!m,showSnackbar:!1}));try{(0,n.unwrapResult)(e),(0,g.displayStarSnackbar)({itemName:(0,l.itemNameFromStarrableItem)(p),isStarred:!m,success:!0})}catch(e){(0,g.displayStarSnackbar)({itemName:(0,l.itemNameFromStarrableItem)(p),isStarred:!m,success:!1})}})),[i,v,p,m]),b=(0,u.useStabilizedCallback)(e=>{e.preventDefault(),e.stopPropagation(),w()}),h=(0,u.useStabilizedCallback)(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),w())});return{message:c.intl.formatMessage(m?s.UNSTAR_ACTION_STRING:s.STAR_ACTION_STRING),iconSrc:m?d.StarFill:d.StarLine,handleClick:b,handleKeyPress:h}},i.isStarringEnabled=function(e){return(0,p.isLiveFile)(e)&&!(0,v.isSharedFile)(e)&&!(0,p.isInsideVaultFolder)(e)}})),define("metaserver/static/js/previews/ui/sharing_plugin/loader",["require","exports","tslib","react","react-intl","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/core/i18n","dig-components/icons/src","dig-components/icons","metaserver/static/js/core/browser_detection","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/file_viewer/share_helpers","typescript/libraries/file-viewer/src/core/logging/constants","metaserver/static/js/file_store/utils","metaserver/static/js/sharing/api/client","metaserver/static/js/sharing/access_level","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/action_bar/action_bar_strings"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeShareMetaserverLoader=i.SHARE_PLUGIN_ID=void 0,r=t.__importDefault(r),u=t.__importStar(u),i.SHARE_PLUGIN_ID="SHARE";const w=(0,a.defineMessage)({id:"VzQ1nj",defaultMessage:"Ask the owner of this file for permission to share it with others"});i.makeShareMetaserverLoader=(e,a,b)=>({pluginId:i.SHARE_PLUGIN_ID,load:(h,y)=>{const S=b&&new f.FileShareApiClient({userId:b.id});return Promise.resolve(new class{constructor(r){this.identifier=i.SHARE_PLUGIN_ID,this.lifecycle={previewDidInitialize:()=>t.__awaiter(this,void 0,void 0,(function*(){var i;const{file:t}=e(),r=(0,v.isSharedFile)(t),n=(0,c.is_supported_mobile_browser)();this.isMobile=n||window.innerWidth<801;const s=a===g.SDKPreviewSurface.SHARED_LINK||a===g.SDKPreviewSurface.VERSION_HISTORY;b&&this.isMobile&&r&&S&&!s&&t.file_id!==(null===(i=this.metadata)||void 0===i?void 0:i.id)&&t.file_id!==this.lastFailedId&&(yield S.getMetadataAlpha({contentId:t.file_id}).then(e=>this.metadata=e).catch(()=>this.lastFailedId=t.file_id))}))},this.context=r}actionDefinitions(){return b&&this.isMobile&&a!==g.SDKPreviewSurface.VERSION_HISTORY?{alwaysInOverflow:[[this.shareDefinition(e())]]}:{}}shareDefinition(e){const{file:t}=e,a=(0,v.isSharedFile)(t),c=!!this.metadata&&this.metadata.access_type!==_.ACCESS_LEVEL.WRITER,f=a&&c;return(0,n.makePluginActionDefinition)({label:s.intl.formatMessage(m.SHARE_ACTION_STRING),disabled:f?{disabled:!0,tooltipMessage:s.intl.formatMessage(w)}:{disabled:!1},icon:r.default.createElement(l.UIIcon,{src:o.ShareArrowLine}),id:i.SHARE_PLUGIN_ID,action:()=>{b&&(u.share(t,b,null,{origin:d.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE}),this.context.logUserAction(p.UserAction.Share,p.UserActionContext.TitleBarMain))}})}}(y))}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/version_history_plugin",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/icons","dig-components/icons/src","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/core/browser","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/clean/browse_interface","metaserver/static/js/file_store/utils","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/cloud_docs/constants","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/sync_everything/constants","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeVersionHistoryActionLoader=void 0,r=t.__importDefault(r),l=t.__importStar(l);i.makeVersionHistoryActionLoader=(e,i,t)=>({actionDefinitions:()=>{const{file:m}=e();if(!i||!(0,u.isBrowseFile)(m)||(0,p.isCloudBasedDoc)(m)||(0,v.isPointerByExtension)(m.fq_path)||(0,f.isPnmLinkNodeSelected)(m)||!(0,f.isLiveFile)(m))return{};let w="";return w=(0,_.isBackupBrowse)()?(0,d.getFileHistoryUrlForNsPath)({nsPath:m.ns_path,nsId:m.ns_id,userId:i.id},{inside_backup:"true",return_url:l.get_href()}):(0,d.getFileHistoryUrl)({fqPath:m.fq_path,userId:i.id}),{alwaysInOverflow:[[(0,o.makePluginActionDefinition)({label:a.intl.formatMessage(c.VERSION_HISTORY_ACTION_STRING),icon:r.default.createElement(n.UIIcon,{src:s.ClockLine}),id:g.VERSION_HISTORY_ACTION_PLUGIN_ID,action:()=>{t.logUserAction("version_history","title_bar_button"),l.redirect(w)}})]]}}})})),define("typescript/libraries/file-viewer/src/keyboard/bindings",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","ts-key-enum","typescript/libraries/file-viewer/src/core/utils/browser_detection"],(function(e,i,t,r,a,n,s){"use strict";function o(e){return null!=e&&null!=e.preventDefault}function l(e){return function(i){e(),o(i)&&i.preventDefault()}}function c({dispatch:e,fileViewerId:i,previewKey:t,requireCommandKey:s,fileIndex:o}){if(0===o)return[];const c=l(()=>{e((0,a.flipToPreviousFile)({fileViewerId:i,previewKey:t,sourceContext:r.UserActionContext.Keyboard}))}),d={keyboardEventCriteria:{key:n.Key.ArrowLeft,osModifierKey:!0},callback:c};return s?[d]:[{keyboardEventCriteria:{key:n.Key.ArrowLeft},callback:c},d]}function d({dispatch:e,fileViewerId:i,previewKey:t,requireCommandKey:s,fileIndex:o,collectionFileCount:c}){if(o===c-1)return[];const d=l(()=>{e((0,a.flipToNextFile)({fileViewerId:i,previewKey:t,sourceContext:r.UserActionContext.Keyboard}))}),u={keyboardEventCriteria:{key:n.Key.ArrowRight,osModifierKey:!0},callback:d};return s?[u]:[{keyboardEventCriteria:{key:n.Key.ArrowRight},callback:d},u]}function u(e){return{keyboardEventCriteria:{key:n.Key.PageDown},callback:l(e)}}function p(e){return{keyboardEventCriteria:{key:n.Key.ArrowDown},callback:l(e)}}function v(e){return[{keyboardEventCriteria:{key:"-",osModifierKey:!0},callback:l(e)}]}function f(e){return{keyboardEventCriteria:{key:n.Key.End},callback:l(e)}}function _({key:e,callback:i,shift:t,osModifierKey:r}){return{keyboardEventCriteria:{key:e,shiftKey:t||!1,osModifierKey:r||!1},callback:i}}Object.defineProperty(i,"__esModule",{value:!0}),i.getKeyboardBinding=i.getDeleteFileBindings=i.getEscapeBinding=i.getBrowserFindBinding=i.getFindInDocBinding=i.getHomeEndBindings=i.getZoomInOutBindings=i.getUpDownBindings=i.getPageUpDownBindings=i.getFileFlippingBindings=i.isKeyboardEvent=void 0,s=t.__importStar(s),i.isKeyboardEvent=o,i.getFileFlippingBindings=function(e){return[...d(e),...c(e)]},i.getPageUpDownBindings=function({pageUp:e,pageDown:i}){return[(t=e,{keyboardEventCriteria:{key:n.Key.PageUp},callback:l(t)}),u(i)];var t},i.getUpDownBindings=function({up:e,down:i}){return[(t=e,{keyboardEventCriteria:{key:n.Key.ArrowUp},callback:l(t)}),p(i)];var t},i.getZoomInOutBindings=function({zoomIn:e,zoomOut:i}){return[...(t=e,[{keyboardEventCriteria:{key:"+",osModifierKey:!0},callback:l(t)}]),...v(i)];var t},i.getHomeEndBindings=function({home:e,end:i}){return[(t=e,{keyboardEventCriteria:{key:n.Key.Home},callback:l(t)}),f(i)];var t},i.getFindInDocBinding=function(e){return{keyboardEventCriteria:{key:"f",osModifierKey:!0},callback:l(e)}},i.getBrowserFindBinding=function(e){return{keyboardEventCriteria:{key:"f",osModifierKey:!0},callback:e}},i.getEscapeBinding=function(e){return{keyboardEventCriteria:{key:n.Key.Escape},callback:l(e)}},i.getDeleteFileBindings=function(e){const i=_({key:n.Key.Delete,callback:()=>{e(n.Key.Delete)}}),t=_({key:n.Key.Backspace,callback:()=>{e(n.Key.Backspace)}});return s.mac?[i,t]:[i]},i.getKeyboardBinding=_})),define("typescript/libraries/file-viewer/src/keyboard/context",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardBindingContext=void 0,r=t.__importStar(r);const a=()=>{};i.KeyboardBindingContext=r.createContext({registerKeyBindings:a,unregisterKeyBindings:a}),i.KeyboardBindingContext.displayName="KeyboardBindingContext"})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_binding_map",["require","exports","typescript/libraries/file-viewer/src/keyboard/keyboard_binding"],(function(e,i,t){"use strict";function r(e){return t.NormalizedKeyboardEventCriteriaKeys.map(i=>`${i}:${e[i]}`).join("")}function a(e,i){return(function(e,i){return e.reduce((e,{keyboardEventCriteria:t,callback:r})=>(e[i(t)]=r,e),{})})(e,e=>(function(e,i){return r((0,t.normalizeKeyboardEventCriteria)(e,i))})(e,i))}Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardBindingMap=void 0;i.KeyboardBindingMap=class{constructor(e,i){this.bindingDict={},this.bindingDict=a(e,i)}getCallbackForEvent(e){const i=(0,t.normalizeKeyboardEvent)(e);return this.bindingDict[r(i)]}}})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_binding",["require","exports","ts-key-enum"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.normalizeKeyboardEventCriteria=i.normalizeKeyboardEvent=i.NormalizedKeyboardEventCriteriaKeys=i.genericNormalizedKeyboardEventCriteria=void 0,i.genericNormalizedKeyboardEventCriteria={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,key:t.Key.Unidentified},i.NormalizedKeyboardEventCriteriaKeys=Object.keys(i.genericNormalizedKeyboardEventCriteria),i.normalizeKeyboardEvent=function(e){return{altKey:!0===e.altKey,ctrlKey:!0===e.ctrlKey,metaKey:!0===e.metaKey,shiftKey:!0===e.shiftKey,key:e.key}},i.normalizeKeyboardEventCriteria=function(e,i){return{altKey:!0===e.altKey,shiftKey:!0===e.shiftKey,key:e.key,ctrlKey:!1,metaKey:!1,[i]:!0===e.osModifierKey}}})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_connector",["require","exports","tslib","react","typescript/libraries/file-viewer/src/keyboard/context"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardBindingConnector=void 0,r=t.__importStar(r);i.KeyboardBindingConnector=e=>{const{keyboardBindings:i,name:t,scope:n}=e,s=r.useRef(t),o=r.useRef(n||!1),l=r.useContext(a.KeyboardBindingContext);return r.useEffect(()=>(l.registerKeyBindings(i,s.current,o.current),()=>{l.unregisterKeyBindings(s.current,o.current)}),[i]),null},i.KeyboardBindingConnector.displayName="KeyboardBindingConnector"})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_provider",["require","exports","tslib","react","lodash","typescript/libraries/file-viewer/src/keyboard/keyboard_binding_map","typescript/libraries/file-viewer/src/keyboard/context"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardBindingProvider=void 0,r=t.__importStar(r);i.KeyboardBindingProvider=e=>{const{disableBindings:i,children:t,osModifierKey:o}=e,l=r.useRef({}),c=r.useRef("default"),d=r.useRef(null),u=r.useCallback((e,i,t)=>{if(l.current[t]||(l.current[t]={}),e){if(l.current[t][i])throw new Error(`Keybindings for name ${i} registered twice`);l.current[t][i]=e}else delete l.current[t][i];const r=l.current[c.current];d.current=new n.KeyboardBindingMap((e=>(0,a.flatten)(Object.values(e)))(r),o)},[]),p=r.useCallback((e,i,t)=>{t&&i!==c.current&&(c.current=i),u(e,i,t?i:"default")},[]),v=r.useCallback((e,i)=>{i&&c.current===e&&(c.current="default"),u(void 0,e,i?e:"default")},[]),f=r.useCallback(e=>{var i;if(!(function(e){const i=e.target||e.srcElement;if(!i)return!0;const t=i.tagName,r="INPUT"===t||"SELECT"===t||"TEXTAREA"===t,a=i instanceof HTMLInputElement&&("submit"===i.type||"button"==i.type);return!(i.hasAttribute&&i.hasAttribute("contenteditable")&&"false"!==i.getAttribute("contenteditable").toLowerCase())&&(!r||a)})(e))return;const t=null===(i=d.current)||void 0===i?void 0:i.getCallbackForEvent(e);t&&t(e)},[]);r.useEffect(()=>{if(!0!==i){const e=(0,a.throttle)(f,0);return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}},[f]);const _=r.useMemo(()=>({registerKeyBindings:p,unregisterKeyBindings:v,updateKeyBindings:u}),[]);return r.createElement(s.KeyboardBindingContext.Provider,{value:_},t)},i.KeyboardBindingProvider.displayName="KeyboardBindingProvider"})),define("typescript/libraries/file-viewer/src/app.module.css",["require","exports","css!typescript/libraries/file-viewer/src/app.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transparentBackground=i.editPluginFullscreenContainer=i.contentContainer=i.containerV2=i.container=void 0,i.container="_container_1l1lf_1",i.containerV2="_containerV2_1l1lf_22",i.contentContainer="_contentContainer_1l1lf_27",i.editPluginFullscreenContainer="_editPluginFullscreenContainer_1l1lf_37",i.transparentBackground="_transparentBackground_1l1lf_42";i.default={container:"_container_1l1lf_1",containerV2:"_containerV2_1l1lf_22",contentContainer:"_contentContainer_1l1lf_27",editPluginFullscreenContainer:"_editPluginFullscreenContainer_1l1lf_37",transparentBackground:"_transparentBackground_1l1lf_42"}})),define("typescript/libraries/file-viewer/src/titlebar/title_bar.module.css",["require","exports","css!typescript/libraries/file-viewer/src/titlebar/title_bar.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.dropboxLogo=i.mobileMeatball=i.helpButton=i.actionBarMobile=i.actionBar=i.spacer=i.title=i.closeButton=i.overlay=i.mobileTitleBar=i.titleBar=void 0,i.titleBar="_titleBar_35n33_5",i.mobileTitleBar="_mobileTitleBar_35n33_12",i.overlay="_overlay_35n33_17",i.closeButton="_closeButton_35n33_27",i.title="_title_35n33_5",i.spacer="_spacer_35n33_41",i.actionBar="_actionBar_35n33_45",i.actionBarMobile="_actionBarMobile_35n33_50",i.helpButton="_helpButton_35n33_54",i.mobileMeatball="_mobileMeatball_35n33_60",i.dropboxLogo="_dropboxLogo_35n33_64";i.default={titleBar:"_titleBar_35n33_5",mobileTitleBar:"_mobileTitleBar_35n33_12",overlay:"_overlay_35n33_17",closeButton:"_closeButton_35n33_27",title:"_title_35n33_5",spacer:"_spacer_35n33_41",actionBar:"_actionBar_35n33_45",actionBarMobile:"_actionBarMobile_35n33_50",helpButton:"_helpButton_35n33_54",mobileMeatball:"_mobileMeatball_35n33_60",dropboxLogo:"_dropboxLogo_35n33_64"}})),define("typescript/libraries/file-viewer/src/preview_core.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_core.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.brandingBackgroundImage=i.brandingLogo=i.isFullScreen=i.toolbar=i.app=void 0,i.app="_app_13gtt_5",i.toolbar="_toolbar_13gtt_14",i.isFullScreen="_is-full-screen_13gtt_33",i.brandingLogo="_brandingLogo_13gtt_43",i.brandingBackgroundImage="_brandingBackgroundImage_13gtt_50";i.default={app:"_app_13gtt_5",toolbar:"_toolbar_13gtt_14",isFullScreen:"_is-full-screen_13gtt_33",brandingLogo:"_brandingLogo_13gtt_43",brandingBackgroundImage:"_brandingBackgroundImage_13gtt_50"}})),define("typescript/libraries/file-viewer/src/preview_error/preview_error.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_error/preview_error.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.illustrationContainer=i.ctaLink=i.ctaSecondary=i.message=i.header=i.img=i.container=void 0,i.container="_container_9t5i9_1",i.img="_img_9t5i9_12",i.header="_header_9t5i9_16",i.message="_message_9t5i9_24",i.ctaSecondary="_ctaSecondary_9t5i9_29",i.ctaLink="_ctaLink_9t5i9_34",i.illustrationContainer="_illustrationContainer_9t5i9_38";i.default={container:"_container_9t5i9_1",img:"_img_9t5i9_12",header:"_header_9t5i9_16",message:"_message_9t5i9_24",ctaSecondary:"_ctaSecondary_9t5i9_29",ctaLink:"_ctaLink_9t5i9_34",illustrationContainer:"_illustrationContainer_9t5i9_38"}})),define("typescript/libraries/file-viewer/src/preview_excel/preview_excel.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_excel/preview_excel.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.gridCell=i.gridTable=i.toolbar=i.textAlignCenter=i.loadingSpinnerWrapper=i.tab=i.segmentedControlOptionContainer=i.buttonSeparator=i.tabsGroup=i.tabsTabs=i.tabsGroupButtonsContainer=i.tabsGroupContainer=i.tabsGroupAndButtonsContainer=i.tabsPanelContainerNoScroll=i.tabsPanelContainer=i.sheetContent=i.rowHeaders=i.columnHeaders=i.sheetHeader=i.columnHeadersContainer=i.rowHeadersContainer=i.sheetHeaderContainer=i.headerSpacer=i.sheet=i.sheetWrapper=i.container=void 0,i.container="_container_7l53b_9",i.sheetWrapper="_sheetWrapper_7l53b_16",i.sheet="_sheet_7l53b_16",i.headerSpacer="_header-spacer_7l53b_31",i.sheetHeaderContainer="_sheetHeaderContainer_7l53b_41",i.rowHeadersContainer="_row-headersContainer_7l53b_46",i.columnHeadersContainer="_column-headersContainer_7l53b_52",i.sheetHeader="_sheetHeader_7l53b_41",i.columnHeaders="_column-headers_7l53b_52",i.rowHeaders="_row-headers_7l53b_46",i.sheetContent="_sheet-content_7l53b_82",i.tabsPanelContainer="_tabsPanelContainer_7l53b_91",i.tabsPanelContainerNoScroll="_tabsPanelContainerNoScroll_7l53b_106",i.tabsGroupAndButtonsContainer="_tabsGroupAndButtonsContainer_7l53b_110",i.tabsGroupContainer="_tabsGroupContainer_7l53b_123",i.tabsGroupButtonsContainer="_tabsGroupButtonsContainer_7l53b_127",i.tabsTabs="_tabsTabs_7l53b_137",i.tabsGroup="_tabsGroup_7l53b_110",i.buttonSeparator="_buttonSeparator_7l53b_150",i.segmentedControlOptionContainer="_segmentedControlOptionContainer_7l53b_161",i.tab="_tab_7l53b_91",i.loadingSpinnerWrapper="_loadingSpinnerWrapper_7l53b_180",i.textAlignCenter="_textAlignCenter_7l53b_188",i.toolbar="_toolbar_7l53b_193",i.gridTable="_gridTable_7l53b_210",i.gridCell="_gridCell_7l53b_216";i.default={container:"_container_7l53b_9",sheetWrapper:"_sheetWrapper_7l53b_16",sheet:"_sheet_7l53b_16",headerSpacer:"_header-spacer_7l53b_31",sheetHeaderContainer:"_sheetHeaderContainer_7l53b_41",rowHeadersContainer:"_row-headersContainer_7l53b_46",columnHeadersContainer:"_column-headersContainer_7l53b_52",sheetHeader:"_sheetHeader_7l53b_41",columnHeaders:"_column-headers_7l53b_52",rowHeaders:"_row-headers_7l53b_46",sheetContent:"_sheet-content_7l53b_82",tabsPanelContainer:"_tabsPanelContainer_7l53b_91",tabsPanelContainerNoScroll:"_tabsPanelContainerNoScroll_7l53b_106",tabsGroupAndButtonsContainer:"_tabsGroupAndButtonsContainer_7l53b_110",tabsGroupContainer:"_tabsGroupContainer_7l53b_123",tabsGroupButtonsContainer:"_tabsGroupButtonsContainer_7l53b_127",tabsTabs:"_tabsTabs_7l53b_137",tabsGroup:"_tabsGroup_7l53b_110",buttonSeparator:"_buttonSeparator_7l53b_150",segmentedControlOptionContainer:"_segmentedControlOptionContainer_7l53b_161",tab:"_tab_7l53b_91",loadingSpinnerWrapper:"_loadingSpinnerWrapper_7l53b_180",textAlignCenter:"_textAlignCenter_7l53b_188",toolbar:"_toolbar_7l53b_193",gridTable:"_gridTable_7l53b_210",gridCell:"_gridCell_7l53b_216"}})),define("typescript/libraries/file-viewer/src/transcript_blade/transcript_blade.module.css",["require","exports","css!typescript/libraries/file-viewer/src/transcript_blade/transcript_blade.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.showing=i.resumeAutoScrollButton=i.currentSearchMatch=i.transcriptCaptionText=i.transcriptSearchNavigatorWrapper=i.transcriptSearchMatchFoundText=i.transcriptProgressBar=i.transcriptProgressBarWrapper=i.transcriptLoadingScreen=i.transcriptErrorInfo=i.transcriptSegmentListContentWrapper=i.transcriptHeaderOptionMenuWrapper=i.transcriptHeaderBetaBadge=i.transcriptSearchWrapper=i.transcriptBladeContentWrapper=i.transcriptBlade=i.transcriptSearchHeight=i.minSegmentHeight=void 0,i.minSegmentHeight="42",i.transcriptSearchHeight="52",i.transcriptBlade="_transcriptBlade_jvlqx_10",i.transcriptBladeContentWrapper="_transcriptBladeContentWrapper_jvlqx_17",i.transcriptSearchWrapper="_transcriptSearchWrapper_jvlqx_22",i.transcriptHeaderBetaBadge="_transcriptHeaderBetaBadge_jvlqx_28",i.transcriptHeaderOptionMenuWrapper="_transcriptHeaderOptionMenuWrapper_jvlqx_32",i.transcriptSegmentListContentWrapper="_transcriptSegmentListContentWrapper_jvlqx_38",i.transcriptErrorInfo="_transcriptErrorInfo_jvlqx_45",i.transcriptLoadingScreen="_transcriptLoadingScreen_jvlqx_52",i.transcriptProgressBarWrapper="_transcriptProgressBarWrapper_jvlqx_63",i.transcriptProgressBar="_transcriptProgressBar_jvlqx_63",i.transcriptSearchMatchFoundText="_transcriptSearchMatchFoundText_jvlqx_83",i.transcriptSearchNavigatorWrapper="_transcriptSearchNavigatorWrapper_jvlqx_88",i.transcriptCaptionText="_transcriptCaptionText_jvlqx_93",i.currentSearchMatch="_currentSearchMatch_jvlqx_97",i.resumeAutoScrollButton="_resumeAutoScrollButton_jvlqx_101",i.showing="_showing_jvlqx_110";i.default={minSegmentHeight:"42",transcriptSearchHeight:"52",transcriptBlade:"_transcriptBlade_jvlqx_10",transcriptBladeContentWrapper:"_transcriptBladeContentWrapper_jvlqx_17",transcriptSearchWrapper:"_transcriptSearchWrapper_jvlqx_22",transcriptHeaderBetaBadge:"_transcriptHeaderBetaBadge_jvlqx_28",transcriptHeaderOptionMenuWrapper:"_transcriptHeaderOptionMenuWrapper_jvlqx_32",transcriptSegmentListContentWrapper:"_transcriptSegmentListContentWrapper_jvlqx_38",transcriptErrorInfo:"_transcriptErrorInfo_jvlqx_45",transcriptLoadingScreen:"_transcriptLoadingScreen_jvlqx_52",transcriptProgressBarWrapper:"_transcriptProgressBarWrapper_jvlqx_63",transcriptProgressBar:"_transcriptProgressBar_jvlqx_63",transcriptSearchMatchFoundText:"_transcriptSearchMatchFoundText_jvlqx_83",transcriptSearchNavigatorWrapper:"_transcriptSearchNavigatorWrapper_jvlqx_88",transcriptCaptionText:"_transcriptCaptionText_jvlqx_93",currentSearchMatch:"_currentSearchMatch_jvlqx_97",resumeAutoScrollButton:"_resumeAutoScrollButton_jvlqx_101",showing:"_showing_jvlqx_110"}})),define("typescript/libraries/file-viewer/src/transcript_blade/transcript_segment.module.css",["require","exports","css!typescript/libraries/file-viewer/src/transcript_blade/transcript_segment.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transcriptSettingInfoText=i.transcriptSettingInfoWrapper=i.transcriptSegmentHeader=i.activeSegment=i.copyButton=i.transcriptSegmentTimestamp=i.transcriptSegment=i.settingInfoSectionHeight=void 0,i.settingInfoSectionHeight="48",i.transcriptSegment="_transcriptSegment_ftqbp_10",i.transcriptSegmentTimestamp="_transcriptSegmentTimestamp_ftqbp_20",i.copyButton="_copyButton_ftqbp_26",i.activeSegment="_activeSegment_ftqbp_30",i.transcriptSegmentHeader="_transcriptSegmentHeader_ftqbp_37",i.transcriptSettingInfoWrapper="_transcriptSettingInfoWrapper_ftqbp_60",i.transcriptSettingInfoText="_transcriptSettingInfoText_ftqbp_68";i.default={settingInfoSectionHeight:"48",transcriptSegment:"_transcriptSegment_ftqbp_10",transcriptSegmentTimestamp:"_transcriptSegmentTimestamp_ftqbp_20",copyButton:"_copyButton_ftqbp_26",activeSegment:"_activeSegment_ftqbp_30",transcriptSegmentHeader:"_transcriptSegmentHeader_ftqbp_37",transcriptSettingInfoWrapper:"_transcriptSettingInfoWrapper_ftqbp_60",transcriptSettingInfoText:"_transcriptSettingInfoText_ftqbp_68"}})),define("typescript/libraries/file-viewer/src/file_activity_blade/file_activity_blade_plugin",["require","exports","tslib","react","typescript/component_libraries/files_components/src/blades/file_activity/index","react-redux","typescript/libraries/file-viewer/src/file_activity_blade/types"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileActivityPluginBase=void 0,r=t.__importStar(r);i.FileActivityPluginBase=class{constructor(e,i,t,o,l){this.lifecycle={},this.layerUI={},this.rightRailUI={Sidebar:e=>{const i=this.onOpenVersionHistory,t=(0,r.useMemo)(()=>i?{enabled:!0,onVersionHistoryClicked:()=>{i(),this.context.logUserAction("version_history_clicked","right_sidebar")}}:{enabled:!1},[i]),o=(0,r.useCallback)(e=>{this.context.logUserAction(e,"right_sidebar")},[]);return r.default.createElement(n.Provider,{store:this.store},r.default.createElement(a.FileActivityBlade,{id:s.FILE_ACTIVITY_PLUGIN_ID,fileId:e.file.fileId,user:this.user,intl:this.platform.intl,versionHistory:t,logFilterChange:o}))},Control:()=>r.default.createElement(a.CollapsedFileActivityBladeButton,{id:s.FILE_ACTIVITY_PLUGIN_ID,intl:this.platform.intl})},this.platform=e,this.store=i,this.user=t,this.context=o,this.onOpenVersionHistory=l}}})),define("typescript/libraries/file-viewer/src/preview_image/data_transform",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transform=void 0,i.transform=function(e,i){return{thumbnailUrl:e.default_src||"",fullSizeUrl:e.full_size_src||"",srcSet:e.src_set||"",alt:"",imgWidth:i?i.width:void 0,imgHeight:i?i.height:void 0}}})),define("typescript/libraries/file-viewer/src/preview_image/img_layer",["require","exports","tslib","classnames","react","typescript/libraries/file-viewer/src/preview_image/preview_image.module.css","typescript/libraries/file-viewer/src/logging/performance"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ImageLayer=void 0,r=t.__importDefault(r),a=t.__importStar(a),n=t.__importStar(n);i.ImageLayer=e=>{const{onSmallImageLoaded:i,onFullSizeImageLoaded:t,previewKey:o}=e,[l,c]=a.useState(!1),[d,u]=a.useState(!0);a.useEffect(()=>{!l&&d||(c(!1),u(!0))},[o.serialized]);const p=a.useCallback(({currentTarget:{naturalWidth:e,naturalHeight:t}})=>{u(!1),s.PreviewsEventLogger.mark(s.PreviewsTimingEvents.FVSDK_IMAGE_ON_LOAD),i(e,t)},[]),v=a.useCallback(({currentTarget:{naturalWidth:e,naturalHeight:i}})=>{u(!1),c(!0),t(e,i),s.PreviewsEventLogger.mark(s.PreviewsTimingEvents.FVSDK_FULL_IMAGE_ON_LOAD)},[]),{data:{alt:f,fullSizeUrl:_,thumbnailUrl:g,srcSet:m,imgWidth:w,imgHeight:b},className:h,config:{img_size_optimization:y},layerViewportScale:S}=e;if(y&&w&&b)return a.createElement("div",{className:n.layer},a.createElement("img",{alt:f,className:(0,r.default)(n.fullSizeImg,h),src:_,srcSet:m,sizes:S+"vw",onLoad:v,onError:e.onImageError,"data-testid":"fv-sdk-img-preview-full-size"}));const E={display:"none"};return a.createElement("div",{className:n.layer},a.createElement("img",{key:g,src:g,srcSet:m,style:d?E:void 0,onLoad:p,className:(0,r.default)(n.smallImg,h),onError:e.onImageError,alt:f,"aria-hidden":!!l,"data-testid":"fv-sdk-img-preview-thumbnail"}),a.createElement("img",{key:_,alt:f,className:(0,r.default)(n.fullSizeImg,h),src:_,style:l?void 0:E,onLoad:v,onError:e.onImageError,"data-testid":"fv-sdk-img-preview-full-size"}))},i.ImageLayer.displayName="ImageLayer"})),define("typescript/libraries/file-viewer/src/preview_image/layers",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_image/img_layer","typescript/libraries/file-viewer/src/plugins/layers","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defaultLayerRenderFn=void 0,r=t.__importStar(r);i.defaultLayerRenderFn=e=>i=>{const{activePluginInstance:t,pluginProps:o}=e,l=[r.createElement(a.ImageLayer,Object.assign({key:"image"},e,i))];if((null==o?void 0:o.previewType)===s.PreviewType.Archive)return l;if(null!=o&&null!=t){const e=Object.assign(Object.assign({},o),{layer:{dimensions:o.file.dimensions}}),{layerUI:{Layer:i,LayerWithEventBubbling:a}}=t;if(null!=i)return[...l,r.createElement(i,Object.assign({},e))];if(null!=a)return[r.createElement(n.PortalTargetProvider,{key:"portal-target-provider"},i=>r.createElement(a,Object.assign({},e),r.createElement(n.PortalWrapper,{element:i},l),r.createElement("div",null)))]}return l}})),define("typescript/libraries/file-viewer/src/preview_image/preview_image",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/mobile_web/mobile_web.module.css","typescript/libraries/file-viewer/src/preview_image/viewport","typescript/libraries/file-viewer/src/preview_image/data_transform","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/ui/header","typescript/libraries/file-viewer/src/ui/header.module.css","typescript/libraries/file-viewer/src/core/types/errors","typescript/libraries/file-viewer/src/preview_error/preview_error","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview","typescript/libraries/file-viewer/src/core/utils/sizing_const","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/preview_image/layers","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/hooks/selectors","react-intl","typescript/libraries/file-viewer/src/core/data/utils","react-redux"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I,T,C){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewImage=i.UnconnectedPreviewImage=void 0,r=t.__importStar(r),a=t.__importDefault(a),n=t.__importStar(n);const A=parseInt(n.mobileFooterHeight,10);function O(e){const i={width:void 0,height:void 0};return e.config.img_size_optimization&&e.previewMetadata&&e.previewMetadata.dimensions?e.previewMetadata.dimensions:i}function F(e,i){const{width:t,height:r}=O(e);return r&&t?{originalWidth:t,originalHeight:r}:{originalWidth:i.assetWidth,originalHeight:i.assetHeight}}class k extends r.PureComponent{constructor(e){super(e),this.state={},this.updateFitScaleFactor=(e=this.state)=>{const{width:i,height:t,responsiveSize:r,config:a}=this.props,{originalWidth:n,originalHeight:s}=F(this.props,e),o=(0,v.noToolbarShown)(r,a);if(!n||!s)return;const l=(c={width:n,height:s},d={width:i,height:t},u=m.IMAGE_PADDING,Math.min((d.width-u.horizontal)/c.width,(d.height-u.top-u.bottom)/c.height));var c,d,u;n<i-m.IMAGE_PADDING.horizontal&&s<t-m.IMAGE_PADDING.top-(o?m.IMAGE_PADDING.bottomNoToolbar:m.IMAGE_PADDING.bottom)?this.handleFitScaleFactorChange(1,l):this.handleFitScaleFactorChange(l)},this.handleSmallImgLoad=(e,i)=>{this.state.assetWidth&&this.state.assetHeight||this.handleFullSizeImgLoad(e,i)},this.handleFullSizeImgLoad=(e,i)=>{const t={assetHeight:i,assetWidth:e,aspectRatio:e/i,renderSucceeded:!0};this.setState(t,()=>this.updateFitScaleFactor(t))},this.onRenderFailed=()=>{this.setState({errored:!0})},this.handleCloseFullScreen=()=>{const{dispatch:e,previewKey:i,fileViewerId:t}=this.props;e((0,w.exitFullScreen)({previewKey:i,fileViewerId:t,sourceContext:b.UserActionContext.Default}))},this.handleFitScaleFactorChange=(e,i)=>{const{dispatch:t,fileViewerId:r,previewKey:a}=this.props;t((0,w.updateFitScaleFactor)({fileViewerId:r,previewKey:a,fitScaleFactor:e,storedFitScaleFactor:i}))},this.handleUpdateDimensions=e=>{const{dispatch:i,fileViewerId:t,previewKey:r}=this.props;i((0,w.updateDimensions)({fileViewerId:t,previewKey:r,dimensions:e}))},this.zoomIn=()=>{const{dispatch:e,fileViewerId:i,previewKey:t}=this.props;e((0,w.zoomIn)({fileViewerId:i,previewKey:t,sourceContext:b.UserActionContext.Keyboard}))},this.zoomOut=()=>{const{dispatch:e,fileViewerId:i,previewKey:t}=this.props;e((0,w.zoomOut)({fileViewerId:i,previewKey:t,sourceContext:b.UserActionContext.Keyboard}))},this.keyboardBindings=(0,h.getZoomInOutBindings)({zoomIn:this.zoomIn,zoomOut:this.zoomOut}),f.PreviewsEventLogger.mark(f.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_START)}componentDidMount(){this.updateFitScaleFactor(),f.PreviewsEventLogger.mark(f.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_MOUNT)}componentDidUpdate(e,i){const{width:t,height:r,onInteractive:a,onRenderSucceeded:n}=this.props,{renderSucceeded:s}=this.state,{originalWidth:o,originalHeight:l}=F(this.props,this.state),{originalWidth:c,originalHeight:d}=F(e,i);s&&s!==i.renderSucceeded&&(a(),n()),i.assetHeight===this.state.assetHeight&&i.assetWidth===this.state.assetWidth||(this.state.assetWidth&&this.state.assetHeight?this.handleUpdateDimensions({height:this.state.assetHeight,width:this.state.assetWidth}):this.handleUpdateDimensions(void 0)),e.width===t&&e.height===r&&c===o&&d===l||this.updateFitScaleFactor()}componentWillUnmount(){this.handleUpdateDimensions(void 0)}render(){const{activePluginInstance:e,config:i,fileViewerUiData:t,dispatch:f,fileInfo:w,fileMetadata:b,filePreviewUiData:h,fileViewerId:P,height:I,intl:T,previewKey:C,previewMetadata:k,pluginProps:x,width:D,responsiveSize:L,header:M,brandingInfo:R,sharedLinkInfo:N,onRenderSucceeded:j,onInteractive:V}=this.props,{originalWidth:B,originalHeight:U}=F(this.props,this.state),K=(function(e,i){const{width:t,height:r}=O(e);return null!=r&&null!=t?t/r:i.aspectRatio})(this.props,this.state),z=(0,l.getCurrentScaleFactorFromFilePreviewUi)(h),H=(0,v.noToolbarShown)(L,i),q=t.isFullScreen;if(this.state.errored)return r.createElement(p.PreviewRenderError,Object.assign({},this.props,{error:new u.FVError(u.FVErrorCode.Unknown)}));if(!k||!k.content)return null;const W=(0,o.transform)(k.content,k.dimensions);return i.mobile_web?r.createElement("div",{style:{height:`${I-A}px`},className:n.imageContainer},x&&r.createElement(c.PluginHeader,{pluginProps:x,activePluginInstance:e||void 0,header:M}),r.createElement("img",{onLoad:()=>{j(),V()},onError:this.onRenderFailed,src:W.fullSizeUrl,"data-testid":"fv-sdk-img-preview-full-size"})):r.createElement("div",{className:(0,a.default)(_.app,{[_.isFullScreen]:q})},q&&r.createElement(E.CloseButton,{onClick:this.handleCloseFullScreen}),r.createElement("div",{className:d.headerContainer},r.createElement(S.KeyboardBindingConnector,{name:"preview_image",keyboardBindings:this.keyboardBindings}),r.createElement(g.BrandingFileViewerPreview,{backgroundClass:_.brandingBackgroundImage,logoClass:_.brandingLogo,teamAndUserBranding:{teamBranding:N,userBranding:R}},x&&r.createElement(c.PluginHeader,{pluginProps:x,activePluginInstance:e||void 0,header:M}),r.createElement(s.Viewport,{data:W,originalWidth:B,originalHeight:U,scaleFactor:z,aspectRatio:K,width:D,height:I,topPadding:m.IMAGE_PADDING.top,bottomPadding:H?m.IMAGE_PADDING.bottomNoToolbar:m.IMAGE_PADDING.bottom,horizontalPadding:m.IMAGE_PADDING.horizontal},(0,y.defaultLayerRenderFn)({activePluginInstance:e,dispatch:f,config:i,fileViewerUiData:t,fileInfo:w,fileMetadata:b,filePreviewUiData:h,fileViewerId:P,intl:T,pluginProps:x,previewKey:C,previewMetadata:k,onFullSizeImageLoaded:this.handleFullSizeImgLoad,onImageError:this.onRenderFailed,onSmallImageLoaded:this.handleSmallImgLoad})))))}}i.UnconnectedPreviewImage=k,k.displayName="UnconnectedPreviewImage";i.PreviewImage=e=>{const{fileViewerId:i,previewKey:t}=e,a=(0,I.useIntl)(),n=(0,C.useDispatch)(),s=(0,P.useFileViewerSelector)(i,l.getBrandingInfo),o=(0,P.useFileViewerSelector)(i,l.getSharedLinkInfo),c=(0,P.usePreviewState)(i,t,()=>({}),T.filterZoomableFilePreviewUi);return c?r.createElement(k,Object.assign({},e,c,{intl:a,dispatch:n,brandingInfo:s,sharedLinkInfo:o})):null},i.PreviewImage.displayName="PreviewImage"})),define("typescript/libraries/file-viewer/src/preview_image/viewport",["require","exports","tslib","classnames","react","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/preview_image/preview_image.module.css"],(function(e,i,t,r,a,n,s){"use strict";function o(e,i,t,r){const{left:a,top:n}=e,{w:s,h:o}=i,{w:l,h:c}=t,d=[.5,.5];if(!s||!o||!r)return d;const u=s*r,p=o*r;return u>l&&(d[0]=(a+l/2)/u),p>c&&(d[1]=(n+c/2)/p),d}function l(e,i,t,r){const{w:a,h:n}=t,{w:s,h:o}=r,l=i*a,c=i*n;return[e[0]*l-s/2,e[1]*c-o/2]}Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=i._calculateScrollPosition=i._calculateFocusPoint=void 0,r=t.__importDefault(r),a=t.__importStar(a),s=t.__importStar(s),i._calculateFocusPoint=o,i._calculateScrollPosition=l;i.Viewport=e=>{const i=a.useRef(null),t=a.useRef([.5,.5]),{scaleFactor:c,originalWidth:d,originalHeight:u,width:p,height:v}=e;a.useLayoutEffect(()=>{i.current&&"function"==typeof i.current.scrollTo&&c&&d&&u&&i.current.scrollTo(...l(t.current,c,{w:d,h:u},{w:p,h:v}))},[c,d,u,v,p]);const f=a.useCallback(e=>{const{scrollLeft:i,scrollTop:r}=e.currentTarget;t.current=o({left:i,top:r},{w:d,h:u},{w:p,h:v},c)},[c,d,u,v,p]),{className:_,aspectRatio:g,data:m}=e,w={width:d,height:u},{topPadding:b,bottomPadding:h,horizontalPadding:y}=e;if(c&&d&&u){const{width:e,height:i,translateX:t,translateY:r}=(0,n.calculateImageSizerDimensions)({width:d,height:u},{width:p,height:v},{top:b,bottom:h},c);w.width=e,w.height=i,w.transform=`translate(${t}px, ${r}px)`}else if(g){const[e,i]=(0,n.calculateFitBox)(p-y,v-b-h,g);w.width=e,w.height=i}else w.visibility="hidden";const S=(0,n.getImageSizeScale)(Number(w.width));return a.createElement("div",{className:(0,r.default)(_,s.viewport),style:{width:p,height:v},onScroll:f,ref:i},a.createElement("div",{className:(0,r.default)(s.sizer),style:w},e.children({originalWidth:d||0,originalHeight:u||0,data:m,layerViewportScale:S})))},i.Viewport.displayName="Viewport"})),define("typescript/libraries/file-viewer/src/preview_doc/data_transform",["require","exports","typescript/libraries/file-viewer/src/preview_doc/text_transform"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transformData=void 0,i.transformData=function(e){const i=[];return e.metadata&&Array.isArray(e.pages)?e.pages.map(e=>Object.assign(Object.assign({},e),{textboxes:e.textboxes.map(e=>{const i=(0,t.transform)(e.t);return Object.assign(Object.assign({},e),{transformedText:i.str,dir:i.dir})})})):i}})),define("typescript/libraries/file-viewer/src/preview_doc/img_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/preview_doc/utils/sizing"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ImgLayer=void 0,r=t.__importStar(r);class l extends r.PureComponent{constructor(){super(...arguments),this.el=null}componentDidMount(){this.fireEventHandlersIfNeeded()}componentDidUpdate(e){e.previewKey.serialized!==this.props.previewKey.serialized&&this.fireEventHandlersIfNeeded()}fireEventHandlersIfNeeded(){this.el&&this.el.complete&&(this.el.naturalHeight||this.el.naturalWidth?this.props.onImageLoad(this.props.data.pageIndex):this.props.onImageError(this.props.data.pageIndex))}render(){var e,i;const{data:{imgUrls:t,dimension:[l,c]},filePreviewUiData:d,fileMetadata:u,onImageLoad:p,onImageError:v,config:{img_size_optimization:f}}=this.props,_=(0,n.getCurrentScaleFactorFromFilePreviewUi)(d),g=l*_,m=c*_,w=(0,o.getDocPageViewportWidth)(g),b=null!==(i=null===(e=(0,s.filterDocFilePreviewUiState)(d))||void 0===e?void 0:e.viewportWidth)&&void 0!==i?i:0,h=f?{srcSet:t.srcset,sizes:`${2*Math.max(w,b)}vw`}:{};return r.createElement("div",{className:a.imgLayer},r.createElement("img",Object.assign({},h,{ref:e=>this.el=e,alt:u?u.file_name:"",width:g,height:m,role:"tabpanel","aria-hidden":"true",draggable:!1,src:_>=2?t["4x"]:t["1x"],onLoad:()=>p(this.props.data.pageIndex),onError:()=>v(this.props.data.pageIndex),"data-testid":`fvsdk-doc-page-${this.props.data.pageIndex}`})))}}i.ImgLayer=l,l.displayName="ImgLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/layers",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/preview_doc/img_layer","typescript/libraries/file-viewer/src/preview_doc/text_layer","typescript/libraries/file-viewer/src/preview_doc/links_layer","typescript/libraries/file-viewer/src/plugins/layers","typescript/libraries/file-viewer/src/core/types/preview_type"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";function d(e,i,t){const{pluginProps:a,activePluginInstance:n}=e,s=t;if((null==a?void 0:a.previewType)===c.PreviewType.Archive)return s;if(null!=n&&null!=a){const{data:{pageIndex:e}}=i,t=Object.assign(Object.assign({},a),{layer:{dimensions:a.file.pages[e].dimensions,pageIndex:e}}),{layerUI:{Layer:o,LayerWithEventBubbling:c}}=n;if(null!=o)return[...s,r.createElement(o,Object.assign({},t))];if(null!=c)return[r.createElement(l.PortalTargetProvider,{key:"portal-target-provider"},e=>r.createElement(c,Object.assign({},t),r.createElement(l.PortalWrapper,{element:e},s),r.createElement("div",null)))]}return t}Object.defineProperty(i,"__esModule",{value:!0}),i.imageLayerRenderFn=i.defaultLayerRenderFn=void 0,r=t.__importStar(r);i.defaultLayerRenderFn=e=>i=>{const t=[r.createElement(n.ImgLayer,Object.assign({key:"image"},e,i)),r.createElement(s.TextLayer,Object.assign({key:"text",dispatch:e.dispatch,onTextRendered:e.onTextRendered,scaleFactor:(0,a.getCurrentScaleFactorFromFilePreviewUi)(e.filePreviewUiData)},i)),r.createElement(o.LinksLayer,Object.assign({key:"links"},e,i))];return d(e,i,t)};i.imageLayerRenderFn=e=>i=>{const t=[r.createElement(n.ImgLayer,Object.assign({key:"image"},e,i))];return d(e,i,t)}})),define("typescript/libraries/file-viewer/src/preview_doc/links_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/preview_doc/text_transform","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/actions","react-intl","react-redux"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";function d(e){return!!e.ur}Object.defineProperty(i,"__esModule",{value:!0}),i.LinksLayer=i.isLinkUrl=void 0,r=t.__importStar(r),i.isLinkUrl=d;i.LinksLayer=e=>{const{filePreviewUiData:i}=e,t=(0,s.getCurrentScaleFactorFromFilePreviewUi)(i),u=(0,l.useIntl)(),p=(0,c.useDispatch)();const v=e.data.links.map((i,t)=>{const s=i.a;let[l,c,v,f]=i.r;f<0&&(c+=f,f=-f),v<0&&(l+=v,v=-v);const _={position:"absolute",bottom:c,left:l,width:v,height:f};if(d(s)){const{ur:e}=s,i=e.startsWith("mailto:")||e.startsWith("tel:");return r.createElement("a",{key:t,"aria-label":u.formatMessage({id:"+trcEI",defaultMessage:"External Link"}),href:i?e:(0,n.normalizeUrl)(e),onClick:()=>(function(e){p((0,o.openUrl)({url:e}))})(e),rel:"noreferrer noopener",style:_,target:"_blank"})}return r.createElement("div",{key:t,className:a.internalLink,style:_,"aria-label":u.formatMessage({id:"UU1q+t",defaultMessage:"Internal Link"}),onClick:i=>(function(i,t){i.preventDefault(),e.onInternalLinkClicked(t)})(i,s.pn)})});return r.createElement("div",{className:a.linksLayer,style:{transform:`scale(${t})`}},v)},i.LinksLayer.displayName="LinksLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/password_modal",["require","exports","tslib","react","dig-components/modal","react-intl","dig-components/buttons","dig-components/text_fields","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PasswordModal=void 0,r=t.__importStar(r);i.PasswordModal=({passwordAttempt:e,onSubmit:i,onDismiss:t,fileName:c})=>{const d=(0,n.useIntl)(),[u,p]=r.useState("");r.useEffect(()=>p(""),[e]);const v=(0,l.useStabilizedCallback)(e=>{p(e.currentTarget.value)}),f=(0,l.useStabilizedCallback)(e=>{"Enter"===e.key&&i(u)}),_=(0,l.useStabilizedCallback)(()=>{i(u)}),g=e>0,m=d.formatMessage({id:"GKzMoF",defaultMessage:"Close"});return r.createElement(a.Modal,{open:!0,isCentered:!0,withCloseButton:m,onRequestClose:t},r.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},r.createElement(a.Modal.Title,null,d.formatMessage({id:"jvUwnG",defaultMessage:"This file is password protected"}))),r.createElement(a.Modal.Body,null,!!c&&r.createElement(o.TextInput,{type:"text",value:c,style:{display:"none"},wrapperProps:{style:{display:"none"}}}),r.createElement("label",null,g?d.formatMessage({id:"qW3q74",defaultMessage:"The password you entered is incorrect, please try again."}):d.formatMessage({id:"qeA+3O",defaultMessage:"Enter password to continue."}),r.createElement(o.TextInput,{autoFocus:!0,type:"password",value:u,isInvalid:g,placeholder:d.formatMessage({id:"4RJ0I8",defaultMessage:"Password"}),onChange:v,wrapperProps:{style:{marginTop:"15px"}},onKeyDown:f}))),r.createElement(a.Modal.Footer,null,r.createElement(s.Button,{variant:"opacity",onClick:t},d.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})),r.createElement(s.Button,{variant:"primary",onClick:_},d.formatMessage({id:"RS9CyP",defaultMessage:"Submit"}))))},i.PasswordModal.displayName="PasswordModal"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/page",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Page=void 0,r=t.__importStar(r);class n extends r.PureComponent{constructor(){super(...arguments),this.state={},this.onPageRef=e=>{null!=this.props.onRef&&this.props.onRef(this.props.data.pageIndex,e)}}render(){const{scaleFactor:e,children:i,onMouseMove:t,onMouseUp:n,onMouseEnter:s,onMouseDown:o,className:l,data:c,isFocused:d,findInDocHighlights:u,findInDocCurrentHit:p}=this.props,{pageIndex:v,dimension:[f,_]}=c;return r.createElement("div",{id:`pageContainer${v+1}`,className:a.page+" "+(l||""),"data-index":v,style:{width:f*e,height:_*e},onMouseDown:o,onMouseMove:t,onMouseUp:n,onMouseEnter:s,ref:this.onPageRef},i({isFocused:d,data:c,findInDocHighlights:u,findInDocCurrentHit:p}))}}i.Page=n,n.defaultProps={data:{pageIndex:0,dimension:[0,0],thumbnailUrl:"",imgUrls:{"1x":"","4x":""},textboxes:[],links:[]},scaleFactor:0,children:()=>null,onRef:()=>{}},n.displayName="Page"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_pages",["require","exports","tslib","react","lodash","typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_page","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/core/utils/sizing_const"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PdfPages=void 0,r=t.__importStar(r),s=t.__importStar(s);const l=2*parseInt(s.toolbarRowHeight,10)+parseInt(s.toolbarVerticalPadding,10);class c extends r.PureComponent{constructor(e){super(e),this.state={currentPageIndex:0,startPage:0,endPage:0,pagesScrollTop:[]},this.__viewportEl=null,this.viewportElRef=e=>this.__viewportEl=e,this.totalPagesHeight=0,this.maxWidth=0,this.ol=null,this.handleScrollTopChange=()=>{this.__viewportEl&&(this.props.pageNavigation&&this.props.dispatchResolvePageNavigation(),this.setStateForStartAndEndPage(this.state.pagesScrollTop))},this.throttledHandleScrollTopChange=(0,a.throttle)(()=>this.handleScrollTopChange(),50,{leading:!0}),this.scrollDown=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop+60)},this.scrollUp=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop-60)},this.pageUp=()=>{this.scrollToPage(Math.max(0,this.state.currentPageIndex-1))},this.pageDown=()=>{this.props.count&&this.scrollToPage(Math.min(this.props.count-1,this.state.currentPageIndex+1))},this.jumpToPage=e=>{this.scrollToPage(e)},e.findInDocController&&e.findInDocController.setRetrieveCurrentPageIndex(()=>this.state.currentPageIndex)}getMargin(){return o.DOC_LI_MARGIN}computeScrollTops(){const{pages:e,scaleFactor:i}=this.props,t=o.DOC_LI_MARGIN,r=[t];let a=t;for(let n=1;n<e.length;++n){const s=e[n-1].dimension[1]*i+t;r.push(a+s),a+=s}if(e.length>0){const r=e[e.length-1].dimension[1]*i;this.totalPagesHeight=a+r+2*t+l}return this.setState({pagesScrollTop:r}),r}updateMaxWidth(){const{pages:e,scaleFactor:i}=this.props;let t=0;for(let i=0;i<e.length;++i){const r=e[i].dimension[0];r>t&&(t=r)}this.maxWidth=t*i}setStateForStartAndEndPage(e){if(!this.__viewportEl)return;const i=(0,a.sortedIndex)(e,this.__viewportEl.scrollTop+this.__viewportEl.offsetHeight/2),[t,r]=[i-1,i+1],n=Math.max(0,t-10),s=Math.min(this.props.pages.length-1,r+10),o=this.totalPagesHeight,l=this.__viewportEl.offsetHeight,c=Math.max(0,o-l),d=this.__viewportEl.scrollTop>=c?r:t;this.setState({startPage:n,endPage:s,currentPageIndex:d})}scrollToPage(e,i=null,t){const{count:r,scaleFactor:a}=this.props;if(e<0||e>=r||!this.ol||!this.__viewportEl)return;const n=i?i[e]:this.state.pagesScrollTop[e],s=t?t*a-this.__viewportEl.clientHeight/2:0;this.__viewportEl.scrollTop=Math.max(n+o.DOC_LI_MARGIN+s,o.DOC_LI_MARGIN)}componentDidMount(){const e=this.computeScrollTops();this.updateMaxWidth(),this.__viewportEl&&this.setStateForStartAndEndPage(e)}componentDidUpdate(e,i){let t;i.currentPageIndex!==this.state.currentPageIndex&&this.props.onPageChange&&this.props.onPageChange(this.state.currentPageIndex,e.currentPageIndex),e.pages===this.props.pages&&e.scaleFactor===this.props.scaleFactor||(t=this.computeScrollTops(),this.setStateForStartAndEndPage(t),this.updateMaxWidth(),e.scaleFactor!==this.props.scaleFactor&&this.scrollToPage(this.state.currentPageIndex,t)),this.props.pageNavigation&&e.pageNavigation&&this.props.previewKey.serialized!==e.previewKey.serialized?this.props.dispatchResolvePageNavigation():this.props.pageNavigation&&this.scrollToPage(this.props.pageNavigation.pageIndex,t,this.props.pageNavigation.centerOnYOffset)}makePdfPage(e){const{children:i,pages:t,onMouseDown:a,onMouseEnter:s,onMouseMove:o,onMouseUp:l,pageClassName:c,scaleFactor:d,findInDocData:u}=this.props,p=t[e],v=this.state.pagesScrollTop[e];return r.createElement(n.PdfPage,{key:p.pageIndex,index:e,pageData:p,isFocused:this.state.currentPageIndex===e,onMouseDown:a,onMouseEnter:s,onMouseMove:o,onMouseUp:l,onRef:this.props.onPageRef,pageClassName:c,scaleFactor:d,top:v,children:i,findInDocHighlights:null==u?void 0:u.highlights.get(e),findInDocCurrentHit:null==u?void 0:u.currentHit})}render(){const{className:e,pages:i,width:t}=this.props,{startPage:a,endPage:n}=this.state,s={height:this.totalPagesHeight,minWidth:`${this.maxWidth+50}px`},o={width:`${t}px`};return r.createElement("div",{className:e,onScroll:this.throttledHandleScrollTopChange,ref:this.viewportElRef,style:o},r.createElement("ol",{ref:e=>this.ol=e,style:s},i.slice(a,n+1).map((e,i)=>this.makePdfPage(a+i))))}}i.PdfPages=c,c.displayName="PdfPages"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_page",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/renderer/page"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PdfPage=void 0,r=t.__importStar(r),i.PdfPage=r.memo(e=>{const{index:i,pageData:t,isFocused:n,onMouseDown:s,onMouseEnter:o,onMouseMove:l,onMouseUp:c,onRef:d,pageClassName:u,scaleFactor:p,children:v,top:f,findInDocHighlights:_,findInDocCurrentHit:g}=e,{dimension:[m,w]}=t,b=r.useMemo(()=>({width:m*p,height:w*p,transform:`translateY(${f}px)`}),[m,w,p,f]);return r.createElement("li",{"data-index":i,key:i,style:b},r.createElement(a.Page,{className:u,data:t,onMouseDown:s,onMouseEnter:o,onMouseMove:l,onMouseUp:c,scaleFactor:p,isFocused:n,onRef:d,findInDocHighlights:_,findInDocCurrentHit:g},v))}),i.PdfPage.displayName="PdfPage",i.PdfPage.displayName="PdfPage"})),define("typescript/libraries/file-viewer/src/preview_doc/text_box",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/preview_doc/types","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextBox=void 0,r=t.__importStar(r);const o=({text:e,x:i,y:t,width:n,height:o,dir:l,style:c,findInDocHighlights:d,findInDocCurrentHit:u,charOffset:p})=>{const v=d&&a.safari?"spacing":"spacingAndGlyphs",[f,_]=r.useState(),g=r.useCallback(i=>{const a=[];if(d&&null!=i){let n=0;d.forEach(l=>{if(void 0!==p&&(l.startingCharIndex<p||l.startingCharIndex>p+e.trimLeft().length))return;const d=null!=p?p:0,v=i?i.getStartPositionOfChar(Math.min(l.startingCharIndex-d,i.getNumberOfChars()-1)).x:void 0,f=i?i.getEndPositionOfChar(Math.min(l.endingCharIndex-d,i.getNumberOfChars()-1)).x:void 0;if(void 0===v||void 0===f)return;const _=l.hitNumber===u,g=o+3;a.push(r.createElement("rect",{x:v-1.5,y:t-o-1.5,width:f-v+3,height:g,opacity:1,fill:_?s.findInDocHighlightPrimary:s.findInDocHighlightSecondary,style:c,key:n})),n++})}_(a)},[e,t,o,c,d,u,p]);return r.createElement(r.Fragment,null,r.createElement("text",{className:s.textbox,direction:l,height:o,lengthAdjust:v,style:c,textLength:n,x:i,y:t,"data-test":"textbox",ref:d?g:void 0},e),d&&f)};o.displayName="HighlightedTextboxFragment";i.TextBox=({data:{r:[e,i,t,a],d:l,dir:c,transformedText:d,font:u,h:p},onClickLink:v,findInDocHighlights:f,findInDocCurrentHit:_})=>{i=-i;const g={fontSize:p};if(l&&(g.transform=`rotate(${-l}rad)`,g.transformOrigin=`${e}px ${i}px`),u&&(g.fontFamily=u.fontFamily,u.isBold&&(g.fontWeight="bold"),u.isItalic&&(g.fontStyle="italic")),1===d.length){const n=d[0];return r.createElement(o,{text:n.text,x:e,y:i,width:t,height:a,dir:c,style:g,findInDocCurrentHit:_,findInDocHighlights:f})}const m=d.reduce((e,i)=>e+i.text.length,0);let w=0;const b=d.map((s,l)=>{const c=w/m*t+e,d=s.text.length/m*t,u=r.createElement(o,{text:s.text,x:c,y:i,width:d,height:a,findInDocCurrentHit:_,findInDocHighlights:f,charOffset:w});switch(w+=s.text.length,s.type){case n.TextNodeType.email:const e=`mailto:${s.text}`;return r.createElement("a",{key:l,href:e,referrerPolicy:"no-referrer",onClick:()=>v(e)},u);case n.TextNodeType.link:return r.createElement("a",{key:l,href:s.href,target:"_blank",rel:"noreferrer noopener",referrerPolicy:"no-referrer",onClick:()=>v(s.href)},u);default:return u}});return r.createElement("g",{className:s.textbox,direction:c,style:g,"data-test":"textbox"},b)},i.TextBox.displayName="TextBox"})),define("typescript/libraries/file-viewer/src/preview_doc/text_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/text_box","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayer=void 0,r=t.__importStar(r);class o extends r.PureComponent{constructor(){super(...arguments),this.handleLinkClick=e=>{e&&this.props.dispatch((0,s.openUrl)({url:e}))}}componentDidMount(){this.props.onTextRendered(this.props.data.pageIndex)}componentDidUpdate(e){e.data!==this.props.data&&this.props.onTextRendered(this.props.data.pageIndex)}render(){const{data:{textboxes:e,dimension:[i,t]},findInDocHighlights:s,findInDocCurrentHit:o,scaleFactor:l}=this.props,c={transform:`scale(${l})`},d=e.map((e,i)=>r.createElement(a.TextBox,{onClickLink:this.handleLinkClick,key:i,data:e,findInDocHighlights:null==s?void 0:s.get(i),findInDocCurrentHit:o}));return r.createElement("svg",{className:n.textLayer,viewBox:`0 -${t} ${i} ${t}`,width:i,height:t,style:c,"data-test":"text-layer"},d)}}i.TextLayer=o,o.displayName="TextLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/text_transform",["require","exports","typescript/libraries/file-viewer/src/preview_doc/text/unicode","typescript/libraries/file-viewer/src/preview_doc/text/bidi","typescript/libraries/file-viewer/src/preview_doc/types"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transform=i.normalizeUrl=void 0;const n=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,s=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}/,o=/(\s+)/;function l(e){return"http"===e.substr(0,4)?e:"http://"+e}function c(e){return e.split(o).map(e=>{if(o.test(e))return{type:a.TextNodeType.text,text:e.replace("\t"," ")};let i;return s.test(e)?{text:e,type:a.TextNodeType.email}:(i=e.match(n))&&i[2]&&i[4]?{href:l(e),text:e,type:a.TextNodeType.link}:{type:a.TextNodeType.text,text:e}}).reduce((e,i)=>{const t=e[e.length-1];return t&&t.type===a.TextNodeType.text&&i.type===a.TextNodeType.text?t.text+=i.text:e.push(i),e},[])}i.normalizeUrl=l,i.transform=function(e){const i=(0,t.getNormalizedUnicodes)();let a="";for(let r=0;r<e.length;r++){let n=e.charAt(r);void 0!==i[n]&&(n=i[n]),n=(0,t.reverseIfRtl)(n),"\t"===n&&(n=" "),a+=n}const n=(0,r.bidi)(a,-1,!1);return{dir:n.dir,str:c(n.str)}}})),define("typescript/libraries/file-viewer/src/preview_doc/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextNodeType=i.TextDir=void 0,(function(e){e.ltr="ltr",e.rtl="rtl",e.ttb="ttb"})(i.TextDir||(i.TextDir={})),(function(e){e[e.text=0]="text",e[e.email=1]="email",e[e.link=2]="link"})(i.TextNodeType||(i.TextNodeType={}))})),define("typescript/libraries/file-viewer/src/preview_audio_video/helper/thumbnails_helper",["require","exports","tslib","typescript/libraries/file-viewer/src/loading_helpers"],(function(e,i,t,r){"use strict";function a(e){const i={},t=e.text.split(/#xywh=/i);if(i.imageUrl=t[0],2===t.length){const e=t[1].split(/[ ,]+/);4===e.length&&(i.imageX=+e[0],i.imageY=+e[1],i.imageWidth=+e[2],i.imageHeight=+e[3])}return i}Object.defineProperty(i,"__esModule",{value:!0}),i.loadVtt=i.preloadThumbImage=i.parseVttCue=void 0,i.parseVttCue=a,i.preloadThumbImage=function(e){const i=a(e);return i.imageUrl?(0,r.preloadImage)(i.imageUrl):Promise.reject("Unable to get imageUrl from vtt cue")};function n(e){return new Promise((i,t)=>{const r=[],a=new WebVTT.Parser(window,WebVTT.StringDecoder());a.oncue=function(e){r.push(e)},a.onparsingerror=function(e){t(e)},a.onflush=function(){i(r)},a.parse(e),a.flush()})}i.loadVtt=function(e){return(i=e,t.__awaiter(void 0,void 0,void 0,(function*(){return(yield fetch(i,{method:"GET",credentials:"include"})).text()}))).then(n);var i}})),define("typescript/libraries/file-viewer/src/toolbar/audio_video_markers",["require","exports","tslib","react","lodash","react-dom","classnames","dig-components/icons","dig-components/icons/src","dig-components/buttons","typescript/libraries/file-viewer/src/preview_audio_video/helper/thumbnails_helper","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/comments2/plugin/marker","react-redux","typescript/libraries/file-viewer/src/core/utils/time_utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TimeRangeMarker=i.AudioVideoMarkers=i.AudioVideoMarkersComponent=void 0,r=t.__importStar(r),a=t.__importStar(a),s=t.__importDefault(s),u=t.__importStar(u);var g;(function(e){e.Requesting="requesting",e.Failed="failed",e.ImageLoaded="image_loaded"})(g||(g={}));i.AudioVideoMarkersComponent=({threads:e,vttUrl:i,onScrubberThumbnailsLoaded:t,duration:n,openThreadInRightRail:m})=>{const w=(0,r.useRef)([]),[b,h]=(0,r.useState)(g.Requesting),[y,S]=(0,r.useState)(0),[E,P]=(0,r.useState)(0),[I,T]=(0,r.useState)(),[C,A]=(0,r.useState)(0),O=(0,r.useRef)(null),F=(0,f.useSelector)(e=>e.showResolvedComments),k=r.default.useMemo(()=>e?F?Object.entries(e):Object.entries(e).filter(e=>!e[1].resolvedInfo):void 0,[e,F]),x=r.default.useMemo(()=>k&&k.find(e=>{const i=(0,v.getTimeForThread)(e[1]);return void 0!==i&&100*Math.abs(C-i)/n<v.MARKER_WIDTH_PERCENT}),[k,C,n]),D=(0,p.useStabilizedCallback)(e=>{x&&(null==m||m(x[1]),e.stopPropagation())});(0,r.useEffect)(()=>{i&&(0,d.loadVtt)(i).then(e=>{w.current=e,e&&e.length>0&&(0,d.preloadThumbImage)(e[0]).then(()=>{h(g.ImageLoaded),null==t||t(!0)}).catch(()=>{null==t||t(!1),h(g.Failed)})}).catch(()=>{null==t||t(!1),h(g.Failed)})},[i,t]);const L=a.throttle((0,p.useStabilizedCallback)(e=>{if(!e.currentTarget)return;const t=e.currentTarget.getBoundingClientRect(),r=t.width,a=e.clientX-t.left,s=Math.min(Math.max(a,0),r)/r*n;if(P(t.width),S(e.clientX-t.left),A(s),i&&w.current){const e=w.current.find(e=>e.startTime<=s&&e.endTime>=s);e&&T((0,d.parseVttCue)(e))}}),50);(0,r.useEffect)(()=>{const e=O.current;if(e)return e.addEventListener("click",D),()=>e.removeEventListener("click",D)},[D,O]);const{imageUrl:M,imageX:R,imageY:N,imageWidth:j,imageHeight:V}=I||{},B=b===g.Failed?80:128,U=b===g.ImageLoaded?{background:`url("${M}") no-repeat -${R}px -${N}px`,width:j,height:V}:b===g.Failed?{display:"none"}:{},K=Math.min(Math.max(0,y-B/2),E-B),z={left:K},H={left:y-(K+B/2)},q=(0,_.formatTime)(C,n,(0,_.showTimestampDecimalPlaces)(n));return r.default.createElement(r.default.Fragment,null,k&&r.default.createElement("div",{className:u.commentMarkersContainer},k.map(e=>r.default.createElement(v.Marker,{key:e[0],duration:n,thread:e[1]}))),r.default.createElement("div",{className:u.thumbnailHolder,onMouseMove:L},r.default.createElement("div",{className:(0,s.default)(u.thumbnailWrapper,{[u.thumbnailHolderComment]:!!x,[u.thumbnailLoadError]:!!i&&b===g.Failed}),style:z,ref:O},!!i&&r.default.createElement("div",{className:u.thumbnailImage,style:U},b===g.Requesting?r.default.createElement("div",{className:"c-loader"}):null),!!x&&!!i&&r.default.createElement("div",{className:u.commentIconHolder},r.default.createElement(c.IconButton,{className:(0,s.default)(u.regularButton),variant:"transparent",size:"small",inverse:!0},r.default.createElement(o.UIIcon,{src:l.CommentLine}))),!!i&&r.default.createElement("div",{className:u.thumbnailTime}," ",q," "),r.default.createElement("div",{className:u.timeLine,style:H}))))},i.AudioVideoMarkersComponent.displayName="AudioVideoMarkersComponent",i.AudioVideoMarkersComponent.displayName="AudioVideoMarkersComponent";i.AudioVideoMarkers=e=>{var{container:a}=e,s=t.__rest(e,["container"]);return(0,n.createPortal)(r.default.createElement(i.AudioVideoMarkersComponent,Object.assign({},s)),a)},i.AudioVideoMarkers.displayName="AudioVideoMarkers";i.TimeRangeMarker=({timeRange:e,duration:i,container:t})=>{const a=0===i?0:100*e.start/i;let s;return s=e.end?0===i?0:100*(e.end-e.start)/i:0===i?0:100*(i-e.start)/i,(0,n.createPortal)(r.default.createElement("div",{className:u.rangeMarkersContainer},r.default.createElement("div",{className:u.rangeMarker,style:{left:`${a}%`,width:`${s}%`}})),t)}})),define("typescript/libraries/file-viewer/src/preview_doc/text/bidi",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.bidi=void 0;const t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],r=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function a(e){return 0!=(1&e)}function n(e){return 0==(1&e)}function s(e,i,t){for(var r=i,a=e.length;r<a;++r)if(e[r]!==t)return r;return r}function o(e,i,t,r){for(var a=i;a<t;++a)e[a]=r}function l(e,i,t){for(var r=i,a=t-1;r<a;++r,--a){var n=e[r];e[r]=e[a],e[a]=n}}function c(e,i,t){return{str:e,dir:t?"ttb":i?"ltr":"rtl"}}let d=[],u=[];i.bidi=function(e,i,p){var v=!0,f=e.length;if(0===f||p)return c(e,v,p);d.length=f,u.length=f;var _,g,m=0;for(_=0;_<f;++_){d[_]=e.charAt(_);var w=e.charCodeAt(_),b="L";w<=255?b=t[w]:1424<=w&&w<=1524?b="R":1536<=w&&w<=1791?b=r[255&w]:1792<=w&&w<=2220&&(b="AL"),"R"!==b&&"AL"!==b&&"AN"!==b||m++,u[_]=b}if(0===m)return c(e,v=!0);-1===i&&(m/f<.3?(v=!0,i=0):(v=!1,i=1));var h=[];for(_=0;_<f;++_)h[_]=i;var y,S=a(i)?"R":"L",E=S,P=E,I=E;for(_=0;_<f;++_)"NSM"===u[_]?u[_]=I:I=u[_];for(I=E,_=0;_<f;++_)"EN"===(y=u[_])?u[_]="AL"===I?"AN":"EN":"R"!==y&&"L"!==y&&"AL"!==y||(I=y);for(_=0;_<f;++_)"AL"===(y=u[_])&&(u[_]="R");for(_=1;_<f-1;++_)"ES"===u[_]&&"EN"===u[_-1]&&"EN"===u[_+1]&&(u[_]="EN"),"CS"!==u[_]||"EN"!==u[_-1]&&"AN"!==u[_-1]||u[_+1]!==u[_-1]||(u[_]=u[_-1]);for(_=0;_<f;++_)if("EN"===u[_]){var T;for(T=_-1;T>=0&&"ET"===u[T];--T)u[T]="EN";for(T=_+1;T<f&&"ET"===u[T];++T)u[T]="EN"}for(_=0;_<f;++_)"WS"!==(y=u[_])&&"ES"!==y&&"ET"!==y&&"CS"!==y||(u[_]="ON");for(I=E,_=0;_<f;++_)"EN"===(y=u[_])?u[_]="L"===I?"L":"EN":"R"!==y&&"L"!==y||(I=y);for(_=0;_<f;++_)if("ON"===u[_]){var C=s(u,_+1,"ON"),A=E;_>0&&(A=u[_-1]);var O=P;C+1<f&&(O=u[C+1]),"L"!==A&&(A="R"),"L"!==O&&(O="R"),A===O&&o(u,_,C,A),_=C-1}for(_=0;_<f;++_)"ON"===u[_]&&(u[_]=S);for(_=0;_<f;++_)y=u[_],n(h[_])?"R"===y?h[_]+=1:"AN"!==y&&"EN"!==y||(h[_]+=2):"L"!==y&&"AN"!==y&&"EN"!==y||(h[_]+=1);var F,k=-1,x=99;for(_=0,g=h.length;_<g;++_)k<(F=h[_])&&(k=F),x>F&&a(F)&&(x=F);for(F=k;F>=x;--F){var D=-1;for(_=0,g=h.length;_<g;++_)h[_]<F?D>=0&&(l(d,D,_),D=-1):D<0&&(D=_);D>=0&&l(d,D,h.length)}for(_=0,g=d.length;_<g;++_){var L=d[_];"<"!==L&&">"!==L||(d[_]="")}return c(d.join(""),v)}})),define("typescript/libraries/file-viewer/src/preview_doc/text/unicode",["require","exports"],(function(e,i){"use strict";function t(e){var i;return function(){return e&&(i=Object.create(null),e(i),e=null),i}}Object.defineProperty(i,"__esModule",{value:!0}),i.reverseIfRtl=i.getNormalizedUnicodes=void 0;t((function(e){e[63721]=169,e[63193]=169,e[63720]=174,e[63194]=174,e[63722]=8482,e[63195]=8482,e[63729]=9127,e[63730]=9128,e[63731]=9129,e[63740]=9131,e[63741]=9132,e[63742]=9133,e[63726]=9121,e[63727]=9122,e[63728]=9123,e[63737]=9124,e[63738]=9125,e[63739]=9126,e[63723]=9115,e[63724]=9116,e[63725]=9117,e[63734]=9118,e[63735]=9119,e[63736]=9120}));var r=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];i.getNormalizedUnicodes=t((function(e){e["¨"]=" ̈",e["¯"]=" ̄",e["´"]=" ́",e["µ"]="μ",e["¸"]=" ̧",e["Ĳ"]="IJ",e["ĳ"]="ij",e["Ŀ"]="L·",e["ŀ"]="l·",e["ŉ"]="ʼn",e["ſ"]="s",e["Ǆ"]="DŽ",e["ǅ"]="Dž",e["ǆ"]="dž",e["Ǉ"]="LJ",e["ǈ"]="Lj",e["ǉ"]="lj",e["Ǌ"]="NJ",e["ǋ"]="Nj",e["ǌ"]="nj",e["Ǳ"]="DZ",e["ǲ"]="Dz",e["ǳ"]="dz",e["˘"]=" ̆",e["˙"]=" ̇",e["˚"]=" ̊",e["˛"]=" ̨",e["˜"]=" ̃",e["˝"]=" ̋",e["ͺ"]=" ͅ",e["΄"]=" ́",e["ϐ"]="β",e["ϑ"]="θ",e["ϒ"]="Υ",e["ϕ"]="φ",e["ϖ"]="π",e["ϰ"]="κ",e["ϱ"]="ρ",e["ϲ"]="ς",e["ϴ"]="Θ",e["ϵ"]="ε",e["Ϲ"]="Σ",e["և"]="եւ",e["ٵ"]="اٴ",e["ٶ"]="وٴ",e["ٷ"]="ۇٴ",e["ٸ"]="يٴ",e["ำ"]="ํา",e["ຳ"]="ໍາ",e["ໜ"]="ຫນ",e["ໝ"]="ຫມ",e["ཷ"]="ྲཱྀ",e["ཹ"]="ླཱྀ",e["ẚ"]="aʾ",e["᾽"]=" ̓",e["᾿"]=" ̓",e["῀"]=" ͂",e["῾"]=" ̔",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e["‗"]=" ̳",e["․"]=".",e["‥"]="..",e["…"]="...",e["″"]="′′",e["‴"]="′′′",e["‶"]="‵‵",e["‷"]="‵‵‵",e["‼"]="!!",e["‾"]=" ̅",e["⁇"]="??",e["⁈"]="?!",e["⁉"]="!?",e["⁗"]="′′′′",e[" "]=" ",e["₨"]="Rs",e["℀"]="a/c",e["℁"]="a/s",e["℃"]="°C",e["℅"]="c/o",e["℆"]="c/u",e["ℇ"]="Ɛ",e["℉"]="°F",e["№"]="No",e["℡"]="TEL",e["ℵ"]="א",e["ℶ"]="ב",e["ℷ"]="ג",e["ℸ"]="ד",e["℻"]="FAX",e["Ⅰ"]="I",e["Ⅱ"]="II",e["Ⅲ"]="III",e["Ⅳ"]="IV",e["Ⅴ"]="V",e["Ⅵ"]="VI",e["Ⅶ"]="VII",e["Ⅷ"]="VIII",e["Ⅸ"]="IX",e["Ⅹ"]="X",e["Ⅺ"]="XI",e["Ⅻ"]="XII",e["Ⅼ"]="L",e["Ⅽ"]="C",e["Ⅾ"]="D",e["Ⅿ"]="M",e["ⅰ"]="i",e["ⅱ"]="ii",e["ⅲ"]="iii",e["ⅳ"]="iv",e["ⅴ"]="v",e["ⅵ"]="vi",e["ⅶ"]="vii",e["ⅷ"]="viii",e["ⅸ"]="ix",e["ⅹ"]="x",e["ⅺ"]="xi",e["ⅻ"]="xii",e["ⅼ"]="l",e["ⅽ"]="c",e["ⅾ"]="d",e["ⅿ"]="m",e["∬"]="∫∫",e["∭"]="∫∫∫",e["∯"]="∮∮",e["∰"]="∮∮∮",e["⑴"]="(1)",e["⑵"]="(2)",e["⑶"]="(3)",e["⑷"]="(4)",e["⑸"]="(5)",e["⑹"]="(6)",e["⑺"]="(7)",e["⑻"]="(8)",e["⑼"]="(9)",e["⑽"]="(10)",e["⑾"]="(11)",e["⑿"]="(12)",e["⒀"]="(13)",e["⒁"]="(14)",e["⒂"]="(15)",e["⒃"]="(16)",e["⒄"]="(17)",e["⒅"]="(18)",e["⒆"]="(19)",e["⒇"]="(20)",e["⒈"]="1.",e["⒉"]="2.",e["⒊"]="3.",e["⒋"]="4.",e["⒌"]="5.",e["⒍"]="6.",e["⒎"]="7.",e["⒏"]="8.",e["⒐"]="9.",e["⒑"]="10.",e["⒒"]="11.",e["⒓"]="12.",e["⒔"]="13.",e["⒕"]="14.",e["⒖"]="15.",e["⒗"]="16.",e["⒘"]="17.",e["⒙"]="18.",e["⒚"]="19.",e["⒛"]="20.",e["⒜"]="(a)",e["⒝"]="(b)",e["⒞"]="(c)",e["⒟"]="(d)",e["⒠"]="(e)",e["⒡"]="(f)",e["⒢"]="(g)",e["⒣"]="(h)",e["⒤"]="(i)",e["⒥"]="(j)",e["⒦"]="(k)",e["⒧"]="(l)",e["⒨"]="(m)",e["⒩"]="(n)",e["⒪"]="(o)",e["⒫"]="(p)",e["⒬"]="(q)",e["⒭"]="(r)",e["⒮"]="(s)",e["⒯"]="(t)",e["⒰"]="(u)",e["⒱"]="(v)",e["⒲"]="(w)",e["⒳"]="(x)",e["⒴"]="(y)",e["⒵"]="(z)",e["⨌"]="∫∫∫∫",e["⩴"]="::=",e["⩵"]="==",e["⩶"]="===",e["⺟"]="母",e["⻳"]="龟",e["⼀"]="一",e["⼁"]="丨",e["⼂"]="丶",e["⼃"]="丿",e["⼄"]="乙",e["⼅"]="亅",e["⼆"]="二",e["⼇"]="亠",e["⼈"]="人",e["⼉"]="儿",e["⼊"]="入",e["⼋"]="八",e["⼌"]="冂",e["⼍"]="冖",e["⼎"]="冫",e["⼏"]="几",e["⼐"]="凵",e["⼑"]="刀",e["⼒"]="力",e["⼓"]="勹",e["⼔"]="匕",e["⼕"]="匚",e["⼖"]="匸",e["⼗"]="十",e["⼘"]="卜",e["⼙"]="卩",e["⼚"]="厂",e["⼛"]="厶",e["⼜"]="又",e["⼝"]="口",e["⼞"]="囗",e["⼟"]="土",e["⼠"]="士",e["⼡"]="夂",e["⼢"]="夊",e["⼣"]="夕",e["⼤"]="大",e["⼥"]="女",e["⼦"]="子",e["⼧"]="宀",e["⼨"]="寸",e["⼩"]="小",e["⼪"]="尢",e["⼫"]="尸",e["⼬"]="屮",e["⼭"]="山",e["⼮"]="巛",e["⼯"]="工",e["⼰"]="己",e["⼱"]="巾",e["⼲"]="干",e["⼳"]="幺",e["⼴"]="广",e["⼵"]="廴",e["⼶"]="廾",e["⼷"]="弋",e["⼸"]="弓",e["⼹"]="彐",e["⼺"]="彡",e["⼻"]="彳",e["⼼"]="心",e["⼽"]="戈",e["⼾"]="戶",e["⼿"]="手",e["⽀"]="支",e["⽁"]="攴",e["⽂"]="文",e["⽃"]="斗",e["⽄"]="斤",e["⽅"]="方",e["⽆"]="无",e["⽇"]="日",e["⽈"]="曰",e["⽉"]="月",e["⽊"]="木",e["⽋"]="欠",e["⽌"]="止",e["⽍"]="歹",e["⽎"]="殳",e["⽏"]="毋",e["⽐"]="比",e["⽑"]="毛",e["⽒"]="氏",e["⽓"]="气",e["⽔"]="水",e["⽕"]="火",e["⽖"]="爪",e["⽗"]="父",e["⽘"]="爻",e["⽙"]="爿",e["⽚"]="片",e["⽛"]="牙",e["⽜"]="牛",e["⽝"]="犬",e["⽞"]="玄",e["⽟"]="玉",e["⽠"]="瓜",e["⽡"]="瓦",e["⽢"]="甘",e["⽣"]="生",e["⽤"]="用",e["⽥"]="田",e["⽦"]="疋",e["⽧"]="疒",e["⽨"]="癶",e["⽩"]="白",e["⽪"]="皮",e["⽫"]="皿",e["⽬"]="目",e["⽭"]="矛",e["⽮"]="矢",e["⽯"]="石",e["⽰"]="示",e["⽱"]="禸",e["⽲"]="禾",e["⽳"]="穴",e["⽴"]="立",e["⽵"]="竹",e["⽶"]="米",e["⽷"]="糸",e["⽸"]="缶",e["⽹"]="网",e["⽺"]="羊",e["⽻"]="羽",e["⽼"]="老",e["⽽"]="而",e["⽾"]="耒",e["⽿"]="耳",e["⾀"]="聿",e["⾁"]="肉",e["⾂"]="臣",e["⾃"]="自",e["⾄"]="至",e["⾅"]="臼",e["⾆"]="舌",e["⾇"]="舛",e["⾈"]="舟",e["⾉"]="艮",e["⾊"]="色",e["⾋"]="艸",e["⾌"]="虍",e["⾍"]="虫",e["⾎"]="血",e["⾏"]="行",e["⾐"]="衣",e["⾑"]="襾",e["⾒"]="見",e["⾓"]="角",e["⾔"]="言",e["⾕"]="谷",e["⾖"]="豆",e["⾗"]="豕",e["⾘"]="豸",e["⾙"]="貝",e["⾚"]="赤",e["⾛"]="走",e["⾜"]="足",e["⾝"]="身",e["⾞"]="車",e["⾟"]="辛",e["⾠"]="辰",e["⾡"]="辵",e["⾢"]="邑",e["⾣"]="酉",e["⾤"]="釆",e["⾥"]="里",e["⾦"]="金",e["⾧"]="長",e["⾨"]="門",e["⾩"]="阜",e["⾪"]="隶",e["⾫"]="隹",e["⾬"]="雨",e["⾭"]="靑",e["⾮"]="非",e["⾯"]="面",e["⾰"]="革",e["⾱"]="韋",e["⾲"]="韭",e["⾳"]="音",e["⾴"]="頁",e["⾵"]="風",e["⾶"]="飛",e["⾷"]="食",e["⾸"]="首",e["⾹"]="香",e["⾺"]="馬",e["⾻"]="骨",e["⾼"]="高",e["⾽"]="髟",e["⾾"]="鬥",e["⾿"]="鬯",e["⿀"]="鬲",e["⿁"]="鬼",e["⿂"]="魚",e["⿃"]="鳥",e["⿄"]="鹵",e["⿅"]="鹿",e["⿆"]="麥",e["⿇"]="麻",e["⿈"]="黃",e["⿉"]="黍",e["⿊"]="黑",e["⿋"]="黹",e["⿌"]="黽",e["⿍"]="鼎",e["⿎"]="鼓",e["⿏"]="鼠",e["⿐"]="鼻",e["⿑"]="齊",e["⿒"]="齒",e["⿓"]="龍",e["⿔"]="龜",e["⿕"]="龠",e["〶"]="〒",e["〸"]="十",e["〹"]="卄",e["〺"]="卅",e["゛"]=" ゙",e["゜"]=" ゚",e["ㄱ"]="ᄀ",e["ㄲ"]="ᄁ",e["ㄳ"]="ᆪ",e["ㄴ"]="ᄂ",e["ㄵ"]="ᆬ",e["ㄶ"]="ᆭ",e["ㄷ"]="ᄃ",e["ㄸ"]="ᄄ",e["ㄹ"]="ᄅ",e["ㄺ"]="ᆰ",e["ㄻ"]="ᆱ",e["ㄼ"]="ᆲ",e["ㄽ"]="ᆳ",e["ㄾ"]="ᆴ",e["ㄿ"]="ᆵ",e["ㅀ"]="ᄚ",e["ㅁ"]="ᄆ",e["ㅂ"]="ᄇ",e["ㅃ"]="ᄈ",e["ㅄ"]="ᄡ",e["ㅅ"]="ᄉ",e["ㅆ"]="ᄊ",e["ㅇ"]="ᄋ",e["ㅈ"]="ᄌ",e["ㅉ"]="ᄍ",e["ㅊ"]="ᄎ",e["ㅋ"]="ᄏ",e["ㅌ"]="ᄐ",e["ㅍ"]="ᄑ",e["ㅎ"]="ᄒ",e["ㅏ"]="ᅡ",e["ㅐ"]="ᅢ",e["ㅑ"]="ᅣ",e["ㅒ"]="ᅤ",e["ㅓ"]="ᅥ",e["ㅔ"]="ᅦ",e["ㅕ"]="ᅧ",e["ㅖ"]="ᅨ",e["ㅗ"]="ᅩ",e["ㅘ"]="ᅪ",e["ㅙ"]="ᅫ",e["ㅚ"]="ᅬ",e["ㅛ"]="ᅭ",e["ㅜ"]="ᅮ",e["ㅝ"]="ᅯ",e["ㅞ"]="ᅰ",e["ㅟ"]="ᅱ",e["ㅠ"]="ᅲ",e["ㅡ"]="ᅳ",e["ㅢ"]="ᅴ",e["ㅣ"]="ᅵ",e["ㅤ"]="ᅠ",e["ㅥ"]="ᄔ",e["ㅦ"]="ᄕ",e["ㅧ"]="ᇇ",e["ㅨ"]="ᇈ",e["ㅩ"]="ᇌ",e["ㅪ"]="ᇎ",e["ㅫ"]="ᇓ",e["ㅬ"]="ᇗ",e["ㅭ"]="ᇙ",e["ㅮ"]="ᄜ",e["ㅯ"]="ᇝ",e["ㅰ"]="ᇟ",e["ㅱ"]="ᄝ",e["ㅲ"]="ᄞ",e["ㅳ"]="ᄠ",e["ㅴ"]="ᄢ",e["ㅵ"]="ᄣ",e["ㅶ"]="ᄧ",e["ㅷ"]="ᄩ",e["ㅸ"]="ᄫ",e["ㅹ"]="ᄬ",e["ㅺ"]="ᄭ",e["ㅻ"]="ᄮ",e["ㅼ"]="ᄯ",e["ㅽ"]="ᄲ",e["ㅾ"]="ᄶ",e["ㅿ"]="ᅀ",e["ㆀ"]="ᅇ",e["ㆁ"]="ᅌ",e["ㆂ"]="ᇱ",e["ㆃ"]="ᇲ",e["ㆄ"]="ᅗ",e["ㆅ"]="ᅘ",e["ㆆ"]="ᅙ",e["ㆇ"]="ᆄ",e["ㆈ"]="ᆅ",e["ㆉ"]="ᆈ",e["ㆊ"]="ᆑ",e["ㆋ"]="ᆒ",e["ㆌ"]="ᆔ",e["ㆍ"]="ᆞ",e["ㆎ"]="ᆡ",e["㈀"]="(ᄀ)",e["㈁"]="(ᄂ)",e["㈂"]="(ᄃ)",e["㈃"]="(ᄅ)",e["㈄"]="(ᄆ)",e["㈅"]="(ᄇ)",e["㈆"]="(ᄉ)",e["㈇"]="(ᄋ)",e["㈈"]="(ᄌ)",e["㈉"]="(ᄎ)",e["㈊"]="(ᄏ)",e["㈋"]="(ᄐ)",e["㈌"]="(ᄑ)",e["㈍"]="(ᄒ)",e["㈎"]="(가)",e["㈏"]="(나)",e["㈐"]="(다)",e["㈑"]="(라)",e["㈒"]="(마)",e["㈓"]="(바)",e["㈔"]="(사)",e["㈕"]="(아)",e["㈖"]="(자)",e["㈗"]="(차)",e["㈘"]="(카)",e["㈙"]="(타)",e["㈚"]="(파)",e["㈛"]="(하)",e["㈜"]="(주)",e["㈝"]="(오전)",e["㈞"]="(오후)",e["㈠"]="(一)",e["㈡"]="(二)",e["㈢"]="(三)",e["㈣"]="(四)",e["㈤"]="(五)",e["㈥"]="(六)",e["㈦"]="(七)",e["㈧"]="(八)",e["㈨"]="(九)",e["㈩"]="(十)",e["㈪"]="(月)",e["㈫"]="(火)",e["㈬"]="(水)",e["㈭"]="(木)",e["㈮"]="(金)",e["㈯"]="(土)",e["㈰"]="(日)",e["㈱"]="(株)",e["㈲"]="(有)",e["㈳"]="(社)",e["㈴"]="(名)",e["㈵"]="(特)",e["㈶"]="(財)",e["㈷"]="(祝)",e["㈸"]="(労)",e["㈹"]="(代)",e["㈺"]="(呼)",e["㈻"]="(学)",e["㈼"]="(監)",e["㈽"]="(企)",e["㈾"]="(資)",e["㈿"]="(協)",e["㉀"]="(祭)",e["㉁"]="(休)",e["㉂"]="(自)",e["㉃"]="(至)",e["㋀"]="1月",e["㋁"]="2月",e["㋂"]="3月",e["㋃"]="4月",e["㋄"]="5月",e["㋅"]="6月",e["㋆"]="7月",e["㋇"]="8月",e["㋈"]="9月",e["㋉"]="10月",e["㋊"]="11月",e["㋋"]="12月",e["㍘"]="0点",e["㍙"]="1点",e["㍚"]="2点",e["㍛"]="3点",e["㍜"]="4点",e["㍝"]="5点",e["㍞"]="6点",e["㍟"]="7点",e["㍠"]="8点",e["㍡"]="9点",e["㍢"]="10点",e["㍣"]="11点",e["㍤"]="12点",e["㍥"]="13点",e["㍦"]="14点",e["㍧"]="15点",e["㍨"]="16点",e["㍩"]="17点",e["㍪"]="18点",e["㍫"]="19点",e["㍬"]="20点",e["㍭"]="21点",e["㍮"]="22点",e["㍯"]="23点",e["㍰"]="24点",e["㏠"]="1日",e["㏡"]="2日",e["㏢"]="3日",e["㏣"]="4日",e["㏤"]="5日",e["㏥"]="6日",e["㏦"]="7日",e["㏧"]="8日",e["㏨"]="9日",e["㏩"]="10日",e["㏪"]="11日",e["㏫"]="12日",e["㏬"]="13日",e["㏭"]="14日",e["㏮"]="15日",e["㏯"]="16日",e["㏰"]="17日",e["㏱"]="18日",e["㏲"]="19日",e["㏳"]="20日",e["㏴"]="21日",e["㏵"]="22日",e["㏶"]="23日",e["㏷"]="24日",e["㏸"]="25日",e["㏹"]="26日",e["㏺"]="27日",e["㏻"]="28日",e["㏼"]="29日",e["㏽"]="30日",e["㏾"]="31日",e["ﬀ"]="ff",e["ﬁ"]="fi",e["ﬂ"]="fl",e["ﬃ"]="ffi",e["ﬄ"]="ffl",e["ﬅ"]="ſt",e["ﬆ"]="st",e["ﬓ"]="մն",e["ﬔ"]="մե",e["ﬕ"]="մի",e["ﬖ"]="վն",e["ﬗ"]="մխ",e["ﭏ"]="אל",e["ﭐ"]="ٱ",e["ﭑ"]="ٱ",e["ﭒ"]="ٻ",e["ﭓ"]="ٻ",e["ﭔ"]="ٻ",e["ﭕ"]="ٻ",e["ﭖ"]="پ",e["ﭗ"]="پ",e["ﭘ"]="پ",e["ﭙ"]="پ",e["ﭚ"]="ڀ",e["ﭛ"]="ڀ",e["ﭜ"]="ڀ",e["ﭝ"]="ڀ",e["ﭞ"]="ٺ",e["ﭟ"]="ٺ",e["ﭠ"]="ٺ",e["ﭡ"]="ٺ",e["ﭢ"]="ٿ",e["ﭣ"]="ٿ",e["ﭤ"]="ٿ",e["ﭥ"]="ٿ",e["ﭦ"]="ٹ",e["ﭧ"]="ٹ",e["ﭨ"]="ٹ",e["ﭩ"]="ٹ",e["ﭪ"]="ڤ",e["ﭫ"]="ڤ",e["ﭬ"]="ڤ",e["ﭭ"]="ڤ",e["ﭮ"]="ڦ",e["ﭯ"]="ڦ",e["ﭰ"]="ڦ",e["ﭱ"]="ڦ",e["ﭲ"]="ڄ",e["ﭳ"]="ڄ",e["ﭴ"]="ڄ",e["ﭵ"]="ڄ",e["ﭶ"]="ڃ",e["ﭷ"]="ڃ",e["ﭸ"]="ڃ",e["ﭹ"]="ڃ",e["ﭺ"]="چ",e["ﭻ"]="چ",e["ﭼ"]="چ",e["ﭽ"]="چ",e["ﭾ"]="ڇ",e["ﭿ"]="ڇ",e["ﮀ"]="ڇ",e["ﮁ"]="ڇ",e["ﮂ"]="ڍ",e["ﮃ"]="ڍ",e["ﮄ"]="ڌ",e["ﮅ"]="ڌ",e["ﮆ"]="ڎ",e["ﮇ"]="ڎ",e["ﮈ"]="ڈ",e["ﮉ"]="ڈ",e["ﮊ"]="ژ",e["ﮋ"]="ژ",e["ﮌ"]="ڑ",e["ﮍ"]="ڑ",e["ﮎ"]="ک",e["ﮏ"]="ک",e["ﮐ"]="ک",e["ﮑ"]="ک",e["ﮒ"]="گ",e["ﮓ"]="گ",e["ﮔ"]="گ",e["ﮕ"]="گ",e["ﮖ"]="ڳ",e["ﮗ"]="ڳ",e["ﮘ"]="ڳ",e["ﮙ"]="ڳ",e["ﮚ"]="ڱ",e["ﮛ"]="ڱ",e["ﮜ"]="ڱ",e["ﮝ"]="ڱ",e["ﮞ"]="ں",e["ﮟ"]="ں",e["ﮠ"]="ڻ",e["ﮡ"]="ڻ",e["ﮢ"]="ڻ",e["ﮣ"]="ڻ",e["ﮤ"]="ۀ",e["ﮥ"]="ۀ",e["ﮦ"]="ہ",e["ﮧ"]="ہ",e["ﮨ"]="ہ",e["ﮩ"]="ہ",e["ﮪ"]="ھ",e["ﮫ"]="ھ",e["ﮬ"]="ھ",e["ﮭ"]="ھ",e["ﮮ"]="ے",e["ﮯ"]="ے",e["ﮰ"]="ۓ",e["ﮱ"]="ۓ",e["ﯓ"]="ڭ",e["ﯔ"]="ڭ",e["ﯕ"]="ڭ",e["ﯖ"]="ڭ",e["ﯗ"]="ۇ",e["ﯘ"]="ۇ",e["ﯙ"]="ۆ",e["ﯚ"]="ۆ",e["ﯛ"]="ۈ",e["ﯜ"]="ۈ",e["ﯝ"]="ٷ",e["ﯞ"]="ۋ",e["ﯟ"]="ۋ",e["ﯠ"]="ۅ",e["ﯡ"]="ۅ",e["ﯢ"]="ۉ",e["ﯣ"]="ۉ",e["ﯤ"]="ې",e["ﯥ"]="ې",e["ﯦ"]="ې",e["ﯧ"]="ې",e["ﯨ"]="ى",e["ﯩ"]="ى",e["ﯪ"]="ئا",e["ﯫ"]="ئا",e["ﯬ"]="ئە",e["ﯭ"]="ئە",e["ﯮ"]="ئو",e["ﯯ"]="ئو",e["ﯰ"]="ئۇ",e["ﯱ"]="ئۇ",e["ﯲ"]="ئۆ",e["ﯳ"]="ئۆ",e["ﯴ"]="ئۈ",e["ﯵ"]="ئۈ",e["ﯶ"]="ئې";e["ﯷ"]="ئې",e["ﯸ"]="ئې",e["ﯹ"]="ئى",e["ﯺ"]="ئى",e["ﯻ"]="ئى",e["ﯼ"]="ی",e["ﯽ"]="ی",e["ﯾ"]="ی",e["ﯿ"]="ی",e["ﰀ"]="ئج",e["ﰁ"]="ئح",e["ﰂ"]="ئم",e["ﰃ"]="ئى",e["ﰄ"]="ئي",e["ﰅ"]="بج",e["ﰆ"]="بح",e["ﰇ"]="بخ",e["ﰈ"]="بم",e["ﰉ"]="بى",e["ﰊ"]="بي",e["ﰋ"]="تج",e["ﰌ"]="تح",e["ﰍ"]="تخ",e["ﰎ"]="تم",e["ﰏ"]="تى",e["ﰐ"]="تي",e["ﰑ"]="ثج",e["ﰒ"]="ثم",e["ﰓ"]="ثى",e["ﰔ"]="ثي",e["ﰕ"]="جح",e["ﰖ"]="جم",e["ﰗ"]="حج",e["ﰘ"]="حم",e["ﰙ"]="خج",e["ﰚ"]="خح",e["ﰛ"]="خم",e["ﰜ"]="سج",e["ﰝ"]="سح",e["ﰞ"]="سخ",e["ﰟ"]="سم",e["ﰠ"]="صح",e["ﰡ"]="صم",e["ﰢ"]="ضج",e["ﰣ"]="ضح",e["ﰤ"]="ضخ",e["ﰥ"]="ضم",e["ﰦ"]="طح",e["ﰧ"]="طم",e["ﰨ"]="ظم",e["ﰩ"]="عج",e["ﰪ"]="عم",e["ﰫ"]="غج",e["ﰬ"]="غم",e["ﰭ"]="فج",e["ﰮ"]="فح",e["ﰯ"]="فخ",e["ﰰ"]="فم",e["ﰱ"]="فى",e["ﰲ"]="في",e["ﰳ"]="قح",e["ﰴ"]="قم",e["ﰵ"]="قى",e["ﰶ"]="قي",e["ﰷ"]="كا",e["ﰸ"]="كج",e["ﰹ"]="كح",e["ﰺ"]="كخ",e["ﰻ"]="كل",e["ﰼ"]="كم",e["ﰽ"]="كى",e["ﰾ"]="كي",e["ﰿ"]="لج",e["ﱀ"]="لح",e["ﱁ"]="لخ",e["ﱂ"]="لم",e["ﱃ"]="لى",e["ﱄ"]="لي",e["ﱅ"]="مج",e["ﱆ"]="مح",e["ﱇ"]="مخ",e["ﱈ"]="مم",e["ﱉ"]="مى",e["ﱊ"]="مي",e["ﱋ"]="نج",e["ﱌ"]="نح",e["ﱍ"]="نخ",e["ﱎ"]="نم",e["ﱏ"]="نى",e["ﱐ"]="ني",e["ﱑ"]="هج",e["ﱒ"]="هم",e["ﱓ"]="هى",e["ﱔ"]="هي",e["ﱕ"]="يج",e["ﱖ"]="يح",e["ﱗ"]="يخ",e["ﱘ"]="يم",e["ﱙ"]="يى",e["ﱚ"]="يي",e["ﱛ"]="ذٰ",e["ﱜ"]="رٰ",e["ﱝ"]="ىٰ",e["ﱞ"]=" ٌّ",e["ﱟ"]=" ٍّ",e["ﱠ"]=" َّ",e["ﱡ"]=" ُّ",e["ﱢ"]=" ِّ",e["ﱣ"]=" ّٰ",e["ﱤ"]="ئر",e["ﱥ"]="ئز",e["ﱦ"]="ئم",e["ﱧ"]="ئن",e["ﱨ"]="ئى",e["ﱩ"]="ئي",e["ﱪ"]="بر",e["ﱫ"]="بز",e["ﱬ"]="بم",e["ﱭ"]="بن",e["ﱮ"]="بى",e["ﱯ"]="بي",e["ﱰ"]="تر",e["ﱱ"]="تز",e["ﱲ"]="تم",e["ﱳ"]="تن",e["ﱴ"]="تى",e["ﱵ"]="تي",e["ﱶ"]="ثر",e["ﱷ"]="ثز",e["ﱸ"]="ثم",e["ﱹ"]="ثن",e["ﱺ"]="ثى",e["ﱻ"]="ثي",e["ﱼ"]="فى",e["ﱽ"]="في",e["ﱾ"]="قى",e["ﱿ"]="قي",e["ﲀ"]="كا",e["ﲁ"]="كل",e["ﲂ"]="كم",e["ﲃ"]="كى",e["ﲄ"]="كي",e["ﲅ"]="لم",e["ﲆ"]="لى",e["ﲇ"]="لي",e["ﲈ"]="ما",e["ﲉ"]="مم",e["ﲊ"]="نر",e["ﲋ"]="نز",e["ﲌ"]="نم",e["ﲍ"]="نن",e["ﲎ"]="نى",e["ﲏ"]="ني",e["ﲐ"]="ىٰ",e["ﲑ"]="ير",e["ﲒ"]="يز",e["ﲓ"]="يم",e["ﲔ"]="ين",e["ﲕ"]="يى",e["ﲖ"]="يي",e["ﲗ"]="ئج",e["ﲘ"]="ئح",e["ﲙ"]="ئخ",e["ﲚ"]="ئم",e["ﲛ"]="ئه",e["ﲜ"]="بج",e["ﲝ"]="بح",e["ﲞ"]="بخ",e["ﲟ"]="بم",e["ﲠ"]="به",e["ﲡ"]="تج",e["ﲢ"]="تح",e["ﲣ"]="تخ",e["ﲤ"]="تم",e["ﲥ"]="ته",e["ﲦ"]="ثم",e["ﲧ"]="جح",e["ﲨ"]="جم",e["ﲩ"]="حج",e["ﲪ"]="حم",e["ﲫ"]="خج",e["ﲬ"]="خم",e["ﲭ"]="سج",e["ﲮ"]="سح",e["ﲯ"]="سخ",e["ﲰ"]="سم",e["ﲱ"]="صح",e["ﲲ"]="صخ",e["ﲳ"]="صم",e["ﲴ"]="ضج",e["ﲵ"]="ضح",e["ﲶ"]="ضخ",e["ﲷ"]="ضم",e["ﲸ"]="طح",e["ﲹ"]="ظم",e["ﲺ"]="عج",e["ﲻ"]="عم",e["ﲼ"]="غج",e["ﲽ"]="غم",e["ﲾ"]="فج",e["ﲿ"]="فح",e["ﳀ"]="فخ",e["ﳁ"]="فم",e["ﳂ"]="قح",e["ﳃ"]="قم",e["ﳄ"]="كج",e["ﳅ"]="كح",e["ﳆ"]="كخ",e["ﳇ"]="كل",e["ﳈ"]="كم",e["ﳉ"]="لج",e["ﳊ"]="لح",e["ﳋ"]="لخ",e["ﳌ"]="لم",e["ﳍ"]="له",e["ﳎ"]="مج",e["ﳏ"]="مح",e["ﳐ"]="مخ",e["ﳑ"]="مم",e["ﳒ"]="نج",e["ﳓ"]="نح",e["ﳔ"]="نخ",e["ﳕ"]="نم",e["ﳖ"]="نه",e["ﳗ"]="هج",e["ﳘ"]="هم",e["ﳙ"]="هٰ",e["ﳚ"]="يج",e["ﳛ"]="يح",e["ﳜ"]="يخ",e["ﳝ"]="يم",e["ﳞ"]="يه",e["ﳟ"]="ئم",e["ﳠ"]="ئه",e["ﳡ"]="بم",e["ﳢ"]="به",e["ﳣ"]="تم",e["ﳤ"]="ته",e["ﳥ"]="ثم",e["ﳦ"]="ثه",e["ﳧ"]="سم",e["ﳨ"]="سه",e["ﳩ"]="شم",e["ﳪ"]="شه",e["ﳫ"]="كل",e["ﳬ"]="كم",e["ﳭ"]="لم",e["ﳮ"]="نم",e["ﳯ"]="نه",e["ﳰ"]="يم",e["ﳱ"]="يه",e["ﳲ"]="ـَّ",e["ﳳ"]="ـُّ",e["ﳴ"]="ـِّ",e["ﳵ"]="طى",e["ﳶ"]="طي",e["ﳷ"]="عى",e["ﳸ"]="عي",e["ﳹ"]="غى",e["ﳺ"]="غي",e["ﳻ"]="سى",e["ﳼ"]="سي",e["ﳽ"]="شى",e["ﳾ"]="شي",e["ﳿ"]="حى",e["ﴀ"]="حي",e["ﴁ"]="جى",e["ﴂ"]="جي",e["ﴃ"]="خى",e["ﴄ"]="خي",e["ﴅ"]="صى",e["ﴆ"]="صي",e["ﴇ"]="ضى",e["ﴈ"]="ضي",e["ﴉ"]="شج",e["ﴊ"]="شح",e["ﴋ"]="شخ",e["ﴌ"]="شم",e["ﴍ"]="شر",e["ﴎ"]="سر",e["ﴏ"]="صر",e["ﴐ"]="ضر",e["ﴑ"]="طى",e["ﴒ"]="طي",e["ﴓ"]="عى",e["ﴔ"]="عي",e["ﴕ"]="غى",e["ﴖ"]="غي",e["ﴗ"]="سى",e["ﴘ"]="سي",e["ﴙ"]="شى",e["ﴚ"]="شي",e["ﴛ"]="حى",e["ﴜ"]="حي",e["ﴝ"]="جى",e["ﴞ"]="جي",e["ﴟ"]="خى",e["ﴠ"]="خي",e["ﴡ"]="صى",e["ﴢ"]="صي",e["ﴣ"]="ضى",e["ﴤ"]="ضي",e["ﴥ"]="شج",e["ﴦ"]="شح",e["ﴧ"]="شخ",e["ﴨ"]="شم",e["ﴩ"]="شر",e["ﴪ"]="سر",e["ﴫ"]="صر",e["ﴬ"]="ضر",e["ﴭ"]="شج",e["ﴮ"]="شح",e["ﴯ"]="شخ",e["ﴰ"]="شم",e["ﴱ"]="سه",e["ﴲ"]="شه",e["ﴳ"]="طم",e["ﴴ"]="سج",e["ﴵ"]="سح",e["ﴶ"]="سخ",e["ﴷ"]="شج",e["ﴸ"]="شح",e["ﴹ"]="شخ",e["ﴺ"]="طم",e["ﴻ"]="ظم",e["ﴼ"]="اً",e["ﴽ"]="اً",e["ﵐ"]="تجم",e["ﵑ"]="تحج",e["ﵒ"]="تحج",e["ﵓ"]="تحم",e["ﵔ"]="تخم",e["ﵕ"]="تمج",e["ﵖ"]="تمح",e["ﵗ"]="تمخ",e["ﵘ"]="جمح",e["ﵙ"]="جمح",e["ﵚ"]="حمي",e["ﵛ"]="حمى",e["ﵜ"]="سحج",e["ﵝ"]="سجح",e["ﵞ"]="سجى",e["ﵟ"]="سمح",e["ﵠ"]="سمح",e["ﵡ"]="سمج",e["ﵢ"]="سمم",e["ﵣ"]="سمم",e["ﵤ"]="صحح",e["ﵥ"]="صحح",e["ﵦ"]="صمم",e["ﵧ"]="شحم",e["ﵨ"]="شحم",e["ﵩ"]="شجي",e["ﵪ"]="شمخ",e["ﵫ"]="شمخ",e["ﵬ"]="شمم",e["ﵭ"]="شمم",e["ﵮ"]="ضحى",e["ﵯ"]="ضخم",e["ﵰ"]="ضخم",e["ﵱ"]="طمح",e["ﵲ"]="طمح",e["ﵳ"]="طمم",e["ﵴ"]="طمي",e["ﵵ"]="عجم",e["ﵶ"]="عمم",e["ﵷ"]="عمم",e["ﵸ"]="عمى",e["ﵹ"]="غمم",e["ﵺ"]="غمي",e["ﵻ"]="غمى",e["ﵼ"]="فخم",e["ﵽ"]="فخم",e["ﵾ"]="قمح",e["ﵿ"]="قمم",e["ﶀ"]="لحم",e["ﶁ"]="لحي",e["ﶂ"]="لحى",e["ﶃ"]="لجج",e["ﶄ"]="لجج",e["ﶅ"]="لخم",e["ﶆ"]="لخم",e["ﶇ"]="لمح",e["ﶈ"]="لمح",e["ﶉ"]="محج",e["ﶊ"]="محم",e["ﶋ"]="محي",e["ﶌ"]="مجح",e["ﶍ"]="مجم",e["ﶎ"]="مخج",e["ﶏ"]="مخم",e["ﶒ"]="مجخ",e["ﶓ"]="همج",e["ﶔ"]="همم",e["ﶕ"]="نحم",e["ﶖ"]="نحى",e["ﶗ"]="نجم",e["ﶘ"]="نجم",e["ﶙ"]="نجى",e["ﶚ"]="نمي",e["ﶛ"]="نمى",e["ﶜ"]="يمم",e["ﶝ"]="يمم",e["ﶞ"]="بخي",e["ﶟ"]="تجي",e["ﶠ"]="تجى",e["ﶡ"]="تخي",e["ﶢ"]="تخى",e["ﶣ"]="تمي",e["ﶤ"]="تمى",e["ﶥ"]="جمي",e["ﶦ"]="جحى",e["ﶧ"]="جمى",e["ﶨ"]="سخى",e["ﶩ"]="صحي",e["ﶪ"]="شحي",e["ﶫ"]="ضحي",e["ﶬ"]="لجي",e["ﶭ"]="لمي",e["ﶮ"]="يحي",e["ﶯ"]="يجي",e["ﶰ"]="يمي",e["ﶱ"]="ممي",e["ﶲ"]="قمي",e["ﶳ"]="نحي",e["ﶴ"]="قمح",e["ﶵ"]="لحم",e["ﶶ"]="عمي",e["ﶷ"]="كمي",e["ﶸ"]="نجح",e["ﶹ"]="مخي",e["ﶺ"]="لجم",e["ﶻ"]="كمم",e["ﶼ"]="لجم",e["ﶽ"]="نجح",e["ﶾ"]="جحي",e["ﶿ"]="حجي",e["ﷀ"]="مجي",e["ﷁ"]="فمي",e["ﷂ"]="بحي",e["ﷃ"]="كمم",e["ﷄ"]="عجم",e["ﷅ"]="صمم",e["ﷆ"]="سخي",e["ﷇ"]="نجي",e["﹉"]="‾",e["﹊"]="‾",e["﹋"]="‾",e["﹌"]="‾",e["﹍"]="_",e["﹎"]="_",e["﹏"]="_",e["ﺀ"]="ء",e["ﺁ"]="آ",e["ﺂ"]="آ",e["ﺃ"]="أ",e["ﺄ"]="أ",e["ﺅ"]="ؤ",e["ﺆ"]="ؤ",e["ﺇ"]="إ",e["ﺈ"]="إ",e["ﺉ"]="ئ",e["ﺊ"]="ئ",e["ﺋ"]="ئ",e["ﺌ"]="ئ",e["ﺍ"]="ا",e["ﺎ"]="ا",e["ﺏ"]="ب",e["ﺐ"]="ب",e["ﺑ"]="ب",e["ﺒ"]="ب",e["ﺓ"]="ة",e["ﺔ"]="ة",e["ﺕ"]="ت",e["ﺖ"]="ت",e["ﺗ"]="ت",e["ﺘ"]="ت",e["ﺙ"]="ث",e["ﺚ"]="ث",e["ﺛ"]="ث",e["ﺜ"]="ث",e["ﺝ"]="ج",e["ﺞ"]="ج",e["ﺟ"]="ج",e["ﺠ"]="ج",e["ﺡ"]="ح",e["ﺢ"]="ح",e["ﺣ"]="ح",e["ﺤ"]="ح",e["ﺥ"]="خ",e["ﺦ"]="خ",e["ﺧ"]="خ",e["ﺨ"]="خ",e["ﺩ"]="د",e["ﺪ"]="د",e["ﺫ"]="ذ",e["ﺬ"]="ذ",e["ﺭ"]="ر",e["ﺮ"]="ر",e["ﺯ"]="ز",e["ﺰ"]="ز",e["ﺱ"]="س",e["ﺲ"]="س",e["ﺳ"]="س",e["ﺴ"]="س",e["ﺵ"]="ش",e["ﺶ"]="ش",e["ﺷ"]="ش",e["ﺸ"]="ش",e["ﺹ"]="ص",e["ﺺ"]="ص",e["ﺻ"]="ص",e["ﺼ"]="ص",e["ﺽ"]="ض",e["ﺾ"]="ض",e["ﺿ"]="ض",e["ﻀ"]="ض",e["ﻁ"]="ط",e["ﻂ"]="ط",e["ﻃ"]="ط",e["ﻄ"]="ط",e["ﻅ"]="ظ",e["ﻆ"]="ظ",e["ﻇ"]="ظ",e["ﻈ"]="ظ",e["ﻉ"]="ع",e["ﻊ"]="ع",e["ﻋ"]="ع",e["ﻌ"]="ع",e["ﻍ"]="غ",e["ﻎ"]="غ",e["ﻏ"]="غ",e["ﻐ"]="غ",e["ﻑ"]="ف",e["ﻒ"]="ف",e["ﻓ"]="ف",e["ﻔ"]="ف",e["ﻕ"]="ق",e["ﻖ"]="ق",e["ﻗ"]="ق",e["ﻘ"]="ق",e["ﻙ"]="ك",e["ﻚ"]="ك",e["ﻛ"]="ك",e["ﻜ"]="ك",e["ﻝ"]="ل",e["ﻞ"]="ل",e["ﻟ"]="ل",e["ﻠ"]="ل",e["ﻡ"]="م",e["ﻢ"]="م",e["ﻣ"]="م",e["ﻤ"]="م",e["ﻥ"]="ن",e["ﻦ"]="ن",e["ﻧ"]="ن",e["ﻨ"]="ن",e["ﻩ"]="ه",e["ﻪ"]="ه",e["ﻫ"]="ه",e["ﻬ"]="ه",e["ﻭ"]="و",e["ﻮ"]="و",e["ﻯ"]="ى",e["ﻰ"]="ى",e["ﻱ"]="ي",e["ﻲ"]="ي",e["ﻳ"]="ي",e["ﻴ"]="ي",e["ﻵ"]="لآ",e["ﻶ"]="لآ",e["ﻷ"]="لأ",e["ﻸ"]="لأ",e["ﻹ"]="لإ",e["ﻺ"]="لإ",e["ﻻ"]="لا",e["ﻼ"]="لا"})),i.reverseIfRtl=function(e){var i,t,a=e.length;if(a<=1||!((i=e.charCodeAt(0))>=(t=r[13]).begin&&i<t.end||i>=(t=r[11]).begin&&i<t.end))return e;for(var n="",s=a-1;s>=0;s--)n+=e[s];return n}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/preview_doc/sidebar","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_pages","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/ui/ui.module.css","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/ui/header","typescript/libraries/file-viewer/src/ui/header.module.css","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/preview_doc/utils/sizing","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewPDF=void 0,r=t.__importStar(r),a=t.__importDefault(a);class y extends r.PureComponent{constructor(e){super(e),this.pdfPages=null,this.containerEl=null,this.pageRendered={},this.state={isSidebarFocused:!1,rendered:!1},this.handleSidebarPageChange=e=>{this.focusSidebar(),this.syncStorePageIndex(e,s.UserActionContext.DocSidebar),this.props.onPageNavigation&&this.props.onPageNavigation(e);const{logSidebarPageClicked:i}=this.props;i&&i()},this.dispatchResolvePageNavigation=()=>{this.props.dispatch((0,f.resolvePageNavigation)({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,sourceContext:s.UserActionContext.Default}))},this.focusSidebar=()=>{this.setState({isSidebarFocused:!0})},this.unfocusSidebar=()=>{this.setState({isSidebarFocused:!1})},this.handleCloseFullScreen=()=>{const{dispatch:e,previewKey:i,fileViewerId:t}=this.props;e((0,f.exitFullScreen)({previewKey:i,fileViewerId:t,sourceContext:s.UserActionContext.Default}))},this.handleInternalLinkClicked=e=>{this.props.onPageNavigation&&this.props.onPageNavigation(e),this.syncStorePageIndex(e,s.UserActionContext.DocLink)},this.handleImageLoad=e=>{this.pageRendered[e]|=2,this.props.onInteractive(),this.checkPageRendered()},this.handleImageError=()=>{this.props.onPageImageError&&this.props.onPageImageError()},this.handleTextRendered=e=>{this.pageRendered[e]|=1,this.checkPageRendered()},this.pageDown=()=>{this.pdfPages&&this.pdfPages.pageDown()},this.pageUp=()=>{this.pdfPages&&this.pdfPages.pageUp()},this.scrollDown=()=>{this.pdfPages&&this.pdfPages.scrollDown()},this.scrollUp=()=>{this.pdfPages&&this.pdfPages.scrollUp()},this.upBinding=()=>{this.state.isSidebarFocused?this.pageUp():this.scrollUp()},this.downBinding=()=>{this.state.isSidebarFocused?this.pageDown():this.scrollDown()},this.makeKeyboardBindings=()=>[...(0,m.getPageUpDownBindings)({pageUp:this.pageUp,pageDown:this.pageDown}),...(0,m.getUpDownBindings)({up:this.upBinding,down:this.downBinding}),...(0,m.getHomeEndBindings)({home:()=>this.syncStorePageIndex(0,s.UserActionContext.Keyboard),end:()=>{this.props.rivieraData&&this.syncStorePageIndex(this.props.rivieraData.pages.length-1,s.UserActionContext.Keyboard)}})],this.keybindings=this.makeKeyboardBindings()}checkPageRendered(){if(this.state.rendered)return;Object.keys(this.pageRendered).find(e=>3===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}UNSAFE_componentWillReceiveProps(e){e.previewKey.serialized!==this.props.previewKey.serialized&&(this.setState({isSidebarFocused:!1,rendered:!1}),this.pageRendered={},this.syncStorePageIndex(0,s.UserActionContext.DocReset))}getContainerEl(){return this.containerEl}syncStorePageIndex(e,i){this.props.dispatch((0,f.pageNavigation)({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,sourceContext:i,pageIndex:e}))}jumpToPage(e){this.pdfPages&&this.pdfPages.jumpToPage(e)}render(){const{activePluginInstance:e,className:i,config:t,fileViewerUiData:s,data:f,dispatch:m,fileInfo:y,fileMetadata:S,filePreviewUiData:E,fileViewerId:P,height:I,intl:T,isEditMode:C,layerRenderFn:A,onMouseDown:O,onMouseEnter:F,onMouseMove:k,onMouseUp:x,onPageChange:D,onPageRef:L,onScroll:M,pageClassName:R,pagesClassName:N,pluginProps:j,previewKey:V,previewMetadata:B,width:U,header:K,findInDocData:z,findInDocController:H,brandingInfo:q,sharedLinkInfo:W}=this.props,{currentPageIndex:G}=E,Y=(0,u.getCurrentScaleFactorFromFilePreviewUi)(E),{isDocSidebarOpen:Z,isFullScreen:X}=s,{rendered:Q}=this.state,$=(0,g.shouldShowDocSidebar)(U,_.PreviewType.SsrDoc),J=$&&Z;return r.createElement(r.Fragment,null,r.createElement("article",{className:(0,a.default)(l.container,i,{[d.isFullScreen]:X}),style:{visibility:Q?"visible":"hidden",width:U,height:I},ref:e=>this.containerEl=e},X&&r.createElement(w.CloseButton,{className:(0,a.default)(l.close,c.close),onClick:this.handleCloseFullScreen}),Q&&$&&!X?r.createElement(n.Sidebar,{isOpened:Z,isEditMode:C,currentPageIndex:G,pages:f,intl:T,isFocused:this.state.isSidebarFocused,onPageChange:this.handleSidebarPageChange,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar,featureConfig:t}):null,r.createElement("div",{className:v.headerContainer},r.createElement(h.BrandingFileViewerPreview,{backgroundClass:d.brandingBackgroundImage,logoClass:d.brandingLogo,teamAndUserBranding:{teamBranding:W,userBranding:q}},j&&r.createElement(p.PluginHeader,{pluginProps:j,activePluginInstance:e||void 0,header:K}),r.createElement(o.PdfPages,{className:(0,a.default)(l.pdfViewport,N),count:f?f.length:1,height:I,onMouseDown:O,onMouseEnter:F,onMouseMove:k,onMouseUp:x,onPageChange:D,onScroll:M,pageClassName:R,currentPageIndex:G,pages:(f||[]).slice(0,Q?void 0:1),ref:e=>this.pdfPages=e,scaleFactor:Y,width:J?U-n.SIDEBAR_WIDTH:U,pageNavigation:E.pageNavigation,dispatchResolvePageNavigation:this.dispatchResolvePageNavigation,onPageRef:L,previewKey:V,findInDocData:z,findInDocController:H},A({activePluginInstance:e,config:t,fileViewerUiData:s,dispatch:m,fileInfo:y,fileMetadata:S,filePreviewUiData:E,fileViewerId:P,intl:T,pluginProps:j,previewKey:V,previewMetadata:B,onImageError:this.handleImageError,onImageLoad:this.handleImageLoad,onInternalLinkClicked:this.handleInternalLinkClicked,onTextRendered:this.handleTextRendered}))))),r.createElement(b.KeyboardBindingConnector,{name:"preview_pdf",keyboardBindings:this.keybindings}))}}i.PreviewPDF=y,y.displayName="PreviewPDF"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/ppt",["require","exports","tslib","react","lodash","classnames","typescript/libraries/file-viewer/src/preview_doc/sidebar","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/preview_doc/renderer/page","typescript/libraries/file-viewer/src/preview_doc/preview_doc.module.css","typescript/libraries/file-viewer/src/preview_core.module.css","typescript/libraries/file-viewer/src/ui/header.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/ui/header","typescript/libraries/file-viewer/src/core/types/preview_type","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview","typescript/libraries/file-viewer/src/preview_doc/utils/sizing"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewPPTWithOnlyImageLayer=i.PreviewPPT=void 0,r=t.__importStar(r),n=t.__importDefault(n);class E extends r.PureComponent{constructor(e){super(e),this.state={isSidebarFocused:!0,rendered:!1},this.pageRendered={},this.focusSidebar=()=>{this.setState({isSidebarFocused:!0})},this.unfocusSidebar=()=>{this.setState({isSidebarFocused:!1})},this.handleSidebarPageChange=e=>{this.focusSidebar(),this.props.onPageChange&&this.props.onPageChange(e,o.UserActionContext.DocSidebar)},this.handleWheel=(0,a.debounce)(e=>{const{data:i,width:t,height:r,filePreviewUiData:a,onPageChange:n}=this.props;if(!i.length)return;const{currentPageIndex:s}=a,c=(0,v.getCurrentScaleFactorFromFilePreviewUi)(a),{dimension:d}=i[s],u=(p=d,f=[t,r],(0,l.calculateFitBox)(f[0],f[1],p[0]/p[1])[0]/p[0]);var p,f;c.toFixed(2)<=u.toFixed(2)&&n&&n(s+(e.deltaY>0?1:-1),o.UserActionContext.MouseWheel)},40,{leading:!0,trailing:!1}),this.handleClose=()=>{const{dispatch:e,previewKey:i,fileViewerId:t}=this.props;e((0,g.exitFullScreen)({previewKey:i,fileViewerId:t,sourceContext:o.UserActionContext.Default}))},this.handleImageLoad=e=>(this.pageRendered[e]|=2,this.props.onInteractive(),this.checkPageRendered()),this.handleTextRendered=e=>{this.pageRendered[e]|=1,this.checkPageRendered()},this.changePage=(e,i)=>{const{onPageChange:t}=this.props;t(e,i)},this.pageFirst=e=>{this.changePage(0,e)},this.pageLast=e=>{const i=this.props.rivieraData;i&&this.changePage(i.pages.length-1,e)},this.pageNext=e=>{const{currentPageIndex:i}=this.props.filePreviewUiData;this.changePage(i+1,e)},this.pagePrev=e=>{const{currentPageIndex:i}=this.props.filePreviewUiData;this.changePage(i-1,e)},this.pageUpKeyboard=()=>this.pagePrev(o.UserActionContext.Keyboard),this.pageDownKeyboard=()=>this.pageNext(o.UserActionContext.Keyboard),this.pageFirstKeyboard=()=>this.pageFirst(o.UserActionContext.Keyboard),this.pageLastKeyboard=()=>this.pageLast(o.UserActionContext.Keyboard),this.keyboardBindings=[...(0,w.getPageUpDownBindings)({pageUp:this.pageUpKeyboard,pageDown:this.pageDownKeyboard}),...(0,w.getUpDownBindings)({up:this.pageUpKeyboard,down:this.pageDownKeyboard}),...(0,w.getHomeEndBindings)({home:this.pageFirstKeyboard,end:this.pageLastKeyboard})],e.findInDocController&&e.findInDocController.setRetrieveCurrentPageIndex(()=>this.props.pageNavigation?this.props.pageNavigation.pageIndex:this.props.filePreviewUiData.currentPageIndex)}checkPageRendered(){!this.state.rendered&&Object.keys(this.pageRendered).find(e=>3===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}handleInternalLinkClicked(){}handleImageError(){}UNSAFE_componentWillReceiveProps(e){e.previewKey.serialized!==this.props.previewKey.serialized&&(this.setState({isSidebarFocused:!1,rendered:!1}),this.pageRendered={},this.props.onPageChange&&this.props.onPageChange(0,o.UserActionContext.DocReset))}componentDidUpdate(){this.props.pageNavigation&&(this.props.onPageChange(this.props.pageNavigation.pageIndex,o.UserActionContext.Default),this.props.dispatch((0,g.resolvePageNavigation)({previewKey:this.props.previewKey,fileViewerId:this.props.fileViewerId,sourceContext:o.UserActionContext.Default})))}render(){const{activePluginInstance:e,className:i,config:t,fileViewerUiData:a,data:o,dispatch:l,fileInfo:g,fileMetadata:w,filePreviewUiData:E,fileViewerId:P,height:I,intl:T,layerRenderFn:C,onPageMouseDown:A,onPageMouseEnter:O,onPageMouseMove:F,onPageMouseUp:k,pageClassName:x,pluginProps:D,previewKey:L,previewMetadata:M,refCallback:R,width:N,pageNavigation:j,responsiveSize:V,findInDocData:B,header:U,brandingInfo:K,sharedLinkInfo:z}=this.props,H=j?j.pageIndex:E.currentPageIndex,q=(0,v.getCurrentScaleFactorFromFilePreviewUi)(E),{isDocSidebarOpen:W,isFullScreen:G}=a,{isSidebarFocused:Y,rendered:Z}=this.state,X=(0,m.noToolbarShown)(V,t),Q=Z&&(0,S.shouldShowDocSidebar)(N,_.PreviewType.SsrDoc)&&!G;return r.createElement(r.Fragment,null,r.createElement("article",{ref:R,className:(0,n.default)(d.container,i,{[u.isFullScreen]:G}),style:{visibility:Z?"visible":"hidden",height:I,width:N}},G&&r.createElement(b.CloseButton,{onClick:this.handleClose,isInverse:!1}),Q?r.createElement(s.Sidebar,{currentPageIndex:H,pages:o,intl:T,isFocused:Y,onPageChange:this.handleSidebarPageChange,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar,isOpened:W,featureConfig:t}):null,r.createElement("div",{className:p.headerContainer},r.createElement(y.BrandingFileViewerPreview,{backgroundClass:u.brandingBackgroundImage,logoClass:u.brandingLogo,teamAndUserBranding:{teamBranding:z,userBranding:K}},D&&r.createElement(f.PluginHeader,{pluginProps:D,activePluginInstance:e||void 0,header:U}),r.createElement("section",{className:d.pptViewport,onWheel:this.handleWheel},r.createElement("div",{className:(0,n.default)(d.pptSizer,{[d.pptFullSizer]:X})},r.createElement(c.Page,{className:x,key:H,onMouseDown:A,onMouseEnter:O,onMouseMove:F,onMouseUp:k,onRef:this.props.onPageRef,data:o?o[H]:void 0,scaleFactor:q,findInDocHighlights:null==B?void 0:B.highlights.get(H),findInDocCurrentHit:null==B?void 0:B.currentHit},C({activePluginInstance:e,config:t,fileViewerUiData:a,dispatch:l,fileInfo:g,fileMetadata:w,filePreviewUiData:E,fileViewerId:P,intl:T,pluginProps:D,previewKey:L,previewMetadata:M,onImageError:this.handleImageError,onImageLoad:this.handleImageLoad,onInternalLinkClicked:this.handleInternalLinkClicked,onTextRendered:this.handleTextRendered}))))))),r.createElement(h.KeyboardBindingConnector,{name:"preview_ppt",keyboardBindings:this.keyboardBindings}))}}i.PreviewPPT=E,E.displayName="PreviewPPT";i.PreviewPPTWithOnlyImageLayer=class extends E{checkPageRendered(){!this.state.rendered&&Object.keys(this.pageRendered).find(e=>2===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}}})),define("typescript/libraries/file-viewer/src/comments2/plugin/marker",["require","exports","tslib","react","typescript/libraries/file-viewer/src/toolbar/toolbar.module.css"],(function(e,i,t,r,a){"use strict";function n(e){var i;switch(null===(i=e.annotation)||void 0===i?void 0:i.type){case"audio":case"video":return e.annotation.time/100;default:return}}Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=i.getTimeForThread=i.MARKER_WIDTH_PERCENT=void 0,r=t.__importDefault(r),a=t.__importStar(a),i.MARKER_WIDTH_PERCENT=2,i.getTimeForThread=n;i.Marker=({duration:e,thread:i})=>{const t=n(i);if(void 0===t)return null;const s=0===e?0:100*t/e;return r.default.createElement("div",{className:a.commentMarker,style:{left:`${s}%`}})},i.Marker.displayName="Marker"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/download_plugin",["require","exports","tslib","react","metaserver/static/js/core/i18n","dig-components/menu","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/tooltips","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/action_bar/file_actions/portable/download","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/file_store/utils","metaserver/static/js/share_download/ui/util","metaserver/static/js/file_viewer/sdk_file_viewer/download_utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/user_survey/user_survey","metaserver/static/js/sync_everything/constants","metaserver/static/js/browse/data/selectors","metaserver/static/js/browse/data/store","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/admin/registration_source_constants"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeDownloadPlugin=void 0,r=t.__importDefault(r);const P=[m.SDKPreviewSurface.BROWSE,m.SDKPreviewSurface.SEARCH,m.SDKPreviewSurface.STANDALONE_PREVIEW],I=(e,i)=>{i&&P.includes(i)&&w.UserSurvey.trackEvent("download_item","previews"),(0,m.isVideoPreview)(e)&&w.UserSurvey.trackEvent("video_preview_download","previews")};i.makeDownloadPlugin=(e,i,t,n,s,c,m,w,P)=>{const C=(0,u.makePluginActionDefinition)({label:a.intl.formatMessage(d.DOWNLOAD_ACTION_STRING),icon:r.default.createElement(l.UIIcon,{src:o.DownloadLine}),id:S.DOWNLOAD_ACTION_PLUGIN_ID,action:()=>{i.logUserAction("download","title_bar_open_split_button");const{file:r}=e();I(r,t);const{rootNSID:a,blockHash:s}=(0,h.getBrowseState)((0,y.getStoreForBrowse)().getState()).context;n&&a&&(0,b.isUnmountedBackupBrowse)(n,a)?s&&(0,f.isBrowseFile)(r)&&(0,p.downloadSingleFileAsZip)({fqPath:r.fq_path,rootNsId:a,source:"PREVIEWS",blockHash:s,user:n}):(0,p.downloadSingleFile)({href:r.href,source:"PREVIEWS",isFswm:(0,f.isSharedFile)(r)})}}),[A,O]=T({downloadAllowed:!!c&&(0,_.isDownloadAllowed)(c),downloadAction:()=>{i.logUserAction("download","title_bar_download_split_button");const{file:r}=e();I(r,t),(0,g.downloadActiveFile)(r,n,m,w,i.logUserAction,s,P)},saveACopyToDropboxAction:()=>{const{file:t}=e();(0,g.saveToDropbox)(t,e=>i.logUserAction(e,"title_bar_download_split_button"),n,s,m,E.RegistrationSource.SHMODEL_SAVE_TO_REGISTER)},getActiveFile:e,user:n,shareToken:s,encryptionOptions:m});return{actionDefinitions:()=>{const{file:i}=e();if(!(0,v.isLiveFile)(i)||(0,v.isPnmLinkNodeSelected)(i)||(0,v.isCloudDoc)(i))return{};let t;return t=(0,f.isSharedFile)(i)?n||!O?[A]:[A,O]:[C],{atTopLevelIfSpace:t,alwaysInOverflow:[t]}}}};const T=({downloadAction:e,saveACopyToDropboxAction:i,shareToken:t,downloadAllowed:p,user:v})=>{var f,_;const g=r.default.createElement(l.UIIcon,{src:o.DownloadLine}),m=a.intl.formatMessage(d.DOWNLOAD_ACTION_STRING),w=e=>{e.menuItem.handler()},b=i=>{i.preventDefault(),i.stopPropagation(),e()},h=i=>{"Enter"===i.key&&(i.preventDefault(),i.stopPropagation(),e())},y=a.intl.formatMessage({id:"3IQVpL",defaultMessage:"You do not have permission to download this file"}),E=a.intl.formatMessage({id:"A9yx17",defaultMessage:"You do not have permission to save a copy of this file"}),P=(0,u.makePluginActionDefinition)({icon:g,label:m,action:e,id:S.DOWNLOAD_ACTION_PLUGIN_ID,disabled:p?{disabled:!1}:{disabled:!0,tooltipMessage:y}});let I=null;t&&(I=(0,u.makePluginActionDefinition)({icon:r.default.createElement(l.UIIcon,{src:o.DropboxLine}),label:a.intl.formatMessage({id:"WiS7tZ",defaultMessage:"Save a copy to Dropbox"}),action:()=>{i()},id:"SHARECOPY_ACTION",disabled:p?{disabled:!1}:{disabled:!0,tooltipMessage:E},overflowItemTooltipDataAttribute:"action-bar-download-split-button-menu-save-a-copy-overflow-item"}));const T=(e,i)=>e?r.default.createElement(c.Tooltip,{title:i},r.default.createElement("div",null,e)):null;if(!v)return[{id:P.id,renderButton:e=>{var i;const t=null===(i=P.renderButton)||void 0===i?void 0:i.call(P,e);return r.default.createElement(r.default.Fragment,null,p?t:T(t,y))},overflowItem:p?P.overflowItem:null!==(f=T(P.overflowItem,y))&&void 0!==f?f:void 0},...I?[{id:I.id,renderButton:e=>{var i;const t=null===(i=null==I?void 0:I.renderButton)||void 0===i?void 0:i.call(I,e);return r.default.createElement(r.default.Fragment,null,p?t:T(t,E))},overflowItem:p?I.overflowItem:null!==(_=T(I.overflowItem,E))&&void 0!==_?_:void 0}]:[]];const C=r.default.createElement(r.default.Fragment,null,P.overflowItem,null==I?void 0:I.overflowItem),A=({buttonProps:e})=>r.default.createElement(n.Menu.Wrapper,{onSelection:w},({getTriggerProps:i,getContentProps:t})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(s.Button,Object.assign({"aria-label":"Show options"},e,i(),{disabled:!p,"data-tooltip":"action-bar-download-split-button-menu"})),r.default.createElement(n.Menu.Content,Object.assign({},t(),{placement:"bottom-end"}),r.default.createElement(n.Menu.Segment,null,C)))),O=r.default.createElement(n.Menu.Submenu,{disabled:!p,withTriggerContent:m,withLeftAccessory:g},r.default.createElement(n.Menu.Segment,null,C));return[{renderButton:e=>{const i=r.default.createElement(s.SplitButton,{onClick:b,onKeyPress:h,variant:"opacity",renderMenu:A,disabled:!p},!e&&g,m);return p?i:T(i,y)},overflowItem:p?O:T(O,y)}]}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/open_dropdown_plugin",["require","exports","tslib","react","react-redux","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/core/i18n","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","metaserver/static/js/extensions/data/store","metaserver/static/js/extensions/data/helpers","metaserver/static/js/extensions/data/selectors","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/extensions/extensions_menu_component_v2","metaserver/static/js/file_viewer/unity/with_unity","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/unity/features","metaserver/static/js/unity/check_file_cache","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/file_actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeOpenDropdownAction=i.OpenMenuContent=void 0,r=t.__importDefault(r),y=t.__importDefault(y);const P={surface:"previews"};i.OpenMenuContent=e=>(0,m.isBrowseFile)(e.file)?r.default.createElement(g.WithUnity,{file:e.file,user:e.user,render:i=>r.default.createElement(_.ExtensionsPopoverContent,Object.assign({},e,{unityInfo:i}))}):r.default.createElement(_.ExtensionsPopoverContent,Object.assign({},e)),i.OpenMenuContent.displayName="OpenMenuContent";const I=(e,i,t)=>{if((0,m.isBrowseFile)(e)&&(0,n.isLiveFile)(e)&&!(0,n.isInsideVaultFolder)(e)&&h.UnityFeatures.isUnitySupported()&&"ns_path"in e&&(null===y.default||void 0===y.default?void 0:y.default.is_cached_and_locally_available(e.ns_id,e.ns_path)))return()=>(0,S.openInDesktopAction)(e,i,t)},T=(e,i)=>{const t=(0,a.useSelector)(i=>(0,v.getOpenActionsForFile)(i,e),a.shallowEqual),n=r.default.useMemo(()=>(0,p.partitionActions)(t).cloudEditors,[t]);if((0,m.isSharedFile)(e)){if(0===n.length)return!1;if((e=>(null==e?void 0:e.linkType)===b.SharedLinkType.Shmodel)(i))return!1}return!0},C=({file:e,shareToken:i,icon:t,label:a,content:n,hideIcon:s,handleSelection:c})=>T(e,i)?r.default.createElement(o.Menu.Wrapper,{onSelection:c},({getTriggerProps:e,getContentProps:i})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(l.Button,Object.assign({},e(),{variant:"opacity",withIconLeft:s?null:t,withDropdownIcon:!0}),a),r.default.createElement(o.Menu.Content,Object.assign({},i()),n))):null;C.displayName="OpenButton";const A=({file:e,shareToken:i,icon:t,label:a,content:n})=>T(e,i)?r.default.createElement(o.Menu.Submenu,{withTriggerContent:a,withLeftAccessory:t},n):null;A.displayName="OpenOverflow";const O=({file:e,shareToken:t,user:n,store:o,context:l})=>{const u=r.default.createElement(i.OpenMenuContent,{user:n,file:e,isInActionBar:!0,telemetryContext:P,openDesktopActionHandler:I(e,n,l)}),p=r.default.createElement(c.UIIcon,{src:d.OpenLine}),v=s.intl.formatMessage(f.OPEN_IN_ACTION_STRING),_=e=>{e.menuItem.handler(),l.logUserAction(e.menuItem.userAction||"unknown",E.UserActionContext.Toolbar,Object.assign({},e.menuItem.actionName&&{app_action_name:e.menuItem.actionName}))};return{renderButton:i=>r.default.createElement(a.Provider,{store:o},r.default.createElement(C,{icon:p,content:u,file:e,shareToken:t,handleSelection:_,hideIcon:i,label:v})),overflowItem:r.default.createElement(a.Provider,{store:o},r.default.createElement(A,{icon:p,content:u,file:e,shareToken:t,handleSelection:_,label:v})),id:w.OPEN_DROPDOWN_ACTION_PLUGIN_ID}};O.displayName="OpenDropdownPreview";i.makeOpenDropdownAction=(e,i,t)=>({actionDefinitions:()=>{const r=(0,u.getStore)(),{file:a,shareToken:s}=e();if(!(0,n.isLiveFile)(a)||(0,n.isInsideVaultFolder)(a)||(0,n.isPnmLinkNodeSelected)(a))return{};const o=O({file:a,shareToken:s,store:r,user:i,context:t});return{atTopLevelIfSpace:[o],alwaysInOverflow:[[o]]}}})})),define("typescript/libraries/file-viewer/src/file_viewer/context_provider",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewerContextProvider=i.useFileViewerContext=void 0;const a=(r=t.__importDefault(r)).default.createContext(null);a.displayName="FileViewerContext";i.useFileViewerContext=()=>r.default.useContext(a),i.FileViewerContextProvider=a.Provider})),define("typescript/libraries/file-viewer/src/logging/timing",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/middlewares/analytics","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/logging/performance"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useTimingLogging=void 0,r=t.__importDefault(r);const c=new Set([l.PreviewsTimingEvents.SKELETON_MOUNT,l.PreviewsTimingEvents.SKELETON_IMAGE_LOAD,l.PreviewsTimingEvents.SKELETON_DOC_RIVIERA_CALL_END,l.PreviewsTimingEvents.SKELETON_DOC_IMAGE_LOAD,l.PreviewsTimingEvents.CONTAINER_CODE_START,l.PreviewsTimingEvents.COLLECTION_VIEWER_CODE_START,l.PreviewsTimingEvents.COLLECTION_VIEWER_MOUNT,l.PreviewsTimingEvents.SDK_FILE_VIEWER_CODE_START,l.PreviewsTimingEvents.FVSDK_CONSTRUCTOR,l.PreviewsTimingEvents.FVSDK_INITIALIZE_START,l.PreviewsTimingEvents.FVSDK_PLUGINS_INITIALIZED,l.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA_START_START,l.PreviewsTimingEvents.FVSDK_GET_PREVIEW_METADATA,l.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA,l.PreviewsTimingEvents.FVSDK_INITIALIZE_COMPLETE,l.PreviewsTimingEvents.FVSDK_APP_MOUNT,l.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_START,l.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_MOUNT,l.PreviewsTimingEvents.FVSDK_IMAGE_ON_LOAD,l.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_START,l.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_MOUNT,l.PreviewsTimingEvents.FVSDK_VIDEO_CONTAINER_MOUNT,l.PreviewsTimingEvents.FVSDK_MARK_TTI]),d=new Set([l.PreviewsTimingEvents.FVSDK_FULL_IMAGE_ON_LOAD]),u=(e,i,t)=>{const n=(0,a.useSelector)(i=>i.loggingSession[e]),{batteries:c}=(0,o.useFileViewerContext)(),d=r.default.useRef(!1);return{onLogTimeline:r.default.useCallback(()=>{var e,r;const a=l.PreviewsEventLogger.getStartEntry();if(a&&!d.current){const o=l.PreviewsEventLogger.getEventTimeline();Object.entries(o).forEach(([e,r])=>{var a,o;t.has(e)&&(null===(o=null===(a=null==c?void 0:c.logger)||void 0===a?void 0:a.logDuration)||void 0===o||o.call(a,{eventName:i,durationInMs:r,tags:{event:e},session:n?(0,s.serializeSession)(n):void 0}))}),null===(r=null===(e=null==c?void 0:c.logger)||void 0===e?void 0:e.logDuration)||void 0===r||r.call(e,{eventName:i,durationInMs:a.startTime,tags:{event:"session_start_since_load"},session:n?(0,s.serializeSession)(n):void 0}),d.current=!0}},[n,c])}};i.useTimingLogging=e=>{const i=(0,a.useDispatch)(),t=(0,a.useSelector)(i=>i.loggingSession[e]),{batteries:p}=(0,o.useFileViewerContext)(),{onLogTimeline:v}=u(e,"preview_timeline",c),{onLogTimeline:f}=u(e,"preview_ttvc_timeline",d),_=r.default.useCallback(()=>{l.PreviewsEventLogger.mark(l.PreviewsTimingEvents.FVSDK_MARK_TTI),i((0,n.logTTI)(e)),v()},[e,i,v]),g=r.default.useCallback(e=>{var i,r,a;(null===(i=e.detail)||void 0===i?void 0:i.value)&&(null===(a=null===(r=null==p?void 0:p.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"TTI",durationInMs:e.detail.value,shouldLogToHive:!0,tags:{navigation_type:e.detail.isAjax?"ajax":"page_load"},session:t?(0,s.serializeSession)(t):void 0}))},[p,t]),m=r.default.useCallback(e=>{var i,r,a,n;(null===(i=e.detail)||void 0===i?void 0:i.value)&&(null===(a=null===(r=null==p?void 0:p.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"visually_complete",durationInMs:e.detail.value,tags:{navigation_type:null!==(n=e.detail.navigation_type)&&void 0!==n?n:"unknown",file_flip:String(!!t.extra.was_flipped)},shouldLogToHive:!0,session:t?(0,s.serializeSession)(t):void 0})),f()},[p,t]),w=r.default.useCallback(e=>{var i,r,a;(null===(i=e.detail)||void 0===i?void 0:i.value)&&(null===(a=null===(r=null==p?void 0:p.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"largest_contentful_paint",durationInMs:e.detail.value,shouldLogToHive:!0,session:t?(0,s.serializeSession)(t):void 0}))},[p,t]);return r.default.useEffect(()=>(window.addEventListener("time_to_interactive",g),window.addEventListener("visually_complete",m),window.addEventListener("largest_contentful_paint",w),()=>{window.removeEventListener("time_to_interactive",g),window.removeEventListener("visually_complete",m),window.removeEventListener("largest_contentful_paint",w)}),[g,m,w]),{onLogTTI:_}}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc/find_in_doc_controller",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/kmp_search"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FindInDocController=void 0;i.FindInDocController=class{constructor(e){this.addSyntheticSpaceBetweenTextboxes=({segments:e,segmentIndex:i,chunkIndex:t})=>{const r=e[i].chunks[t],a=e[i].chunks[t+1];return this.isNewlineTextbox(r,a)||this.isHorizontalSpaceTextbox(r,a)},this.args=e,this.kmpSearch=new s.KMPSearch(()=>this.args.retrievePages().map(e=>{var{textboxes:i}=e,r=t.__rest(e,["textboxes"]);return Object.assign(Object.assign({},r),{chunks:i})}),{shouldAddSyntheticSpace:this.addSyntheticSpaceBetweenTextboxes,parseText:this.parseText})}setRetrieveCurrentPageIndex(e){this.retrieveCurrentPageIndex=e}initializeSearch(){var e,i;(null===(e=this.args.previewMetadata)||void 0===e?void 0:e.content)&&(null===(i=this.args.rivieraData)||void 0===i?void 0:i.metadata)&&this.args.dispatch((0,r.fetchPageDataWithMetadata)({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,textUrlTmpl:this.args.previewMetadata.content.text_url_tmpl,startPage:0,endPage:this.args.rivieraData.metadata.page_count}))}onNext(e){this.searchResult&&(this.args.dispatch((0,a.logUserActionEvent)({userAction:n.UserAction.FindInDocNext,fileViewerId:this.args.fileViewerId,actionContext:"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,extra:{find_method:e}})),this.searchResult.currentHit++,this.searchResult.currentHit>=this.searchResult.hits.length&&(this.searchResult.currentHit=0),this.jumpTo(this.searchResult.hits[this.searchResult.currentHit]))}onPrevious(e){this.searchResult&&(this.args.dispatch((0,a.logUserActionEvent)({userAction:n.UserAction.FindInDocPrev,fileViewerId:this.args.fileViewerId,actionContext:"keyboard"===e?n.UserActionContext.Keyboard:n.UserActionContext.FindInDocSearchbar,extra:{find_method:e}})),this.searchResult.currentHit--,this.searchResult.currentHit<0&&(this.searchResult.currentHit=this.searchResult.hits.length-1),this.jumpTo(this.searchResult.hits[this.searchResult.currentHit]))}jumpTo(e){this.args.dispatch((0,r.updateDocCurrentPageIndex)({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,pageIndex:e.pageIndex,sourceContext:n.UserActionContext.Keyboard})),this.args.dispatch((0,r.pageNavigation)({fileViewerId:this.args.fileViewerId,previewKey:this.args.previewKey,pageIndex:e.pageIndex,centerOnYOffset:e.pageYOffset,sourceContext:n.UserActionContext.Keyboard}))}onReset(){this.searchResult=void 0,this.currentSearchTerm=void 0,this.args.onSearchResult(void 0)}search(e){if(!e)return void this.onReset();if(this.currentSearchTerm===e||null==this.kmpSearch)return;this.currentSearchTerm=e;const i=[];e=e.toLowerCase().normalize("NFKC");this.kmpSearch.searchSegments(e,({segments:e,segmentIndex:t,chunkIndex:r})=>{const a=e[t].dimension[1]-e[t].chunks[r].r[1];i.push({pageIndex:t,pageYOffset:a})},e=>{this.searchResult={highlights:e,hits:i,currentHit:this.findStartingHit(i)},this.args.onSearchResult(this.searchResult),i.length>0&&this.jumpTo(i[this.searchResult.currentHit])})}parseText(e){return e.trimLeft().toLowerCase().normalize("NFKC")}isNewlineTextbox(e,i){return Math.abs(e.r[1]-i.r[1])>.8*e.r[3]}isHorizontalSpaceTextbox(e,i){return Math.abs(e.r[0]+e.r[2]-i.r[0])>.3*e.h}findStartingHit(e){if(this.retrieveCurrentPageIndex&&e.length>0){const i=this.retrieveCurrentPageIndex(),t=e.findIndex(e=>e.pageIndex>=i);if(t>=0)return t}return 0}}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc/find_in_doc_searchbar",["require","exports","tslib","react","react-intl","ts-key-enum","lodash","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/text_fields","dig-components/tooltips","typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc_searchbar.module.css","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/libraries/file-viewer/src/keyboard/bindings"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FindInDocSearchbar=void 0,r=t.__importStar(r),p=t.__importStar(p);i.FindInDocSearchbar=e=>{var i;const{onClose:t,controller:o}=e,u=(0,a.useIntl)(),g=r.useRef(null);r.useEffect(()=>{var e;null===(e=g.current)||void 0===e||e.focus()},[]);const m=r.useCallback((0,s.debounce)(e=>o.search(e),200),[o.search]),w=r.createElement(r.Fragment,null,o.searchResult&&r.createElement(d.TextInputAffix,null,r.createElement("span",{role:"status"},u.formatMessage({id:"hK6Sbz",defaultMessage:"{currentResult} of {totalResults}"},{currentResult:o.searchResult.hits.length>0?o.searchResult.currentHit+1:0,totalResults:o.searchResult.hits.length})))),b=r.useMemo(()=>[(0,f.getEscapeBinding)(()=>t("keyboard")),(0,f.getFindInDocBinding)(()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.focus()})],[t]);return r.createElement("div",{className:p.findInDocSearchBar},r.createElement(d.TextInput,{ref:g,withLeftAccessory:r.createElement(l.UIIcon,{src:c.SearchLine,role:"presentation"}),withRightAccessory:w,placeholder:u.formatMessage({id:"uDh1dX",defaultMessage:"Search in this document"}),"aria-label":u.formatMessage({id:"gddc5d",defaultMessage:"Search in this document"}),onKeyDown:e=>{e.shiftKey&&e.key===n.Key.Enter?(o.onPrevious("keyboard"),e.stopPropagation()):e.key===n.Key.Enter?(o.onNext("keyboard"),e.stopPropagation()):e.key===n.Key.Escape?(t("keyboard"),e.stopPropagation()):(e.ctrlKey||e.metaKey)&&"f"===e.key&&e.preventDefault()},onChange:e=>m(e.currentTarget.value),isInvalid:0===(null===(i=o.searchResult)||void 0===i?void 0:i.hits.length)}),r.createElement(_,{tooltipText:u.formatMessage({id:"zqVjrn",defaultMessage:"Find previous"}),icon:c.ChevronUpLine,onClick:()=>o.onPrevious("click")}),r.createElement(_,{tooltipText:u.formatMessage({id:"W4xtVb",defaultMessage:"Find next"}),icon:c.ChevronDownLine,onClick:()=>o.onNext("click")}),r.createElement(_,{tooltipText:u.formatMessage({id:"OQXRhL",defaultMessage:"Close search"}),icon:c.CloseLine,onClick:()=>t("click")}),r.createElement(v.KeyboardBindingConnector,{name:"find_in_doc",keyboardBindings:b}))},i.FindInDocSearchbar.displayName="FindInDocSearchbar";const _=e=>r.createElement(u.Tooltip,{placement:"bottom",title:e.tooltipText,shouldCloseOnClick:!0},r.createElement(o.IconButton,{variant:"transparent",size:"small","aria-label":e.tooltipText,onClick:e.onClick},r.createElement(l.UIIcon,{src:e.icon})));_.displayName="FindInDocSearchbarButton"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer.module.css",["require","exports","css!metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.auth=i.pass=i.titleBarSpacing=void 0,i.titleBarSpacing="_titleBarSpacing_wzh7c_1",i.pass="_pass_wzh7c_5",i.auth="_auth_wzh7c_11";i.default={titleBarSpacing:"_titleBarSpacing_wzh7c_1",pass:"_pass_wzh7c_5",auth:"_auth_wzh7c_11"}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/titlebar",["require","exports","tslib","react","react-intl","classnames","metaserver/static/js/size_class/constants","metaserver/static/js/previews/ui/sharing_plugin/share_button","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/pass/seen_state_facepile_controller","dig-components/buttons","typescript/libraries/file-viewer/src/core/types/auth_modal","metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer.module.css"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TitleBarRightSection=i.LoginSignupButtons=void 0,r=t.__importStar(r),n=t.__importDefault(n),f=t.__importStar(f);const _=({activePreviewFile:e,passSessionId:i,user:t})=>r.createElement("div",{className:(0,n.default)(f.titleBarSpacing,f.pass)},r.createElement(u.SeenStateFacepileController,{user:t||null,file:e.file,passSessionId:i,source:"fileViewer",sharedLinkInfo:e.sharedLinkInfo,sizeClass:s.SizeClass.Medium,isViewMetadataDisabled:!1,isViewingFileSubpath:!1,soloAccessText:!0}));_.displayName="PassUi";const g=({activePreviewFile:e,user:i,copyLinkButtonOOBPreviewsVariant:t,previewSurface:a})=>{const n=i&&"MULTI_APPROVER"===d.fileViewerFlowExperiments.approvalFlowVariantByUserId[i.id]&&d.fileViewerFlowExperiments.flowsApprovalInShareModalEnabled&&(0,c.isLiveFile)(e.file)&&!(0,c.isCloudDoc)(e.file);return r.createElement("div",{className:f.titleBarSpacing},r.createElement(o.ShareButton,{previewSurface:a,activeFile:e.file,user:i,copyLinkButtonOOBPreviewsVariant:t,shouldShowApproval:n}))};g.displayName="TitleBarShareButton";i.LoginSignupButtons=({showAuthModal:e})=>{const i=(0,a.useIntl)(),t=i.formatMessage({id:"N0xz5m",defaultMessage:"Sign in"});return r.createElement("div",{className:(0,n.default)(f.auth,f.titleBarSpacing)},r.createElement(p.Button,{onClick:()=>e({mode:v.AuthMode.LOGIN,kind:v.LoginOrRegisterKind.SIDEBAR}),"aria-label":i.formatMessage({id:"Cg3xuN",defaultMessage:"Button to trigger login dialog"}),variant:"opacity"},t),r.createElement(p.Button,{className:"previews_campaign_slot_sign_up",onClick:()=>e({mode:v.AuthMode.REGISTER,kind:v.LoginOrRegisterKind.SIDEBAR}),"aria-label":i.formatMessage({id:"B9J0l9",defaultMessage:"Button to trigger sign up dialog"}),variant:"primary"},i.formatMessage({id:"5KEf7W",defaultMessage:"Sign up"})))},i.LoginSignupButtons.displayName="LoginSignupButtons";i.TitleBarRightSection=e=>{const{activePreviewFile:t,user:a,passSessionId:n,previewSurface:s,showAuthModal:o,enablePass:c}=e,d=s!==l.SDKPreviewSurface.BACKUP&&s!==l.SDKPreviewSurface.SHARED_COLLECTION&&s!==l.SDKPreviewSurface.VERSION_HISTORY,u=!a;return r.createElement(r.Fragment,null,u&&r.createElement(i.LoginSignupButtons,{showAuthModal:o}),d&&r.createElement(g,Object.assign({},e)),c&&r.createElement(_,{activePreviewFile:t,passSessionId:n,user:a}))},i.TitleBarRightSection.displayName="TitleBarRightSection"})),define("metaserver/static/js/previews/ui/sharing_plugin/share_button",["require","exports","tslib","react","react-intl","react-redux","dig-components/buttons","dig-components/tooltips","dig-components/icons","dig-components/icons/src","dig-components/menu","metaserver/static/js/extensions/split_share_button","metaserver/static/js/extensions/data/store","typescript/component_libraries/spectrum-sharing/src/utils/sharing_constants","metaserver/static/js/file_viewer/share_helpers","typescript/libraries/file-viewer/src/core/logging/constants","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/sharing/api/client","metaserver/static/js/sharing/access_level","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/previews/ui/sharing_plugin/copy_file_link_button","typescript/libraries/file-viewer/src/comments2/plugin/types","typescript/libraries/file-viewer/src/file_viewer/context_provider","metaserver/static/js/integrations/zoom_share_dialog/async_modal","typescript/libraries/file-viewer/src/render_context","metaserver/static/js/file_viewer/sdk_file_viewer/experiments"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,_,g,m,w,b,h,y,S,E,P,I,T,C){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ShareButton=i.DisabledShareButton=void 0,r=t.__importStar(r),f=t.__importStar(f);const A=(0,a.defineMessage)({id:"VzQ1nj",defaultMessage:"Ask the owner of this file for permission to share it with others"}),O=(0,a.defineMessage)({id:"JDi0M8",defaultMessage:"Share"});i.DisabledShareButton=()=>{const e=(0,a.useIntl)(),i=e.formatMessage(O),t=e.formatMessage(A),n=r.default.createElement(l.UIIcon,{src:c.ShareArrowLine});return r.default.createElement(o.Tooltip,{title:t,placement:"left"},r.default.createElement("span",{style:{display:"inline-block"},tabIndex:0},r.default.createElement(s.SplitButton,{variant:"primary",disabled:!0,renderMenu:({buttonProps:e})=>r.default.createElement(d.Menu.Wrapper,null,({getTriggerProps:i,getContentProps:t})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(s.Button,Object.assign({"aria-label":"Show options"},e,i(),{disabled:!0})),r.default.createElement(d.Menu.Content,Object.assign({},t(),{placement:"bottom-end"}))))},n,i)))},i.DisabledShareButton.displayName="DisabledShareButton";i.ShareButton=({previewSurface:e,activeFile:a,user:s,copyLinkButtonOOBPreviewsVariant:o,parsedSharedCopyLink:l,shouldShowApproval:c})=>{const d=r.default.useMemo(()=>(0,p.getStore)(),[]),A=r.default.useMemo(()=>s&&new w.FileShareApiClient({userId:s.id}),[s]),[O,F]=r.default.useState(void 0),k=r.default.useRef(null),{responsiveSize:x}=(0,T.useFileViewerRenderContext)(),D=(0,P.useFileViewerContext)(),L=e===h.SDKPreviewSurface.SHARED_CONTENT_LINK||e===h.SDKPreviewSurface.SHARED_LINK,M=L||e===h.SDKPreviewSurface.INBAND_SHARE,R=(0,g.isSharedFile)(a),N=r.default.useCallback(()=>t.__awaiter(void 0,void 0,void 0,(function*(){R&&A&&!(null==l?void 0:l.doesContainShmodelLink)&&(yield A.getMetadataAlpha({contentId:a.file_id}).then(e=>F(e)))})),[a]);(0,r.useEffect)(()=>{k.current!=a.file_id&&N()},[a]);const j=null!=O&&O.access_type===b.ACCESS_LEVEL.WRITER,V=r.default.useCallback(()=>{if(!s)return;const e=M?v.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE:v.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE;f.share(a,s,null,{origin:e,showApproval:c,onCreateApprovalSuccess:()=>D.pluginContext.getPluginData().navigation.openRightRailPlugin(_.UserActionContext.TitleBarMain,E.COMMENTS_PLUGIN_ID),docsendAnalyticsAddOn:C.fileViewerFeatureExperiments.docsendAnalyticsAddOn}),D.pluginContext.logUserAction(_.UserAction.Share,_.UserActionContext.TitleBarMain)},[a,s]),B=r.default.useMemo(()=>Object.assign(Object.assign({},a),{icon:(0,g.isBrowseFile)(a)?a.icon:"",fq_path:(0,g.isBrowseFile)(a)?a.fq_path:"",is_cloud_doc:(0,m.isCloudDoc)(a),type:(0,m.getType)(a)}),[a]),U=!M;if(!s||e===h.SDKPreviewSurface.VERSION_HISTORY)return!s&&L&&"ON"===o&&((null==l?void 0:l.doesContainRlKey)||(null==l?void 0:l.doesContainShmodelLink))?r.default.createElement("div",{className:"share-button-container"},r.default.createElement(S.CopyFileLinkButton,{file_id:a.file_id,parsedLink:l,linkAccessLevel:l.doesContainShmodelLink?"viewer":void 0})):null;let K=!1;if(L||R&&!j)if("ON"===o&&l&&(l.doesContainRlKey||l.doesContainShmodelLink))K=!0;else if("ON"!==o&&!j)return r.default.createElement(i.DisabledShareButton,null);return r.default.createElement("div",{className:"share-actions"},K&&r.default.createElement("div",{className:"share-button-container"},r.default.createElement(S.CopyFileLinkButton,{file_id:a.file_id,link_metadata:null==O?void 0:O.link_metadata,user:s,parsedLink:l,variant:U?"opacity":"primary",linkAccessLevel:j?"editor":"viewer"})),U&&r.default.createElement(n.Provider,{store:d},r.default.createElement(u.SplitShareButton,{files:[B],user:s,variant:"primary",onShowShare:V,onPresentInZoom:()=>((e,i)=>{(0,I.asyncShowModal)(i.id,e,"file-viewer-modal-overlay")})(a.file_id,s),showLeftDigIcon:x===y.ResponsiveSize.DESKTOP,previewsLogUserAction:D.pluginContext.logUserAction})),!U&&!K&&r.default.createElement(i.DisabledShareButton,null))},i.ShareButton.displayName="ShareButton"})),define("typescript/libraries/file-viewer/src/hooks/use_toolbar_override",["require","exports","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useOverrideToolbar=void 0,i.useOverrideToolbar=function(e,i){const n=(0,r.useDispatch)();(0,t.useEffect)(()=>(n((0,a.overrideFloatingToolbar)({fileViewerId:e,state:i,internal:!0})),()=>{n((0,a.overrideFloatingToolbar)({fileViewerId:e,state:void 0,internal:!0}))}),[i,e])}})),define("typescript/libraries/file-viewer/src/preview_image/preview_image.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_image/preview_image.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.layer=i.zoomFit=i.sizer=i.smallImg=i.fullSizeImg=i.loader=i.viewport=void 0,i.viewport="_viewport_1anuf_1",i.loader="_loader_1anuf_9",i.fullSizeImg="_fullSizeImg_1anuf_16",i.smallImg="_smallImg_1anuf_15",i.sizer="_sizer_1anuf_24",i.zoomFit="_zoomFit_1anuf_33",i.layer="_layer_1anuf_41";i.default={viewport:"_viewport_1anuf_1",loader:"_loader_1anuf_9",fullSizeImg:"_fullSizeImg_1anuf_16",smallImg:"_smallImg_1anuf_15",sizer:"_sizer_1anuf_24",zoomFit:"_zoomFit_1anuf_33",layer:"_layer_1anuf_41"}})),define("typescript/libraries/file-viewer/src/ui/ui.module.css",["require","exports","css!typescript/libraries/file-viewer/src/ui/ui.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.snackbar=i.slideEntering=i.slideHidden=i.slideExited=i.slideExiting=i.slideVisible=i.slide=i.overlayExitActive=i.overlayExit=i.overlayEnterActive=i.overlayEnter=i.close=i.overlayDuration=i.slideDuration=void 0,i.slideDuration="333",i.overlayDuration="333",i.close="_close_ac553_12",i.overlayEnter="_overlay-enter_ac553_19",i.overlayEnterActive="_overlay-enter-active_ac553_23",i.overlayExit="_overlay-exit_ac553_28",i.overlayExitActive="_overlay-exit-active_ac553_32",i.slide="_slide_ac553_37",i.slideVisible="_slide-visible_ac553_42",i.slideExiting="_slide-exiting_ac553_46",i.slideExited="_slide-exited_ac553_50",i.slideHidden="_slide-hidden_ac553_54",i.slideEntering="_slide-entering_ac553_58",i.snackbar="_snackbar_ac553_69";i.default={slideDuration:"333",overlayDuration:"333",close:"_close_ac553_12",overlayEnter:"_overlay-enter_ac553_19",overlayEnterActive:"_overlay-enter-active_ac553_23",overlayExit:"_overlay-exit_ac553_28",overlayExitActive:"_overlay-exit-active_ac553_32",slide:"_slide_ac553_37",slideVisible:"_slide-visible_ac553_42",slideExiting:"_slide-exiting_ac553_46",slideExited:"_slide-exited_ac553_50",slideHidden:"_slide-hidden_ac553_54",slideEntering:"_slide-entering_ac553_58",snackbar:"_snackbar_ac553_69"}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc_searchbar.module.css",["require","exports","css!typescript/libraries/file-viewer/src/preview_doc/renderer/find_in_doc_searchbar.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.findInDocSearchBar=void 0,i.findInDocSearchBar="_findInDocSearchBar_o0vck_1";i.default={findInDocSearchBar:"_findInDocSearchBar_o0vck_1"}})),define("typescript/libraries/file-viewer/src/ui/animations",["require","exports","tslib","react-transition-group","react","typescript/libraries/file-viewer/src/ui/ui.module.css"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SlideAnimation=i.OverlayAnimation=void 0,a=t.__importDefault(a),n=t.__importStar(n);const s=parseInt(n.overlayDuration,10),o=parseInt(n.slideDuration,10);i.OverlayAnimation=({active:e,nodeRef:i,mount:t,children:o})=>a.default.createElement(r.CSSTransition,{nodeRef:i,in:e,classNames:{enter:n.overlayEnter,enterActive:n.overlayEnterActive,enterDone:n.overlayEnterActive,exit:n.overlayExit,exitActive:n.overlayExitActive,exitDone:n.overlayExitActive},timeout:s,mountOnEnter:t,unmountOnExit:t},o),i.OverlayAnimation.displayName="OverlayAnimation";const l={left:[-1,0],right:[1,0],top:[0,1],bottom:[0,1]};i.SlideAnimation=({active:e,direction:i,children:t,distance:s,initial:c,onExited:d})=>{const u="out"==c,p=a.default.useRef(null),[v,f]=l[i],_={"--slide-translate-x":`${s*v}px`,"--slide-translate-y":`${s*f}px`};return a.default.createElement(r.CSSTransition,{nodeRef:p,in:e,onExited:d,classNames:u?{enter:n.slideExited,enterActive:n.slideEntering,enterDone:n.slideVisible,exit:n.slideVisible,exitActive:n.slideExiting,exitDone:n.slideExited}:{enter:n.slideVisible,enterActive:n.slideExiting,enterDone:n.slideHidden,exit:n.slideExited,exitActive:n.slideEntering,exitDone:n.slideVisible},timeout:o,mountOnEnter:u,unmountOnExit:u},a.default.createElement("div",{ref:p,style:_,className:n.slide},t))},i.SlideAnimation.displayName="SlideAnimation"}));
//# sourceMappingURL=pkg-fvsdk.min.js-vfl8woHI3.map