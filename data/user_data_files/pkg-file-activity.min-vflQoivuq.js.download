define("typescript/component_libraries/files_components/src/blades/file_activity/index",["require","exports","tslib","typescript/component_libraries/files_components/src/blades/file_activity/data/store","typescript/component_libraries/files_components/src/blades/file_activity/component/file_activity_blade"],(function(e,t,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.__exportStar(a,t),i.__exportStar(s,t)})),define("typescript/component_libraries/files_components/src/blades/file_activity/data/store",["require","exports","redux","typescript/libraries/api_v2/redux/file_activity_stream","typescript/component_libraries/files_components/src/blades/file_activity/data/types","typescript/component_libraries/files_components/src/blades/file_activity/data/reducer"],(function(e,t,i,a,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeStore=void 0,t.makeStore=function({apiV2Client:e}){const t=(0,i.combineReducers)({[s.FILE_ACTIVITY_BLADE_NAMESPACE_KEY]:r.fileActivityBladeReducer});return(0,i.createStore)(t,(0,i.applyMiddleware)((0,a.middleware)(e.ns("file_activity_stream"))))}})),define("typescript/component_libraries/files_components/src/blades/file_activity/component/file_activity_blade",["require","exports","tslib","react","react-redux","react-intl","dig-components/icons","dig-components/icons/src","typescript/component_libraries/files_components/src/right-rail/right_rail","typescript/component_libraries/files_components/src/right-rail/hooks","typescript/component_libraries/files_components/src/blades/file_activity/component/file_activity","typescript/component_libraries/files_components/src/blades/file_activity/component/version_history_menu","typescript/component_libraries/files_components/src/blades/file_activity/data/actions"],(function(e,t,i,a,s,r,n,o,c,l,d,_,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollapsedFileActivityBladeButton=t.FileActivityBlade=void 0,a=i.__importStar(a);t.FileActivityBlade=e=>{var{id:t,versionHistory:y,intl:p}=e,u=i.__rest(e,["id","versionHistory","intl"]);(function(e){const t=(0,s.useDispatch)();a.useEffect(()=>{t({type:v.FileActivityActionTypes.SET_FILTER,filter:{}})},[t,e])})(u.fileId);const E=(0,l.useIsExpanded)(t);return a.createElement(r.RawIntlProvider,{value:p},a.createElement(c.RightRail.Blade,{withTitle:p.formatMessage({id:"avG+QD",defaultMessage:"Activity"}),withIcon:a.createElement(n.UIIcon,{src:o.FileHistoryLine}),id:t,withTitleRightAccessory:E&&y&&y.enabled&&a.createElement(_.VersionHistoryMenu,{onVersionHistoryClicked:y.onVersionHistoryClicked})},a.createElement(d.FileActivity,Object.assign({},u))))},t.FileActivityBlade.displayName="FileActivityBlade";t.CollapsedFileActivityBladeButton=({id:e,intl:t})=>a.createElement(c.RightRail.CollapsedBladeIcon,{id:e,withIcon:a.createElement(n.UIIcon,{src:o.FileHistoryLine,"aria-label":t.formatMessage({id:"Qimr0o",defaultMessage:"Open activity panel"})}),tooltip:t.formatMessage({id:"huSYqM",defaultMessage:"Activity"})}),t.CollapsedFileActivityBladeButton.displayName="CollapsedFileActivityBladeButton"})),define("typescript/component_libraries/files_components/src/blades/file_activity/data/types",["require","exports"],(function(e,t){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.defaultFileActivityState=t.INCLUDE_ALL_FILTER=t.ALL_FILTER_TYPES=t.FilterType=t.EventState=t.FILE_ACTIVITY_BLADE_NAMESPACE_KEY=void 0,t.FILE_ACTIVITY_BLADE_NAMESPACE_KEY="file_activity_blade_state",(function(e){e.loading="loading",e.error="error",e.loaded="loaded"})(t.EventState||(t.EventState={})),(function(e){e.added="added",e.viewed="viewed",e.moved="moved",e.renamed="renamed",e.edited="edited",e.shared="shared",e.commented="commented"})(i=t.FilterType||(t.FilterType={})),t.ALL_FILTER_TYPES=[i.added,i.viewed,i.moved,i.renamed,i.edited,i.shared,i.commented],t.INCLUDE_ALL_FILTER={added:!0,viewed:!0,moved:!0,renamed:!0,edited:!0,shared:!0,commented:!0},t.defaultFileActivityState={filter:{},eventHistory:{}}})),define("typescript/component_libraries/files_components/src/blades/file_activity/data/reducer",["require","exports","typescript/component_libraries/files_components/src/blades/file_activity/data/actions","typescript/component_libraries/files_components/src/blades/file_activity/data/types","typescript/libraries/api_v2/redux/file_activity_stream"],(function(e,t,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileActivityBladeReducer=void 0,t.fileActivityBladeReducer=function(e=a.defaultFileActivityState,t){switch(t.type){case s.Action.GetActivityStream:return Object.assign(Object.assign({},e),{eventHistory:Object.assign(Object.assign({},e.eventHistory),{[t.payload.arg.file_path_or_id]:{status:a.EventState.loading}})});case s.Action.GetActivityStreamResult:return(function(e,t){var i,s,r;const n=t.payload.arg.file_path_or_id;return t.error?Object.assign(Object.assign({},e),{eventHistory:Object.assign(Object.assign({},e.eventHistory),{[n]:{status:a.EventState.error,errorString:(null===(i=t.error)||void 0===i?void 0:i.message)||""}})}):Object.assign(Object.assign({},e),{eventHistory:Object.assign(Object.assign({},e.eventHistory),{[n]:{status:a.EventState.loaded,activity:(o=null!==(r=null===(s=t.payload.result)||void 0===s?void 0:s.activity_group)&&void 0!==r?r:[],o.reduce((e,t)=>e.concat(t.activities),[]))}})});var o})(e,t);case i.FileActivityActionTypes.SET_FILTER:return Object.assign(Object.assign({},e),{filter:t.filter});default:return e}}})),define("typescript/component_libraries/files_components/src/blades/file_activity/component/file_activity",["require","exports","tslib","react","react-redux","dig-components/typography","dig-components/progress_indicators","typescript/component_libraries/files_components/src/blades/file_activity/data/selectors","typescript/component_libraries/files_components/src/blades/file_activity/component/activity_list","react-intl","typescript/component_libraries/files_components/src/blades/file_activity/utils","typescript/component_libraries/files_components/src/blades/file_activity/data/types","typescript/libraries/api_v2/redux/file_activity_stream","typescript/component_libraries/files_components/src/blades/file_activity/component/filter","typescript/component_libraries/files_components/src/blades/file_activity/data/actions","typescript/component_libraries/files_components/src/blades/file_activity/component/index.module.css"],(function(e,t,i,a,s,r,n,o,c,l,d,_,v,y,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileActivity=void 0,a=i.__importDefault(a),u=i.__importDefault(u),t.FileActivity=a.default.memo(({fileId:e,user:t,rootNamespaceName:i="Dropbox",logFilterChange:E})=>{const m=(0,l.useIntl)(),f=(0,s.useDispatch)(),g=a.default.useMemo(()=>(0,o.createGetFilteredEvents)(),[]),h=(0,s.useSelector)(t=>g(t,{fileId:e})),O=(0,s.useSelector)(o.getFilter),M=(0,s.useSelector)(t=>(0,o.areApiActivitiesPresent)(t,{fileId:e})),T=a.default.useMemo(()=>(0,d.processEvents)(h,{intl:m,viewingUserId:t.account_id,rootNamespaceName:i}),[h,m,t,i]);a.default.useEffect(()=>{f((0,v.getActivityStreamAction)({arg:{file_path_or_id:e},params:{subjectUserId:String(t.id)}}))},[e,t,f]);const I=a.default.useCallback(e=>{f({type:p.FileActivityActionTypes.SET_FILTER,filter:e})},[f]);return a.default.createElement("div",{className:u.default.activityHistoryContainer},h.status===_.EventState.loading?a.default.createElement("div",{className:u.default.eventHistoryLoadingIndicatorContainer},a.default.createElement(n.Spinner,{size:"standard","aria-valuetext":m.formatMessage({id:"csFB2E",defaultMessage:"Loading"})})):h.status===_.EventState.error?a.default.createElement(r.Text,{color:"faint",size:"small"},h.errorString):M?a.default.createElement(a.default.Fragment,null,a.default.createElement(y.ActivityFilter,{filter:O,setFilter:I,logFilterChange:E}),a.default.createElement(c.ActivityList,{activity:T})):a.default.createElement(r.Text,{size:"small",color:"faint"},m.formatMessage({id:"E5o8M1",defaultMessage:"When people work with this file, you'll see their activity here."})))}),t.FileActivity.displayName="FileActivity"})),define("typescript/component_libraries/files_components/src/blades/file_activity/component/version_history_menu",["require","exports","tslib","react","react-intl","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/component_libraries/files_components/src/blades/file_activity/component/index.module.css"],(function(e,t,i,a,s,r,n,o,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VersionHistoryMenu=void 0,a=i.__importDefault(a),l=i.__importDefault(l);t.VersionHistoryMenu=({onVersionHistoryClicked:e})=>{const t=(0,s.useIntl)(),i=a.default.useCallback(t=>{"version-history"===t&&e()},[e]);return a.default.createElement(r.Menu.Wrapper,{onSelection:i,className:l.default.activityHistoryVersionHistoryMenu},({getTriggerProps:e,getContentProps:i})=>{const s=e();return a.default.createElement(n.IconButton,Object.assign({variant:"transparent"},s,{onClick:e=>{var t;e.stopPropagation(),null===(t=s.onClick)||void 0===t||t.call(s,e)},size:"small","aria-label":t.formatMessage({id:"eCPSMy",defaultMessage:"Other actions"})}),a.default.createElement(o.UIIcon,{src:c.MoreHorizontalLine,size:"small","aria-label":""}),a.default.createElement(r.Menu.Content,Object.assign({},i()),a.default.createElement(r.Menu.Segment,null,a.default.createElement(r.Menu.ActionItem,{value:"version-history"},t.formatMessage({id:"h+Ew4R",defaultMessage:"Version history"})))))})},t.VersionHistoryMenu.displayName="VersionHistoryMenu"})),define("typescript/component_libraries/files_components/src/blades/file_activity/data/actions",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileActivityActionTypes=void 0,(function(e){e.SET_FILTER="FILE_ACTIVITY/SET_FILTER"})(t.FileActivityActionTypes||(t.FileActivityActionTypes={}))})),define("typescript/component_libraries/files_components/src/blades/file_activity/data/selectors",["require","exports","reselect","typescript/component_libraries/files_components/src/blades/file_activity/data/types","typescript/component_libraries/files_components/src/blades/file_activity/utils"],(function(e,t,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createGetFilteredEvents=t.getFilter=t.areApiActivitiesPresent=t.getStore=void 0;const r={status:a.EventState.loading};t.getStore=e=>e[a.FILE_ACTIVITY_BLADE_NAMESPACE_KEY];const n=(e,{fileId:i})=>(0,t.getStore)(e).eventHistory[i]||r;t.areApiActivitiesPresent=(e,t)=>{const i=n(e,t);return i.status===a.EventState.loaded&&i.activity.length};t.getFilter=e=>(0,t.getStore)(e).filter;t.createGetFilteredEvents=()=>(0,i.createSelector)(n,t.getFilter,(e,t)=>e.status===a.EventState.loaded?{status:e.status,activity:e.activity.filter((0,s.shouldIncludeActivity)(t))}:e)})),define("typescript/component_libraries/files_components/src/blades/file_activity/component/activity_list",["require","exports","tslib","react","react-intl","classnames","dig-components/avatar","dig-components/typography","typescript/component_libraries/files_components/src/blades/file_activity/types","typescript/component_libraries/files_components/src/blades/file_activity/component/index.module.css"],(function(e,t,i,a,s,r,n,o,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityList=void 0,a=i.__importStar(a),r=i.__importDefault(r),l=i.__importDefault(l);t.ActivityList=({activity:e})=>{const t=(0,s.useIntl)();return a.createElement("div",{className:(0,r.default)(l.default.activityHistoryEventListContainer,{[l.default.activityHistoryEventListContainerEmpty]:0===e.length})},0===e.length?a.createElement(o.Text,{color:"faint",size:"small"},t.formatMessage({id:"4hDYQO",defaultMessage:"There's nothing in our records"})):e.map(d))},t.ActivityList.displayName="ActivityList";const d=e=>e.type===c.CardType.event?a.createElement(_,Object.assign({key:e.id},e)):e.type===c.CardType.dateBanner?a.createElement(y,Object.assign({key:e.eventCardDate},e)):a.createElement(p,{key:e.id});d.displayName="AcitivityCard";const _=e=>{const t=(0,s.useIntl)();return a.createElement("div",{className:l.default.activityHistoryEventCard},a.createElement(v,{user:e.user}),a.createElement("div",{className:l.default.activityHistoryEventCardCardText},a.createElement("div",{className:l.default.activityHistoryEventCardCardHeading},e.eventHeadline),a.createElement("div",{className:l.default.activityHistoryEventCardCardSubheading},a.createElement(o.Text,{size:"small",color:"faint"},t.formatDate(new Date(e.timestamp),{hour:"numeric",minute:"2-digit"}),e.cardSubheading&&a.createElement("span",null," • ",e.cardSubheading)))))};_.displayName="EventCard";const v=({user:e})=>{const t=e.photo_url?e.photo_url:void 0,i=e.display_name.split(/\s+/g).slice(0,2).map(e=>e[0]).join("").toUpperCase();return a.createElement("div",{className:l.default.activityHistoryEventCardAvatarContainer},a.createElement(n.Avatar,{className:"activity-history-event-card__avatar",src:t,backgroundColor:(0,n.avatarColorForUserIdentifier)(i),size:"small",hasNoOutline:!0},i))};v.displayName="CardAvatar";const y=e=>a.createElement("div",{className:l.default.activityHistoryStickyHeader},a.createElement(o.Text,{className:l.default.activityHistoryEventHeader,size:"small",color:"standard",tagName:"div",isBold:!0},e.eventCardDate));y.displayName="DateBannerCard";const p=()=>{const e=(0,s.useIntl)();return a.createElement("div",{className:l.default.activityHistoryEmptyEventCard},a.createElement(o.Text,{color:"standard",size:"small"},e.formatMessage({id:"NYLgxb",defaultMessage:"Nothing happened on this day"})))};p.displayName="EmptyDayCard"})),define("typescript/component_libraries/files_components/src/blades/file_activity/component/index.module.css",["require","exports","css!typescript/component_libraries/files_components/src/blades/file_activity/component/index.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.activityHistoryVersionHistoryMenu=t.activityHistoryFilterMenu=t.activityHistoryContainer=t.eventHistoryLoadingIndicatorContainer=t.activityHistoryEmptyEventCard=t.activityHistoryStickyHeader=t.activityHistoryEventHeader=t.activityHistoryShowMoreCardPast=t.activityHistoryEventCardCardSubheading=t.activityHistoryEventCardCardHeading=t.activityHistoryEventCardCardTextStrikeout=t.activityHistoryEventCardCardText=t.activityHistoryEventCardAvatarContainer=t.activityHistoryEventCardHoverTimestamp=t.activityHistoryEventCardBubble=t.eventTextFaded=t.activityHistoryEventCard=t.activityHistoryEventListContainerEmpty=t.activityHistoryEventListContainer=t.activityHistoryEventListEmptyText=t.activityHistoryEventListEmptyImg=t.activityHistoryEventList=void 0,t.activityHistoryEventList="_activity-history-event-list_pu4fj_1",t.activityHistoryEventListEmptyImg="_activity-history-event-list__empty-img_pu4fj_7",t.activityHistoryEventListEmptyText="_activity-history-event-list__empty-text_pu4fj_11",t.activityHistoryEventListContainer="_activity-history-event-list-container_pu4fj_17",t.activityHistoryEventListContainerEmpty="_activity-history-event-list-container--empty_pu4fj_22",t.activityHistoryEventCard="_activity-history-event-card_pu4fj_26",t.eventTextFaded="_event-text-faded_pu4fj_47",t.activityHistoryEventCardBubble="_activity-history-event-card__bubble_pu4fj_51",t.activityHistoryEventCardHoverTimestamp="_activity-history-event-card__hover-timestamp_pu4fj_68",t.activityHistoryEventCardAvatarContainer="_activity-history-event-card__avatar-container_pu4fj_76",t.activityHistoryEventCardCardText="_activity-history-event-card__card-text_pu4fj_81",t.activityHistoryEventCardCardTextStrikeout="_activity-history-event-card__card-text--strikeout_pu4fj_86",t.activityHistoryEventCardCardHeading="_activity-history-event-card__card-heading_pu4fj_91",t.activityHistoryEventCardCardSubheading="_activity-history-event-card__card-subheading_pu4fj_100",t.activityHistoryShowMoreCardPast="_activity-history-show-more-card--past_pu4fj_109",t.activityHistoryEventHeader="_activity-history-event-header_pu4fj_113",t.activityHistoryStickyHeader="_activity-history-sticky-header_pu4fj_126",t.activityHistoryEmptyEventCard="_activity-history-empty-event-card_pu4fj_134",t.eventHistoryLoadingIndicatorContainer="_event-history-loading-indicator-container_pu4fj_143",t.activityHistoryContainer="_activity-history-container_pu4fj_151",t.activityHistoryFilterMenu="_activity-history-filter-menu_pu4fj_151",t.activityHistoryVersionHistoryMenu="_activity-history-version-history-menu_pu4fj_168";t.default={activityHistoryEventList:"_activity-history-event-list_pu4fj_1",activityHistoryEventListEmptyImg:"_activity-history-event-list__empty-img_pu4fj_7",activityHistoryEventListEmptyText:"_activity-history-event-list__empty-text_pu4fj_11",activityHistoryEventListContainer:"_activity-history-event-list-container_pu4fj_17",activityHistoryEventListContainerEmpty:"_activity-history-event-list-container--empty_pu4fj_22",activityHistoryEventCard:"_activity-history-event-card_pu4fj_26",eventTextFaded:"_event-text-faded_pu4fj_47",activityHistoryEventCardBubble:"_activity-history-event-card__bubble_pu4fj_51",activityHistoryEventCardHoverTimestamp:"_activity-history-event-card__hover-timestamp_pu4fj_68",activityHistoryEventCardAvatarContainer:"_activity-history-event-card__avatar-container_pu4fj_76",activityHistoryEventCardCardText:"_activity-history-event-card__card-text_pu4fj_81",activityHistoryEventCardCardTextStrikeout:"_activity-history-event-card__card-text--strikeout_pu4fj_86",activityHistoryEventCardCardHeading:"_activity-history-event-card__card-heading_pu4fj_91",activityHistoryEventCardCardSubheading:"_activity-history-event-card__card-subheading_pu4fj_100",activityHistoryShowMoreCardPast:"_activity-history-show-more-card--past_pu4fj_109",activityHistoryEventHeader:"_activity-history-event-header_pu4fj_113",activityHistoryStickyHeader:"_activity-history-sticky-header_pu4fj_126",activityHistoryEmptyEventCard:"_activity-history-empty-event-card_pu4fj_134",eventHistoryLoadingIndicatorContainer:"_event-history-loading-indicator-container_pu4fj_143",activityHistoryContainer:"_activity-history-container_pu4fj_151",activityHistoryFilterMenu:"_activity-history-filter-menu_pu4fj_151",activityHistoryVersionHistoryMenu:"_activity-history-version-history-menu_pu4fj_168"}})),define("typescript/component_libraries/files_components/src/blades/file_activity/utils",["require","exports","tslib","typescript/component_libraries/files_components/src/blades/file_activity/data/types","typescript/component_libraries/files_components/src/blades/file_activity/strings","typescript/component_libraries/files_components/src/blades/file_activity/types","typescript/component_libraries/files_components/src/common/filepath"],(function(e,t,i,a,s,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldIncludeActivity=t.countSelected=t.getActivityDisplayText=t.processEvents=void 0;t.processEvents=(e,t)=>{if(e.status!==a.EventState.loaded)return[];return e.activity.sort((e,t)=>e.timestamp<t.timestamp?1:e.timestamp>t.timestamp?-1:0).map(o(t)).reduce(l(t.intl),[])};const o=e=>i=>{const a=(0,t.getActivityDisplayText)(Object.assign({activity:i},e));return a?Object.assign({type:r.CardType.event,id:i.id,user:i.user,timestamp:i.timestamp},a):void 0},c=(e,t)=>{const i=new Date;i.setHours(0,0,0,0);const a=i.getTime(),s=a-864e5,r=new Date(t),n=r.getTime();return n>=a?e.formatMessage({id:"ihD7Zm",defaultMessage:"Today"}):n>=s?e.formatMessage({id:"ZA9ZwS",defaultMessage:"Yesterday"}):e.formatDate(r,{year:"numeric",month:"short",day:"numeric"})},l=e=>(t,i)=>{if(void 0===i)return t;const a=0===t.length?void 0:t[t.length-1],s=c(e,i.timestamp);return!a||"timestamp"in a&&c(e,a.timestamp)!==s?t.concat({type:r.CardType.dateBanner,eventCardDate:s},i):t.concat(i)},d=(e,t,i)=>t===i.id?e.formatMessage({id:"fGE/Cv",defaultMessage:"You"}):i.display_name;function _(e,t,i,a={},s){const{intl:r,viewingUserId:n,activity:{user:o}}=e;return{eventHeadline:n===o.id?r.formatMessage(t,a):r.formatMessage(i,Object.assign(Object.assign({},a),{name:o.display_name})),cardSubheading:s}}t.getActivityDisplayText=e=>{var{activity:t}=e,a=i.__rest(e,["activity"]);switch(t[".tag"]){case"add":return _(Object.assign({activity:t},a),s.YOU_ADDED_FILE,s.OTHER_ADDED_FILE);case"edit":return _(Object.assign({activity:t},a),s.YOU_EDITED_FILE,s.OTHER_EDITED_FILE);case"move":return v(Object.assign({activity:t},a));case"rename":return y(Object.assign({activity:t},a));case"view":return _(Object.assign({activity:t},a),s.YOU_VIEWED_FILE,s.OTHER_VIEWED_FILE);case"file_settings_change":return p(Object.assign({activity:t},a));case"shared_content_change":return u(Object.assign({activity:t},a));case"shared_content_invite":return E(Object.assign({activity:t},a));case"file_lock_change":return m(Object.assign({activity:t},a));case"comment_new":return _(Object.assign({activity:t},a),s.YOU_NEW_COMMENT,s.OTHER_NEW_COMMENT);case"comment_reply":return _(Object.assign({activity:t},a),s.YOU_REPLIED_COMMENT,s.OTHER_REPLIED_COMMENT);case"trello_file_activity":case"shared_link_change":case"slack_link_share":case"zoom_screen_share":return}};const v=e=>{const{activity:t,rootNamespaceName:i}=e;if("path"in t){const a=(0,n.parentDirName)(t.path)||i,r=t.last_path&&((0,n.parentDirName)(t.last_path)||i);return r?_(e,s.YOU_MOVED_FILE_FROM_TO,s.OTHER_MOVED_FILE_FROM_TO,{source:r,destination:a}):_(e,s.YOU_MOVED_FILE_TO,s.OTHER_MOVED_FILE_TO,{destination:a})}return _(e,s.YOU_MOVED_FILE,s.OTHER_MOVED_FILE)},y=e=>{const{activity:t}=e;return"filename"in t&&t.last_filename?_(e,s.YOU_RENAMED_FILE_FROM_TO,s.OTHER_RENAMED_FILE_FROM_TO,{source:t.last_filename,destination:t.filename}):_(e,s.YOU_RENAMED_FILE,s.OTHER_RENAMED_FILE)},p=e=>{const{activity:t}=e,i="changed_viewer_info_policy"in t?t.changed_viewer_info_policy:void 0;switch(null==i?void 0:i[".tag"]){case"enabled":return _(e,s.YOU_ENABLED_VIEWER_INFO,s.OTHER_DISABLED_VIEWER_INFO);case"disabled":return _(e,s.YOU_DISABLED_VIEWER_INFO,s.OTHER_DISABLED_VIEWER_INFO);default:return _(e,s.YOU_CHANGED_FILE_SETTINGS,s.OTHER_CHANGED_FILE_SETTINGS)}};const u=e=>{const{activity:t}=e;if(!("access_type"in t))return;const i=(function(e){return e.changed_group?e.changed_group.name:e.changed_user?e.changed_user.display_name:e.changed_email?e.changed_email:void 0})(t);if(!i)return;const a={entity:i};switch(t.access_type[".tag"]){case"writer":case"owner":case"reader":return _(e,s.YOU_ENABLED_COMMENTING,s.OTHER_ENABLED_COMMENTING,a);case"reader_no_comment":return _(e,s.YOU_GAVE_VIEW_ONLY_ACCESS,s.OTHER_GAVE_VIEW_ONLY_ACCESS,a);case"no_access":return _(e,s.YOU_REMOVED_ACCESS,s.OTHER_REMOVED_ACCESS,a)}},E=e=>{const{activity:t,intl:i,viewingUserId:a}=e;if(!("shared_users"in t))return;const{shared_users:r,shared_emails:n,shared_groups:o}=t;r.sort((e,t)=>d(i,a,e).localeCompare(d(i,a,t))),n.sort(),o.sort((e,t)=>e.name.localeCompare(t.name));const c=[...r.map(e=>d(i,a,e)),...n,...o.map(e=>e.name)],l={entity:c[0],count:c.length-1};return 1===c.length?_(e,s.YOU_SHARED_WITH_ONE,s.OTHER_SHARED_WITH_ONE,l):c.length>1?_(e,s.YOU_SHARED_WITH_MANY,s.OTHER_SHARED_WITH_MANY,l):void 0},m=e=>{const{activity:t}=e;if("activity_type"in t)return"lock"===t.activity_type[".tag"]?_(e,s.YOU_LOCKED_FILE,s.OTHER_LOCKED_FILE):_(e,s.YOU_UNLOCKED_FILE,s.OTHER_UNLOCKED_FILE)};t.countSelected=e=>a.ALL_FILTER_TYPES.reduce((t,i)=>e[i]?t+1:t,0);t.shouldIncludeActivity=e=>(e=0===(0,t.countSelected)(e)?a.INCLUDE_ALL_FILTER:e,t=>{switch(t[".tag"]){case"add":return e[a.FilterType.added];case"edit":return e[a.FilterType.edited];case"move":return e[a.FilterType.moved];case"rename":return e[a.FilterType.renamed];case"view":return e[a.FilterType.viewed];case"file_settings_change":case"file_lock_change":case"shared_content_change":case"shared_content_invite":return e[a.FilterType.shared];case"comment_new":case"comment_reply":return e[a.FilterType.commented];case"trello_file_activity":case"shared_link_change":case"slack_link_share":case"zoom_screen_share":return!1}})})),define("typescript/component_libraries/files_components/src/blades/file_activity/component/filter",["require","exports","tslib","react","dig-components/controls","dig-components/chips","dig-components/menu","dig-components/buttons","dig-components/typography","typescript/component_libraries/files_components/src/blades/file_activity/data/types","react-intl","typescript/component_libraries/files_components/src/blades/file_activity/utils","typescript/component_libraries/files_components/src/blades/file_activity/component/index.module.css"],(function(e,t,i,a,s,r,n,o,c,l,d,_,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityFilter=t.FilterUserEvent=void 0,a=i.__importDefault(a),v=i.__importDefault(v);const y={added:(0,d.defineMessage)({id:"pQdQ0E",defaultMessage:"Added"}),viewed:(0,d.defineMessage)({id:"nw8m8S",defaultMessage:"Viewed"}),moved:(0,d.defineMessage)({id:"jqrPlN",defaultMessage:"Moved"}),renamed:(0,d.defineMessage)({id:"+bqj0P",defaultMessage:"Renamed"}),edited:(0,d.defineMessage)({id:"eq7WUQ",defaultMessage:"Edited"}),shared:(0,d.defineMessage)({id:"2Vp/+6",defaultMessage:"Shared"}),commented:(0,d.defineMessage)({id:"nih9gu",defaultMessage:"Commented"})};function p(e){return(0,_.countSelected)(e)===l.ALL_FILTER_TYPES.length}const u=e=>a.default.createElement(n.Menu.ActionItem,{key:e.value,value:e.value,role:"menuitemcheckbox","aria-checked":e.isChecked,"aria-label":e.label,withLeftAccessory:a.default.createElement(s.Checkbox,{checked:e.isChecked,readOnly:!0,tabIndex:-1})},e.label);var E;(function(e){e.SELECT_ALL_HISTORY_TYPE="select_all_history_type",e.CLEAR_SELECT_HISTORY_TYPE="clear_select_history_type",e.SELECT_HISTORY_TYPE="select_history_type",e.UNSELECT_HISTORY_TYPE="unselect_history_type"})(E=t.FilterUserEvent||(t.FilterUserEvent={}));t.ActivityFilter=({filter:e,setFilter:t,logFilterChange:i})=>{const s=(0,d.useIntl)(),m=(0,_.countSelected)(e),f=a.default.useCallback(a=>{t(Object.assign(Object.assign({},e),{[a]:!e[a]})),null==i||i(e[a]?E.UNSELECT_HISTORY_TYPE:E.SELECT_HISTORY_TYPE)},[e,i,t]),g=a.default.useCallback(()=>{p(e)?(t({}),null==i||i(E.CLEAR_SELECT_HISTORY_TYPE)):(t(l.INCLUDE_ALL_FILTER),null==i||i(E.SELECT_ALL_HISTORY_TYPE))},[e,i,t]);return a.default.createElement("div",{className:v.default.activityHistoryFilterMenu},a.default.createElement(n.Menu.Wrapper,{closeOnSelection:!1,isPortaled:!1,onSelection:f},({getContentProps:t,getTriggerProps:i})=>a.default.createElement(a.default.Fragment,null,a.default.createElement(r.FilterChip,Object.assign({withDropdownIcon:!0,size:"small"},i()),s.formatMessage({id:"k7FRk3",defaultMessage:"Filter"}),m>0?` • ${m}`:null),a.default.createElement(n.Menu.Content,Object.assign({},t(),{style:{width:296}}),a.default.createElement(n.Menu.Segment,{withLabel:a.default.createElement(a.default.Fragment,null,a.default.createElement(c.Text,{isBold:!0},s.formatMessage({id:"YAOfjz",defaultMessage:"Select type"})),a.default.createElement(o.Button,{variant:"transparent",onClick:g},a.default.createElement(c.Text,{isBold:!0,size:"small"},p(e)?s.formatMessage({id:"JPzwuS",defaultMessage:"Clear"}):s.formatMessage({id:"JlWpUr",defaultMessage:"Select all"}))))},l.ALL_FILTER_TYPES.map(t=>a.default.createElement(u,{key:t,value:t,label:s.formatMessage(y[t]),isChecked:!!e[t]})))))))},t.ActivityFilter.displayName="ActivityFilter"})),define("typescript/component_libraries/files_components/src/blades/file_activity/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardType=void 0,(function(e){e.event="event",e.dateBanner="date-banner",e.emptyDay="empty-day"})(t.CardType||(t.CardType={}))})),define("typescript/component_libraries/files_components/src/blades/file_activity/strings",["require","exports","react-intl"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OTHER_REPLIED_COMMENT=t.YOU_REPLIED_COMMENT=t.OTHER_NEW_COMMENT=t.YOU_NEW_COMMENT=t.OTHER_UNLOCKED_FILE=t.YOU_UNLOCKED_FILE=t.OTHER_LOCKED_FILE=t.YOU_LOCKED_FILE=t.OTHER_SHARED_WITH_MANY=t.YOU_SHARED_WITH_MANY=t.OTHER_SHARED_WITH_ONE=t.YOU_SHARED_WITH_ONE=t.OTHER_REMOVED_ACCESS=t.YOU_REMOVED_ACCESS=t.OTHER_GAVE_VIEW_ONLY_ACCESS=t.YOU_GAVE_VIEW_ONLY_ACCESS=t.OTHER_ENABLED_COMMENTING=t.YOU_ENABLED_COMMENTING=t.OTHER_CHANGED_FILE_SETTINGS=t.YOU_CHANGED_FILE_SETTINGS=t.OTHER_DISABLED_VIEWER_INFO=t.YOU_DISABLED_VIEWER_INFO=t.OTHER_ENABLED_VIEWER_INFO=t.YOU_ENABLED_VIEWER_INFO=t.OTHER_VIEWED_FILE=t.YOU_VIEWED_FILE=t.OTHER_RENAMED_FILE_FROM_TO=t.YOU_RENAMED_FILE_FROM_TO=t.OTHER_RENAMED_FILE=t.YOU_RENAMED_FILE=t.OTHER_MOVED_FILE_TO=t.YOU_MOVED_FILE_TO=t.OTHER_MOVED_FILE_FROM_TO=t.YOU_MOVED_FILE_FROM_TO=t.OTHER_MOVED_FILE=t.YOU_MOVED_FILE=t.OTHER_EDITED_FILE=t.YOU_EDITED_FILE=t.OTHER_ADDED_FILE=t.YOU_ADDED_FILE=void 0,t.YOU_ADDED_FILE=(0,i.defineMessage)({id:"aYLqOs",defaultMessage:"You added this file"}),t.OTHER_ADDED_FILE=(0,i.defineMessage)({id:"r350bw",defaultMessage:"{name} added this file"}),t.YOU_EDITED_FILE=(0,i.defineMessage)({id:"WoiUCT",defaultMessage:"You edited this file"}),t.OTHER_EDITED_FILE=(0,i.defineMessage)({id:"PP4asw",defaultMessage:"{name} edited this file"}),t.YOU_MOVED_FILE=(0,i.defineMessage)({id:"YWTgGL",defaultMessage:"You moved this file"}),t.OTHER_MOVED_FILE=(0,i.defineMessage)({id:"dy7I1D",defaultMessage:"{name} moved this file"}),t.YOU_MOVED_FILE_FROM_TO=(0,i.defineMessage)({id:"9Jrqwg",defaultMessage:"You moved this file from {source} to {destination}"}),t.OTHER_MOVED_FILE_FROM_TO=(0,i.defineMessage)({id:"P/MCW3",defaultMessage:"{name} moved this file from {source} to {destination}"}),t.YOU_MOVED_FILE_TO=(0,i.defineMessage)({id:"LC8/hs",defaultMessage:"You moved this file to {destination}"}),t.OTHER_MOVED_FILE_TO=(0,i.defineMessage)({id:"BYEslL",defaultMessage:"{name} moved this file to {destination}"}),t.YOU_RENAMED_FILE=(0,i.defineMessage)({id:"LUhKEK",defaultMessage:"You renamed this file"}),t.OTHER_RENAMED_FILE=(0,i.defineMessage)({id:"CnmSS0",defaultMessage:"{name} renamed this file"}),t.YOU_RENAMED_FILE_FROM_TO=(0,i.defineMessage)({id:"6JV0MA",defaultMessage:"You renamed this file from {source} to {destination}"}),t.OTHER_RENAMED_FILE_FROM_TO=(0,i.defineMessage)({id:"HM1XZN",defaultMessage:"{name} renamed this file from {source} to {destination}"}),t.YOU_VIEWED_FILE=(0,i.defineMessage)({id:"8xmD+i",defaultMessage:"You viewed this file"}),t.OTHER_VIEWED_FILE=(0,i.defineMessage)({id:"3Lujbg",defaultMessage:"{name} viewed this file"}),t.YOU_ENABLED_VIEWER_INFO=(0,i.defineMessage)({id:"9rTtPu",defaultMessage:"You turned on viewer info"}),t.OTHER_ENABLED_VIEWER_INFO=(0,i.defineMessage)({id:"LZWy+W",defaultMessage:"{name} turned on viewer info"}),t.YOU_DISABLED_VIEWER_INFO=(0,i.defineMessage)({id:"SpYtHi",defaultMessage:"You turned off viewer info"}),t.OTHER_DISABLED_VIEWER_INFO=(0,i.defineMessage)({id:"YreIO/",defaultMessage:"{name} turned off viewer info"}),t.YOU_CHANGED_FILE_SETTINGS=(0,i.defineMessage)({id:"Bxed/V",defaultMessage:"You changed the file settings"}),t.OTHER_CHANGED_FILE_SETTINGS=(0,i.defineMessage)({id:"ylS32o",defaultMessage:"{name} changed the file settings"}),t.YOU_ENABLED_COMMENTING=(0,i.defineMessage)({id:"CuL293",defaultMessage:"You turned on commenting for {entity}"}),t.OTHER_ENABLED_COMMENTING=(0,i.defineMessage)({id:"3GsixE",defaultMessage:"{name} turned on commenting for {entity}"}),t.YOU_GAVE_VIEW_ONLY_ACCESS=(0,i.defineMessage)({id:"IHPb9R",defaultMessage:"You gave view-only access to {entity}"}),t.OTHER_GAVE_VIEW_ONLY_ACCESS=(0,i.defineMessage)({id:"knYfRN",defaultMessage:"{name} gave view-only access to {entity}"}),t.YOU_REMOVED_ACCESS=(0,i.defineMessage)({id:"fISzu/",defaultMessage:"You removed {entity} from this file"}),t.OTHER_REMOVED_ACCESS=(0,i.defineMessage)({id:"BPYbF7",defaultMessage:"{name} removed {entity} from this file"}),t.YOU_SHARED_WITH_ONE=(0,i.defineMessage)({id:"hs2ngj",defaultMessage:"You shared this file with {entity}"}),t.OTHER_SHARED_WITH_ONE=(0,i.defineMessage)({id:"IU0MF2",defaultMessage:"{name} shared this file with {entity}"}),t.YOU_SHARED_WITH_MANY=(0,i.defineMessage)({id:"152Ljh",defaultMessage:"{count, plural, one{You shared this file with {entity} and 1 other} other{You shared this file with {entity} and {count} others}}"}),t.OTHER_SHARED_WITH_MANY=(0,i.defineMessage)({id:"ccCFDs",defaultMessage:"{count, plural, one{{name} shared this file with {entity} and 1 other} other{{name} shared this file with {entity} and {count} others}}"}),t.YOU_LOCKED_FILE=(0,i.defineMessage)({id:"YLJCy8",defaultMessage:"You locked this file"}),t.OTHER_LOCKED_FILE=(0,i.defineMessage)({id:"hfFN3P",defaultMessage:"{name} locked this file"}),t.YOU_UNLOCKED_FILE=(0,i.defineMessage)({id:"HdrdWl",defaultMessage:"You unlocked this file"}),t.OTHER_UNLOCKED_FILE=(0,i.defineMessage)({id:"1vj0Yj",defaultMessage:"{name} unlocked this file"}),t.YOU_NEW_COMMENT=(0,i.defineMessage)({id:"+hvlZB",defaultMessage:"You commented on this file"}),t.OTHER_NEW_COMMENT=(0,i.defineMessage)({id:"Zqv2X5",defaultMessage:"{name} commented on this file"}),t.YOU_REPLIED_COMMENT=(0,i.defineMessage)({id:"VXfrbS",defaultMessage:"You replied to a comment on this file"}),t.OTHER_REPLIED_COMMENT=(0,i.defineMessage)({id:"MK98nK",defaultMessage:"{name} replied to a comment on this file"})})),define("typescript/libraries/api_v2/redux/file_activity_stream",["require","exports","typescript/libraries/api_v2/redux/base_action"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.middleware=t.recentFilesWithLatestEventsResultAction=t.recentFilesWithLatestEventsAction=t.getActivityStreamBatchResultAction=t.getActivityStreamBatchAction=t.getActivityStreamResultAction=t.getActivityStreamAction=t.Action=void 0,t.Action={GetActivityStream:"@@apiv2_redux/file_activity_stream/get_activity_stream",GetActivityStreamResult:"@@apiv2_redux/file_activity_stream/get_activity_stream_result",GetActivityStreamBatch:"@@apiv2_redux/file_activity_stream/get_activity_stream_batch",GetActivityStreamBatchResult:"@@apiv2_redux/file_activity_stream/get_activity_stream_batch_result",RecentFilesWithLatestEvents:"@@apiv2_redux/file_activity_stream/recent_files_with_latest_events",RecentFilesWithLatestEventsResult:"@@apiv2_redux/file_activity_stream/recent_files_with_latest_events_result"},t.getActivityStreamAction=(0,i._createAction)(t.Action.GetActivityStream),t.getActivityStreamResultAction=(0,i._createAction)(t.Action.GetActivityStreamResult),t.getActivityStreamBatchAction=(0,i._createAction)(t.Action.GetActivityStreamBatch),t.getActivityStreamBatchResultAction=(0,i._createAction)(t.Action.GetActivityStreamBatchResult),t.recentFilesWithLatestEventsAction=(0,i._createAction)(t.Action.RecentFilesWithLatestEvents),t.recentFilesWithLatestEventsResultAction=(0,i._createAction)(t.Action.RecentFilesWithLatestEventsResult);const a={[t.Action.GetActivityStream]:{endpoint:"get_activity_stream",action:t.getActivityStreamResultAction},[t.Action.GetActivityStreamBatch]:{endpoint:"get_activity_stream_batch",action:t.getActivityStreamBatchResultAction},[t.Action.RecentFilesWithLatestEvents]:{endpoint:"recent_files_with_latest_events",action:t.recentFilesWithLatestEventsResultAction}};t.middleware=(0,i._createMiddleware)(a)})),define("metaserver/static/js/folder_overview/placeholder",["require","exports","tslib","react","metaserver/static/js/folder_overview/constants"],(function(e,t,i,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FolderOverviewPlaceholder=void 0,a=i.__importDefault(a);t.FolderOverviewPlaceholder=()=>a.default.createElement("div",{className:"folder-overview__description--placeholder"},a.default.createElement("span",null,s.DESCRIPTION_PLACEHOLDER_RIGHT_RAIL))})),define("metaserver/static/js/folder_overview/sidebar_controller",["require","exports","tslib","classnames","react-redux","react","metaserver/static/js/components/ui/css","metaserver/static/js/folder_overview/data/action_creators","metaserver/static/js/folder_overview/data/selectors","metaserver/static/js/folder_overview/description","metaserver/static/js/folder_overview/last_edit","metaserver/static/js/folder_overview/live_update"],(function(e,t,i,a,s,r,n,o,c,l,d,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SidebarFolderOverview=void 0,a=i.__importDefault(a),r=i.__importDefault(r),o=i.__importStar(o),c=i.__importStar(c);const v={fetchDataForFolder:o.fetchDataForFolder,reloadDescription:o.reloadDescription};class y extends r.default.PureComponent{constructor(){super(...arguments),this.handleLiveUpdate=({type:e})=>{"description"===e&&this.props.reloadDescription({folderFileId:this.props.folderFileId,componentNamespace:this.props.componentNamespace})}}componentDidMount(){this.props.fetchDataForFolder({path:this.props.path,nsId:this.props.nsId,componentNamespace:this.props.componentNamespace,fetchContentReferences:!0}),_.folderOverviewLiveUpdateManager.addListener("update",this.handleLiveUpdate)}componentWillUnmount(){_.folderOverviewLiveUpdateManager.removeListener("update",this.handleLiveUpdate),_.folderOverviewLiveUpdateManager.stop()}render(){return r.default.createElement("div",{className:(0,a.default)({"folder-overview":!0,"folder-overview--loading":!this.props.haveAllComponentsLoaded||this.props.hasFailedToLoad,"folder-overview__fixed-toolbar-container":!0,"folder-overview__border":this.props.descriptionHasFocus})},r.default.createElement(l.FolderOverviewDescription,{path:this.props.path,componentNamespace:this.props.componentNamespace,isReadOnly:this.props.isReadOnly||!this.props.descriptionFormatValid,descriptionKey:[this.props.folderFileId,this.props.descriptionBaseRevision].join("-"),canShareFolder:this.props.canShareFolder}),r.default.createElement(d.FolderOverviewLastEdit,{path:this.props.path,componentNamespace:this.props.componentNamespace}))}}y.displayName="SidebarFolderOverviewController";const p=(0,s.connect)(()=>{const e=c.makeHaveAllComponentsLoadedSelector(),t=c.makeHasFailedToLoadSelector(),i=c.makeFolderFileIdSelector(),a=c.makeDescriptionBaseRevisionSelector(),s=c.makeDescriptionHasFocusSelector(),r=c.makeDescriptionFormatValidSelector(),n=c.makeDoesFolderOverviewExistSelector();return(o,l)=>({user:c.user(o),haveAllComponentsLoaded:e(o,l),hasFailedToLoad:t(o,l),folderFileId:i(o,l),descriptionBaseRevision:a(o,l),descriptionFormatValid:r(o,l),descriptionHasFocus:s(o,l),doesFolderOverviewExist:n(o,l)})},v)(y);t.SidebarFolderOverview=(0,n.requireCssWithComponent)(p,["/static/metaserver/static/css/browse/folder_overview-vflI5u3EK.css","/static/typescript/libraries/comments2/src/index-vfljiK9YC.css","/static/typescript/component_libraries/retrieval-components/src/index.web-vflLEz1F-.css"])}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,a){void 0===a&&(a=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&("get"in s?t.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,a,s)}:function(e,t,i,a){void 0===a&&(a=i),e[a]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("metaserver/static/js/folder_overview/async_components",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowPinToModal=void 0;t.asyncShowPinToModal=t=>{new Promise((t,i)=>{e(["metaserver/static/js/folder_overview/pin_to_modal"],t,i)}).then(__importStar).then(({FolderOverviewPinToModal:e})=>e.show(t))}}));
//# sourceMappingURL=pkg-file-activity.min.js-vflEwwFAF.map