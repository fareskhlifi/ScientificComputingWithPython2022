var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&("get"in i?t.__esModule:!i.writable&&!i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,i)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t};define("metaserver/static/js/file_transfers/async/browse_entry_point_onboarding_modal_async",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowBrowseEntryPointOnboardingModal=void 0;t.asyncShowBrowseEntryPointOnboardingModal=t=>{new Promise((t,n)=>{e(["metaserver/static/js/file_transfers/containers/browse_entry_point_onboarding_modal"],t,n)}).then(__importStar).then(({showBrowseEntryPointOnboardingModal:e})=>e(t))}})),define("metaserver/static/js/file_viewer/open_button/utils",["require","exports","tslib","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/file_store/utils","metaserver/static/js/clean/open_with","metaserver/static/js/extensions/connect_flow","metaserver/static/js/extensions/utils","metaserver/static/js/file_viewer/constants","metaserver/static/js/file_viewer/open_button/types","metaserver/static/js/file_viewer/open_button/open_with_helpers","metaserver/static/js/file_viewer/unity/unity_utils","metaserver/static/js/core/i18n","metaserver/static/js/core/browser_detection","metaserver/static/js/clean/downloads","metaserver/static/js/core/uri"],(function(e,t,n,s,i,o,r,a,c,l,p,u,d,_,m,f){"use strict";function h(e,t,n,i){let o;if(i.provider===s.OpenWithCloudDocProvider.GoogleDSS)o={type:l.OpenButtonAction.OPEN_WITH_CLOUD_DOC,userAction:c.UserAction.OpenWithCloudDocEditor};else{if(i.provider!==s.OpenWithCloudDocProvider.OfficeOnline)return null;o={type:l.OpenButtonAction.OPEN_WITH,userAction:c.UserAction.OpenInOfficeOnline}}return Object.assign({handler:()=>i.handler(e,t,n),spriteName:i.spriteName||null,iconUrl:i.iconUrl,text:i.text},o)}function g(e){const{file:t,user:n,isOpenWithDisabled:i}=e,o=[],r={gdd:!e.isCloudEditorDisabled,wopi:E({file:t,isOpenWithDisabled:i,user:n})},a=e.actionSource,c=(0,s.getOpenWithCloudEditorInfo)(t,n,r,a);for(const e of c){const s=h(t,n,a,e);s&&o.push(s)}return o}function v(e){const t=f.URI.parse(e.href);t.updateQuery({dl:"1"}),m.get({url:t.toString()})}function E({file:e,isOpenWithDisabled:t,user:n}){return!t&&p.OpenWithHelpers.canOpenWith(e,n)}function S(e,t){const n=(e?e.open_application_name:void 0)||d.intl.formatMessage({id:"Uyxn/h",defaultMessage:"Desktop"});return t?n:d.intl.formatMessage({id:"KtD8FA",defaultMessage:"Open in {app_name}"},{app_name:n})}function y(e){const t=(null!==e?e.file_browser_display_name:void 0)||d.intl.formatMessage({id:"Bbnzjx",defaultMessage:"File Browser"});return d.intl.formatMessage({id:"suwlZc",defaultMessage:"Show in {file_browser}"},{file_browser:t})}function A({file:e,isFolder:t,user:n}){return()=>{u.UnityHelpers.openFile(e.ns_id,e.ns_path,n.id,t)}}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowCoachmark=t.download=t.getOpenOptionsSharedFile=t.convertOpenWithCloudEditorInfo=t.getOpenOptions=void 0,o=n.__importDefault(o),m=n.__importStar(m),t.getOpenOptions=function(e){const{file:t}=e,o=n.__rest(e,["file"]);return(0,i.isBrowseFile)(t)?(function({file:e,isUnityDisabled:t,isOpenWithDisabled:n,isCloudEditorDisabled:i,unityInfo:o,extraOptions:p,user:m,sharingServiceInfo:f,refreshSharingServiceInfo:g,showOpenWithShare:O,onPresentInZoom:I,isCloudBasedDoc:x,actionSource:b,landingPagesEnabled:T,isInActionBar:M,previewActionHandler:w,openDesktopActionHandler:N,openInNewTabActionHandler:P,goToFolderActionHandler:C,replayActionHandler:j}){const D=[];if(j){const e=d.intl.formatMessage({id:"AQCWZx",defaultMessage:"Get feedback"});D.push({handler:j,spriteName:null,text:e,type:l.OpenButtonAction.OPEN_IN_REPLAY,userAction:c.UserAction.OpenInReplay})}w&&D.push({handler:w,spriteName:null,text:d.intl.formatMessage({id:"wHolW4",defaultMessage:"Preview (Dropbox)"}),type:l.OpenButtonAction.PREVIEW_FILE,userAction:c.UserAction.PreviewFile});if(N){const e=_.mac?d.intl.formatMessage({id:"3KanyU",defaultMessage:"Finder"}):d.intl.formatMessage({id:"kJ3mnY",defaultMessage:"File Explorer"});D.push({handler:N,spriteName:null,text:e,type:l.OpenButtonAction.OPEN_IN_DESKTOP,userAction:c.UserAction.OpenInDesktop})}P&&D.push({handler:P,spriteName:null,text:d.intl.formatMessage({id:"HE6Ges",defaultMessage:"Open in new tab"}),type:l.OpenButtonAction.OPEN_IN_NEW_TAB,userAction:c.UserAction.OpenInNewTab});C&&D.push({handler:C,spriteName:null,text:d.intl.formatMessage({id:"mppZEu",defaultMessage:"Go to folder"}),type:l.OpenButtonAction.GO_TO_FOLDER,userAction:c.UserAction.GoToFolder});if(!o)return D;!x&&(function({isUnityDisabled:e,unityInfo:t}){return null!=t&&!e&&u.UnityHelpers.isUnityFileSupported(t)})({isUnityDisabled:t,unityInfo:o})&&D.push({handler:A({file:e,user:m,isFolder:!1}),spriteName:"ow_desktop",text:S(o,M),type:l.OpenButtonAction.UNITY_FILE,userAction:c.UserAction.OpenInUnity});const F=E({file:e,isOpenWithDisabled:n,user:m}),U={gdd:!i,wopi:F},B=(0,s.getOpenWithCloudEditorInfo)(e,m,U,b);for(const t of B){const n=h(e,m,b,t);n&&D.push(n)}!M&&(function({isUnityDisabled:e,unityInfo:t}){return null!=t&&!e&&u.UnityHelpers.isUnityFolderSupported(t)})({isUnityDisabled:t,unityInfo:o})&&D.push({handler:A({file:e,user:m,isFolder:!0}),spriteName:"ow_folder",text:y(o),type:l.OpenButtonAction.UNITY_FOLDER,userAction:c.UserAction.OpenInUnityFolder});p&&p.forEach(e=>{e&&D.push(e)});M||D.length||x||D.push({handler:()=>v(e),spriteName:null,text:d.intl.formatMessage({id:"pHnJw0",defaultMessage:"Download"}),type:l.OpenButtonAction.DOWNLOAD,userAction:c.UserAction.Download});let L=!1,k=!1;O&&f&&(L=(0,a.isSlackAvailable)(f),k=(0,a.isZoomAvailable)(f));L&&f&&g&&D.push({handler:()=>(0,r.shareInSlackFlow)(m,f,g,e,"open_with_button",void 0!==T?T:null),spriteName:null,text:d.intl.formatMessage({id:"Qws4v2",defaultMessage:"Slack"}),type:l.OpenButtonAction.SHARE_TO_SLACK,userAction:c.UserAction.ShareToSlack});k&&f&&I&&g&&D.push({handler:()=>(0,r.presentInZoomFlow)(m,f,g,I,"open_with_button",void 0!==T?T:null),spriteName:null,text:d.intl.formatMessage({id:"mzy+1c",defaultMessage:"Zoom"}),type:l.OpenButtonAction.PRESENT_IN_ZOOM,userAction:c.UserAction.PresentInZoom});return D})(Object.assign({file:t},o)):(0,i.isSharedFile)(t)?g(Object.assign({file:t},o)):[]},t.convertOpenWithCloudEditorInfo=h,t.getOpenOptionsSharedFile=g,t.download=v,t.shouldShowCoachmark=function(e,t){const n=e.map(e=>e.type).includes(l.OpenButtonAction.UNITY_FILE),s=t&&o.default.is_adobe_app(t.open_application_identifier),i=e.map(e=>e.type).includes(l.OpenButtonAction.OPEN_WITH);return n&&s||i}})),define("metaserver/static/js/app_actions/developers_site/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeveloperState=void 0,(function(e){e[e.UNVERIFIED=0]="UNVERIFIED",e[e.IN_DEVELOPMENT=1]="IN_DEVELOPMENT",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"})(t.DeveloperState||(t.DeveloperState={}))})),define("metaserver/static/js/app_actions/redirect",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery","lodash","metaserver/static/js/core/i18n","js/browser/cookies","metaserver/static/js/core/notify","metaserver/static/js/core/uri","metaserver/static/js/api_v2/transport/fetch","metaserver/static/js/components/ui/modal","metaserver/static/js/extensions/auth_modal","metaserver/static/js/filepath/filepath","metaserver/static/js/extensions/cloud_docs_compat","metaserver/static/js/cloud_docs/event_logging","metaserver/static/js/cloud_docs/open_with_utils"],(function(e,t,n,s,i,o,r,a,c,l,p,u,d,_,m,f){"use strict";function h(e,t,s){return n.__awaiter(this,void 0,void 0,(function*(){const n=new l.FetchAsyncTransport,i=new c.URI({scheme:"https",authority:"www.dropbox.com",path:"/2/app_actions/"+t}),o={};o["X-Dropbox-Path-Root"]=e.root_ns_id.toString(),o["X-Dropbox-Uid"]=e.id.toString();const a=r.Cookies.read("__Host-js_csrf");if(!a)throw new Error("No CSRF cookie");return o["X-CSRF-Token"]=a,n.executeRpc(i,o,JSON.stringify(s),"application/json")}))}function g(e,t,s){return n.__awaiter(this,void 0,void 0,(function*(){const n=yield h(e,t,s),i={request_id:n.headers["x-dropbox-request-id"],redirect_url:n.result.redirect_url};return"link_state"in n.result&&(i.link_state=n.result.link_state),i}))}function v(e,t,s,i,o){return n.__awaiter(this,void 0,void 0,(function*(){yield y(e,t,s,i[0],()=>g(e,"redirect",{action_id:t,file_ids:i}),o)}))}function E(e,t){if(1!==e.length)throw new Error(`Expected single file: ${t}`);return e[0]}function S(e,t,s,i,o){return n.__awaiter(this,void 0,void 0,(function*(){return yield y(e,t,s,i,()=>g(e,"authorize",{action_id:t,file_id:i}),o)}))}function y(e,t,r,c,l,p){return n.__awaiter(this,void 0,void 0,(function*(){const u=`action_redirect_${Math.random().toString(16).substring(2)}`,d=window.open("",u,p);d&&(d.document.open("text/html","replace"),d.document.write(`<html><head><title>${i.escape(r)}</title></head></html>`),d.document.close());let _=!1;const m=new Promise(n=>{s.SilentBackgroundRequest({url:"/aa/loading",subject_user:e.id,data:{file_id:c,action_id:t},success:e=>{!_&&d?(d.document.open("text/html","replace"),d.document.write(e),d.document.close(),d.document.title=r,n()):n()},error:()=>{n()}})});const[,f]=yield Promise.all([m,(function(){return n.__awaiter(this,void 0,void 0,(function*(){try{return yield l()}catch(e){return void(_=!0)}}))})()]),h=f&&f.redirect_url||"/aa/error";if(d)d.location.replace(h);else{if(!window.open(h,"_blank",p)){const e=r;a.Notify.error(o.intl.formatMessage({id:"TFhSer",defaultMessage:"Failed to open {app_name}"},{app_name:e}))}}return f}))}Object.defineProperty(t,"__esModule",{value:!0}),t.showLoadingPageAndDoRedirect=t.authAction=t.redirectToActionOrShowAuth=t.redirectToAction=t.authorizeNoRedirect=t.fetchUrl=t.fetch=void 0,s=n.__importStar(s),i=n.__importStar(i),d=n.__importStar(d),t.fetch=h,t.fetchUrl=g,t.authorizeNoRedirect=function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){try{const n=yield h(e,"authorize_no_redirect",{action_id:t});return n&&n.result&&n.result.link_state}catch(e){return null}}))},t.redirectToAction=v,t.redirectToActionOrShowAuth=function(e,t,s,i,o,r,a){return n.__awaiter(this,void 0,void 0,(function*(){if("redirect"===s.handler[".tag"]){const i=s.handler.window_params;let o=void 0;if("popup"===i[".tag"]){const{width:e,height:t}=i;o=`width=${e},height=${t}`}if("sfa_unlinked"===s.link_state[".tag"]&&!s.id.startsWith("fp_action_id:")){const i=E(t,"first party actions do not support multiple files yet."),a=d.filename(i.ns_path);(0,u.showAuthModal)(s.id,s.description,s.icon.url,i.file_id,a,()=>{p.Modal.close(),(function(e,t,s,i,o,r){n.__awaiter(this,void 0,void 0,(function*(){const n=yield S(e,t,s,i,o);r&&n&&n.link_state&&r(t,n.link_state)}))})(e,s.id,s.description,i.file_id,o,r)})}else{const n=t.map(e=>e.file_id);v(e,s.id,s.description,n,o)}}else if("cloud_editor"===s.handler[".tag"]){const n=E(t,"cloud docs actions do not support multiple files yet."),i=o?(0,m.getActionSourceFromSurface)(o.surface):void 0,r=(0,_.cloudEditorNameToParams)(s.handler.editor_name);(0,f.openWithCloudEditor)((0,f.fileToOpenWithParams)(n),e.id,r,!1,i)}else{if("profile_service"!==s.handler[".tag"])throw new Error(`Unexpected handler "${s.handler[".tag"]}"`);if(a){const n=E(t,"profile service actions do not support multiple files yet.");a(e,n,s)}}}))},t.authAction=S,t.showLoadingPageAndDoRedirect=y})),define("metaserver/static/js/app_directory/client",["require","exports","tslib","metaserver/static/js/api_v2/user_client"],(function(e,t,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPageInfos=void 0,t.getPageInfos=function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=(new s.UserApiV2Client).ns("app_directory").rpc("list_page_info",{app_identifiers:e},{subjectUserId:t});return(yield n).page_infos}))}})),define("metaserver/static/js/comments2/client_builder",["require","exports","metaserver/static/js/comments2/comments_bolt","metaserver/static/js/comments2/data/mentions_api","metaserver/static/js/flows/approval/approval_io_client"],(function(e,t,n,s,i){"use strict";function o(e){var t;return{channelId:{appId:e.app_id,uniqueId:e.unique_id},revisionInfo:{revision:parseInt(null!==(t=e.revision)&&void 0!==t?t:"",10),token:e.token}}}function r({channelId:e,revisionInfo:t}){return{app_id:e.appId,unique_id:e.uniqueId,revision:t.revision.toString(),token:t.token}}Object.defineProperty(t,"__esModule",{value:!0}),t.makeComments2Client=t.boltChannelClientToServer=t.boltChannelServerToClient=void 0,t.boltChannelServerToClient=o,t.boltChannelClientToServer=r,t.makeComments2Client=function(e){let t=void 0;if(e){let n=null;const i=()=>{const t=(0,s.mentionsApi)(e);return{search(e,n){0!==e.length?t.query(e,n):n(t.getMatchesWithStarterSuggestions())}}};t=()=>(n||(n=i()),n)}return{boltIOClient:(e=>{let t=e=>{};return{subscribe:n=>(n.forEach(n=>{e.subscribe(r(n),t,t)}),Promise.resolve()),unsubscribe:()=>Promise.resolve(e.unsubscribe()),onSignal:e=>{t=t=>{const n=t.map(e=>o(e));e({updatedChannels:n})}}}})(n.bolt),mentionsIOClient:t,approvalIOClient:e?(0,i.approvalIOClient)(e.id):void 0}}})),define("metaserver/static/js/comments2/comments_bolt",["require","exports","metaserver/static/js/bolt/bolt_nodeps"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bolt=void 0,t.bolt={client:null,subscribe({app_id:e,revision:s,token:i,unique_id:o},r,a){const c=new n.SignedChannelState(e,o,s,i);t.bolt.client?t.bolt.client.update_states([c]):(t.bolt.client=new n.BoltClient([c],r,a),t.bolt.client.start())},unsubscribe(){t.bolt.client&&(t.bolt.client.unsubscribe(),t.bolt.client=null)}}})),define("metaserver/static/js/extensions/auth_body_v2",["require","exports","tslib","react","react-intl","metaserver/static/js/components/ui/css","spectrum/button/index","metaserver/static/js/core/i18n","metaserver/static/js/app_actions/telemetry_client","metaserver/static/js/filepath/filepath","metaserver/static/js/extensions/status_page"],(function(e,t,n,s,i,o,r,a,c,l,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionsAuthBodyV2=void 0,s=n.__importDefault(s);class u extends s.default.Component{constructor(e){super(e),this.clickAuthorize=()=>{this.currentSession.event("auth_accept",{action_id:this.props.actionId}),this.props.doAuth()},this.learnMoreOnClick=()=>{this.currentSession.event("learn_more",{action_id:this.props.actionId}),this.props.onLearnMore&&this.props.onLearnMore()},this.telemetryClient=(0,c.createTelemetryClient)({component:"auth_v2"})}componentDidMount(){this.currentSession.event("auth_start",{action_id:this.props.actionId})}renderText(){const e=0!==this.props.fileId.length?(0,i.defineMessage)({id:"VDSuu6",defaultMessage:"<b>{app_name}</b> needs access to this file"}):(0,i.defineMessage)({id:"mZo8K4",defaultMessage:"<b>{app_name}</b> needs access to files you select"}),t=0!==this.props.fileId.length?(0,i.defineMessage)({id:"hE6l1Q",defaultMessage:"Changes to this file using {app_name} will save back to Dropbox. This app will have access to the username, email address, and country for your account."}):(0,i.defineMessage)({id:"HsAedA",defaultMessage:"Changes to selected files using {app_name} will save back to Dropbox. This app will have access to the username, email address, and country for your account."});return s.default.createElement("div",null,s.default.createElement("div",{className:"auth-text-header-v2"},a.intl.formatMessage(e,{app_name:this.props.appName,b:e=>s.default.createElement("b",null,e)})),s.default.createElement("div",{className:"auth-text-v2"},a.intl.formatMessage(t,{app_name:this.props.appName}),s.default.createElement("a",{className:"learn-more-link",href:"/help/security/third-party-apps",target:"_blank",rel:"noopener noreferrer",onClick:this.learnMoreOnClick},a.intl.formatMessage({id:"gk12sS",defaultMessage:"Learn more"}))))}renderButtons(){return s.default.createElement("div",null,s.default.createElement(r.Button,{variant:"primary",className:"auth-button-v2",onClick:this.clickAuthorize},a.intl.formatMessage({id:"LGeX5c",defaultMessage:"Allow"})))}renderAuthorization(){const{appName:e,iconUrl:t}=this.props;return s.default.createElement("div",{id:"auth",className:"auth-connect-frame-v2"},s.default.createElement("div",null,s.default.createElement("img",{className:"app-icon-v2",src:t,alt:e})),s.default.createElement("div",null,this.renderText()),s.default.createElement("div",{id:"buttons"},this.renderButtons()))}render(){const{fileName:e}=this.props;return this.currentSession=this.telemetryClient.session({ext:(0,c.getPiiSafeExtension)("."+(0,l.file_extension)(e))}),this.props.showLoadingUI?s.default.createElement(p.AppActionsLoadingPage,{fileName:e}):this.renderAuthorization()}}u.displayName="AuthBodyV2Component",t.ExtensionsAuthBodyV2=(0,o.requireCssWithComponent)(u,["/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css","/static/metaserver/static/css/foundation-vflZkvt4R.css","/static/metaserver/static/css/app_actions/index-vflQ27cHM.css"])})),define("metaserver/static/js/extensions/auth_modal",["require","exports","tslib","react","metaserver/static/js/components/ui/modal","metaserver/static/js/extensions/auth_body_v2","metaserver/static/js/clean/ux_analytics_modal_tracking"],(function(e,t,n,s,i,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showAuthModal=t.AuthModal=void 0,s=n.__importDefault(s);t.AuthModal=e=>s.default.createElement(i.Modal,{className:"extensions-auth-modal-v2",ariaLabel:"Access Modal",displayCloseButton:!0,clickOutToClose:!1,style:"clean",onDismiss:e.doCancel},s.default.createElement(r.UXAnalyticsModalTracking,{id:"EXTENSIONS_AUTH_MODAL_V2"}),s.default.createElement(o.ExtensionsAuthBodyV2,Object.assign({},e))),t.showAuthModal=function(e,n,o,r,a,c){i.Modal.showInstance(s.default.createElement(t.AuthModal,{actionId:e,appName:n,iconUrl:o,fileId:r,fileName:a,doAuth:c,doCancel:i.Modal.close}))}})),define("metaserver/static/js/extensions/cloud_docs_compat",["require","exports","metaserver/static/js/cloud_docs/constants"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isWopiAction=t.cloudEditorNameToParams=void 0,t.cloudEditorNameToParams=function(e){return"gdoc"===e?n.GoogleFileTypes.GOOGLE_DSS_DOC:"gsheet"===e?n.GoogleFileTypes.GOOGLE_DSS_SHEET:"gslides"===e?n.GoogleFileTypes.GOOGLE_DSS_SLIDES:"word"===e?n.MicrosoftEditors.WORD:"excel"===e?n.MicrosoftEditors.EXCEL:"powerpoint"===e?n.MicrosoftEditors.POWERPOINT:"preview"},t.isWopiAction=function(e){return["fp_action_id:word_online","fp_action_id:excel_online","fp_action_id:powerpoint_online"].indexOf(e.id)>=0}})),define("metaserver/static/js/extensions/common",["require","exports"],(function(e,t){"use strict";function n(e,t,n){e&&e.event(t,n)}function s(e){return e.link_state[".tag"].indexOf("_linked")>=0}Object.defineProperty(t,"__esModule",{value:!0}),t.partitionActionsByLinkStatus=t.isPrelinked=t.isLinked=t.getAppActionExtras=t.getOpenOptionsWithLogging=t.handleShowByline=t.logEvent=void 0,t.logEvent=n,t.handleShowByline=function(e,t){return()=>{n(t,"show_byline",{extension_id:e})}},t.getOpenOptionsWithLogging=function(e,t){return e.map(e=>Object.assign(Object.assign({},e),{handler:()=>{e.handler(),n(t,"select_legacy_action",{type:e.type})}}))},t.getAppActionExtras=function(e){return{action_id:e.id,encoded_app_id:e.app_id,action_type:s(e)?"select_action":"select_connect"}},t.isLinked=s,t.isPrelinked=function(e){return"oauth_prelinked"===e.link_state[".tag"]},t.partitionActionsByLinkStatus=function(e){const t=[],n=[];return e.map(e=>{e.app_id&&(s(e)?t.push(e.app_id):n.push(e.app_id))}),{connected_apps:t,unconnected_apps:n}}})),define("metaserver/static/js/extensions/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRANSFER_FP_APP_ID=void 0,t.TRANSFER_FP_APP_ID="fp_app_id:dropbox_transfer"})),define("metaserver/static/js/extensions/data/helpers",["require","exports","metaserver/static/js/app_actions/category","metaserver/static/js/file_viewer/open_button/types","metaserver/static/js/extensions/common","metaserver/static/js/extensions/constants"],(function(e,t,n,s,i,o){"use strict";function r(e,t){if(e.priority&&t.priority){const n=t.priority-e.priority;return 0!==n?n:e.description<t.description?-1:e.description>t.description?1:0}return e.priority?-1:t.priority?1:e.description<t.description?-1:e.description>t.description?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.constructAlphabetizeActions=t.partitionOptions=t.partitionActions=t.actionCompareFn=void 0,t.actionCompareFn=r,t.partitionActions=function(e,t=0){const s=[],a=[],c=[],l=[],p=[];return e.sort(r).forEach(e=>{e.category===n.Category.CLOUD_EDITORS?s.push(e):e.app_id===o.TRANSFER_FP_APP_ID?a.push(e):(0,i.isLinked)(e)||(0,i.isPrelinked)(e)?c.push(e):void 0!==e.priority&&e.priority>0&&l.length<t?l.push(e):p.push(e)}),{cloudEditors:s,transferActions:a,installedActions:c,promotedActions:l,unpromotedActions:p}},t.partitionOptions=function(e){const t=[],n=[];let i,o,r,a,c,l;return e.forEach(e=>{const{type:p}=e;p===s.OpenButtonAction.UNITY_FILE||p===s.OpenButtonAction.UNITY_FOLDER?t.push(e):p===s.OpenButtonAction.OPEN_WITH||p===s.OpenButtonAction.OPEN_WITH_CLOUD_DOC?n.push(e):p===s.OpenButtonAction.DOWNLOAD?i=e:p===s.OpenButtonAction.PREVIEW_FILE?o=e:p===s.OpenButtonAction.OPEN_IN_REPLAY?r=e:p===s.OpenButtonAction.OPEN_IN_DESKTOP?a=e:p===s.OpenButtonAction.GO_TO_FOLDER?c=e:p===s.OpenButtonAction.OPEN_IN_NEW_TAB&&(l=e)}),{unityOptions:t,cloudEditorOptions:n,downloadOption:i,previewOption:o,openInReplayOption:r,openInDesktopOption:a,openInNewTabOption:l,goToFolderOption:c}},t.constructAlphabetizeActions=function(e){return(t,n)=>{const s=e[t.category].display_name,i=e[n.category].display_name;return s<i?-1:s>i?1:t.description<n.description?-1:t.description>n.description?1:0}}})),define("metaserver/static/js/extensions/education/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipState=void 0,(function(e){e[e.NO_TOOLTIP=0]="NO_TOOLTIP",e[e.BIG_ONBOARDING_TOOLTIP=1]="BIG_ONBOARDING_TOOLTIP",e[e.SMALL_TOOLTIP=2]="SMALL_TOOLTIP"})(t.TooltipState||(t.TooltipState={}))})),define("metaserver/static/js/extensions/extensions_mini_directory_modal",["require","exports","tslib","react","metaserver/static/js/core/i18n","spectrum/modal/index","metaserver/static/js/clean/static_urls","dig-components/buttons","metaserver/static/js/clean/ux_analytics_modal_tracking","metaserver/static/js/components/ui/css","metaserver/static/js/components/ui/modal","react-modal","lodash","metaserver/static/js/extensions/common","metaserver/static/js/extensions/data/helpers","metaserver/static/js/extensions/data/selectors","metaserver/static/js/app_actions/redirect","metaserver/static/js/file_viewer/open_button/types","metaserver/static/js/extensions/cloud_docs_compat","dig-components/typography","dig-components/text_fields","dig-components/icons","dig-components/icons/src","metaserver/static/js/app_directory/client","dig-components/progress_indicators","classnames","lodash","metaserver/static/js/app_actions/developers_site/types"],(function(e,t,n,s,i,o,r,a,c,l,p,u,d,_,m,f,h,g,v,E,S,y,A,O,I,x,b,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showExtensionsMiniDirectoryModal=t.ExtensionsMiniDirectoryModal=t.AppDirectoryEntryPoint=void 0,s=n.__importDefault(s),u=n.__importDefault(u),d=n.__importStar(d),O=n.__importStar(O),x=n.__importDefault(x);const M=e=>"api_app"===e[".tag"]?`${e[".tag"]}/${e.api_app}`:"first_party_app"===e[".tag"]?`${e[".tag"]}/${e.first_party_app}`:`${e[".tag"]}`;function w(){return s.default.createElement("div",{className:"extensions-mini-directory-modal__directory-entry-point"},s.default.createElement(E.Link,{href:"/apps",hasNoUnderline:!0,variant:"monochromatic",className:"extensions-mini-directory-modal__directory-entry-point-text-border"},s.default.createElement(E.Text,{isBold:!0},i.intl.formatMessage({id:"LbLi52",defaultMessage:"View all apps"}))))}t.AppDirectoryEntryPoint=w;class N extends s.default.Component{constructor(e){super(e),this.hasUsedSearchBar=!1,this.onScroll=(0,b.throttle)(e=>{e>0&&!this.state.showTopBorder&&this.setState({showTopBorder:!0}),0===e&&this.state.showTopBorder&&this.setState({showTopBorder:!1})},20),this.createClickHandler=e=>()=>{p.Modal.close();const{user:t,file:n,featureFlags:s,currentSession:i,telemetryContext:o,updateLinkState:r,onProfileServiceAuth:a}=this.props;if((0,h.redirectToActionOrShowAuth)(t,[n],e,s,o,r,a),"redirect"===e.handler[".tag"])(0,_.logEvent)(i,"select_action",(0,_.getAppActionExtras)(e));else if("cloud_editor"===e.handler[".tag"]){const t=(0,v.isWopiAction)(e)?g.OpenButtonAction.OPEN_WITH:g.OpenButtonAction.OPEN_WITH_CLOUD_DOC;(0,_.logEvent)(this.props.currentSession,"select_legacy_action",{type:t})}},this.handleQueryChange=e=>{const t=e.currentTarget.value;this.setState({searchKey:t}),this.hasUsedSearchBar||((0,_.logEvent)(this.props.currentSession,"start_searching",{}),this.hasUsedSearchBar=!0)},this.filterActions=()=>{const{appActions:e,categoryIdToInfos:t}=this.props,n=this.state.searchKey.trim().toLowerCase(),s=e.map(e=>e.category).map(e=>t[e]).filter(e=>-1!==e.display_name.toLowerCase().indexOf(n)).map(e=>e.id);return e.filter(e=>{const t=this.getAppDirectoryPageInfo(e);return((e,t)=>t||e.app_directory_id&&"first_party_app"===e.app_directory_id[".tag"]||e.developer_state===T.DeveloperState.IN_DEVELOPMENT)(e,t)&&(-1!==e.description.toLowerCase().indexOf(n)||(e=>!(!e||!e.short_description)&&-1!==e.short_description.toLowerCase().indexOf(n))(t)||s.includes(e.category))})},this.clearSearch=()=>{this.setState({searchKey:""})},this.renderExtensionItem=e=>{const t=e.icon,n=t.is_static?(0,r.static_url)("/static/metaserver/static/images/generic_app_icon-vflIPYT1H.png"):t.url,o=(0,_.isLinked)(e),c=o?"primary":"opacity",l=o?(0,f.isShareAction)(e)?i.intl.formatMessage({id:"NoV3Co",defaultMessage:"Share"}):i.intl.formatMessage({id:"CNPdm5",defaultMessage:"Open"}):i.intl.formatMessage({id:"vV9l+M",defaultMessage:"Connect"});return s.default.createElement("div",{className:"extension-section",key:e.description},s.default.createElement("img",{src:n,className:"extensions-icon",alt:""}),this.renderActionInfo(e),s.default.createElement("div",{className:"extensions-mini-directory-modal__redirect_button_wrapper"},s.default.createElement(a.Button,{variant:c,onClick:this.createClickHandler(e),className:"extensions-mini-directory-modal__redirect_button"},l)))},this.getAppDirectoryPageInfo=e=>{const t=e.app_directory_id&&M(e.app_directory_id);return t?this.state.appDirectoryPageInfo.get(t):void 0},this.renderActionInfo=e=>{const t=this.getAppDirectoryPageInfo(e),n=t&&t.short_description,i=t&&t.page_url,o=s.default.createElement(s.default.Fragment,null,s.default.createElement(E.Text,{tagName:"div",isBold:!0},e.description),s.default.createElement(E.Text,{color:"faint",className:"extensions-short-description",size:"small"},n));return i?s.default.createElement("div",{className:"extensions-description"},s.default.createElement(E.Link,{href:i,target:"_blank",rel:"noreferrer",variant:"monochromatic",hasNoUnderline:!0,className:"extensions-description__link"},o)):s.default.createElement("div",{className:"extensions-description"},o)},this.renderEmptySearch=()=>{const e=this.state.searchKey,t=e?`/apps/search?query=${e}`:"/apps",n=e?i.intl.formatMessage({id:"4fGTX4",defaultMessage:"Search “{search_key}” in App Center"},{search_key:e}):i.intl.formatMessage({id:"C5jY7c",defaultMessage:"Search in App Center"});return s.default.createElement("div",{className:"extensions-mini-directory-modal__empty-search-app-center"},s.default.createElement(E.Text,null,i.intl.formatMessage({id:"niuDq6",defaultMessage:"Looking for something?"})),s.default.createElement(E.Link,{href:t,variant:"monochromatic"},s.default.createElement(E.Text,null,n)))},this.state={searchKey:"",appDirectoryPageInfo:new Map,loading:!0}}componentDidMount(){const e=this.props.appActions.map(e=>e.app_directory_id).filter(e=>void 0!==e);this.fetchAppDirectoryPageInfoMap(e).then(e=>this.setState({appDirectoryPageInfo:e,loading:!1}))}fetchAppDirectoryPageInfoMap(e){return n.__awaiter(this,void 0,void 0,(function*(){return(yield O.getPageInfos(e,this.props.user.id)).reduce((function(e,t){for(const n of t.app_identifiers)e.set(M(n),t);return e}),new Map)}))}render(){const{onRequestClose:e,modalTitle:t}=this.props,n=this.filterActions().sort(m.actionCompareFn);return s.default.createElement(o.Modal,{ariaLabel:i.intl.formatMessage({id:"wjwJvt",defaultMessage:"App actions"}),className:"extensions-mini-directory-modal",displayCloseButton:!0,open:!0,overlayClassName:"file-viewer-modal-overlay",overlayFixed:!1,onRequestClose:()=>e()},this.state.loading?s.default.createElement("div",{className:"extensions-mini-directory-modal__body-loading"}," ",s.default.createElement(I.Spinner,{"aria-valuetext":"Loading Apps"})," "):s.default.createElement("div",{className:"extensions-mini-directory-modal__body-wrapper"},s.default.createElement("div",{className:(0,x.default)({"extensions-mini-directory-modal__header-border":this.state.showTopBorder})},s.default.createElement("div",{className:"extensions-mini-directory-modal__title"},s.default.createElement(E.Title,null,t)),s.default.createElement("div",{className:"extensions-mini-directory-modal__search-bar"},s.default.createElement(S.TextInput,{"aria-label":"Search Apps",withLeftAccessory:s.default.createElement(y.UIIcon,{src:A.SearchLine}),withRightAccessory:this.state.searchKey&&s.default.createElement(a.IconButton,{size:"small",variant:"transparent",onClick:this.clearSearch},s.default.createElement(y.UIIcon,{src:A.FailFill})),placeholder:i.intl.formatMessage({id:"+enW1p",defaultMessage:"Search by action or app name"}),value:this.state.searchKey,onChange:this.handleQueryChange}))),s.default.createElement("div",{className:"extensions-container",onScroll:({currentTarget:{scrollTop:e}})=>this.onScroll(e)},n.length>0?n.map(e=>this.renderExtensionItem(e)):this.renderEmptySearch()),s.default.createElement(w,null)),s.default.createElement(c.UXAnalyticsModalTracking,{id:"extensions-mini-directory-modal"}))}}N.displayName="ExtensionsMiniDirectoryModalComponent",t.ExtensionsMiniDirectoryModal=(0,l.requireCssWithComponent)(N,["/static/typescript/component_libraries/deep-integrations/src/index.web-vflTFI7Au.css","/static/metaserver/static/css/app_actions/index-vflQ27cHM.css"]);const P=d.once(()=>{u.default.setAppElement(document.body)});t.showExtensionsMiniDirectoryModal=(e,n,i,o,r,a,c,l,u,d)=>{P(),p.Modal.showInstance(s.default.createElement(t.ExtensionsMiniDirectoryModal,{modalTitle:e,user:n,file:i,onRequestClose:p.Modal.close,appActions:o,categoryIdToInfos:r,featureFlags:a,updateLinkState:c,telemetryContext:l,currentSession:u,onProfileServiceAuth:d}));const{connected_apps:m,unconnected_apps:f}=(0,_.partitionActionsByLinkStatus)(o);(0,_.logEvent)(u,"view_scaling_modal",{connected_apps:m,unconnected_apps:f})}})),define("metaserver/static/js/extensions/extensions_utils",["require","exports","metaserver/static/js/file_viewer/open_button/utils","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/cloud_docs/event_logging"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCategoryIdToInfos=t.getOpenOptionsForFile=void 0;const o=Object.freeze({local_path:null,resolved_local_path:null,is_locally_available:!1,can_open_directly:!1,open_application_identifier:null,open_application_name:null,path_is_dir:!1,is_infinite_placeholder:!1,error_message:null});t.getOpenOptionsForFile=function(e){const t=(0,i.getActionSourceFromSurface)(e.surface),r=e.sharingServiceInfo||{};let{isCloudEditorDisabled:a}=e,c=a;return a||(a=!!e.cloudDocsInfo&&!e.cloudDocsInfo.openWithGddSupported,c=!!e.isOpenWithDisabled),(0,n.getOpenOptions)({file:e.file,isOpenWithDisabled:!!c,unityInfo:e.unityInfo||o,extraOptions:e.extraOptions,user:e.user,sharingServiceInfo:r,refreshSharingServiceInfo:e.refreshSharingServiceInfo,showOpenWithShare:!1,onPresentInZoom:e.onPresentInZoom,isCloudBasedDoc:(0,s.isCloudBasedDoc)(e.file),actionSource:t,isCloudEditorDisabled:a,landingPagesEnabled:e.landingPagesEnabled,isInActionBar:e.isInActionBar,previewActionHandler:e.previewActionHandler,openDesktopActionHandler:e.openDesktopActionHandler,goToFolderActionHandler:e.goToFolderActionHandler,replayActionHandler:e.replayActionHandler,openInNewTabActionHandler:e.openInNewTabActionHandler})},t.getCategoryIdToInfos=function(e){const t={};return e.forEach(e=>{t[e.id]=e}),t}})),define("metaserver/static/js/campaigns/campaigns_element_id_enum",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CampaignsElementIdEnum=void 0,(function(e){e.BROWSE_VIEW_LIST_HEAD="browse-view-list-head",e.BROWSE_VIEW_LIST_FILE="browse-view-list-file",e.BROWSE_VIEW_RIGHT_PANEL_SHARE_DROPDOWN_BUTTON="browse-view-right-panel-share-dropdown-button",e.BROWSE_VIEW_RIGHT_PANEL_SHARE_WITH_DROPBOX_BUTTON="browse-view-right-panel-share-with-dropbox-button",e.BROWSE_VIEW_RIGHT_PANEL_SEND_A_COPY_BUTTON="browse-view-right-panel-send-a-copy-button"})(t.CampaignsElementIdEnum||(t.CampaignsElementIdEnum={}))})),define("metaserver/static/js/extensions/split_share_button_component",["require","exports","tslib","classnames","lodash","react","dig-components/icons/src","react-redux","dig-components/menu","dig-components/buttons","dig-components/icons","spectrum/tooltip/index","metaserver/static/js/cloud_docs/constants","metaserver/static/js/filepath/filepath","metaserver/static/js/integrations/data/selectors","metaserver/static/js/extensions/apis","metaserver/static/js/extensions/education/types","metaserver/static/js/app_actions/redirect","metaserver/static/js/app_actions/telemetry_client","metaserver/static/js/components/ui/css","metaserver/static/js/extensions/common","metaserver/static/js/extensions/connect_flow","metaserver/static/js/extensions/data/action_creators","metaserver/static/js/extensions/data/helpers","metaserver/static/js/extensions/data/selectors","metaserver/static/js/extensions/data/store","metaserver/static/js/extensions/data/types","metaserver/static/js/extensions/extensions_mini_directory_modal","metaserver/static/js/extensions/extensions_utils","metaserver/static/js/extensions/file","metaserver/static/js/extensions/tooltips","metaserver/static/js/extensions/utils","metaserver/static/js/extensions/constants","metaserver/static/js/file_viewer/constants","metaserver/static/js/file_viewer/open_button/types","metaserver/static/js/clean/static_urls","metaserver/static/js/user_education/react/user_education_effect","metaserver/static/js/core/i18n","metaserver/static/js/clean/web_user_action_events","metaserver/static/js/commerce/lib/logging/commerce_web_entry_points","metaserver/static/js/commerce/lib/util","metaserver/static/js/file_transfers/lib/utils","metaserver/static/js/file_transfers/async/browse_entry_point_onboarding_modal_async","metaserver/static/js/file_transfers/containers/transfer_modal/transfer_modal_async","metaserver/static/js/commerce/components/sell_a_copy_modal_async","metaserver/static/js/core/browser","metaserver/static/js/core/uri","metaserver/static/js/onboarding_checklist/async_share_button_tooltip","metaserver/static/js/flows/conversions/convert_and_share_submenu","metaserver/static/js/clean/analytics","metaserver/static/js/core/browser_detection","dig-components/badges","metaserver/static/js/dropbox/proto/pap_events/organize/finish_browse_time_to_success","metaserver/static/js/browse_tts/browse_tts","metaserver/static/js/browse/constants","metaserver/static/js/clean/web_user_action_logger","dig-components/tooltips","metaserver/static/js/docsend_analytics_add_on/helpers/utils","metaserver/static/js/campaigns/campaigns_element_id_enum","metaserver/static/js/docsend_analytics_add_on/helpers/modals"],(function(e,t,n,s,i,o,r,a,c,l,p,u,d,_,m,f,h,g,v,E,S,y,A,O,I,x,b,T,M,w,N,P,C,j,D,F,U,B,L,k,R,W,H,V,q,G,z,X,Y,K,Z,$,Q,J,ee,te,ne,se,ie,oe){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SplitShareButton=t.__dontUse=t.SplitShareButtonComponent=void 0,s=n.__importDefault(s),o=n.__importStar(o),G=n.__importStar(G);var re=Q.pap_events.organize.Finish_BrowseTimeToSuccess.BrowseTtsEventName;(0,x.getStore)();const ae=o.default.forwardRef((e,t)=>{var{openOption:s,description:i,rightAccessory:r,experimentInfo:a,actionSurface:l,fileExt:p,campaignAnchorName:u,onImpression:d}=e,_=n.__rest(e,["openOption","description","rightAccessory","experimentInfo","actionSurface","fileExt","campaignAnchorName","onImpression"]);let m;return m=s.iconElement?s.iconElement:s.iconUrl?o.default.createElement("img",{alt:"",src:s.iconUrl,width:24,height:24}):null,o.default.useEffect(()=>{"docsend_analytics_add_on"===(null==a?void 0:a.experimentName)&&K.ProEventsLogger.log(`docsend_analytics_add_on_${a.variant}`,{entryPoint:"split_share_menu",actionSurface:l,fileExt:p}),null==d||d()},[]),o.default.createElement(c.Menu.ActionItem,Object.assign({value:s,withLeftAccessory:m,withSubtitle:i,withRightAccessory:r,"data-testid":s?`split-share-menu-action-${s.userAction}`:"","data-campaigns-element-id":u,ref:t},_),s.text)});ae.displayName="MenuContentItem";class ce extends o.default.Component{constructor(t){super(t),this.updateClientPortalMenuItem=()=>{new Promise((t,n)=>{e(["metaserver/static/js/business_space/browse/browse_exports"],t,n)}).then(n.__importStar).then(({ClientPortalMenuItem:e,isClientPortalMenuItemEnabled:t})=>{const n=t();this.setState({shouldShowClientPortalMenuItem:n,clientPortalMenuItem:o.default.createElement(e,{user:this.props.user,splitShareButtonFile:1===this.props.files.length&&"inline_action_bar"===this.props.actionSurface&&this.props.files[0].is_dir?this.props.files[0]:void 0})})})},this.preloadCampaignMenuItemAssets=()=>{new Promise((t,n)=>{e(["metaserver/static/js/campaigns/campaign_formats/menu/campaign_menu_item"],t,n)}).then(n.__importStar)},this.handleClickShare=e=>{e.preventDefault(),this.props.onShowShare(),this.props.logShareButtonClick&&this.props.logShareButtonClick(this.props.renderMenuOnly?L.ActionSourceValue.OVERFLOW_MENU:L.ActionSourceValue.SPLIT_SHARE),this.currentSession&&this.currentSession.event("click_share",{trigger_type:this.props.triggerType}),e.stopPropagation()},this.handleSelectAction=e=>{e.handler()},this.logSelectActionOverflowMenu=(e,t)=>{var n,s;this.props.logShareButtonClick&&this.props.logShareButtonClick(this.props.renderMenuOnly?L.ActionSourceValue.OVERFLOW_MENU:L.ActionSourceValue.SPLIT_SHARE,e),null===(s=(n=this.props).previewsLogUserAction)||void 0===s||s.call(n,e,this.props.renderMenuOnly?L.ActionSourceValue.OVERFLOW_MENU:L.ActionSourceValue.SPLIT_SHARE),(0,S.logEvent)(this.currentSession,"select_action",{type:t,trigger_type:this.props.triggerType})},this.handlePreventMouseDown=e=>{e.preventDefault(),this.state.tooltipState===h.TooltipState.BIG_ONBOARDING_TOOLTIP&&(this.markSplitShareTooltipViewed(),this.setState({tooltipState:h.TooltipState.NO_TOOLTIP})),e.stopPropagation()},this.handlePopoverHover=()=>{this.currentSession&&this.currentSession.event("popover_trigger_hover",{trigger_type:this.props.triggerType})},this.handleShareHover=()=>{this.currentSession&&this.currentSession.event("share_hover",{trigger_type:this.props.triggerType})},this.handlePopoverToggle=({isOpen:e})=>{const{onDropdownOpen:t,onDropdownClose:n,triggerType:s}=this.props;e&&t?t():!e&&n&&n(),this.currentSession&&this.currentSession.event(e?"open_popover":"close_popover",{trigger_type:s})},this.handlePresentInZoom=(e,t)=>{const{refreshSharingServiceInfo:n,sharingServiceInfo:s,onPresentInZoom:i,landingPageEnabled:o}=this.props;s&&n&&i&&(0,y.presentInZoomFlow)(e,s,n,i,"split_share_button",o,t)},this.handleShareInSlack=(e,t,n)=>{const{refreshSharingServiceInfo:s,sharingServiceInfo:i,landingPageEnabled:o}=this.props;i&&s&&(te.WebUserActionLog.log(t.id,L.WebUserActionLogEvent.SLACK_SHARE,{}),(0,y.shareInSlackFlow)(t,i,s,e,"split_share_button",o,n))},this.handleShareToTrello=(e,t,n)=>{const{refreshSharingServiceInfo:s,sharingServiceInfo:i,landingPageEnabled:o}=this.props;i&&s&&(0,y.shareInTrelloFlow)(t,i,s,e,"split_share_button",o,n)},this.handleUploadToCanvas=(e,t,n)=>{const{refreshSharingServiceInfo:s,sharingServiceInfo:i,landingPageEnabled:o}=this.props;i&&s&&(0,y.shareInCanvasFlow)(t,i,s,e,"split_share_button",o,n)},this.handleUpdateLinkState=(e,t)=>{const{updateLinkState:n}=this.props;n({actionId:e,linkState:t})},this.handleAppAction=(e,t,n)=>{const{context:s,featureFlags:i}=this.props,o=e.map(e=>e);(0,g.redirectToActionOrShowAuth)(t,o,n,i,s,this.handleUpdateLinkState,this.handleShareAction),(0,S.logEvent)(this.currentSession,"select_action",(0,S.getAppActionExtras)(n))},this.handleShareAction=(e,t,n)=>{(0,J.logBrowseTTS)(re.SHARE_WITH_EXTERNAL_APP_BROWSE_TTS_EVENT_NAME);const s=n.handler.service_type[".tag"],i={".tag":"profile_linked"},o=()=>{this.handleUpdateLinkState(n.id,i),(0,g.authorizeNoRedirect)(e,n.id)};switch(s){case"slack_dropbox":return this.handleShareInSlack(t,e,o);case"zoom":return this.handlePresentInZoom(e,o);case"trello":return this.handleShareToTrello(t,e,o);case"canvas":return this.handleUploadToCanvas(t,e,o)}},this.getAppActionIconUrl=e=>{const{icon:t}=e;return t&&t.url&&!t.is_static?t.url:(0,F.static_url)("/static/metaserver/static/images/generic_app_icon-vflIPYT1H.png")},this.getAppActionOpenOptionActions=({handler:e})=>{if("profile_service"!==e[".tag"])return{type:D.OpenButtonAction.APP_ACTION,userAction:j.UserAction.ShareToAction};switch(e.service_type[".tag"]){case"slack_dropbox":return{type:D.OpenButtonAction.SHARE_TO_SLACK,userAction:j.UserAction.ShareToSlack};case"zoom":return{type:D.OpenButtonAction.PRESENT_IN_ZOOM,userAction:j.UserAction.PresentInZoom};case"trello":return{type:D.OpenButtonAction.SHARE_TO_TRELLO,userAction:j.UserAction.ShareToTrello};default:return{type:D.OpenButtonAction.APP_ACTION,userAction:j.UserAction.ShareToAction}}},this.handleHellosignDeepIntegrationLaunch=(t,s,i,o)=>new Promise((t,n)=>{e(["metaserver/static/js/integrations/hellosign_deep_integration/launcher"],t,n)}).then(n.__importStar).then(({getLauncher:e})=>{const n=e();return n.init({entryPoint:o||"share_menu",file:t,user:s,source:i}),n}).then(e=>(e.launch(),e)),this.getHellosignOpenOption=(e,t)=>{const n=B.intl.formatMessage({id:"KPapIP",defaultMessage:"Send for signature"});return{handler:(n,s)=>{this.handleHellosignDeepIntegrationLaunch(e,t,n,s),this.logSelectActionOverflowMenu(j.UserAction.SendForSignatureAction,D.OpenButtonAction.PREPARE_FOR_SIGNATURE)},iconElement:o.default.createElement(p.UIIcon,{src:r.SendLine}),spriteName:null,text:n,type:D.OpenButtonAction.PREPARE_FOR_SIGNATURE,userAction:j.UserAction.SendForSignatureAction}},this.handleShareWithAnalytics=(e,t,n,s)=>{K.ProEventsLogger.log(`docsend_analytics_add_on_${n}_click`,{entryPoint:"split_share_menu",actionSource:this.props.actionSurface,fileExt:s}),(0,oe.showDocsendModal)({fileId:e.file_id,fileName:(0,_.filename)(e.fq_path),filePath:(0,_.parent_dir)(e.fq_path),user:t,stormcrowVariant:n,entryPoint:`split_share_menu${this.props.actionSurface?`_${this.props.actionSurface}`:""}`})},this.getAppActionOpenOption=(e,t,n,s={})=>{const{type:i,userAction:o}=this.getAppActionOpenOptionActions(n);return Object.assign({handler:()=>{this.handleAppAction(e,t,n),this.logSelectActionOverflowMenu(o,i)},spriteName:null,text:n.description,type:i,userAction:o,iconUrl:this.getAppActionIconUrl(n)},s)},this.getMoreAppsOpenOption=(e,t)=>({handler:()=>{this.handleMoreApps(e,t),(0,S.logEvent)(this.currentSession,"select_show_more",{}),this.logSelectActionOverflowMenu(j.UserAction.OpenMoreApps,D.OpenButtonAction.OPEN_MORE_APPS)},text:B.intl.formatMessage({id:"Gevpqz",defaultMessage:"Connect more apps"}),type:D.OpenButtonAction.OPEN_MORE_APPS,userAction:j.UserAction.OpenMoreApps,spriteName:null,iconElement:o.default.createElement(p.UIIcon,{src:r.AddCircleLine})}),this.getAddAppsOpenOption=(e,t)=>({handler:()=>{this.handleMoreApps(e,t),(0,S.logEvent)(this.currentSession,"select_add_apps",{}),this.logSelectActionOverflowMenu(j.UserAction.OpenAddApps,D.OpenButtonAction.OPEN_ADD_APPS)},text:B.intl.formatMessage({id:"XFA09U",defaultMessage:"Connect apps"}),type:D.OpenButtonAction.OPEN_ADD_APPS,userAction:j.UserAction.OpenAddApps,spriteName:null,iconElement:o.default.createElement(p.UIIcon,{src:r.AddCircleLine})}),this.getAppCenterLinkOpenOption=()=>({handler:()=>{(0,S.logEvent)(this.currentSession,"select_show_more",{}),this.logSelectActionOverflowMenu(j.UserAction.OpenMoreApps,D.OpenButtonAction.OPEN_MORE_APPS),G.open_tab(new z.URI({path:"/apps"}))},text:B.intl.formatMessage({id:"Gevpqz",defaultMessage:"Connect more apps"}),type:D.OpenButtonAction.OPEN_MORE_APPS,userAction:j.UserAction.OpenMoreApps,spriteName:null,iconElement:o.default.createElement(p.UIIcon,{src:r.AddCircleLine})}),this.handleMoreApps=(e,t)=>{const{appActions:n,featureFlags:s,context:i,categoryInfo:o}=this.props,r=(0,M.getCategoryIdToInfos)(o);(0,T.showExtensionsMiniDirectoryModal)(B.intl.formatMessage({id:"A7cFjC",defaultMessage:"Share with these apps"}),t,e,n.filter(e=>e.app_id!==C.TRANSFER_FP_APP_ID).sort(O.actionCompareFn),r,s,this.handleUpdateLinkState,i,this.currentSession,this.handleShareAction)},this.computeReferrer=e=>{const t=this.props.renderMenuOnly?L.ActionSourceValue.OVERFLOW_MENU:L.ActionSourceValue.SPLIT_SHARE;return(0,P.computeSplitShareMenuReferrer)(e,t,this.props.retrievalSource,this.props.actionSurface)},this.handleAddToTransfer=(e,t,n)=>{const{fileTransfersModalExp:s}=this.props.featureFlags;"ON"===s?(0,V.asyncTransferModal)(n,e,t):(0,H.asyncShowBrowseEntryPointOnboardingModal)({primaryActionOnClick:()=>(0,W.redirectToCreateTransferWithFiles)(e,t),userId:n.id})},this.handleSellWithShop=(e,t,n,s)=>{(0,k.logSellWithShopMenuItemClick)(e,t),n?(0,q.asyncSellACopyModal)(s,e):(0,R.redirectToSellWithShop)(e,t)},this.shouldShowReplayOpenOption=e=>{const t=(0,_.file_extension)((0,_.filename)(e.fq_path)),n=ee.ExtensionCategories[t];return"VIDEO"===n||"AUDIO"===n||"IMAGE"===n},this.getReplayOpenOption=e=>({handler:()=>{const t=`https://replay.dropbox.com/project/creating/${e}?creationSource=dropbox_share_action`;window.open(t),this.logSelectActionOverflowMenu(j.UserAction.OpenInReplay,D.OpenButtonAction.OPEN_IN_REPLAY)},spriteName:null,text:B.intl.formatMessage({id:"lOEIzZ",defaultMessage:"Get feedback"}),type:D.OpenButtonAction.OPEN_IN_REPLAY,userAction:j.UserAction.OpenInReplay,iconElement:o.default.createElement(p.UIIcon,{src:r.DropboxReplayLine})}),this.getShareWithEmailOpenOption=()=>{const{onShowShare:e}=this.props;return{handler:()=>{e(),this.logSelectActionOverflowMenu(j.UserAction.InviteViaEmail,D.OpenButtonAction.INVITE_VIA_EMAIL)},spriteName:null,text:B.intl.formatMessage({id:"8U/qbn",defaultMessage:"Share with Dropbox"}),type:D.OpenButtonAction.INVITE_VIA_EMAIL,userAction:j.UserAction.InviteViaEmail,iconElement:o.default.createElement(p.UIIcon,{className:"test-id-share-dig-icon",src:r.ShareArrowLine})}},this.getConvertAndShareSubmenu=()=>{const{files:e,user:t}=this.props;if(1!==e.length)return null;const n=e[0];return o.default.createElement(Y.ConvertAndShareSubmenu,{file:n,user:t})},this.getTransferOpenOptions=e=>({handler:()=>{e(),this.logSelectActionOverflowMenu(j.UserAction.Transfer,D.OpenButtonAction.TRANSFER)},spriteName:null,text:B.intl.formatMessage({id:"3MahuB",defaultMessage:"Send a copy"}),type:D.OpenButtonAction.TRANSFER,userAction:j.UserAction.Transfer,iconElement:o.default.createElement(p.UIIcon,{src:r.DropboxTransferLine})}),this.getShopOpenOptions=(e,t,n,s)=>({handler:()=>{this.handleSellWithShop(e,t,n,s),this.logSelectActionOverflowMenu(j.UserAction.SellWithShop,D.OpenButtonAction.SELL_WITH_SHOP)},spriteName:null,text:B.intl.formatMessage({id:"7UOMXW",defaultMessage:"Sell a copy"}),type:D.OpenButtonAction.SELL_WITH_SHOP,userAction:j.UserAction.SellWithShop,iconElement:o.default.createElement(p.UIIcon,{src:r.TagLine})}),this.getPopoverTriggerRenderer=(e,t,n)=>i=>{const{isVisible:a,variant:c}=this.props,d=Object.assign({className:(0,s.default)("extensions-split-share-menu__trigger",{"extensions-split-share-menu__trigger--collapsed":e}),tabIndex:a?void 0:-1,onMouseEnter:this.handlePopoverHover,"aria-label":B.intl.formatMessage({id:"5MpLpV",defaultMessage:"Expand share menu"})},i);return e?o.default.createElement(u.Tooltip,{positionOffset:8,positioning:"left",tooltipContent:B.intl.formatMessage({id:"TFeNOo",defaultMessage:"Share"})},o.default.createElement(l.IconButton,Object.assign({variant:"primary"===c?"filled":c},d),o.default.createElement(p.UIIcon,{src:r.ShareArrowLine,"aria-label":n}))):t?o.default.createElement(l.Button,Object.assign({},d,{withIconLeft:o.default.createElement(p.UIIcon,{src:r.ShareArrowLine,className:"extensions-split-share--icon"}),variant:c,withDropdownIcon:!0}),B.intl.formatMessage({id:"DHK0zq",defaultMessage:"Share all selected"})):o.default.createElement(l.Button,Object.assign({},d,{variant:c,withDropdownIcon:!0,_hasSquaredSize:!0}))},this.renderPopoverItems=()=>{const{user:e,files:t,appActions:n,nonHellosignAppActions:s,featureFlags:{docsendAnalyticsAddOn:a,hellosignDeepIntegration:l,dndSplitShare:u,fileTransfersAppAction:m,flowsConvertAndShareUi:f,replayDropboxShareActionExp:h,commerceSellerFeaturesEnabled:g,commerceSellACopyExperiment:v},isSendForSignatureEnabled:E}=this.props,S=1===t.length,y=t[0],A=t.map(e=>e),I=this.computeReferrer(A),x="DEEP_INTEGRATION"===l&&!(0,Z.is_supported_mobile_browser)(),b=S&&(0,d.isHellosignFileByExtension)((0,w.getFileExt)(Object.assign(Object.assign({},y),{bytes:0})));let T=null,M=n;if(x&&b&&E){M=s;const t=this.getHellosignOpenOption(y,e);T=o.default.createElement(ae,{openOption:t})}const N=(0,_.file_extension)((0,_.filename)(y.fq_path)),P=(0,se.getDocsendAnalyticsAddOnConfig)(e,a),F=S&&P.isSupportedFile(y.bytes,N);let U=null;if("ON"===u&&!P.splitShare.removeDocsendAppAction){const n=M.find(e=>e.app_id===j.DOCSEND_PROD_APP_ID);if(n){M=M.filter(e=>e.app_id!==j.DOCSEND_PROD_APP_ID);const s=this.getAppActionOpenOption(t,e,n,{text:P.splitShare.moveDocsendEntryPoint?B.intl.formatMessage({id:"oziSoO",defaultMessage:"Send with DocSend"}):B.intl.formatMessage({id:"r4C3UE",defaultMessage:"Send and track"})});let i=void 0;P.splitShare.logExposure&&F&&(i={experimentName:"docsend_analytics_add_on",variant:P.variantForLogging}),U=o.default.createElement(ae,{"data-testid":n.app_id,key:s.text,openOption:s,experimentInfo:i,actionSurface:this.props.actionSurface,fileExt:N})}}P.splitShare.removeDocsendAppAction&&(M=M.filter(e=>e.app_id!==j.DOCSEND_PROD_APP_ID));let L=null;if(P.splitShare.showMenuItem&&F){const t={handler:()=>{this.handleShareWithAnalytics(y,e,P.variantForLogging,N)},spriteName:null,text:B.intl.formatMessage({id:"yP4n16",defaultMessage:"Send and track"}),type:D.OpenButtonAction.SHARE_WITH_ANALYTICS,userAction:j.UserAction.ShareWithAnalytics,iconElement:o.default.createElement(p.UIIcon,{src:r.AnalyticsLine})};L=o.default.createElement(ne.Tooltip,{title:B.intl.formatMessage({id:"iZTVjV",defaultMessage:"Get viewer insights for the files you share using Dropbox"}),placement:"left"},o.default.createElement(ae,{"data-testid":"analytics-add-on-menu-item",key:t.text,openOption:t,experimentInfo:{experimentName:"docsend_analytics_add_on",variant:P.variantForLogging},actionSurface:this.props.actionSurface,rightAccessory:o.default.createElement($.AccessoryBadge,null,B.intl.formatMessage({id:"QT7EnD",defaultMessage:"Beta"})),fileExt:N}))}const H=M.find(e=>e.app_id===C.TRANSFER_FP_APP_ID),V=(0,W.shouldShowTransferInSplitShare)(!!H||"ON"===m,A),q=()=>this.handleAddToTransfer(A,I,e),G=(0,R.shouldShowShopInSplitShare)("ON"===g,A),z="ON"===v,{installedActions:X,unpromotedActions:Y}=(0,O.partitionActions)(M),K=Boolean(S),Q=Boolean(this.state.shouldShowClientPortalMenuItem),J=K||Boolean(V)||Boolean(U)||Boolean(T)||Boolean(G)||Boolean(Q),ee=P.splitShare.moveDocsendEntryPoint,te=(!(0,i.isEmpty)(Y)||!(0,i.isEmpty)(X)||!J||ee&&U)&&o.default.createElement(c.Menu.Segment,null,ee?U:null,X.map(n=>{const s=this.getAppActionOpenOption(t,e,n);return o.default.createElement(ae,{"data-testId":n.app_id,key:s.text,openOption:s})}),!(0,i.isEmpty)(Y)&&S?o.default.createElement(ae,{openOption:(0,i.isEmpty)(X)?this.getAddAppsOpenOption(y,e):this.getMoreAppsOpenOption(y,e)}):!J&&(0,i.isEmpty)(X)&&o.default.createElement(ae,{openOption:this.getAppCenterLinkOpenOption()})),oe="ON"===f?this.getConvertAndShareSubmenu():null;return o.default.createElement(o.Fragment,null,J&&o.default.createElement(c.Menu.Segment,null,K&&o.default.createElement(ae,{campaignAnchorName:ie.CampaignsElementIdEnum.BROWSE_VIEW_RIGHT_PANEL_SHARE_WITH_DROPBOX_BUTTON,openOption:this.getShareWithEmailOpenOption()}),L,"ON"===h&&S&&this.shouldShowReplayOpenOption(y)&&o.default.createElement(ae,{openOption:this.getReplayOpenOption(y.file_id),rightAccessory:o.default.createElement($.AccessoryBadge,null,B.intl.formatMessage({id:"LlL5Qr",defaultMessage:"New"}))}),V&&q&&o.default.createElement(ae,{campaignAnchorName:ie.CampaignsElementIdEnum.BROWSE_VIEW_RIGHT_PANEL_SEND_A_COPY_BUTTON,openOption:this.getTransferOpenOptions(q)}),T,ee?null:U,G&&o.default.createElement(ae,{openOption:this.getShopOpenOptions(A,I,z,e),rightAccessory:o.default.createElement($.AccessoryBadge,null,B.intl.formatMessage({id:"WDJQFS",defaultMessage:"New"})),onImpression:()=>(0,k.logSellWithShopMenuItemShown)(A,I)}),Q&&this.state.clientPortalMenuItem,oe),te)},this.markSplitShareTooltipViewed=()=>{(0,f.markTooltipViewed)(this.props.user.id,"split_share_edu")},this.state={tooltipState:h.TooltipState.NO_TOOLTIP,shouldShowClientPortalMenuItem:!1},this.telemetryClient=(0,v.createTelemetryClient)(Object.assign({component:"split-share-btn"},t.context)),this.onboardingChecklistShareButtonTooltipTriggerRef=o.default.createRef()}componentDidMount(){this.props.showEduTooltip&&this.setEduTooltip(),this.updateClientPortalMenuItem(),this.preloadCampaignMenuItemAssets()}componentDidUpdate(e){(0,i.isEqual)(this.props.files,e.files)||this.updateClientPortalMenuItem()}setEduTooltip(){return n.__awaiter(this,void 0,void 0,(function*(){const e=yield(0,f.getTooltipHistory)(this.props.user.id,["open_with_edu","split_share_edu"]),t=this.props.files[0];"split_share_edu"===(0,N.allowedTooltips)(this.props.appActions.length>0,t.fq_path?"."+(0,_.file_extension)((0,_.filename)(t.fq_path)):"",this.props.featureFlags).find(t=>void 0!==e[t]&&!e[t])&&this.setState({tooltipState:h.TooltipState.BIG_ONBOARDING_TOOLTIP})}))}render(){const{files:e,context:t,isVisible:n,shareButtonLabel:a,triggerType:u,isCollapsed:m,shouldUsePortalPopover:f,appActions:h,featureFlags:g,showLeftDigIcon:E,variant:S,renderMenuOnly:y,expActionBarRedesignEnabled:A}=this.props,O=1===e.length,I=e[0];t?this.currentSession=this.telemetryClient.session({ext:(0,v.getPiiSafeExtension)(I?"."+(0,_.file_extension)((0,_.filename)(I.fq_path)):"")}):delete this.currentSession;const x={"aria-label":a,className:(0,s.default)("extensions-split-share__share-button",{"primary-action-menu__button":u===b.TriggerType.SidebarPrimaryButton}),onClick:this.handleClickShare,tabIndex:n?void 0:-1,onMouseEnter:this.handleShareHover},T=o.default.createElement(l.Button,Object.assign({},x,{withIconLeft:E&&o.default.createElement(p.UIIcon,{src:r.ShareArrowLine,className:"extensions-split-share--icon"}),variant:S}),o.default.createElement(U.UserEducationEffect,{containerName:"SplitShareButton",name:"ShareButtonLabel",useSpan:!0},a)),M=this.getPopoverTriggerRenderer(m,!O,a),N=this.props.sharingServiceInfo&&(0,P.isSlackAvailable)(this.props.sharingServiceInfo)&&(0,P.isZoomAvailable)(this.props.sharingServiceInfo),C=O&&"DEEP_INTEGRATION"===g.hellosignDeepIntegration&&(0,d.isHellosignFileByExtension)((0,w.getFileExt)(Object.assign(Object.assign({},I),{bytes:0})))&&!(0,Z.is_supported_mobile_browser)();return y?this.renderPopoverItems():o.default.createElement("div",{className:(0,s.default)("extensions-split-share-btn",{"extensions-split-share-btn--invisible":!n,"slack-zoom-available":N&&!m,"slack-zoom-available-collapsed":N&&m,"hellosign-available":C,"share-fake-split-button":!(0,i.isEmpty)(h)}),ref:this.onboardingChecklistShareButtonTooltipTriggerRef},!m&&O&&T,o.default.createElement(X.AsyncOnboardingChecklistShareButtonTooltip,{triggerRef:this.onboardingChecklistShareButtonTooltipTriggerRef}),o.default.createElement(c.Menu.Wrapper,{className:(0,s.default)("extensions-split-share__popover",{"hellosign-available-dropdown":C,"extensions-split-share__unportaled-menu":!f,"down-arrow-share-button-prompt-select":!0}),onClick:this.handlePreventMouseDown,onDoubleClick:this.handlePreventMouseDown,onSelection:this.handleSelectAction,onToggle:this.handlePopoverToggle,closeOnSelection:!0,isPortaled:f,"data-campaigns-element-id":ie.CampaignsElementIdEnum.BROWSE_VIEW_RIGHT_PANEL_SHARE_DROPDOWN_BUTTON},({getContentProps:e,getTriggerProps:t})=>o.default.createElement(o.default.Fragment,null,M(t()),o.default.createElement(c.Menu.Content,Object.assign({placement:"bottom-end",className:A?"rc-action-bar-submenu-content":""},e()),this.renderPopoverItems()))))}}t.SplitShareButtonComponent=ce,ce.defaultProps={isVisible:!0,shareButtonLabel:B.intl.formatMessage({id:"TFeNOo",defaultMessage:"Share"}),triggerType:b.TriggerType.PrimaryButton,variant:"opacity"},ce.displayName="SplitShareButtonComponent";const le={refreshSharingServiceInfo:A.refreshSharingServiceInfoAdapter,updateLinkState:A.updateLinkState},pe=(0,a.connect)((e,t)=>{const n=t.files.map(e=>Object.assign(Object.assign({},e),{bytes:0}));return{appActions:(0,I.getShareActionsForFiles)(e,n),nonHellosignAppActions:(0,I.getNonHellosignActionsForFiles)(e,n,j.HELLOSIGN_PROD_APP_ID),categoryInfo:(0,I.getCategoryInfos)(e),featureFlags:(0,I.getFeatureFlags)(e),sharingServiceInfo:(0,I.getSharingServiceInfoAdapter)(e),landingPageEnabled:(0,m.isConnectServiceLandingPagesEnabled)(e),isSendForSignatureEnabled:(0,m.isSendForSignatureEnabled)(e)}},le)(ce);t.__dontUse=pe,t.SplitShareButton=(0,E.requireCssWithComponent)(pe,["/static/metaserver/static/css/extensions/index-vflrFmD9k.css","/static/metaserver/static/css/app_actions/index-vflQ27cHM.css"])})),define("metaserver/static/js/extensions/status_page",["require","exports","tslib","react","metaserver/static/js/components/ui/css","spectrum/button/index","metaserver/static/js/clean/ui/image","metaserver/static/js/clean/static_urls","metaserver/static/js/core/i18n","metaserver/static/js/modules/constants/payments","metaserver/static/js/account/email","metaserver/static/js/account/email_verify_reasons","typescript/dropbox/proto/js_init_data/extensions/extensions_pb","js/proto_utils/unpack"],(function(e,t,n,s,i,o,r,a,c,l,p,u,d,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootComponent=t.DocuSignInvalidFilePage=t.FileTooLargePage=t.UnverifiedEmailPage=t.NoWritePermissionPage=t.DocuSignPermissionDeniedPage=t.AppActionsOverQuotaPage=t.AppActionsErrorPage=t.AppActionsLoadingPage=void 0,s=n.__importDefault(s),l=n.__importStar(l),d=n.__importStar(d);const m=e=>{const t=(0,a.static_url)(`/static/metaserver/static/images/illustration_catalog/${e.illustrationName}.png`),n=(0,a.static_url)(`/static/metaserver/static/images/illustration_catalog/${e.illustrationName}@2x.png`);return s.default.createElement("div",{className:"app-actions-status-page"},s.default.createElement(r.Image,{className:"app-actions-status-image",src:t,srcHiRes:n}),s.default.createElement("div",{className:"app-actions-status-content"},e.children))},f=e=>s.default.createElement(m,{illustrationName:e.illustrationName},s.default.createElement("div",{className:"app-actions-status-text"},s.default.createElement("div",{className:"app-actions-status-text__header"},e.headerText)),s.default.createElement("div",{className:"app-actions-status-detail"},e.detailText),s.default.createElement(o.Button,{className:"app-actions-status-button",onClick:e.buttonOnClick,href:e.buttonHref,variant:"primary"},e.buttonTitle));function h(){window.close()}t.AppActionsLoadingPage=(0,i.requireCssWithComponent)(e=>s.default.createElement("div",{className:"app-actions-status-page"},s.default.createElement(r.Image,{className:"app-actions-status-image",src:(0,a.static_url)("/static/metaserver/static/images/dbx_cloud_doc_loading-vfl9ZK2NS.gif")}),s.default.createElement("div",{className:"app-actions-status-detail"},e.fileName)),["/static/metaserver/static/css/app_actions/status_page-vflxeNuOK.css","/static/metaserver/static/css/components/loading_indicator-vflIkyDZA.css"]),t.AppActionsErrorPage=(0,i.requireCssWithComponent)(e=>s.default.createElement(f,{illustrationName:"sickbox-illo_m1",headerText:c.intl.formatMessage({id:"G79Iwz",defaultMessage:"Oops... something went wrong"}),detailText:c.intl.formatMessage({id:"ZvMuf8",defaultMessage:"Oh no, it looks like we failed to load your file. Please return to Dropbox and try once more."}),buttonOnClick:h,buttonTitle:c.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"})}),["/static/metaserver/static/css/app_actions/status_page-vflxeNuOK.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css"]),t.AppActionsOverQuotaPage=(0,i.requireCssWithComponent)(e=>{let t=l.OUT_OF_SPACE_URL+"?oqa=wb_oq_aa",n=c.intl.formatMessage({id:"iIucBq",defaultMessage:"Get more space"});return e.isTeam&&(t="/help/business/space-limit-full",n=c.intl.formatMessage({id:"K2PjtT",defaultMessage:"Learn more about Dropbox space"})),s.default.createElement(f,{illustrationName:"illo-catbox",headerText:c.intl.formatMessage({id:"0eDgXK",defaultMessage:"Your Dropbox is full"}),detailText:c.intl.formatMessage({id:"nyrsTE",defaultMessage:"Uh oh, in order to perform this action, you need to add more storage to your Dropbox."}),buttonTitle:n,buttonHref:t})},["/static/metaserver/static/css/app_actions/status_page-vflxeNuOK.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css"]),t.DocuSignPermissionDeniedPage=(0,i.requireCssWithComponent)(e=>s.default.createElement(f,{illustrationName:"account_requires_access",headerText:c.intl.formatMessage({id:"lZ3sPD",defaultMessage:"Your DocuSign account has restricted access"}),detailText:c.intl.formatMessage({id:"lF/7ht",defaultMessage:"It looks like your DocuSign account does not have permission to send envelopes. Please contact your DocuSign admin."}),buttonTitle:c.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),buttonOnClick:h}),["/static/metaserver/static/css/app_actions/status_page-vflxeNuOK.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css"]),t.NoWritePermissionPage=(0,i.requireCssWithComponent)(e=>s.default.createElement(f,{illustrationName:"403_error-illo",headerText:c.intl.formatMessage({id:"G79Iwz",defaultMessage:"Oops... something went wrong"}),detailText:c.intl.formatMessage({id:"NiMCaD",defaultMessage:"You do not have access to update files in this folder."}),buttonTitle:c.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),buttonOnClick:h}),["/static/metaserver/static/css/app_actions/status_page-vflxeNuOK.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css"]),t.UnverifiedEmailPage=(0,i.requireCssWithComponent)(e=>s.default.createElement(f,{illustrationName:"illo-catbox",headerText:c.intl.formatMessage({id:"Bf160P",defaultMessage:"Verify Your Email"}),detailText:c.intl.formatMessage({id:"Vg1D7j",defaultMessage:"In order to perform this action, Dropbox needs to verify your email address to share links."}),buttonTitle:c.intl.formatMessage({id:"DUVaTi",defaultMessage:"Verify Email"}),buttonOnClick:()=>{return t=e.role,void p.EmailVerification.getForRole(t).show_verify_modal(void 0,u.EmailVerificationReasons.GENERIC);var t}}),["/static/metaserver/static/css/app_actions/status_page-vflxeNuOK.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css","/static/metaserver/static/css/account/emails-vflCpG_Hm.css","/static/metaserver/static/css/maestro_layout-vfleK4Iu-.css","/static/metaserver/static/css/upsell/prompt_pagelet-vflfA3YoB.css","/static/metaserver/static/css/notify-vflZVEumu.css"]),t.FileTooLargePage=(0,i.requireCssWithComponent)(({maxFileSize:e})=>{const t=Number(e),n=(i=t,isFinite(i)&&i>0?c.intl.formatMessage({id:"fQlkHi",defaultMessage:"The file you selected is larger than the supported {supported_value}MB. Please try again with a smaller file."},{supported_value:t.toString(10)}):c.intl.formatMessage({id:"WMJEtg",defaultMessage:"The file you selected is larger than supported. Please try again with a smaller file."}));var i;return s.default.createElement(f,{illustrationName:"illo-catbox",headerText:c.intl.formatMessage({id:"4pvYSI",defaultMessage:"Can’t open file"}),detailText:n,buttonTitle:c.intl.formatMessage({id:"QeGZf9",defaultMessage:"Return to Dropbox"}),buttonOnClick:h})},["/static/metaserver/static/css/app_actions/status_page-vflxeNuOK.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css"]),t.DocuSignInvalidFilePage=(0,i.requireCssWithComponent)(e=>s.default.createElement(f,{illustrationName:"illo-catbox",headerText:c.intl.formatMessage({id:"4pvYSI",defaultMessage:"Can’t open file"}),detailText:c.intl.formatMessage({id:"+3VSGf",defaultMessage:"The file you selected cannot be validated in DocuSign. Please try again with a valid file."}),buttonTitle:c.intl.formatMessage({id:"u/p3Pl",defaultMessage:"Close"}),buttonOnClick:h}),["/static/metaserver/static/css/app_actions/status_page-vflxeNuOK.css","/static/metaserver/static/css/spectrum/index.web-vflJy4G-t.css"]);t.RootComponent=e=>{const n=(0,_.unmarshalProto)(e.encodedProto,d.StatusPageProps);switch(n.pageType){case d.StatusPageProps_PageType.DEFAULT:return s.default.createElement(t.AppActionsErrorPage,null);case d.StatusPageProps_PageType.QUOTA:return s.default.createElement(t.AppActionsOverQuotaPage,{isTeam:n.isTeam});case d.StatusPageProps_PageType.DOCUSIGN:return s.default.createElement(t.DocuSignPermissionDeniedPage,null);case d.StatusPageProps_PageType.ACCESS:return s.default.createElement(t.NoWritePermissionPage,null);case d.StatusPageProps_PageType.UNVERIFIED_EMAIL:return s.default.createElement(t.UnverifiedEmailPage,{role:n.role});case d.StatusPageProps_PageType.FILE_TOO_LARGE:return s.default.createElement(t.FileTooLargePage,{maxFileSize:Number(n.maxFileSize)});case d.StatusPageProps_PageType.DOCUSIGN_INVALID_FILE:return s.default.createElement(t.DocuSignInvalidFilePage,null)}}})),define("metaserver/static/js/file_viewer/unity/unity_utils",["require","exports","tslib","metaserver/static/js/unity/check_file_cache","metaserver/static/js/unity/features"],(function(e,t,n,s,i){"use strict";function o(e,t){i.UnityFeatures.file_browser_display_name((function(n){e.file_browser_display_name=n,t(e)}),()=>t(e))}function r(e){return null!=e&&(!!e.is_locally_available||!!e.is_infinite_placeholder)&&t.UnityHelpers.clientSupportsOpenInFileBrowser()}function a(e){return null!=e&&!!e.is_locally_available&&!1!==e.can_open_directly}Object.defineProperty(t,"__esModule",{value:!0}),t.UnityHelpers=t.isUnityFileSupported=t.isUnityFolderSupported=void 0,s=n.__importDefault(s),t.isUnityFolderSupported=r,t.isUnityFileSupported=a,t.UnityHelpers={isUnityEnabled:function(){return i.UnityFeatures.isUnitySupported()},isFileInUnityCache:function(e,t){return!!s.default.is_cached_and_locally_available(e,t)},clientSupportsOpenInFileBrowser:function(){return i.UnityFeatures.client_supports_open_in_file_browser()},getFileInfoFromUnityCache:function(e,t){return s.default.get(e,t)},fetchUnityFileInfo:function(e,t,n,s,r){i.UnityFeatures.check_file(e,t,n,e=>{e.is_locally_available?o(e,s):s(e)},r)},getUnityFileInfo:function(e,n,s,i,r){if(t.UnityHelpers.isFileInUnityCache(e,n)){const s=t.UnityHelpers.getFileInfoFromUnityCache(e,n);s.is_locally_available&&null==s.file_browser_display_name?o(s,i):i(s)}else t.UnityHelpers.fetchUnityFileInfo(e,n,s,i,r)},openFile:function(e,t,n,s){i.UnityFeatures.open_file(e,t,n,i.UnityFeatures.standard_open_file_handler,()=>i.UnityFeatures.standard_open_file_handler(!1),s)},isUnityFolderSupported:r,isUnityFileSupported:a}})),define("metaserver/static/js/extensions/shared_file_popover_content_component",["require","exports","tslib","react","metaserver/static/js/extensions/common","metaserver/static/js/extensions/cloud_docs_compat","metaserver/static/js/components/ui/css","metaserver/static/js/file_viewer/open_button/types","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/extensions/unity_and_cloud_editors","metaserver/static/js/file_viewer/constants","metaserver/static/js/cloud_docs/types"],(function(e,t,n,s,i,o,r,a,c,l,p,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedFilePopoverContent=t.SharedFilePopoverContentComponent=void 0,s=n.__importDefault(s);class d extends s.default.Component{constructor(e){super(e),this.createActionClickHandler=e=>()=>{if("cloud_editor"===e.handler[".tag"]){const t=(0,o.isWopiAction)(e)?a.OpenButtonAction.OPEN_WITH:a.OpenButtonAction.OPEN_WITH_CLOUD_DOC;(0,i.logEvent)(this.props.currentSession,"select_legacy_action",{type:t});const n=u.UserActionSourceType.WEB_PREVIEW,s=(0,o.cloudEditorNameToParams)(e.handler.editor_name);(0,c.openWithCloudEditor)((0,c.fileToOpenWithParams)(this.props.file),this.props.user.id,s,!1,n)}}}render(){if(0===this.props.openOptions.length&&0===this.props.cloudEditorAppActions.length)return null;const e=this.props.cloudEditorAppActions.map(e=>({appAction:e,handler:this.createActionClickHandler(e),userAction:p.UserAction.OpenWithAppAction,actionName:e.description}));return s.default.createElement(l.UnityAndCloudEditors,{unityOptions:[],legacyCloudEditorOptions:this.props.openOptions,cloudEditorAppActions:e,bylines:{},wrapValuesForActionBar:!!this.props.isInActionBar})}}t.SharedFilePopoverContentComponent=d,d.displayName="SharedFilePopoverContentComponent",t.SharedFilePopoverContent=(0,r.requireCssWithComponent)(d,["/static/metaserver/static/css/app_actions/index-vflQ27cHM.css"])})),define("metaserver/static/js/extensions/extensions_popover_content_component_v2",["require","exports","tslib","dig-components/icons","dig-components/icons/src","dig-components/menu","metaserver/static/js/file_store/utils","metaserver/static/js/app_actions/redirect","metaserver/static/js/components/ui/css","metaserver/static/js/extensions/cloud_docs_compat","metaserver/static/js/extensions/common","metaserver/static/js/extensions/data/helpers","metaserver/static/js/extensions/extensions_mini_directory_modal","metaserver/static/js/extensions/menu_survey","metaserver/static/js/extensions/unity_and_cloud_editors","metaserver/static/js/extensions/utils","metaserver/static/js/file_viewer/constants","metaserver/static/js/file_viewer/open_button/types","metaserver/static/js/file_viewer/unity/with_unity","metaserver/static/js/clean/static_urls","metaserver/static/js/core/i18n","react","metaserver/static/js/file_viewer/file_conversion/file_conversion_options"],(function(e,t,n,s,i,o,r,a,c,l,p,u,d,_,m,f,h,g,v,E,S,y,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionsPopoverV2NoUnity=t.ExtensionsPopoverV2WithUnity=void 0,y=n.__importDefault(y);class O extends y.default.Component{constructor(e){super(e),this.createAppActionClickHandler=e=>()=>{var t,n;const{file:s,user:i,featureFlags:o,telemetryContext:r,updateLinkState:c}=this.props;if((0,a.redirectToActionOrShowAuth)(i,[s],e,o,r,c),"redirect"===e.handler[".tag"]){const t=(0,p.getAppActionExtras)(e);(0,p.logEvent)(this.props.currentSession,"select_action",Object.assign({menu_version:2},t))}else if("cloud_editor"===e.handler[".tag"]){const t=(0,l.isWopiAction)(e)?g.OpenButtonAction.OPEN_WITH:g.OpenButtonAction.OPEN_WITH_CLOUD_DOC;(0,p.logEvent)(this.props.currentSession,"select_legacy_action",{type:t})}null===(n=(t=this.props).onExtensionClick)||void 0===n||n.call(t)},this.wrapperForAction=e=>({appAction:e,handler:this.createAppActionClickHandler(e),userAction:h.UserAction.OpenWithAppAction,actionName:e.description}),this.renderActionRow=e=>{const t=e.icon;let n;n=t.is_static?(0,E.static_url)("/static/metaserver/static/images/generic_app_icon-vflIPYT1H.png"):t.url;const s=e.description,i=this.props.isInActionBar?(0,f.toActionBarValue)(this.wrapperForAction(e)):this.wrapperForAction(e);return y.default.createElement(o.Menu.ActionItem,{key:e.id,value:i,withLeftAccessory:y.default.createElement("img",{alt:"",src:n,width:24,height:24})},s)},this.renderUnpromotedActions=(e,t)=>{const{user:n,file:r,categoryIdToInfos:a,featureFlags:c,currentSession:l,telemetryContext:u,updateLinkState:_,isInActionBar:m}=this.props,h=e.length>0,g={handler:()=>{const s=[...e,...t];(0,d.showExtensionsMiniDirectoryModal)(S.intl.formatMessage({id:"KVD2SP",defaultMessage:"Open or edit with these apps"}),n,r,s,a,c,_,u,l),(0,p.logEvent)(l,h?"select_show_more":"select_add_app",{surface:u&&u.surface})}},v=m?(0,f.toActionBarValue)(g):g;return y.default.createElement(o.Menu.ActionItem,{key:S.intl.formatMessage({id:"R/67N/",defaultMessage:"Show more"}),value:v,withLeftAccessory:h&&!m?null:y.default.createElement(s.UIIcon,{src:i.AddCircleLine})},h?S.intl.formatMessage({id:"Gevpqz",defaultMessage:"Connect more apps"}):S.intl.formatMessage({id:"XFA09U",defaultMessage:"Connect apps"}))}}render(){const{user:e,appActions:t,openOptions:n,bylines:s,currentSession:i,isInActionBar:r}=this.props,a=(0,p.getOpenOptionsWithLogging)(n,i),{unityOptions:c,cloudEditorOptions:l,previewOption:d,openInReplayOption:f,openInDesktopOption:h,goToFolderOption:g,openInNewTabOption:v}=(0,u.partitionOptions)(a),{cloudEditors:E,installedActions:S,unpromotedActions:O}=(0,u.partitionActions)(t),I=S.length>0,x=O.length>0;return y.default.createElement(y.default.Fragment,null,y.default.createElement(A.FileConversionOptions,{openOptions:a,currentSession:i,wrapValuesForActionBar:!!r}),y.default.createElement(m.UnityAndCloudEditors,{isInActionBar:r,unityOptions:c,legacyCloudEditorOptions:l,cloudEditorAppActions:E.map(e=>this.wrapperForAction(e)),bylines:s,currentSession:i,previewOption:d,openInReplayOption:f,openInNewTabOption:v,openInDesktopOption:h,goToFolderOption:g,wrapValuesForActionBar:!!r}),r&&(I||x)&&y.default.createElement(o.Menu.Segment,null,S.map(e=>this.renderActionRow(e)),this.renderUnpromotedActions(S,O)),!r&&I&&y.default.createElement(o.Menu.Segment,{key:"installed-actions"},S.map(e=>this.renderActionRow(e))),!r&&x&&y.default.createElement(o.Menu.Segment,null,this.renderUnpromotedActions(S,O)),y.default.createElement(_.OpenMenuSurvey,{userId:e.id,session:i}))}}O.displayName="ExtensionsPopoverV2Component";t.ExtensionsPopoverV2WithUnity=e=>(0,r.isBrowseFile)(e.file)?y.default.createElement(v.WithUnity,{file:e.file,user:e.user,render:t=>y.default.createElement(O,Object.assign({},e,{unityInfo:t}))}):null,t.ExtensionsPopoverV2NoUnity=(0,c.requireCssWithComponent)(O,["/static/metaserver/static/css/app_actions/index-vflQ27cHM.css","/static/metaserver/static/css/extensions/index-vflrFmD9k.css"])})),define("metaserver/static/js/extensions/unity_and_cloud_editors",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","dig-components/menu","metaserver/static/js/extensions/byline","metaserver/static/js/components/ui/css","metaserver/static/js/extensions/utils","metaserver/static/js/extensions/cloud_docs_compat","metaserver/static/js/extensions/common","metaserver/static/js/file_viewer/open_button/types","metaserver/static/js/clean/ui/sprite","metaserver/static/js/core/browser_detection"],(function(e,t,n,s,i,o,r,a,c,l,p,u,d,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnityAndCloudEditors=void 0,s=n.__importDefault(s);class f extends s.default.Component{render(){const{unityOptions:e,legacyCloudEditorOptions:t,cloudEditorAppActions:n,bylines:c,currentSession:f,previewOption:h,openInReplayOption:g,openInDesktopOption:v,isInActionBar:E,goToFolderOption:S,wrapValuesForActionBar:y,openInNewTabOption:A}=this.props,O=e=>y?(0,l.toActionBarValue)(e):e,I=t.map(e=>{const{type:t}=e,n=t===d.OpenButtonAction.OPEN_WITH_CLOUD_DOC?"cloud_doc":"wopi";return s.default.createElement(r.Menu.ActionItem,{key:e.text,value:O(e),withLeftAccessory:e.spriteName?s.default.createElement(_.Sprite,{group:"web",name:e.spriteName,alt:""}):s.default.createElement("img",{alt:"",src:e.iconUrl,width:24,height:24})},s.default.createElement(a.ExtensionsBylineTooltip,{isInActionBar:E,bylines:c[n],onDidShow:(0,u.handleShowByline)(n,f),key:e.text},s.default.createElement("span",null,e.text)))}),x=e.map(e=>s.default.createElement(r.Menu.ActionItem,{key:e.text,value:O(e),withLeftAccessory:(function(e){return"ow_desktop"===e.spriteName&&e.type===d.OpenButtonAction.UNITY_FILE?-1!==e.text.indexOf("Dropbox")?s.default.createElement(i.UIIcon,{src:o.DropboxLine}):s.default.createElement(i.UIIcon,{src:o.OpenLine}):s.default.createElement(_.Sprite,{group:"web",name:e.spriteName||"",alt:""})})(e)},e.text));let b=!1;const T=n.map(e=>{b||(b=(0,p.isWopiAction)(e.appAction));const t=e.appAction.handler.editor_name;return s.default.createElement(r.Menu.ActionItem,{key:e.appAction.description,value:O(e),withLeftAccessory:s.default.createElement("img",{alt:"",src:e.appAction.icon.url,width:24,height:24})},s.default.createElement(a.ExtensionsBylineTooltip,{isInActionBar:E,bylines:c[t],onDidShow:(0,u.handleShowByline)(t,f),key:e.appAction.description},s.default.createElement("span",null,e.appAction.description)))}),M=h&&s.default.createElement(r.Menu.ActionItem,{key:h.text,value:O(h),withLeftAccessory:s.default.createElement(i.UIIcon,{src:o.ShowLine})},h.text),w=g&&s.default.createElement(r.Menu.ActionItem,{key:g.text,value:O(g),withLeftAccessory:s.default.createElement(i.UIIcon,{src:o.DropboxReplayLine})},g.text),N=v&&s.default.createElement(r.Menu.ActionItem,{key:v.text,value:O(v),withLeftAccessory:s.default.createElement(i.UIIcon,{src:m.mac?o.FinderLine:o.FileExplorerLine})},v.text),P=A&&s.default.createElement(r.Menu.ActionItem,{key:A.text,value:O(A),withLeftAccessory:s.default.createElement(i.UIIcon,{src:o.GlobeLine})},A.text),C=S&&s.default.createElement(r.Menu.ActionItem,{key:S.text,value:O(S),withLeftAccessory:s.default.createElement(i.UIIcon,{src:o.FolderShowLine})},S.text),j=x.length>0||I.length>0||T.length>0||!!P||!!M||!!w||!!N||!!C;return b?j&&s.default.createElement(r.Menu.Segment,{key:"open-options"},P,C,T,x,I,M,w,N):j&&s.default.createElement(r.Menu.Segment,{key:"open-options"},P,C,x,I,T,M,w,N)}}f.displayName="UnityAndCloudEditorsComponent",t.UnityAndCloudEditors=(0,c.requireCssWithComponent)(f,["/static/metaserver/static/css/app_actions/index-vflQ27cHM.css","/static/metaserver/static/css/dig-components/index.web-vflD7DS1H.css"])})),define("metaserver/static/js/extensions/menu_survey",["require","exports","tslib","react","react-redux","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","dig-components/tooltips","dig-components/typography","metaserver/static/js/components/ui/css","metaserver/static/js/extensions/common","metaserver/static/js/extensions/data/action_creators","metaserver/static/js/extensions/data/selectors","metaserver/static/js/core/i18n"],(function(e,t,n,s,i,o,r,a,c,l,p,u,d,_,m,f){"use strict";var h;Object.defineProperty(t,"__esModule",{value:!0}),t.OpenMenuSurvey=t.MenuSurvey=t.MenuSurveyElement=void 0,s=n.__importStar(s),(function(e){e.Positive="positive",e.Negative="negative"})(h||(h={}));t.MenuSurveyElement=({surveyComplete:e,onClickSurvey:t,onMouseEnterSurvey:n})=>s.default.createElement(c.Menu.Segment,null,s.default.createElement(c.Menu.Row,null,s.default.createElement("div",{className:"menu-survey__wrapper"},s.default.createElement(p.Text,{size:"small",color:"faint",className:"menu-survey__text"},e?f.intl.formatMessage({id:"iqApHe",defaultMessage:"Thanks for your feedback"}):f.intl.formatMessage({id:"PunJ70",defaultMessage:"Is this menu helpful?"})),e?null:[s.default.createElement(l.Tooltip,{title:f.intl.formatMessage({id:"ReNt2T",defaultMessage:"Helpful"}),placement:"top",key:h.Positive},s.default.createElement(o.IconButton,{variant:"transparent",onClick:()=>t(h.Positive),onMouseEnter:()=>n(h.Positive)},s.default.createElement(r.UIIcon,{src:a.ThumbsUpLine,size:"small","aria-label":"Thumbs Up"}))),s.default.createElement(l.Tooltip,{title:f.intl.formatMessage({id:"he/OAb",defaultMessage:"Not helpful"}),placement:"top",key:h.Negative},s.default.createElement(o.IconButton,{variant:"transparent",onClick:()=>t(h.Negative),onMouseEnter:()=>n(h.Negative)},s.default.createElement(r.UIIcon,{src:a.ThumbsDownLine,size:"small","aria-label":"Thumbs Down"})))])));const g=(0,u.requireCssWithComponent)(t.MenuSurveyElement,["/static/metaserver/static/css/app_actions/index-vflQ27cHM.css","/static/metaserver/static/css/extensions/index-vflrFmD9k.css"]);t.MenuSurvey=({userId:e,session:t,menuSurveyEnabled:n,setMenuSurveyViewed:i})=>{const[o,r]=(0,s.useState)(!1);(0,s.useEffect)(()=>{n&&(0,d.logEvent)(t,"view_feedback",{})},[n]);return o||n?s.default.createElement(g,{surveyComplete:o,onClickSurvey:n=>{r(!0),i(e),(0,d.logEvent)(t,"click_feedback",{action_type:n}),setTimeout(()=>r(!1),3e3)},onMouseEnterSurvey:e=>{(0,d.logEvent)(t,"hover_feedback",{action_type:e})}}):null};const v={setMenuSurveyViewed:_.setOpenMenuSurveyViewed},E=(0,i.connect)(e=>({menuSurveyEnabled:(0,m.getOpenMenuSurveyEnabled)(e)}),v);t.OpenMenuSurvey=E(t.MenuSurvey)})),define("metaserver/static/js/extensions/byline",["require","exports","tslib","react","dig-components/tooltips"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionsBylineTooltip=void 0,s=n.__importDefault(s);class o extends s.default.Component{constructor(e){super(e),this.handleMouseOver=()=>{clearTimeout(this.timer),this.timer=setTimeout(()=>{this.props.bylines&&(this.setState({show:!0}),this.props.onDidShow())},this.props.delay)},this.handleMouseOut=()=>{this.setState({show:!1}),clearTimeout(this.timer)},this.triggerRef=s.default.createRef(),this.state={show:!1}}componentWillUnmount(){clearTimeout(this.timer)}render(){const{children:e,bylines:t,isInActionBar:n}=this.props,o=s.default.Children.only(e);return t?s.default.createElement(s.default.Fragment,null,s.default.createElement(i.Tooltip.Control,{triggerRef:this.triggerRef,open:this.state.show,placement:n?"right":"left"},(e=>{if(e)return e.length>1?s.default.createElement("ul",{className:"extensions-byline-list"},e.map(e=>s.default.createElement("li",{key:e,className:"extensions-byline-list-item"},e))):s.default.createElement("div",{className:"extensions-byline"},e[0])})(t)),s.default.cloneElement(o,{onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut,ref:this.triggerRef})):o}}t.ExtensionsBylineTooltip=o,o.defaultProps={delay:500},o.displayName="ExtensionsBylineTooltip"})),define("metaserver/static/js/extensions/client",["require","exports","tslib","metaserver/static/js/api_v2/user_client","metaserver/static/js/extensions/feature_flags","metaserver/static/js/cloud_docs/cloud_doc_api_client","metaserver/static/js/cloud_docs/types","metaserver/static/js/extensions/apis"],(function(e,t,n,s,i,o,r,a){"use strict";function c(e){return"app_id"in e}var l;function p(){return u()}function u(e=l.DISABLED){return{displayState:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getExtensionsClient=t.Client=t.newExtensionsConfig=t.actionCompareFn=t.emptyExtensionsConfig=t.DisplayState=t.isAppId=void 0,t.isAppId=c,(function(e){e[e.LOADING=0]="LOADING",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED"})(l=t.DisplayState||(t.DisplayState={})),t.emptyExtensionsConfig=p,t.actionCompareFn=function(e,t){return e.priority&&t.priority?t.priority-e.priority:e.priority?-1:t.priority?1:e.description<t.description?-1:e.description>t.description?1:0},t.newExtensionsConfig=u;class d{constructor(e){this.loaded=!1,this.state={actions:[],actionMapping:[],categoryInfos:[],bylines:{},featureFlags:{},sharingServiceInfo:{},cloudDocsInfo:{openWithGddSupported:!1},actionIdToAppAction:{},appActionsEnabled:!1,categoryMapsByExt:{},openMenuSurveyEnabled:!1,shareMenuSurveyEnabled:!1},this.client=e}getActionsForFile(e,t){return n.__awaiter(this,void 0,void 0,(function*(){return(yield this.getActionsForFileBatch([e],t))[e.file_id]||p()}))}getActionsForFileBatch(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=yield this.loadState(t);return this.getExtensionsConfigsForFiles(n,e)}))}getFeatureFlags(){return this.state.featureFlags}updateLinkStateForAction(e,t){const n=this.state.actions;for(const s of n)s.id===e&&(s.link_state=t);this.state=Object.assign(Object.assign({},this.state),{actions:n})}loadState(e){return n.__awaiter(this,void 0,void 0,(function*(){if(!this.loaded){this.stateRequest||(this.stateRequest=this.fetchActions(e));const t=this.stateRequest;try{this.state=yield this.stateRequest}catch(e){this.stateRequest===t&&(this.stateRequest=void 0)}}return this.state}))}getExtensionsConfigsForFiles(e,t){const n={};return t.forEach(t=>{n[t.file_id]=u(e.appActionsEnabled&&!t.is_dir?l.ENABLED:l.DISABLED)}),n}fetchActions(e){return n.__awaiter(this,void 0,void 0,(function*(){try{const t=this.client.ns("app_actions").rpc("get_actions_for_user",{include_cloud_editors:!0,include_unlinked_ga_extensions:!0},{subjectUserId:e.id}),[n,s,o]=yield Promise.all([t,this.refreshSharingServiceInfo(e.id),this.getCloudDocsInfo(e)]),r=(function(e){const t={};e.actions.forEach(e=>{!t[e.id]&&e.app_id&&(t[e.id]=e)});const n={};e.action_mapping.forEach(e=>{const s=e.matcher;if("extension"!==s[".tag"])return;const i=s.extension,o=new Map;e.action_ids.forEach(e=>{const n=t[e];let s=o.get(n.category);s?s.push(n.id):(s=[n.id],o.set(n.category,s))}),n[i]=o});const s={};e.bylines.forEach(e=>{let t=e.extension_id[".tag"];c(e.extension_id)&&(t=e.extension_id.app_id),s[t]=e.byline});const o=(0,i.parseFeatureFlags)(e.stormcrow_assignments);return{actionIdToAppAction:t,bylines:s,categoryMapsByExt:n,featureFlags:o}})(n);return this.loaded=!0,{actions:n.actions,actionMapping:n.action_mapping,categoryInfos:n.category_infos,bylines:r.bylines,featureFlags:r.featureFlags,sharingServiceInfo:s,cloudDocsInfo:o,appActionsEnabled:!0,actionIdToAppAction:r.actionIdToAppAction,categoryMapsByExt:r.categoryMapsByExt,openMenuSurveyEnabled:!1,shareMenuSurveyEnabled:!1}}catch(e){if(e.error&&"feature_gated"===e.error[".tag"])return this.loaded=!0,this.state;throw e}}))}fetchMenuSurveyEnabledState(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=yield(0,a.getTooltipHistory)(e,["realign_open_menu_survey","realign_share_menu_survey"]);return{openMenuSurveyEnabled:!t.realign_open_menu_survey,shareMenuSurveyEnabled:!t.realign_share_menu_survey}}))}setOpenMenuSurveyViewed(e){return n.__awaiter(this,void 0,void 0,(function*(){return(0,a.markTooltipViewed)(e,"realign_open_menu_survey")}))}setShareMenuSurveyViewed(e){return n.__awaiter(this,void 0,void 0,(function*(){return(0,a.markTooltipViewed)(e,"realign_share_menu_survey")}))}getCloudDocsInfo(e){return n.__awaiter(this,void 0,void 0,(function*(){const t={openWithGddSupported:!1};if(e.is_team)try{const n=yield(0,o.getTeamSettings)(e.id);t.openWithGddSupported=n.settings[r.CloudDocProviderIntegration.GDD_INTEGRATION][".tag"]===r.IntegrationCreateAndEdit[".tag"]}catch(e){t.openWithGddSupported=!1}else t.openWithGddSupported=!0;return t}))}getSharingServiceInfo(){return Object.assign({},this.state.sharingServiceInfo)}getActions(){return this.state.actions}getActionMapping(){return this.state.actionMapping}getBylines(){return this.state.bylines}getCategoryInfos(){return this.state.categoryInfos}getCloudDocsInfoState(){return this.state.cloudDocsInfo}refreshSharingServiceInfo(e){return n.__awaiter(this,void 0,void 0,(function*(){if(void 0!==this.sharingServiceReq)return this.sharingServiceReq;try{const t=yield this.client.ns("profile_services").rpc("list_services",void 0,{subjectUserId:e}),n={};return t.services.forEach(e=>{const t=e.service_type[".tag"];n[t]=e}),this.state=Object.assign(Object.assign({},this.state),{sharingServiceInfo:n}),n}catch(e){return this.sharingServiceReq=void 0,{}}}))}}let _;t.Client=d,t.getExtensionsClient=function(){return _||(_=new d(new s.UserApiV2Client)),_}})),define("metaserver/static/js/extensions/file",["require","exports","metaserver/static/js/filepath/filepath"],(function(e,t,n){"use strict";function s(e){return void 0!==e.ext}function i(e){return void 0!==e.fq_path}function o(e){return void 0!==e.filename}Object.defineProperty(t,"__esModule",{value:!0}),t.isCloudDoc=t.isInVaultFolder=t.getFileExt=t.hasFilename=t.hasFqPath=t.hasExt=void 0,t.hasExt=s,t.hasFqPath=i,t.hasFilename=o,t.getFileExt=function(e){return s(e)?e.ext:i(e)?"."+(0,n.file_extension)((0,n.filename)(e.fq_path)):o(e)?"."+(0,n.file_extension)(e.filename):void 0},t.isInVaultFolder=function(e){return!!e.is_in_vault_folder},t.isCloudDoc=function(e){return!!e.is_cloud_doc}})),define("metaserver/static/js/extensions/feature_flags",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseFeatureFlags=void 0;const n={testFlag:"test_gated_feature",appDirectory:"app_directory",hellosignDeepIntegration:"hellosign_deep_integration_sidebar",spacesPaperSwsFssDropdown:"spaces_paper_sws_fss_dropdown",dndSplitShare:"dnd_phase1_exp6_split_share",fileTransfersAppAction:"file_transfers_app_action",docsendAnalyticsAddOn:"docsend_analytics_add_on",flowsConvertAndShareUi:"flows_convert_and_share_ui",fileTransfersModalExp:"file_transfers_transfer_modal_exp",replayDropboxShareActionExp:"replay_dropbox_share_action_exp",commerceSellerFeaturesEnabled:"commerce_seller_features_enabled",commerceSellACopyExperiment:"commerce_sell_a_copy_experiment"};t.parseFeatureFlags=function(e){const t={};return(function(){const e=[];for(const t in n)if(n.hasOwnProperty(t)){const s=t;e.push([s,n[s]])}return e})().forEach(([n,s])=>{const i=e[s];void 0!==i&&(t[n]=i)}),t}})),define("metaserver/static/js/extensions/tooltips",["require","exports","metaserver/static/js/core/i18n"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EduTooltipExperiment=t.allowedTooltips=t.tooltipFromName=void 0,t.tooltipFromName=function(e){switch(e){case"open_with_edu":case"split_share_edu":case"edit_experiment_image":case"edit_experiment_pdf":case"upload_intercept_image":case"upload_intercept_pdf":case"desktop_notification":case"realign_open_menu_survey":case"realign_share_menu_survey":case"other":return{".tag":e}}};const s={open_with_edu:({hasExtensions:e})=>e,split_share_edu:()=>!1,upload_intercept_image:()=>!1,upload_intercept_pdf:()=>!1,edit_experiment_pdf:()=>!1,edit_experiment_image:()=>!1,desktop_notification:()=>!1,realign_open_menu_survey:({hasExtensions:e})=>e,realign_share_menu_survey:({hasExtensions:e})=>e,other:()=>!1},i=["open_with_edu","desktop_notification","realign_open_menu_survey","realign_share_menu_survey"];t.allowedTooltips=function(e,t,n){return i.filter(i=>s[i]({hasExtensions:e,fileExt:t,featureFlags:n}))},(function(e){e.TOOLTIP_CONFIGS={open_with_edu:{tooltipTitle:n.intl.formatMessage({id:"VopzGG",defaultMessage:"Do more with your files"}),tooltipMessage:n.intl.formatMessage({id:"1vlc0Q",defaultMessage:"Work on this file in other apps. Updates you make will automatically save back to Dropbox."})}},e.EDU_SPLIT_SHARE_MAP={CONTROL:{tooltipTitle:n.intl.formatMessage({id:"v7foBc",defaultMessage:"Extend the power of Dropbox"}),tooltipMessage:n.intl.formatMessage({id:"VKi3Pj",defaultMessage:"Now you can send files to Slack or present in Zoom without leaving Dropbox."})}}})(t.EduTooltipExperiment||(t.EduTooltipExperiment={}))})),define("metaserver/static/js/extensions/data/action_creators",["require","exports","tslib","metaserver/static/js/extensions/client","metaserver/static/js/extensions/data/types","metaserver/static/js/integrations/data/actions"],(function(e,t,n,s,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setShareMenuSurveyEnabledState=t.setOpenMenuSurveyEnabledState=t.setCloudDocsInfoState=t.updateExtensionsState=t.refreshSharingServiceInfoAdapter=t.refreshSharingServiceInfo=t.setShareMenuSurveyViewed=t.setOpenMenuSurveyViewed=t.updateLinkState=t.setExtensionsFeatureFlags=t.initializeExtensionsStore=void 0;t.initializeExtensionsStore=({files:e,user:o})=>function(r){return n.__awaiter(this,void 0,void 0,(function*(){const n=yield(0,s.getExtensionsClient)().getActionsForFileBatch(e,o),a=(0,s.getExtensionsClient)().getFeatureFlags();r((0,t.setExtensionsFeatureFlags)({featureFlags:a}));const c=(0,s.getExtensionsClient)().getSharingServiceInfo();r({type:i.ActionTypes.SET_SHARING_SERVICE_INFO_STATE,payload:{sharingServiceInfo:c}}),r({type:i.ActionTypes.UPDATE_EXTENSIONS_CONFIG_WITH_NEW_FILES,payload:{fileExtensionsConfigs:n}});const l=(0,s.getExtensionsClient)().getActions(),p=(0,s.getExtensionsClient)().getActionMapping(),u=(0,s.getExtensionsClient)().getBylines(),d=(0,s.getExtensionsClient)().getCategoryInfos(),_=(0,s.getExtensionsClient)().getCloudDocsInfoState();r((0,t.updateExtensionsState)({actions:l,actionMapping:p,bylines:u,categoryInfos:d})),r((0,t.setCloudDocsInfoState)({cloudDocsInfo:_}))}))};t.setExtensionsFeatureFlags=({featureFlags:e})=>({type:i.ActionTypes.SET_EXTENSIONS_FEATURE_FLAGS,payload:{featureFlags:e}});t.updateLinkState=({actionId:e,linkState:n})=>function(i){const o=(0,s.getExtensionsClient)();o.updateLinkStateForAction(e,n);const r=o.getActions(),a=o.getActionMapping(),c=o.getBylines(),l=o.getCategoryInfos();i((0,t.updateExtensionsState)({actions:r,actionMapping:a,bylines:c,categoryInfos:l}))};t.setOpenMenuSurveyViewed=e=>function(n){(0,s.getExtensionsClient)().setOpenMenuSurveyViewed(e),n((0,t.setOpenMenuSurveyEnabledState)({openMenuSurveyEnabled:!1}))};t.setShareMenuSurveyViewed=e=>function(n){(0,s.getExtensionsClient)().setShareMenuSurveyViewed(e),n((0,t.setShareMenuSurveyEnabledState)({shareMenuSurveyEnabled:!1}))};t.refreshSharingServiceInfo=({user:e,onRefresh:t})=>function(o){return n.__awaiter(this,void 0,void 0,(function*(){const n=(0,s.getExtensionsClient)();yield n.refreshSharingServiceInfo(e.id);const r=yield(0,s.getExtensionsClient)().getSharingServiceInfo();t&&t(r),o({type:i.ActionTypes.SET_SHARING_SERVICE_INFO_STATE,payload:{sharingServiceInfo:r}})}))},t.refreshSharingServiceInfoAdapter=function({onRefresh:e}){return function(t,n,s){const r=e&&(t=>{"fulfilled"===t.state?e((0,i.convertToSharingServiceInfo)(t.value)):e()});(0,o.fetchListServices)(r)(t,n,s)}};t.updateExtensionsState=({actions:e,actionMapping:t,bylines:n,categoryInfos:s})=>({type:i.ActionTypes.UPDATE_EXTENSIONS_STATE,payload:{actions:e,actionMapping:t,bylines:n,categoryInfos:s}});t.setCloudDocsInfoState=({cloudDocsInfo:e})=>({type:i.ActionTypes.SET_CLOUD_DOCS_INFO_STATE,payload:{cloudDocsInfo:e}});t.setOpenMenuSurveyEnabledState=({openMenuSurveyEnabled:e})=>({type:i.ActionTypes.SET_OPEN_MENU_SURVEY_ENABLED_STATE,payload:{openMenuSurveyEnabled:e}});t.setShareMenuSurveyEnabledState=({shareMenuSurveyEnabled:e})=>({type:i.ActionTypes.SET_SHARE_MENU_SURVEY_ENABLED_STATE,payload:{shareMenuSurveyEnabled:e}})})),define("metaserver/static/js/extensions/data/reducer",["require","exports","metaserver/static/js/extensions/data/types"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extensionsReducer=t.defaultExtensionsState=void 0,t.defaultExtensionsState={actionMapping:[],actions:[],categoryInfos:[],bylines:{},featureFlags:{},fileExtensionsConfigs:{},sharingServiceInfo:{},cloudDocsInfo:{openWithGddSupported:!1},openMenuSurveyEnabled:!1,shareMenuSurveyEnabled:!1};t.extensionsReducer=function(e=t.defaultExtensionsState,s){switch(s.type){case n.ActionTypes.UPDATE_EXTENSIONS_CONFIG_WITH_NEW_FILES:return((e,t)=>{const{fileExtensionsConfigs:n}=t.payload;return Object.assign(Object.assign({},e),{fileExtensionsConfigs:Object.assign(Object.assign({},e.fileExtensionsConfigs),n)})})(e,s);case n.ActionTypes.SET_EXTENSIONS_FEATURE_FLAGS:return((e,t)=>{const{featureFlags:n}=t.payload;return Object.assign(Object.assign({},e),{featureFlags:n})})(e,s);case n.ActionTypes.SET_SHARING_SERVICE_INFO_STATE:return((e,t)=>{const{sharingServiceInfo:n}=t.payload;return Object.assign(Object.assign({},e),{sharingServiceInfo:n})})(e,s);case n.ActionTypes.UPDATE_EXTENSIONS_STATE:return((e,t)=>Object.assign(Object.assign({},e),t.payload))(e,s);case n.ActionTypes.SET_CLOUD_DOCS_INFO_STATE:return((e,t)=>{const{cloudDocsInfo:n}=t.payload;return Object.assign(Object.assign({},e),{cloudDocsInfo:n})})(e,s);case n.ActionTypes.SET_OPEN_MENU_SURVEY_ENABLED_STATE:return((e,t)=>{const{openMenuSurveyEnabled:n}=t.payload;return Object.assign(Object.assign({},e),{openMenuSurveyEnabled:n})})(e,s);case n.ActionTypes.SET_SHARE_MENU_SURVEY_ENABLED_STATE:return((e,t)=>{const{shareMenuSurveyEnabled:n}=t.payload;return Object.assign(Object.assign({},e),{shareMenuSurveyEnabled:n})})(e,s)}return e}})),define("metaserver/static/js/extensions/data/selectors",["require","exports","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/selectors","metaserver/static/js/extensions/data/reducer","metaserver/static/js/extensions/client","metaserver/static/js/integrations/data/selectors","metaserver/static/js/extensions/data/types","metaserver/static/js/extensions/file"],(function(e,t,n,s,i,o,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isShareAction=t.getNonHellosignActionsForFiles=t.getOpenActionsForFile=t.getShareActionsForFiles=t.getFirstPartyActionIds=t.getActionsForFiles=t.getShareMenuSurveyEnabled=t.getOpenMenuSurveyEnabled=t.getCategoryInfos=t.getBylines=t.getActions=t.getCloudDocInfo=t.getSharingServiceInfoAdapter=t.sharingServiceInfo=t.extensionsEnabledForFile=t.getFeatureFlags=t.fileExtensionsConfigs=t.getExtensionsState=void 0;t.getExtensionsState=e=>(0,s.getStateAtNamespace)(e,n.EXTENSIONS_NAMESPACE_KEY)||i.defaultExtensionsState;t.fileExtensionsConfigs=e=>(0,t.getExtensionsState)(e).fileExtensionsConfigs;t.getFeatureFlags=e=>(0,t.getExtensionsState)(e).featureFlags,t.extensionsEnabledForFile=function(e,n){return(function(e,n){return(0,t.getExtensionsState)(e).fileExtensionsConfigs[n]||(0,o.emptyExtensionsConfig)()})(e,n.file_id).displayState!==o.DisplayState.DISABLED};t.sharingServiceInfo=e=>(0,t.getExtensionsState)(e).sharingServiceInfo;t.getSharingServiceInfoAdapter=e=>{const t=(0,r.getListServicesInfo)(e).latestListServicesResult;return t&&(0,a.convertToSharingServiceInfo)(t)};t.getCloudDocInfo=e=>(0,t.getExtensionsState)(e).cloudDocsInfo;t.getActions=e=>(0,t.getExtensionsState)(e).actions;t.getBylines=e=>(0,t.getExtensionsState)(e).bylines;t.getCategoryInfos=e=>(0,t.getExtensionsState)(e).categoryInfos;t.getOpenMenuSurveyEnabled=e=>(0,t.getExtensionsState)(e).openMenuSurveyEnabled;function l(e,t){return!(e.length>1&&!t.multiselect_enabled)&&e.every(e=>(function(e,t){return void 0===t.filters||t.filters.every(t=>"matcher_any"===t[".tag"]&&!!t.matcher_any.some(t=>{if("extension"===t[".tag"]){const n=(0,c.getFileExt)(e);return t.extension===n}return"max_size_bytes"===t[".tag"]?e.bytes<=t.max_size_bytes:"is_file"===t[".tag"]?e.is_dir!==t.is_file:"is_cloud_doc"!==t[".tag"]||(0,c.isCloudDoc)(e)===t.is_cloud_doc}))})(e,t))}function p(e){var t;const n=e.is_dir,s=(0,c.isInVaultFolder)(e),i=null===(t=e.per_node_metadata)||void 0===t?void 0:t.link_node;return!(n||s||i)}function u(e){const t=e.per_node_metadata;return!((0,c.isInVaultFolder)(e)||(null==t?void 0:t.link_node)||(null==t?void 0:t.suppress_ns_partition)||(null==t?void 0:t.suppress_shared_link))}function d(e,n){return(function(e,t){return e.every(p)?t.filter(t=>l(e,t)):[]})(n,(0,t.getActions)(e))}function _(e,t){return t.every(u)?d(e,t).filter(e=>m(e)):[]}function m(e){return"share_menu"===e.menu_alignment[".tag"]}t.getShareMenuSurveyEnabled=e=>(0,t.getExtensionsState)(e).shareMenuSurveyEnabled,t.getActionsForFiles=d,t.getFirstPartyActionIds=function(e,t){return d(e,[t]).map(e=>e.id).filter(e=>e.startsWith("fp_action_id:"))},t.getShareActionsForFiles=_,t.getOpenActionsForFile=function(e,t){return d(e,[t]).filter(e=>!m(e))},t.getNonHellosignActionsForFiles=function(e,t,n){return _(e,t).filter(e=>e.app_id!==n)},t.isShareAction=m})),define("metaserver/static/js/extensions/data/store",["require","exports","tslib","lodash","metaserver/static/js/extensions/data/action_creators","metaserver/static/js/redux/store","metaserver/static/js/redux/namespaces","metaserver/static/js/extensions/data/reducer","metaserver/static/js/integrations/data/store"],(function(e,t,n,s,i,o,r,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeStore=t.getStore=void 0,s=n.__importStar(s),t.getStore=s.once(()=>((0,c.registerReducersForIntegration)(),(0,o.getStoreAndRegisterReducers)({[r.EXTENSIONS_NAMESPACE_KEY]:a.extensionsReducer}))),t.initializeStore=function(e,n){const s=(0,t.getStore)();return(0,c.initStoreForIntegration)(e.id),n&&s.dispatch((0,i.initializeExtensionsStore)({user:e,files:n})),s}})),define("metaserver/static/js/extensions/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToSharingServiceInfo=t.TriggerType=t.ActionTypes=void 0,(function(e){e.UPDATE_EXTENSIONS_CONFIG_WITH_NEW_FILES="EXTENSIONS/UPDATE_EXTENSIONS_CONFIG_WITH_NEW_FILES",e.SET_EXTENSIONS_FEATURE_FLAGS="EXTENSIONS/SET_EXTENSIONS_FEATURE_FLAGS",e.UPDATE_LINK_STATE="EXTENSIONS/UPDATE_LINK_STATE",e.SET_SHARING_SERVICE_INFO_STATE="EXTENSIONS/SET_SHARING_SERVICE_INFO_STATE",e.UPDATE_EXTENSIONS_STATE="EXTENSIONS/UPDATE_EXTENSIONS_STATE",e.SET_CLOUD_DOCS_INFO_STATE="EXTENSIONS/SET_CLOUD_DOCS_INFO_STATE",e.SET_OPEN_MENU_SURVEY_ENABLED_STATE="EXTENSIONS/SET_OPEN_MENU_SURVEY_ENABLED_STATE",e.SET_SHARE_MENU_SURVEY_ENABLED_STATE="EXTENSIONS/SET_SHARE_MENU_SURVEY_ENABLED_STATE"})(t.ActionTypes||(t.ActionTypes={})),(function(e){e.PrimaryButton="primary_button",e.SecondaryButton="secondary_button",e.SidebarPrimaryButton="sidebar_primary_button",e.CollapsedButton="collapsed_button",e.OpacityButton="opacity_button"})(t.TriggerType||(t.TriggerType={})),t.convertToSharingServiceInfo=function(e){try{const t={};return e.services.forEach(e=>{const n=e.service_type[".tag"];t[n]=e}),t}catch(e){}return{}}})),define("metaserver/static/js/extensions/apis",["require","exports","tslib","metaserver/static/js/api_v2/user_client","metaserver/static/js/extensions/tooltips"],(function(e,t,n,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.markAppSurveyShown=t.hasUserSeenSurveyForApp=t.markTooltipViewed=t.getTooltipHistory=void 0,t.getTooltipHistory=function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=new s.UserApiV2Client;try{const s=t.map(e=>(0,i.tooltipFromName)(e)),o=yield n.ns("extensions").rpc("get_extensions_tooltip_history_v2",{tooltips:s},{subjectUserId:e}),r={};return o.view_states.forEach(e=>{r[e.tooltip[".tag"]]=e.viewed}),r}catch(e){const n={};return t.forEach(e=>{n[e]=!0}),n}}))},t.markTooltipViewed=function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=new s.UserApiV2Client,o=(0,i.tooltipFromName)(t);yield n.ns("extensions").rpc("mark_extensions_tooltip_viewed",{tooltip:o},{subjectUserId:e})}))},t.hasUserSeenSurveyForApp=function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=new s.UserApiV2Client;return(yield n.ns("extensions").rpc("get_extension_survey_history",{app_id:t},{subjectUserId:e})).survey_shown}))},t.markAppSurveyShown=function(e,t){return n.__awaiter(this,void 0,void 0,(function*(){const n=new s.UserApiV2Client;yield n.ns("extensions").rpc("mark_extension_survey_shown",{app_id:t},{subjectUserId:e})}))}}));
//# sourceMappingURL=pkg-fvsdk-other.min.js-vfl7U8jmt.map