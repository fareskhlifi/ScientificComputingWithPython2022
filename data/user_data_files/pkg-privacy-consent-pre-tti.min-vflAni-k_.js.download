define("metaserver/static/js/clean/privacy_consent_header",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getManualReEntryProvided=t.setManualReEntryProvided=void 0;let o=!1;t.setManualReEntryProvided=e=>{o=!!e};t.getManualReEntryProvided=()=>o})),define("metaserver/static/js/privacy_consent/privacy_consent_cookies",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsentCookieStore=t.createCookieStr=t.getAllowedCategories=t.getCookieStr=t.isEvidonCookieName=t.PRIVACY_CONSENT_COOKIE_NAMES=t.COOKIE_ATTR_VALUE_SAMESITE_NONE=t.COOKIE_ATTR_NAME_SAMESITE=t.COOKIE_ATTR_NAME_SECURE=t.COOKIE_ATTR_NAME_MAX_AGE=t.COOKIE_ATTR_NAME_EXPIRES=t.COOKIE_ATTR_NAME_PATH=t.COOKIE_ATTR_NAME_DOMAIN=t.EVIDON_SUPPRESS_COOKIE_NAME=t.EVIDON_CONSENT_COOKIE_NAME=t.DNS_COOKIE_DEV_PREFIX=t.DNS_COOKIE_NAME=t.CCPA_TOKEN_COOKIE_NAME=t.SHADOW_COOKIE_NAME=void 0,t.SHADOW_COOKIE_NAME="__Secure-dbx_consent",t.CCPA_TOKEN_COOKIE_NAME="__Secure-dbx_ccpa_token",t.DNS_COOKIE_NAME="__Secure-dbx_do_not_sell",t.DNS_COOKIE_DEV_PREFIX=t.DNS_COOKIE_NAME+"_dev_",t.EVIDON_CONSENT_COOKIE_NAME="_evidon_consent_cookie",t.EVIDON_SUPPRESS_COOKIE_NAME="_evidon_suppress_notification_cookie",t.COOKIE_ATTR_NAME_DOMAIN="Domain",t.COOKIE_ATTR_NAME_PATH="Path",t.COOKIE_ATTR_NAME_EXPIRES="Expires",t.COOKIE_ATTR_NAME_MAX_AGE="Max-Age",t.COOKIE_ATTR_NAME_SECURE="Secure",t.COOKIE_ATTR_NAME_SAMESITE="SameSite",t.COOKIE_ATTR_VALUE_SAMESITE_NONE="None",t.PRIVACY_CONSENT_COOKIE_NAMES=new Set([t.SHADOW_COOKIE_NAME,t.EVIDON_CONSENT_COOKIE_NAME,t.EVIDON_SUPPRESS_COOKIE_NAME,t.DNS_COOKIE_NAME,t.CCPA_TOKEN_COOKIE_NAME]);t.isEvidonCookieName=e=>!!t.PRIVACY_CONSENT_COOKIE_NAMES.has(e)||!!e.startsWith(t.DNS_COOKIE_DEV_PREFIX);function o(e){try{return String(document.cookie||"").split(";").map(e=>e.split("=")).map(e=>[e[0],e.slice(1).join(";")].map(e=>e.replace(/^[ \t]+|[ \t]+$/g,""))).reduce((e,[t,o])=>Object.assign(Object.assign({},e),{[t]:o}),Object.create({}))[e]||""}catch(e){return""}}var n,i;function _(e,o,n,i,_){const E={[t.COOKIE_ATTR_NAME_DOMAIN]:e,[t.COOKIE_ATTR_NAME_PATH]:"/",[t.COOKIE_ATTR_NAME_EXPIRES]:i,[t.COOKIE_ATTR_NAME_SAMESITE]:_||t.COOKIE_ATTR_VALUE_SAMESITE_NONE,[t.COOKIE_ATTR_NAME_SECURE]:""};return[[o,JSON.stringify(n).replace(/[;]|[^ -~]/g,e=>"\\u"+(65536+e.charCodeAt(0)).toString(16).substring(1))],...Object.keys(E).map(e=>[e,E[e]])].map(([e,t])=>t?`${e}=${t}`:`${e}`).join(";")}function E(e,o,n,i,E){(0,t.isEvidonCookieName)(o)&&(document.cookie=_(e,o,n,i,E))}t.getCookieStr=o,(function(e){e[e.OptIn=1]="OptIn"})(n||(n={})),(function(e){e.StrictlyNecessary="strictly necessary",e.MarketingAdvertising="general marketing and advertising",e.Analytics="analytics",e.PerformanceFunctionality="performance and functionality",e.SocialMediaAdvertising="social media advertising",e.AllCookies="all"})(i||(i={})),t.getAllowedCategories=function(e){const t=Object.keys(i);let o=[];return e&&(e[i.AllCookies]?o=[...t]:t.forEach(t=>{e[i[t]]&&o.push(t)})),o},t.createCookieStr=_;const O={cookieDomain:"dropbox.com",consentDurationMonths:6};t.ConsentCookieStore=class{constructor(e,t){const o=Object.assign(Object.assign({},O),e);this.cookieDomain=o.cookieDomain,this.consentDurationMonths=o.consentDurationMonths,this.numDots=o.cookieDomain.split(".").length-1,this.log=t}hasUserInteracted(){var e;return!!(null===(e=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME))||void 0===e?void 0:e.userInteracted)}bakeShadowCookie(e){const o=new Date(e.expireDate).toUTCString();E(this.cookieDomain,t.SHADOW_COOKIE_NAME,e,o,t.COOKIE_ATTR_VALUE_SAMESITE_NONE)}bakeDNSCookie(e){const o=new Date(e.expireDate).toUTCString();E(this.cookieDomain,t.DNS_COOKIE_NAME,e,o)}bakeCCPATokenCookie(e){const o=new Date(e.expireDate).toUTCString();E(this.cookieDomain,t.CCPA_TOKEN_COOKIE_NAME,e,o)}createShadowCookieValue(e,o){const i=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME),_=!!i.userInteracted,E=!(!_&&o)&&i.consentDate?new Date(i.consentDate):new Date,O=new Date(E);return O.setMonth(E.getMonth()+this.consentDurationMonths),{consentType:n.OptIn,consentDate:E.toISOString(),expireDate:O.toISOString(),consentMonths:this.consentDurationMonths,categories:e,userInteracted:_||o,numDots:this.numDots}}mapCookies(e){var t;const o={};for(const n in e)if(e.hasOwnProperty(n)){const _=n.toLowerCase();Object.values(i).includes(_)?o[_]=e[n]:null===(t=this.log)||void 0===t||t.logInvalidCookieCategoryException(_)}return o}havePreferencesChanged(e){var n;const i=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME);if(i)try{const t=JSON.stringify(i.categories);return JSON.stringify(e)!==t}catch(e){return null===(n=this.log)||void 0===n||n.logCookieParseException(t.SHADOW_COOKIE_NAME,o(t.SHADOW_COOKIE_NAME)),!1}return!0}getAllowedCategories(){const e=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME),o=null==e?void 0:e.categories,n=Object.keys(i);let _=[];return o&&(o[i.AllCookies]?_=[...n]:n.forEach(e=>{o[i[e]]&&_.push(e)})),_}clearDNSCookie(){const e=new Date,o={[t.COOKIE_ATTR_NAME_DOMAIN]:this.cookieDomain,[t.COOKIE_ATTR_NAME_PATH]:"/",[t.COOKIE_ATTR_NAME_EXPIRES]:e.toUTCString(),[t.COOKIE_ATTR_NAME_SAMESITE]:t.COOKIE_ATTR_VALUE_SAMESITE_NONE,[t.COOKIE_ATTR_NAME_SECURE]:""},n=Object.keys(o).map(e=>void 0!==o[e]?`${e}=${o[e]}`:`${e}`);document.cookie=t.DNS_COOKIE_NAME+"=; "+n.join(";")}getCurrentCookieObj(e){var t;const n=o(e);if(n)try{return JSON.parse(n)}catch(o){return null===(t=this.log)||void 0===t||t.logCookieParseException(e,n),null}return{}}splitPair(e){const t=e.indexOf("=");let o=[e,""];return t>=0&&(o=[e.slice(0,t),e.slice(t+1)]),o=o.map(e=>e.replace(/^[ \t]*|[ \t]*$/g,"")),[o[0],o[1]]}bakeEvidonCookie(e){if("dropbox.com"===this.cookieDomain)return;const o=e.split(/[ \t]*;[ \t]*/),[n,i]=this.splitPair(o[0]);if(!(0,t.isEvidonCookieName)(n))return;const _=[[n,i],[t.COOKIE_ATTR_NAME_DOMAIN,this.cookieDomain],[t.COOKIE_ATTR_NAME_SECURE,""],[t.COOKIE_ATTR_NAME_PATH,"/"]];for(const e of o.slice(1)){const[o,n]=this.splitPair(e);if(o.toLowerCase()===t.COOKIE_ATTR_NAME_EXPIRES.toLowerCase()){const e=new Date(n);isNaN(e.getTime())||_.push([t.COOKIE_ATTR_NAME_EXPIRES,e.toUTCString()])}else if(o.toLowerCase()===t.COOKIE_ATTR_NAME_MAX_AGE.toLowerCase()){const e=Number(n);isNaN(e)||e!=(0|e)||_.push([t.COOKIE_ATTR_NAME_MAX_AGE,String(e)])}}_.push([t.COOKIE_ATTR_NAME_SAMESITE,t.COOKIE_ATTR_VALUE_SAMESITE_NONE]);const E=_.map(([e,t],o)=>t||!o?`${e}=${t}`:`${e}`).join("; ");document.cookie=E}hasPreviouslyDeclinedConsent(){if(!this.hasUserInteracted())return!1;const e=this.getCurrentCookieObj(t.SHADOW_COOKIE_NAME);return e&&e.categories&&0===Object.keys(e.categories).length}}}));
//# sourceMappingURL=pkg-privacy-consent-pre-tti.min.js-vflvi-58k.map