define(["require","exports","tslib","dig-components/modal","metaserver/static/js/components/ui/modal","react","metaserver/static/js/core/i18n","ts-key-enum","dig-components/typography","dig-components/buttons","dig-components/form_row","dig-components/text_fields","dig-components/icons/src","dig-components/icons","metaserver/static/js/file_actions/strings","metaserver/static/js/action_bar/action_bar_strings"],(function(e,t,a,n,l,r,o,s,i,d,c,u,m,f,g,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showRenameFileModal=t.RenameFileModal=void 0,r=a.__importDefault(r);t.RenameFileModal=({currentName:e,onConfirm:t})=>{const a=r.default.useRef(null),[l,E]=r.default.useState(!0),[M,v]=r.default.useState(e);r.default.useEffect(()=>{window.requestAnimationFrame(()=>{if(!a.current)return;a.current.focus();const t=e;let n=t.lastIndexOf(".");n<0&&(n=t.length),a.current.setSelectionRange(0,n)})},[]);const _=()=>E(!1),y=e=>-1===e.indexOf("/"),R=y(M),h=()=>{t(M),_()};return r.default.createElement(r.default.Fragment,null,r.default.createElement(n.Modal,{open:l,isCentered:!0,onRequestClose:_},r.default.createElement(n.Modal.Header,{hasBottomSpacing:"title-standard",className:"naming-conventions__header"},r.default.createElement(i.Title,null,o.intl.formatMessage(p.RENAME_ACTION_STRING))),r.default.createElement(n.Modal.Body,null,r.default.createElement("div",{style:{height:"80px"}},r.default.createElement(c.FormRow,null,r.default.createElement(u.TextInput,{ref:a,type:"text",id:"create-rename-modal-input",autoFocus:!0,value:M,isInvalid:!R,onChange:e=>{v(e.currentTarget.value),y(e.currentTarget.value)},"aria-describedby":"rename-modal-input-helper",onKeyDown:e=>{e.key===s.Key.Enter&&h()}}),!R&&r.default.createElement(c.FormHelperText,{id:"rename-modal-input-helper",isInvalid:!0},r.default.createElement(f.UIIcon,{src:m.WarningLine,size:"small"})," ",o.intl.formatMessage(g.renameErrorInvalidName))))),r.default.createElement(n.Modal.Footer,null,r.default.createElement(d.Button,{variant:"opacity",onClick:_},o.intl.formatMessage({id:"OHzWOE",defaultMessage:"Cancel"})),r.default.createElement(d.Button,{variant:"primary",disabled:!R,onClick:h},o.intl.formatMessage(p.RENAME_ACTION_STRING)))))},t.showRenameFileModal=function(e){l.Modal.showInstance(r.default.createElement(t.RenameFileModal,Object.assign({},e)))}}));
//# sourceMappingURL=rename_modal.min.js-vflOV4OXI.map